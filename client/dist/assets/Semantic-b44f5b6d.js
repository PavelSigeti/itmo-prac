import{A as Fw}from"./AppTitle-65a48ce4.js";import{_ as Lw,b as Aw,d as Iw,o as Bw,c as Ew,e as zw,w as Rw,F as Gw,a as lx,g as Ow}from"./index-5263cd77.js";(function(Q){var B,he={};if(!Q.document||Q.document.createElement("canvas").getContext===void 0)throw Q.console&&Q.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function i(){return r.apply(t,o.concat(e.call(arguments)))}function n(){}var e=Array.prototype.slice,o=e.call(arguments,1),r=this;return n.prototype=this.prototype,i.prototype=new n,i}),function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!Q.requestAnimationFrame;++n)Q.requestAnimationFrame=Q[i[n]+"RequestAnimationFrame"],Q.cancelAnimationFrame=Q[i[n]+"CancelAnimationFrame"]||Q[i[n]+"CancelRequestAnimationFrame"];Q.requestAnimationFrame||(Q.requestAnimationFrame=function(e){var o=new Date().getTime(),r=Math.max(8,16-(o-t)),h=Q.setTimeout(function(){e(o+r)},r);return t=o+r,h}),Q.cancelAnimationFrame||(Q.cancelAnimationFrame=function(e){Q.clearTimeout(e)})}(),he.Debug=null;var s={od:1,Uc:2,ed:4,dd:8,In:Q.navigator!==void 0&&0<Q.navigator.userAgent.indexOf("534.30")&&0<Q.navigator.userAgent.indexOf("Android"),xu:Q.navigator!==void 0&&0<Q.navigator.userAgent.indexOf("MSIE 9.0"),hq:Q.navigator!==void 0&&0<Q.navigator.userAgent.indexOf("MSIE 10.0"),iq:Q.navigator!==void 0&&0<Q.navigator.userAgent.indexOf("Trident/7"),VA:Q.navigator!==void 0&&0<Q.navigator.userAgent.indexOf("Edge/"),zh:Q.navigator!==void 0&&Q.navigator.platform!==void 0&&0<=Q.navigator.platform.toUpperCase().indexOf("MAC"),EF:Q.navigator!==void 0&&Q.navigator.platform!==void 0&&Q.navigator.platform.match(/(iPhone|iPod|iPad)/i)!==null,QE:function(t,i,n){var e=-1;return function(){var o=this,r=arguments;e!==-1&&s.clearTimeout(e),e=s.setTimeout(function(){e=-1,n||t.apply(o,r)},i),n&&!e&&t.apply(o,r)}},setTimeout:function(t,i){return Q.setTimeout(t,i)},clearTimeout:function(t){Q.clearTimeout(t)},createElement:function(t){return Q.document.createElement(t)},k:function(t){throw Error(t)},ma:function(t,i){var n="The object is frozen, so its properties cannot be set: "+t.toString();i!==void 0&&(n+="  to value: "+i),s.k(n)},G:function(t,i,n,e){t instanceof i||(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,i,n))},j:function(t,i,n,e){typeof t!==i&&(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,i,n))},Ad:function(t,i,n){typeof t=="number"&&isFinite(t)||(i=s.getTypeName(i),n!==void 0&&(i+="."+n),s.k(i+" must be a real number type, and not NaN or Infinity: "+t))},ob:function(t,i,n,e){t instanceof Wn&&t.Je===i||(n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.Fd(t,"a constant of class "+s.pf(i),n))},GK:function(t,i){typeof t=="string"?Cg(t)||s.k('Color "'+t+'" is not a valid color string for '+i):t instanceof yt||s.k("Value for "+i+" must be a color string or a Brush, not "+t)},Fd:function(t,i,n,e){i=s.getTypeName(i),n=s.getTypeName(n),e!==void 0&&(n+="."+e),typeof t=="string"?s.k(n+" value is not an instance of "+i+': "'+t+'"'):s.k(n+" value is not an instance of "+i+": "+t)},Fa:function(t,i,n,e){n=s.getTypeName(n),e!==void 0&&(n+="."+e),s.k(n+" is not in the range "+i+": "+t)},nd:function(t){s.k(s.pf(t)+" constructor cannot take any arguments.")},Na:function(t){s.k("Collection was modified during iteration: "+t.toString()+`
  Perhaps you should iterate over a copy of the collection,
  or you could collect items to be removed from the collection after the iteration.`)},Lj:function(t,i){s.k("No property to set for this enum value: "+i+" on "+t.toString())},trace:function(t){Q.console&&Q.console.log(t)},vx:{},Yt:function(t,i){s.vx[t]!==!0&&(s.vx[t]=!0,Q.console&&Q.console.log(t+" is deprecated in "+i+", see the GoJS change log for more information."))},Pa:function(t){return typeof t=="object"&&t!==null},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},BI:function(t){return Array.isArray(t)},mA:function(t,i,n){s.isArray(t)||s.Fd(t,"Array or NodeList or HTMLCollection",i,n)},cb:function(t){return t.length},Vl:function(t){return Array.prototype.slice.call(t)},Ba:function(t,i){return t[i]},GE:function(t,i,n){Array.isArray(t)?t[i]=n:s.k("Cannot replace an object in an HTMLCollection or NodeList at "+i)},Sl:function(t,i){if(Array.isArray(t))return t.indexOf(i);for(var n=t.length,e=0;e<n;e++)if(t[e]===i)return e;return-1},sh:function(t,i,n){Array.isArray(t)?i>=t.length?t.push(n):t.splice(i,0,n):s.k("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+i)},Jg:function(t,i){Array.isArray(t)?i>=t.length?t.pop():t.splice(i,1):s.k("Cannot remove an object from an HTMLCollection or NodeList at "+i)},Ny:[],K:function(){var t=s.Ny.pop();return t===void 0?new D:t},wb:function(t,i){var n=s.Ny.pop();return n===void 0?new D(t,i):(n.x=t,n.y=i,n)},v:function(t){s.Ny.push(t)},fC:[],tm:function(){var t=s.fC.pop();return t===void 0?new lt:t},Lk:function(t){s.fC.push(t)},Oy:[],vf:function(){var t=s.Oy.pop();return t===void 0?new O:t},lg:function(t,i,n,e){var o=s.Oy.pop();return o===void 0?new O(t,i,n,e):(o.x=t,o.y=i,o.width=n,o.height=e,o)},Bb:function(t){s.Oy.push(t)},gC:[],Wg:function(){var t=s.gC.pop();return t===void 0?new Qt:t},bf:function(t){s.gC.push(t)},Py:null,s:function(){var t=s.Py;return t!==null?(s.Py=null,t):new l1},q:function(t){t.reset(),s.Py=t},My:[],Za:function(){var t=s.My.pop();return t===void 0?[]:t},ra:function(t){t.length=0,s.My.push(t)},no:Object.freeze([]),wm:1,oc:function(t){t.__gohashid=s.wm++},cq:function(t){var i=t.__gohashid;return i===void 0&&(i=s.wm++,t.__gohashid=i),i},Pd:function(t){return t.__gohashid},ga:function(t,i){i.Zy=t,he[t]=i},La:function(t,i){function n(){}n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t},ni:function(t){t.fH=!0},defineProperty:function(t,i,n,e,o){s.j(t,"function","Util.defineProperty:classfunc"),s.j(i,"object","Util.defineProperty:propobj"),s.j(n,"function","Util.defineProperty:getter"),s.j(e,"function","Util.defineProperty:setter");for(var r in i){if(i=i[r],n={get:n,set:e,enumerable:!0},o!==void 0)for(var h in o)n[h]=o[h];Object.defineProperty(t.prototype,r,n),o=Object.getOwnPropertyDescriptor(t.prototype,r),i&&o&&Object.defineProperty(t.prototype,i,o);break}},dK:!1,u:function(t,i,n,e){s.j(t,"function","Util.defineReadOnlyProperty:classfunc"),s.j(i,"object","Util.defineReadOnlyProperty:propobj"),s.j(n,"function","Util.defineReadOnlyProperty:getter");for(var o in i){var r=i[o];if(i={get:n,set:function(l){s.k('The property "'+r+'" is read-only and cannot be set to '+l)},enumerable:!0},e!==void 0)for(var h in e)i[h]=e[h];Object.defineProperty(t.prototype,o,i),e=Object.getOwnPropertyDescriptor(t.prototype,o),r&&e&&Object.defineProperty(t.prototype,r,e);break}},be:function(t,i){for(var n in i)i[n]=!0;t.prototype.bH=i},getTypeName:function(t){return t===void 0?"":typeof t=="string"?t:typeof t=="function"?s.pf(t):t===null?"*":""},pf:function(t){if(typeof t=="function"){if(t.Zy)return t.Zy;if(t.name)return t.name;var n=t.toString(),i=n.indexOf("("),n=n.substring(9,i).trim();if(n!=="")return t.Zy=n}else if(s.Pa(t)&&t.constructor)return s.pf(t.constructor);return typeof t},p:function(t,i,n){s.j(t,"function","Util.defineEnumValue:classfunc"),s.j(i,"string","Util.defineEnumValue:name"),s.j(n,"number","Util.defineEnumValue:num"),n=new Wn(t,i,n),Object.freeze(n),t[i]=n;var e=t.jv;return e instanceof tt||(e=new tt("string",Wn),t.jv=e),e.add(i,n),n},vb:function(t,i){if(!t||!i)return null;var n=void 0;try{typeof i=="function"?n=i(t):typeof t.getAttribute=="function"?(n=t.getAttribute(i),n===null&&(n=void 0)):n=t[i]}catch{}return n},Ma:function(t,i,n){if(t&&i)try{typeof i=="function"?i(t,n):typeof t.setAttribute=="function"?t.setAttribute(i,n):t[i]=n}catch{}},$u:function(t,i){s.j(t,"object","Setting properties requires Objects as arguments"),s.j(i,"object","Setting properties requires Objects as arguments");var n=t instanceof A,e=t instanceof x,o;for(o in i){o===""&&s.k("Setting properties requires non-empty property names");var r=t,h=o;if(n||e){var l=o.indexOf(".");if(0<l){var u=o.substring(0,l);n?r=t.Cd(u):(r=t[u],r==null&&(r=t.Va[u])),s.Pa(r)?h=o.substr(l+1):s.k("Unable to find object named: "+u+" in "+t.toString()+" when trying to set property: "+o)}}if(h[0]!=="_"&&!s.uF(r,h))if(e&&h==="ModelChanged"){t.pH(i[h]);continue}else if(e&&h==="Changed"){t.mn(i[h]);continue}else if(e&&s.uF(t.Va,h))r=t.Va;else if(e&&xg(t,h)){t.ax(h,i[h]);continue}else if(t instanceof V&&h==="Changed"){t.mn(i[h]);continue}else s.k('Trying to set undefined property "'+h+'" on object: '+r.toString());r[h]=i[o],h[0]==="_"&&r instanceof N&&r.mH(h)}},uF:function(t,i){if(t.hasOwnProperty(i))return!0;for(var n=Object.getPrototypeOf(t);n&&n!==Function;){if(n.hasOwnProperty(i))return!0;var e=n.bH;if(e&&e[i])return!0;n=Object.getPrototypeOf(n)}return!1},nJ:function(t){for(var i=[],n=0;256>n;n++)i[n]=n;for(var e=0,o=0,n=0;256>n;n++)e=(e+i[n]+119)%256,o=i[n],i[n]=i[e],i[e]=o;for(var e=n=0,r="",h=0;h<t.length;h++)n=(n+1)%256,e=(e+i[n])%256,o=i[n],i[n]=i[e],i[e]=o,r+=String.fromCharCode(t.charCodeAt(h)^i[(i[n]+i[e])%256]);return r},pI:function(t){for(var i={},n=0;256>n;n++)i["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(n&15)]=String.fromCharCode(n);t.length%2&&(t="0"+t);for(var e=[],o=0,n=0;n<t.length;n+=2)e[o++]=i[t.substr(n,2)];return t=e.join(""),t===""?"0":t},Kg:function(t){return s.nJ(s.pI(t))},vm:null,adym:"7da71ca0ad381e90",vfo:"2be64efdb060",IK:"@COLOR1",JK:"@COLOR2",RE:!1,Vt:null,Wt:null};s.vm=function(){var t=Q.document.createElement("canvas"),i=t.getContext("2d");i[s.Kg("7ca11abfd022028846")]=s.Kg("398c3597c01238");for(var n=["5da73c80a36755dc038e4972187c3cae51fd22","32ab5ff3b26f42dc0ed90f224c2913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],e=1;5>e;e++)i[s.Kg("7ca11abfd7330390")](s.Kg(n[e-1]),10,15*e+0);for(i[s.Kg("7ca11abfd022028846")]=s.Kg("39f046ebb36e4b"),e=1;5>e;e++)i[s.Kg("7ca11abfd7330390")](s.Kg(n[e-1]),10,15*e+0);return(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(s.p=function(o,r){var h=new Wn(o,r,2);Object.freeze(h),o[r]=h;var l=o.jv;return l instanceof tt||(l=new tt("string",Wn),o.jv=l),l.add(r,h),h}),t}();function Wn(t,i,n){s.oc(this),this.uC=t,this.Sb=i,this.jH=n}s.ga("EnumValue",Wn),Wn.prototype.toString=function(){return s.pf(this.uC)+"."+this.Sb},s.u(Wn,{Je:"classType"},function(){return this.uC}),s.u(Wn,{name:"name"},function(){return this.Sb}),s.u(Wn,{value:"value"},function(){return this.jH});var Rr;Wn.findName=Rr=function(t,i){if(i==null||i==="")return null;s.j(t,"function","findName:classfunc"),s.j(i,"string","EnumValue.findName:name");var n=t.jv;return n instanceof tt?n.ka(i):null};function Ku(){this.sC=[]}Ku.prototype.toString=function(){return this.sC.join("")},Ku.prototype.add=function(t){t!==""&&this.sC.push(t)};function Bn(){}function v0(t){t===void 0&&(t=42),this.seed=t,this.Iy=48271,this.iv=2147483647,this.eC=this.iv/this.Iy,this.RG=this.iv%this.Iy,this.QG=1/this.iv,this.random()}v0.prototype.random=function(){var t=this.seed%this.eC*this.Iy-this.seed/this.eC*this.RG;return this.seed=0<t?t:t+this.iv,this.seed*this.QG};function $n(){}s.u($n,{i:"iterator"},function(){return this}),$n.prototype.reset=$n.prototype.reset=function(){},$n.prototype.next=$n.prototype.next=function(){return!1},$n.prototype.hasNext=function(){return!1},$n.prototype.first=$n.prototype.first=function(){return null},$n.prototype.any=function(){return!1},$n.prototype.all=function(){return!0},$n.prototype.each=function(){return this},$n.prototype.map=function(){return this},$n.prototype.filter=function(){return this},$n.prototype.concat=function(t){return t.i},s.u($n,{count:"count"},function(){return 0}),$n.prototype.Nf=function(){},$n.prototype.toString=function(){return"EmptyIterator"};var ro=new $n;function Ji(t){this.key=-1,this.value=t}s.be(Ji,{key:!0,value:!0}),s.u(Ji,{i:"iterator"},function(){return this}),Ji.prototype.reset=Ji.prototype.reset=function(){this.key=-1},Ji.prototype.next=Ji.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},Ji.prototype.hasNext=function(){return this.next()},Ji.prototype.first=Ji.prototype.first=function(){return this.key=0,this.value},Ji.prototype.any=function(t){return this.key=-1,t(this.value)},Ji.prototype.all=function(t){return this.key=-1,t(this.value)},Ji.prototype.each=function(t){return this.key=-1,t(this.value),this},Ji.prototype.map=function(t){return new Ji(t(this.value))},Ji.prototype.filter=function(t){return t(this.value)?new Ji(this.value):ro},Ji.prototype.concat=function(t){return new ki(this,t.i)},s.u(Ji,{count:"count"},function(){return 1}),Ji.prototype.Nf=function(){this.value=null},Ji.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function ki(t,i){this.xl=t,this.yl=i,this.kv=!1}s.be(ki,{key:!0,value:!0}),s.u(ki,{i:"iterator"},function(){return this}),ki.prototype.reset=ki.prototype.reset=function(){this.xl.reset(),this.yl.reset(),this.kv=!1},ki.prototype.next=ki.prototype.next=function(){if(!this.kv){var t=this.xl;if(t.next())return this.key=t.key,this.value=t.value,!0;this.kv=!0}return this.kv&&(t=this.yl,t.next())?(this.key=t.key,this.value=t.value,!0):!1},ki.prototype.hasNext=function(){return this.next()},ki.prototype.first=ki.prototype.first=function(){return this.reset(),this.next()?this.value:null},ki.prototype.any=function(t){return!!(this.xl.any(t)||this.yl.any(t))},ki.prototype.all=function(t){return!!(this.xl.all(t)&&this.yl.all(t))},ki.prototype.each=function(t){return this.xl.each(t),this.yl.each(t),this},ki.prototype.map=function(t){return new ki(this.xl.map(t),this.yl.map(t))},ki.prototype.filter=function(t){return new ki(this.xl.filter(t),this.yl.filter(t))},ki.prototype.concat=function(t){return new ki(this,t.i)},s.u(ki,{count:"count"},function(){return this.xl.count+this.yl.count}),ki.prototype.Nf=function(){this.value=this.key=null},ki.prototype.toString=function(){return"ConcatIterator()"};function Bi(t){this.Cc=t,this.$h=null,t.Eb=null,this.Ta=t.F,this.Bc=-1}s.be(Bi,{key:!0,value:!0}),s.u(Bi,{i:"iterator"},function(){return this}),s.defineProperty(Bi,{wq:"predicate"},function(){return this.$h},function(t){this.$h=t}),Bi.prototype.reset=Bi.prototype.reset=function(){var t=this.Cc;t.Eb=null,this.Ta=t.F,this.Bc=-1},Bi.prototype.next=Bi.prototype.next=function(){var t=this.Cc;if(t.F!==this.Ta){if(0>this.key)return!1;s.Na(t)}var t=t.n,i=t.length,n=++this.Bc,e=this.$h;if(e!==null)for(;n<i;){var o=t[n];if(e(o))return this.key=this.Bc=n,this.value=o,!0;n++}else{if(n<i)return this.key=n,this.value=t[n],!0;this.Nf()}return!1},Bi.prototype.hasNext=function(){return this.next()},Bi.prototype.first=Bi.prototype.first=function(){var t=this.Cc;this.Ta=t.F,this.Bc=0;var t=t.n,i=t.length,n=this.$h;if(n!==null){for(var e=0;e<i;){var o=t[e];if(n(o))return this.key=this.Bc=e,this.value=o;e++}return null}return 0<i?(o=t[0],this.key=0,this.value=o):null},Bi.prototype.any=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,o=e.length,r=this.$h,h=0;h<o;h++){var l=e[h];if(r===null||r(l)){if(t(l))return!0;i.F!==n&&s.Na(i)}}return!1},Bi.prototype.all=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,o=e.length,r=this.$h,h=0;h<o;h++){var l=e[h];if(r===null||r(l)){if(!t(l))return!1;i.F!==n&&s.Na(i)}}return!0},Bi.prototype.each=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=i.n,o=e.length,r=this.$h,h=0;h<o;h++){var l=e[h];(r===null||r(l))&&(t(l),i.F!==n&&s.Na(i))}return this},Bi.prototype.map=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=[],o=i.n,r=o.length,h=this.$h,l=0;l<r;l++){var u=o[l];(h===null||h(u))&&(e.push(t(u)),i.F!==n&&s.Na(i))}return t=new E,t.n=e,t.Mc(),t.i},Bi.prototype.filter=function(t){var i=this.Cc;i.Eb=null;var n=i.F;this.Bc=-1;for(var e=[],o=i.n,r=o.length,h=this.$h,l=0;l<r;l++){var u=o[l];(h===null||h(u))&&(t(u)&&e.push(u),i.F!==n&&s.Na(i))}return t=new E(i.na),t.n=e,t.Mc(),t.i},Bi.prototype.concat=function(t){return this.Cc.Eb=null,new ki(this,t.i)},s.u(Bi,{count:"count"},function(){var t=this.$h;if(t!==null){for(var i=0,n=this.Cc.n,e=n.length,o=0;o<e;o++)t(n[o])&&i++;return i}return this.Cc.n.length}),Bi.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.$h=null,this.Cc.Eb=this},Bi.prototype.toString=function(){return"ListIterator@"+this.Bc+"/"+this.Cc.count};function En(t){this.Cc=t,t.Ti=null,this.Ta=t.F,this.Bc=t.n.length}s.be(En,{key:!0,value:!0}),s.u(En,{i:"iterator"},function(){return this}),En.prototype.reset=En.prototype.reset=function(){var t=this.Cc;t.Ti=null,this.Ta=t.F,this.Bc=t.n.length},En.prototype.next=En.prototype.next=function(){var t=this.Cc;if(t.F!==this.Ta){if(0>this.key)return!1;s.Na(t)}var i=--this.Bc;return 0<=i?(this.key=i,this.value=t.n[i],!0):(this.Nf(),!1)},En.prototype.hasNext=function(){return this.next()},En.prototype.first=En.prototype.first=function(){var t=this.Cc;this.Ta=t.F;var i=t.n;return this.Bc=t=i.length-1,0<=t?(i=i[t],this.key=t,this.value=i):null},En.prototype.any=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,o=e.length;for(this.Bc=o,o-=1;0<=o;o--){if(t(e[o]))return!0;i.F!==n&&s.Na(i)}return!1},En.prototype.all=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,o=e.length;for(this.Bc=o,o-=1;0<=o;o--){if(!t(e[o]))return!1;i.F!==n&&s.Na(i)}return!0},En.prototype.each=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=i.n,o=e.length;for(this.Bc=o,o-=1;0<=o;o--)t(e[o]),i.F!==n&&s.Na(i);return this},En.prototype.map=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=[],o=i.n,r=o.length;for(this.Bc=r,r-=1;0<=r;r--)e.push(t(o[r])),i.F!==n&&s.Na(i);return t=new E,t.n=e,t.Mc(),t.i},En.prototype.filter=function(t){var i=this.Cc;i.Ti=null;var n=i.F,e=[],o=i.n,r=o.length;for(this.Bc=r,r-=1;0<=r;r--){var h=o[r];t(h)&&e.push(h),i.F!==n&&s.Na(i)}return t=new E(i.na),t.n=e,t.Mc(),t.i},En.prototype.concat=function(t){return this.Cc.Ti=null,new ki(this,t.i)},s.u(En,{count:"count"},function(){return this.Cc.n.length}),En.prototype.Nf=function(){this.key=-1,this.value=null,this.Ta=-1,this.Cc.Ti=this},En.prototype.toString=function(){return"ListIteratorBackwards("+this.Bc+"/"+this.Cc.count+")"};function E(t){s.oc(this),this.P=!1,this.n=[],this.F=0,this.Ti=this.Eb=null,t==null?this.na=null:typeof t=="string"?t==="object"||t==="string"||t==="number"||t==="boolean"||t==="function"?this.na=t:s.Fa(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):typeof t=="function"?this.na=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:s.Fa(t,"null, a primitive type name, or a class type","List constructor: type")}s.ga("List",E),E.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},E.prototype.freeze=E.prototype.freeze=function(){return this.P=!0,this},E.prototype.thaw=E.prototype.Qa=function(){return this.P=!1,this},E.prototype.toString=function(){return"List("+s.getTypeName(this.na)+")#"+s.Pd(this)},E.prototype.add=E.prototype.add=function(t){t!==null&&(this.P&&s.ma(this,t),this.n.push(t),this.Mc())},E.prototype.push=E.prototype.push=function(t){this.add(t)},E.prototype.addAll=E.prototype.Pc=function(t){if(t===null)return this;this.P&&s.ma(this);var i=this.n;if(s.isArray(t))for(var n=s.cb(t),e=0;e<n;e++){var o=s.Ba(t,e);i.push(o)}else for(t=t.i;t.next();)o=t.value,i.push(o);return this.Mc(),this},E.prototype.clear=E.prototype.clear=function(){this.P&&s.ma(this),this.n.length=0,this.Mc()},E.prototype.contains=E.prototype.contains=function(t){return t===null?!1:this.n.indexOf(t)!==-1},E.prototype.has=E.prototype.has=function(t){return this.contains(t)},E.prototype.indexOf=E.prototype.indexOf=function(t){return t===null?-1:this.n.indexOf(t)},E.prototype.elt=E.prototype.fa=function(t){var i=this.n;return(0>t||t>=i.length)&&s.Fa(t,"0 <= i < length",E,"elt:i"),i[t]},E.prototype.get=E.prototype.get=function(t){return this.fa(t)},E.prototype.setElt=E.prototype.kg=function(t,i){var n=this.n;(0>t||t>=n.length)&&s.Fa(t,"0 <= i < length",E,"setElt:i"),this.P&&s.ma(this,t),n[t]=i},E.prototype.set=E.prototype.set=function(t,i){this.kg(t,i)},E.prototype.first=E.prototype.first=function(){var t=this.n;return t.length===0?null:t[0]},E.prototype.last=E.prototype.ie=function(){var t=this.n,i=t.length;return 0<i?t[i-1]:null},E.prototype.pop=E.prototype.pop=function(){this.P&&s.ma(this);var t=this.n;return 0<t.length?t.pop():null},E.prototype.any=function(t){for(var i=this.n,n=this.F,e=i.length,o=0;o<e;o++){if(t(i[o]))return!0;this.F!==n&&s.Na(this)}return!1},E.prototype.all=function(t){for(var i=this.n,n=this.F,e=i.length,o=0;o<e;o++){if(!t(i[o]))return!1;this.F!==n&&s.Na(this)}return!0},E.prototype.each=function(t){for(var i=this.n,n=this.F,e=i.length,o=0;o<e;o++)t(i[o]),this.F!==n&&s.Na(this);return this},E.prototype.map=function(t){for(var i=new E,n=[],e=this.n,o=this.F,r=e.length,h=0;h<r;h++)n.push(t(e[h])),this.F!==o&&s.Na(this);return i.n=n,i.Mc(),i},E.prototype.filter=function(t){for(var i=new E(this.na),n=[],e=this.n,o=this.F,r=e.length,h=0;h<r;h++){var l=e[h];t(l)&&n.push(l),this.F!==o&&s.Na(this)}return i.n=n,i.Mc(),i},E.prototype.concat=function(t){return this.copy().Pc(t)},E.prototype.insertAt=E.prototype.Rd=function(t,i){0>t&&s.Fa(t,">= 0",E,"insertAt:i"),this.P&&s.ma(this,t);var n=this.n;return t>=n.length?n.push(i):n.splice(t,0,i),this.Mc(),!0},E.prototype.remove=E.prototype.delete=E.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=this.n;return t=i.indexOf(t),t===-1?!1:(t===i.length-1?i.pop():i.splice(t,1),this.Mc(),!0)},E.prototype.removeAt=E.prototype.cd=function(t){var i=this.n;(0>t||t>=i.length)&&s.Fa(t,"0 <= i < length",E,"removeAt:i"),this.P&&s.ma(this,t),t===i.length-1?i.pop():i.splice(t,1),this.Mc()},E.prototype.removeRange=E.prototype.removeRange=function(t,i){var n=this.n,e=n.length;if(0>t)t=0;else if(t>=e)return this;if(0>i)return this;if(i>=e&&(i=e-1),t>i)return this;this.P&&s.ma(this);for(var o=t,r=i+1;r<e;)n[o++]=n[r++];return n.length=e-(i-t+1),this.Mc(),this},E.prototype.copy=function(){var t=new E(this.na),i=this.n;return 0<i.length&&(t.n=Array.prototype.slice.call(i)),t},E.prototype.toArray=E.prototype.yc=function(){for(var t=this.n,i=this.count,n=Array(i),e=0;e<i;e++)n[e]=t[e];return n},E.prototype.toSet=E.prototype.GG=function(){for(var t=new R(this.na),i=this.n,n=this.count,e=0;e<n;e++)t.add(i[e]);return t},E.prototype.sort=E.prototype.sort=function(t){return this.P&&s.ma(this),this.n.sort(t),this.Mc(),this},E.prototype.sortRange=E.prototype.Jq=function(t,i,n){var e=this.n,o=e.length;i===void 0&&(i=0),n===void 0&&(n=o),this.P&&s.ma(this);var r=n-i;if(1>=r)return this;if((0>i||i>=o-1)&&s.Fa(i,"0 <= from < length",E,"sortRange:from"),r===2)return n=e[i],o=e[i+1],0<t(n,o)&&(e[i]=o,e[i+1]=n,this.Mc()),this;if(i===0)if(n>=o)e.sort(t);else for(r=e.slice(0,n),r.sort(t),t=0;t<n;t++)e[t]=r[t];else if(n>=o)for(r=e.slice(i),r.sort(t),t=i;t<o;t++)e[t]=r[t-i];else for(r=e.slice(i,n),r.sort(t),t=i;t<n;t++)e[t]=r[t-i];return this.Mc(),this},E.prototype.reverse=E.prototype.reverse=function(){return this.P&&s.ma(this),this.n.reverse(),this.Mc(),this},s.u(E,{count:"count"},function(){return this.n.length}),s.u(E,{size:"size"},function(){return this.n.length}),s.u(E,{length:"length"},function(){return this.n.length}),s.u(E,{i:"iterator"},function(){if(0>=this.n.length)return ro;var t=this.Eb;return t!==null?(t.reset(),t):new Bi(this)}),s.u(E,{Ln:"iteratorBackwards"},function(){if(0>=this.n.length)return ro;var t=this.Ti;return t!==null?(t.reset(),t):new En(this)});function zn(t){this.bi=t,t.Eb=null,this.Ta=t.F,this.Wa=null}s.be(zn,{key:!0,value:!0}),s.u(zn,{i:"iterator"},function(){return this}),zn.prototype.reset=zn.prototype.reset=function(){var t=this.bi;t.Eb=null,this.Ta=t.F,this.Wa=null},zn.prototype.next=zn.prototype.next=function(){var t=this.bi;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=i.value,this.key=i.key,!0):(this.Nf(),!1)},zn.prototype.hasNext=function(){return this.next()},zn.prototype.first=zn.prototype.first=function(){var t=this.bi;if(this.Ta=t.F,t=t.Ea,t!==null){this.Wa=t;var i=t.value;return this.key=t.key,this.value=i}return null},zn.prototype.any=function(t){var i=this.bi;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.value))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},zn.prototype.all=function(t){var i=this.bi;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.value))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},zn.prototype.each=function(t){var i=this.bi;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.value),i.F!==n&&s.Na(i),e=e.$a;return this},zn.prototype.map=function(t){var i=this.bi;i.Eb=null;for(var n=new E,e=i.F,o=i.Ea;o!==null;)n.add(t(o.value)),i.F!==e&&s.Na(i),o=o.$a;return n.i},zn.prototype.filter=function(t){var i=this.bi;i.Eb=null;for(var n=new E(i.na),e=i.F,o=i.Ea;o!==null;){var r=o.value;t(r)&&n.add(r),i.F!==e&&s.Na(i),o=o.$a}return n.i},zn.prototype.concat=function(t){return this.bi.Eb=null,new ki(this,t.i)},s.u(zn,{count:"count"},function(){return this.bi.rd}),zn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.bi.Eb=this},zn.prototype.toString=function(){return this.Wa!==null?"SetIterator@"+this.Wa.value:"SetIterator"};function R(t){s.oc(this),this.P=!1,t==null?this.na=null:typeof t=="string"?t==="object"||t==="string"||t==="number"?this.na=t:s.Fa(t,"the string 'object', 'number' or 'string'","Set constructor: type"):typeof t=="function"?this.na=t===Object?"object":t===String?"string":t===Number?"number":t:s.Fa(t,"null, a primitive type name, or a class type","Set constructor: type"),this.sd={},this.rd=0,this.Eb=null,this.F=0,this.Uh=this.Ea=null}s.ga("Set",R),R.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},R.prototype.freeze=R.prototype.freeze=function(){return this.P=!0,this},R.prototype.thaw=R.prototype.Qa=function(){return this.P=!1,this},R.prototype.toString=function(){return"Set("+s.getTypeName(this.na)+")#"+s.Pd(this)},R.prototype.add=R.prototype.add=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;return s.Pa(t)&&(i=s.cq(t)),this.sd[i]===void 0?(this.rd++,t=new Cl(t,t),this.sd[i]=t,i=this.Uh,i===null?this.Ea=t:(t.mp=i,i.$a=t),this.Uh=t,this.Mc(),!0):!1},R.prototype.addAll=R.prototype.Pc=function(t){if(t===null)return this;if(this.P&&s.ma(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.add(s.Ba(t,n));else for(t=t.i;t.next();)this.add(t.value);return this},R.prototype.contains=R.prototype.contains=function(t){if(t===null)return!1;var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?!1:this.sd[i]!==void 0},R.prototype.has=R.prototype.has=function(t){return this.contains(t)},R.prototype.containsAll=function(t){if(t===null)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},R.prototype.containsAny=function(t){if(t===null)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},R.prototype.first=R.prototype.first=function(){var t=this.Ea;return t===null?null:t.value},R.prototype.any=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(t(n.value))return!0;this.F!==i&&s.Na(this),n=n.$a}return!1},R.prototype.all=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(!t(n.value))return!1;this.F!==i&&s.Na(this),n=n.$a}return!0},R.prototype.each=function(t){for(var i=this.F,n=this.Ea;n!==null;)t(n.value),this.F!==i&&s.Na(this),n=n.$a;return this},R.prototype.map=function(t){for(var i=new R,n=this.F,e=this.Ea;e!==null;)i.add(t(e.value)),this.F!==n&&s.Na(this),e=e.$a;return i},R.prototype.filter=function(t){for(var i=new R(this.na),n=this.F,e=this.Ea;e!==null;){var o=e.value;t(o)&&i.add(o),this.F!==n&&s.Na(this),e=e.$a}return i},R.prototype.concat=function(t){return this.copy().Pc(t)},R.prototype.remove=R.prototype.delete=R.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;if(s.Pa(t)&&(i=s.Pd(t),i===void 0)||(t=this.sd[i],t===void 0))return!1;var n=t.$a,e=t.mp;return n!==null&&(n.mp=e),e!==null&&(e.$a=n),this.Ea===t&&(this.Ea=n),this.Uh===t&&(this.Uh=e),delete this.sd[i],this.rd--,this.Mc(),!0},R.prototype.removeAll=R.prototype.oy=function(t){if(t===null)return this;if(this.P&&s.ma(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.remove(s.Ba(t,n));else for(t=t.i;t.next();)this.remove(t.value);return this},R.prototype.retainAll=function(t){if(t===null||this.count===0)return this;this.P&&s.ma(this);var i=new R(this.na);i.Pc(t),t=[];for(var n=this.i;n.next();){var e=n.value;i.contains(e)||t.push(e)}return this.oy(t),this},R.prototype.clear=R.prototype.clear=function(){this.P&&s.ma(this),this.sd={},this.rd=0,this.Eb!==null&&this.Eb.reset(),this.Uh=this.Ea=null,this.Mc()},R.prototype.copy=function(){var t=new R(this.na),i=this.sd,n;for(n in i)t.add(i[n].value);return t},R.prototype.toArray=R.prototype.yc=function(){var t=Array(this.rd),i=this.sd,n=0,e;for(e in i)t[n]=i[e].value,n++;return t},R.prototype.toList=function(){var t=new E(this.na),i=this.sd,n;for(n in i)t.add(i[n].value);return t},s.u(R,{count:"count"},function(){return this.rd}),s.u(R,{size:"size"},function(){return this.rd}),s.u(R,{i:"iterator"},function(){if(0>=this.rd)return ro;var t=this.Eb;return t!==null?(t.reset(),t):new zn(this)});function Sn(t){this.Ga=t,this.Ta=t.F,this.Wa=null}s.be(Sn,{key:!0,value:!0}),s.u(Sn,{i:"iterator"},function(){return this}),Sn.prototype.reset=Sn.prototype.reset=function(){this.Ta=this.Ga.F,this.Wa=null},Sn.prototype.next=Sn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=this.key=t=i.key,!0):(this.Nf(),!1)},Sn.prototype.hasNext=function(){return this.next()},Sn.prototype.first=Sn.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,t=t.Ea,t!==null?(this.Wa=t,this.value=this.key=t=t.key):null},Sn.prototype.any=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.key))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Sn.prototype.all=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.key))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Sn.prototype.each=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.key),i.F!==n&&s.Na(i),e=e.$a;return this},Sn.prototype.map=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=new E,o=i.Ea;o!==null;)e.add(t(o.key)),i.F!==n&&s.Na(i),o=o.$a;return e.i},Sn.prototype.filter=function(t){var i=this.Ga,n=i.F;this.Wa=null;for(var e=new E(i.Th),o=i.Ea;o!==null;){var r=o.key;t(r)&&e.add(r),i.F!==n&&s.Na(i),o=o.$a}return e.i},Sn.prototype.concat=function(t){return new ki(this,t.i)},s.u(Sn,{count:"count"},function(){return this.Ga.rd}),Sn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1},Sn.prototype.toString=function(){return this.Wa!==null?"MapKeySetIterator@"+this.Wa.value:"MapKeySetIterator"};function Wt(t){s.oc(this),this.P=!0,this.Ga=t}s.La(Wt,R),Wt.prototype.freeze=function(){return this},Wt.prototype.Qa=function(){return this},Wt.prototype.toString=function(){return"MapKeySet("+this.Ga.toString()+")"},Wt.prototype.add=Wt.prototype.add=function(){return s.k("This Set is read-only: "+this.toString()),!1},Wt.prototype.set=Wt.prototype.set=function(){return s.k("This Set is read-only: "+this.toString()),!1},Wt.prototype.contains=Wt.prototype.contains=function(t){return this.Ga.contains(t)},Wt.prototype.has=Wt.prototype.has=function(t){return this.contains(t)},Wt.prototype.remove=Wt.prototype.delete=Wt.prototype.remove=function(){return s.k("This Set is read-only: "+this.toString()),!1},Wt.prototype.clear=Wt.prototype.clear=function(){s.k("This Set is read-only: "+this.toString())},Wt.prototype.first=Wt.prototype.first=function(){var t=this.Ga.Ea;return t!==null?t.key:null},Wt.prototype.any=function(t){for(var i=this.Ga.Ea;i!==null;){if(t(i.key))return!0;i=i.$a}return!1},Wt.prototype.all=function(t){for(var i=this.Ga.Ea;i!==null;){if(!t(i.key))return!1;i=i.$a}return!0},Wt.prototype.each=function(t){for(var i=this.Ga.Ea;i!==null;)t(i.key),i=i.$a;return this},Wt.prototype.map=function(t){for(var i=new R,n=this.Ga.Ea;n!==null;)i.add(t(n.key)),n=n.$a;return i},Wt.prototype.filter=function(t){for(var i=new R(this.Ga.Th),n=this.Ga.Ea;n!==null;){var e=n.key;t(e)&&i.add(e),n=n.$a}return i},Wt.prototype.concat=function(t){return this.GG().Pc(t)},Wt.prototype.copy=function(){return new Wt(this.Ga)},Wt.prototype.toSet=Wt.prototype.GG=function(){var t=new R(this.Ga.Th),i=this.Ga.sd,n;for(n in i)t.add(i[n].key);return t},Wt.prototype.toArray=Wt.prototype.yc=function(){var t=this.Ga.sd,i=Array(this.Ga.rd),n=0,e;for(e in t)i[n]=t[e].key,n++;return i},Wt.prototype.toList=function(){var t=new E(this.Ga.Th),i=this.Ga.sd,n;for(n in i)t.add(i[n].key);return t},s.u(Wt,{count:"count"},function(){return this.Ga.rd}),s.u(Wt,{size:"size"},function(){return this.Ga.rd}),s.u(Wt,{i:"iterator"},function(){return 0>=this.Ga.rd?ro:new Sn(this.Ga)});function Rn(t){this.Ga=t,t.hh=null,this.Ta=t.F,this.Wa=null}s.be(Rn,{key:!0,value:!0}),s.u(Rn,{i:"iterator"},function(){return this}),Rn.prototype.reset=Rn.prototype.reset=function(){var t=this.Ga;t.hh=null,this.Ta=t.F,this.Wa=null},Rn.prototype.next=Rn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.value=i.value,this.key=i.key,!0):(this.Nf(),!1)},Rn.prototype.hasNext=function(){return this.next()},Rn.prototype.first=Rn.prototype.first=function(){var t=this.Ga;if(this.Ta=t.F,t=t.Ea,t!==null){this.Wa=t;var i=t.value;return this.key=t.key,this.value=i}return null},Rn.prototype.any=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e.value))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Rn.prototype.all=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e.value))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Rn.prototype.each=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e.value),i.F!==n&&s.Na(i),e=e.$a;return this},Rn.prototype.map=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=new E,o=i.Ea;o!==null;)e.add(t(o.value)),i.F!==n&&s.Na(i),o=o.$a;return e.i},Rn.prototype.filter=function(t){var i=this.Ga;i.hh=null;var n=i.F;this.Wa=null;for(var e=new E(i.Th),o=i.Ea;o!==null;){var r=o.value;t(r)&&e.add(r),i.F!==n&&s.Na(i),o=o.$a}return e.i},Rn.prototype.concat=function(t){return this.Ga.hh=null,new ki(this,t.i)},s.u(Rn,{count:"count"},function(){return this.Ga.rd}),Rn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.hh=this},Rn.prototype.toString=function(){return this.Wa!==null?"MapValueSetIterator@"+this.Wa.value:"MapValueSetIterator"};function Cl(t,i){this.key=t,this.value=i,this.mp=this.$a=null}s.be(Cl,{key:!0,value:!0}),Cl.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Gn(t){this.Ga=t,t.Eb=null,this.Ta=t.F,this.Wa=null}s.be(Gn,{key:!0,value:!0}),s.u(Gn,{i:"iterator"},function(){return this}),Gn.prototype.reset=Gn.prototype.reset=function(){var t=this.Ga;t.Eb=null,this.Ta=t.F,this.Wa=null},Gn.prototype.next=Gn.prototype.next=function(){var t=this.Ga;if(t.F!==this.Ta){if(this.key===null)return!1;s.Na(t)}var i=this.Wa,i=i===null?t.Ea:i.$a;return i!==null?(this.Wa=i,this.key=i.key,this.value=i.value,!0):(this.Nf(),!1)},Gn.prototype.hasNext=function(){return this.next()},Gn.prototype.first=Gn.prototype.first=function(){var t=this.Ga;return this.Ta=t.F,t=t.Ea,t!==null?(this.Wa=t,this.key=t.key,this.value=t.value,t):null},Gn.prototype.any=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(t(e))return!0;i.F!==n&&s.Na(i),e=e.$a}return!1},Gn.prototype.all=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;){if(!t(e))return!1;i.F!==n&&s.Na(i),e=e.$a}return!0},Gn.prototype.each=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=i.Ea;e!==null;)t(e),i.F!==n&&s.Na(i),e=e.$a;return this},Gn.prototype.map=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=new E,o=i.Ea;o!==null;)e.add(t(o)),i.F!==n&&s.Na(i),o=o.$a;return e.i},Gn.prototype.filter=function(t){var i=this.Ga;i.Eb=null;var n=i.F;this.Wa=null;for(var e=new E,o=i.Ea;o!==null;)t(o)&&e.add(o),i.F!==n&&s.Na(i),o=o.$a;return e.i},Gn.prototype.concat=function(t){return this.Ga.Eb=null,new ki(this,t.i)},s.u(Gn,{count:"count"},function(){return this.Ga.rd}),Gn.prototype.Nf=function(){this.value=this.key=null,this.Ta=-1,this.Ga.Eb=this},Gn.prototype.toString=function(){return this.Wa!==null?"MapIterator@"+this.Wa:"MapIterator"};function tt(t,i){s.oc(this),this.P=!1,t==null?this.Th=null:typeof t=="string"?t==="object"||t==="string"||t==="number"?this.Th=t:s.Fa(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):typeof t=="function"?this.Th=t===Object?"object":t===String?"string":t===Number?"number":t:s.Fa(t,"null, a primitive type name, or a class type","Map constructor: keytype"),i==null?this.Jt=null:typeof i=="string"?i==="object"||i==="string"||i==="boolean"||i==="number"||i==="function"?this.Jt=i:s.Fa(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):typeof i=="function"?this.Jt=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:s.Fa(i,"null, a primitive type name, or a class type","Map constructor: valtype"),this.sd={},this.rd=0,this.hh=this.Eb=null,this.F=0,this.Uh=this.Ea=null}s.ga("Map",tt),tt.prototype.Mc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},tt.prototype.freeze=tt.prototype.freeze=function(){return this.P=!0,this},tt.prototype.thaw=tt.prototype.Qa=function(){return this.P=!1,this},tt.prototype.toString=function(){return"Map("+s.getTypeName(this.Th)+","+s.getTypeName(this.Jt)+")#"+s.Pd(this)},tt.prototype.add=tt.prototype.add=function(t,i){this.P&&s.ma(this,t);var n=t;s.Pa(t)&&(n=s.cq(t));var e=this.sd[n];return e===void 0?(this.rd++,e=new Cl(t,i),this.sd[n]=e,n=this.Uh,n===null?this.Ea=e:(e.mp=n,n.$a=e),this.Uh=e,this.Mc(),!0):(e.value=i,!1)},tt.prototype.set=tt.prototype.set=function(t,i){return this.add(t,i)},tt.prototype.addAll=tt.prototype.Pc=function(t){if(t===null)return this;if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);this.add(e.key,e.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},tt.prototype.first=tt.prototype.first=function(){return this.Ea},tt.prototype.any=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(t(n))return!0;this.F!==i&&s.Na(this),n=n.$a}return!1},tt.prototype.all=function(t){for(var i=this.F,n=this.Ea;n!==null;){if(!t(n))return!1;this.F!==i&&s.Na(this),n=n.$a}return!0},tt.prototype.each=function(t){for(var i=this.F,n=this.Ea;n!==null;)t(n),this.F!==i&&s.Na(this),n=n.$a;return this},tt.prototype.map=function(t){for(var i=new tt(this.Th),n=this.F,e=this.Ea;e!==null;)i.add(e.key,t(e)),this.F!==n&&s.Na(this),e=e.$a;return i},tt.prototype.filter=function(t){for(var i=new tt(this.Th,this.Jt),n=this.F,e=this.Ea;e!==null;)t(e)&&i.add(e.key,e.value),this.F!==n&&s.Na(this),e=e.$a;return i},tt.prototype.concat=function(t){return this.copy().Pc(t)},tt.prototype.contains=tt.prototype.contains=function(t){var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?!1:this.sd[i]!==void 0},tt.prototype.has=tt.prototype.has=function(t){return this.contains(t)},tt.prototype.getValue=tt.prototype.ka=function(t){var i=t;return s.Pa(t)&&(i=s.Pd(t),i===void 0)?null:(t=this.sd[i],t===void 0?null:t.value)},tt.prototype.get=tt.prototype.get=function(t){return this.ka(t)},tt.prototype.remove=tt.prototype.delete=tt.prototype.remove=function(t){if(t===null)return!1;this.P&&s.ma(this,t);var i=t;if(s.Pa(t)&&(i=s.Pd(t),i===void 0)||(t=this.sd[i],t===void 0))return!1;var n=t.$a,e=t.mp;return n!==null&&(n.mp=e),e!==null&&(e.$a=n),this.Ea===t&&(this.Ea=n),this.Uh===t&&(this.Uh=e),delete this.sd[i],this.rd--,this.Mc(),!0},tt.prototype.clear=tt.prototype.clear=function(){this.P&&s.ma(this),this.sd={},this.rd=0,this.Eb!==null&&this.Eb.reset(),this.hh!==null&&this.hh.reset(),this.Uh=this.Ea=null,this.Mc()},tt.prototype.copy=function(){var t=new tt(this.Th,this.Jt),i=this.sd,n;for(n in i){var e=i[n];t.add(e.key,e.value)}return t},tt.prototype.toArray=tt.prototype.yc=function(){var t=this.sd,i=Array(this.rd),n=0,e;for(e in t){var o=t[e];i[n]=new Cl(o.key,o.value),n++}return i},tt.prototype.toKeySet=tt.prototype.Mj=function(){return new Wt(this)},s.u(tt,{count:"count"},function(){return this.rd}),s.u(tt,{size:"size"},function(){return this.rd}),s.u(tt,{i:"iterator"},function(){if(0>=this.count)return ro;var t=this.Eb;return t!==null?(t.reset(),t):new Gn(this)}),s.u(tt,{LF:"iteratorKeys"},function(){return 0>=this.count?ro:new Sn(this)}),s.u(tt,{MF:"iteratorValues"},function(){if(0>=this.count)return ro;var t=this.hh;return t!==null?(t.reset(),t):new Rn(this)});function D(t,i){t===void 0?this.y=this.x=0:(this.x=t,this.y=i)}s.ga("Point",D),s.ni(D),s.be(D,{x:!0,y:!0}),D.prototype.assign=function(t){this.x=t.x,this.y=t.y},D.prototype.setTo=D.prototype.m=function(t,i){return this.x=t,this.y=i,this},D.prototype.set=D.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},D.prototype.copy=function(){var t=new D;return t.x=this.x,t.y=this.y,t},D.prototype.Ha=function(){return Object.freeze(this),this},D.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},D.prototype.freeze=function(){return this},D.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},D.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;t[i]==="";)i++;return(e=t[i++])&&(o=parseFloat(e)),new D(n,o)}return new D},D.stringify=function(t){return t.x.toString()+" "+t.y.toString()},D.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},D.prototype.equals=D.prototype.L=function(t){return t instanceof D?this.x===t.x&&this.y===t.y:!1},D.prototype.equalTo=D.prototype.Bx=function(t,i){return this.x===t&&this.y===i},D.prototype.equalsApprox=D.prototype.Qc=function(t){return $(this.x,t.x)&&$(this.y,t.y)},D.prototype.add=D.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},D.prototype.subtract=D.prototype.ui=function(t){return this.x-=t.x,this.y-=t.y,this},D.prototype.offset=D.prototype.offset=function(t,i){return this.x+=t,this.y+=i,this},D.prototype.rotate=D.prototype.rotate=function(t){if(t===0)return this;var i=this.x,n=this.y;if(i===0&&n===0)return this;var e=0,o=0;return 360<=t?t-=360:0>t&&(t+=360),t===90?(e=0,o=1):t===180?(e=-1,o=0):t===270?(e=0,o=-1):(t=t*Math.PI/180,e=Math.cos(t),o=Math.sin(t)),this.x=e*i-o*n,this.y=o*i+e*n,this},D.prototype.scale=D.prototype.scale=function(t,i){return this.x*=t,this.y*=i,this},D.prototype.distanceSquaredPoint=D.prototype.Cf=function(t){var i=t.x-this.x;return t=t.y-this.y,i*i+t*t},D.prototype.distanceSquared=D.prototype.Xf=function(t,i){var n=t-this.x,e=i-this.y;return n*n+e*e},D.prototype.normalize=D.prototype.normalize=function(){var t=this.x,i=this.y,n=Math.sqrt(t*t+i*i);return 0<n&&(this.x=t/n,this.y=i/n),this},D.prototype.directionPoint=D.prototype.Qb=function(t){return Fv(t.x-this.x,t.y-this.y)},D.prototype.direction=D.prototype.direction=function(t,i){return Fv(t-this.x,i-this.y)};function Fv(t,i){if(t===0)return 0<i?90:0>i?270:0;if(i===0)return 0<t?0:180;if(isNaN(t)||isNaN(i))return 0;var n=180*Math.atan(Math.abs(i/t))/Math.PI;return 0>t?n=0>i?n+180:180-n:0>i&&(n=360-n),n}D.prototype.projectOntoLineSegment=function(t,i,n,e){return qs(t,i,n,e,this.x,this.y,this),this},D.prototype.projectOntoLineSegmentPoint=function(t,i){return qs(t.x,t.y,i.x,i.y,this.x,this.y,this),this},D.prototype.snapToGrid=function(t,i,n,e){return tf(this.x,this.y,t,i,n,e,this),this},D.prototype.snapToGridPoint=function(t,i){return tf(this.x,this.y,t.x,t.y,i.width,i.height,this),this},D.prototype.setRectSpot=D.prototype.ao=function(t,i){return this.x=t.x+i.x*t.width+i.offsetX,this.y=t.y+i.y*t.height+i.offsetY,this},D.prototype.setSpot=D.prototype.bv=function(t,i,n,e,o){return this.x=t+o.x*n+o.offsetX,this.y=i+o.y*e+o.offsetY,this},D.prototype.transform=function(t){return t.nb(this),this};function un(t,i){return i.xh(t),t}var xn;D.distanceLineSegmentSquared=xn=function(t,i,n,e,o,r){var h=o-n,l=r-e,u=h*h+l*l;n-=t,e-=i;var f=-n*h-e*l;return 0>=f||f>=u?(h=o-t,l=r-i,Math.min(n*n+e*e,h*h+l*l)):(t=h*e-l*n,t*t/u)};var Gr;D.distanceSquared=Gr=function(t,i,n,e){return t=n-t,i=e-i,t*t+i*i};var Lv;D.direction=Lv=function(t,i,n,e){return t=n-t,i=e-i,t===0?0<i?90:0>i?270:0:i===0?0<t?0:180:isNaN(t)||isNaN(i)?0:(e=180*Math.atan(Math.abs(i/t))/Math.PI,0>t?e=0>i?e+180:180-e:0>i&&(e=360-e),e)},D.prototype.isReal=D.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)};function lt(t,i){t===void 0?this.height=this.width=0:(this.width=t,this.height=i)}s.ga("Size",lt),s.ni(lt),s.be(lt,{width:!0,height:!0}),lt.prototype.assign=function(t){this.width=t.width,this.height=t.height},lt.prototype.setTo=lt.prototype.m=function(t,i){return this.width=t,this.height=i,this},lt.prototype.set=lt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},lt.prototype.copy=function(){var t=new lt;return t.width=this.width,t.height=this.height,t},lt.prototype.Ha=function(){return Object.freeze(this),this},lt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},lt.prototype.freeze=function(){return this},lt.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},lt.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;t[i]==="";)i++;return(e=t[i++])&&(o=parseFloat(e)),new lt(n,o)}return new lt},lt.stringify=function(t){return t.width.toString()+" "+t.height.toString()},lt.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},lt.prototype.equals=lt.prototype.L=function(t){return t instanceof lt?this.width===t.width&&this.height===t.height:!1},lt.prototype.equalTo=lt.prototype.Bx=function(t,i){return this.width===t&&this.height===i},lt.prototype.equalsApprox=lt.prototype.Qc=function(t){return $(this.width,t.width)&&$(this.height,t.height)},lt.prototype.isReal=lt.prototype.I=function(){return isFinite(this.width)&&isFinite(this.height)};function O(t,i,n,e){t===void 0?this.height=this.width=this.y=this.x=0:t instanceof D?i instanceof D?(this.x=Math.min(t.x,i.x),this.y=Math.min(t.y,i.y),this.width=Math.abs(t.x-i.x),this.height=Math.abs(t.y-i.y)):i instanceof lt?(this.x=t.x,this.y=t.y,this.width=i.width,this.height=i.height):s.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=i,this.width=n,this.height=e)}s.ga("Rect",O),s.ni(O),s.be(O,{x:!0,y:!0,width:!0,height:!0}),O.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height};function Or(t,i,n){t.width=i,t.height=n}O.prototype.setTo=O.prototype.m=function(t,i,n,e){return this.x=t,this.y=i,this.width=n,this.height=e,this},O.prototype.set=O.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},O.prototype.setPoint=O.prototype.Vg=function(t){return this.x=t.x,this.y=t.y,this},O.prototype.setSize=function(t){return this.width=t.width,this.height=t.height,this},O.prototype.copy=function(){var t=new O;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},O.prototype.Ha=function(){return Object.freeze(this),this},O.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},O.prototype.freeze=function(){return this},O.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},O.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e&&(n=parseFloat(e));for(var o=0;t[i]==="";)i++;(e=t[i++])&&(o=parseFloat(e));for(var r=0;t[i]==="";)i++;(e=t[i++])&&(r=parseFloat(e));for(var h=0;t[i]==="";)i++;return(e=t[i++])&&(h=parseFloat(e)),new O(n,o,r,h)}return new O},O.stringify=function(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()},O.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},O.prototype.equals=O.prototype.L=function(t){return t instanceof O?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},O.prototype.equalTo=O.prototype.Bx=function(t,i,n,e){return this.x===t&&this.y===i&&this.width===n&&this.height===e},O.prototype.equalsApprox=O.prototype.Qc=function(t){return $(this.x,t.x)&&$(this.y,t.y)&&$(this.width,t.width)&&$(this.height,t.height)};function d0(t,i){return St(t.x,i.x)&&St(t.y,i.y)&&St(t.width,i.width)&&St(t.height,i.height)}O.prototype.containsPoint=O.prototype.Ia=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},O.prototype.containsRect=O.prototype.Fk=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},O.prototype.contains=O.prototype.contains=function(t,i,n,e){return n===void 0&&(n=0),e===void 0&&(e=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=i&&i+e<=this.y+this.height},O.prototype.reset=function(){this.height=this.width=this.y=this.x=0},O.prototype.offset=O.prototype.offset=function(t,i){return this.x+=t,this.y+=i,this},O.prototype.inflate=O.prototype.Zf=function(t,i){return ha(this,i,t,i,t)},O.prototype.addMargin=O.prototype.bx=function(t){return ha(this,t.top,t.right,t.bottom,t.left)},O.prototype.subtractMargin=O.prototype.BG=function(t){return ha(this,-t.top,-t.right,-t.bottom,-t.left)},O.prototype.grow=function(t,i,n,e){return ha(this,t,i,n,e)};function ha(t,i,n,e,o){var r=t.width;return n+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=n+o),n=t.height,i+e<=-n?(t.y+=n/2,t.height=0):(t.y-=i,t.height+=i+e),t}O.prototype.intersectRect=function(t){return Av(this,t.x,t.y,t.width,t.height)},O.prototype.intersect=O.prototype.wF=function(t,i,n,e){return Av(this,t,i,n,e)};function Av(t,i,n,e,o){var r=Math.max(t.x,i),h=Math.max(t.y,n);return i=Math.min(t.x+t.width,i+e),n=Math.min(t.y+t.height,n+o),t.x=r,t.y=h,t.width=Math.max(0,i-r),t.height=Math.max(0,n-h),t}O.prototype.intersectsRect=O.prototype.$f=function(t){return this.xF(t.x,t.y,t.width,t.height)},O.prototype.intersects=O.prototype.xF=function(t,i,n,e){var o=this.width,r=this.x;return o!==1/0&&n!==1/0&&(o+=r,n+=t,isNaN(n)||isNaN(o)||r>n||t>o)?!1:(t=this.height,n=this.y,!(t!==1/0&&e!==1/0&&(t+=n,e+=i,isNaN(e)||isNaN(t)||n>e||i>t)))};function Iv(t,i){var n=t.width,e=i.width+10+10,o=t.x,r=i.x-10;return o>e+r||r>n+o?!1:(n=t.height,e=i.height+10+10,o=t.y,r=i.y-10,!(o>e+r||r>n+o))}O.prototype.unionPoint=O.prototype.yi=function(t){return fn(this,t.x,t.y,0,0)},O.prototype.unionRect=O.prototype.Zg=function(t){return fn(this,t.x,t.y,t.width,t.height)},O.prototype.union=O.prototype.KG=function(t,i,n,e){return n===void 0&&(n=0),e===void 0&&(e=0),fn(this,t,i,n,e)};function fn(t,i,n,e,o){var r=Math.min(t.x,i),h=Math.min(t.y,n);return i=Math.max(t.x+t.width,i+e),n=Math.max(t.y+t.height,n+o),t.x=r,t.y=h,t.width=i-r,t.height=n-h,t}O.prototype.setSpot=O.prototype.bv=function(t,i,n){return this.x=t-n.offsetX-n.x*this.width,this.y=i-n.offsetY-n.y*this.height,this};var hr;O.contains=hr=function(t,i,n,e,o,r,h,l){return h===void 0&&(h=0),l===void 0&&(l=0),t<=o&&o+h<=t+n&&i<=r&&r+l<=i+e},O.intersects=function(t,i,n,e,o,r,h,l){return n+=t,h+=o,t>h||o>n?!1:(t=e+i,l+=r,!(i>l||r>t))},s.defineProperty(O,{left:"left"},function(){return this.x},function(t){this.x=t}),s.defineProperty(O,{top:"top"},function(){return this.y},function(t){this.y=t}),s.defineProperty(O,{right:"right"},function(){return this.x+this.width},function(t){this.x+=t-(this.x+this.width)}),s.defineProperty(O,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.y+=t-(this.y+this.height)}),s.defineProperty(O,{position:"position"},function(){return new D(this.x,this.y)},function(t){this.x=t.x,this.y=t.y}),s.defineProperty(O,{size:"size"},function(){return new lt(this.width,this.height)},function(t){this.width=t.width,this.height=t.height}),s.defineProperty(O,{Ul:"center"},function(){return new D(this.x+this.width/2,this.y+this.height/2)},function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}),s.defineProperty(O,{la:"centerX"},function(){return this.x+this.width/2},function(t){this.x=t-this.width/2}),s.defineProperty(O,{sa:"centerY"},function(){return this.y+this.height/2},function(t){this.y=t-this.height/2}),O.prototype.isReal=O.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},O.prototype.isEmpty=function(){return this.width===0&&this.height===0};function xt(t,i,n,e){t===void 0?this.left=this.bottom=this.right=this.top=0:i===void 0?this.left=this.bottom=this.right=this.top=t:n===void 0?(e=i,this.top=t,this.right=i,this.bottom=t,this.left=e):e!==void 0?(this.top=t,this.right=i,this.bottom=n,this.left=e):s.k("Invalid arguments to Margin constructor")}s.ga("Margin",xt),s.ni(xt),s.be(xt,{top:!0,right:!0,bottom:!0,left:!0}),xt.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},xt.prototype.setTo=xt.prototype.m=function(t,i,n,e){return this.top=t,this.right=i,this.bottom=n,this.left=e,this},xt.prototype.set=xt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},xt.prototype.copy=function(){var t=new xt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},xt.prototype.Ha=function(){return Object.freeze(this),this},xt.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},xt.prototype.freeze=function(){return this},xt.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this},xt.parse=function(t){if(typeof t=="string"){t=t.split(" ");for(var i=0,n=NaN;t[i]==="";)i++;var e=t[i++];if(e&&(n=parseFloat(e)),isNaN(n))return new xt;for(var o=NaN;t[i]==="";)i++;if((e=t[i++])&&(o=parseFloat(e)),isNaN(o))return new xt(n);for(var r=NaN;t[i]==="";)i++;if((e=t[i++])&&(r=parseFloat(e)),isNaN(r))return new xt(n,o);for(var h=NaN;t[i]==="";)i++;return(e=t[i++])&&(h=parseFloat(e)),isNaN(h)?new xt(n,o):new xt(n,o,r,h)}return new xt},xt.stringify=function(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()},xt.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},xt.prototype.equals=xt.prototype.L=function(t){return t instanceof xt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},xt.prototype.equalTo=xt.prototype.Bx=function(t,i,n,e){return this.top===t&&this.right===i&&this.bottom===n&&this.left===e},xt.prototype.equalsApprox=xt.prototype.Qc=function(t){return $(this.top,t.top)&&$(this.right,t.right)&&$(this.bottom,t.bottom)&&$(this.left,t.left)},xt.prototype.isReal=xt.prototype.I=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Qt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}s.ni(Qt),s.be(Qt,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),Qt.prototype.set=Qt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Qt.prototype.copy=function(){var t=new Qt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Qt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Qt.prototype.equals=Qt.prototype.L=function(t){return t instanceof Qt?this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy:!1},Qt.prototype.isIdentity=Qt.prototype.yu=function(){return this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1&&this.dx===0&&this.dy===0},Qt.prototype.reset=Qt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Qt.prototype.multiply=Qt.prototype.multiply=function(t){var i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,e=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=i,this.m21=n,this.m22=e,this.dx=o,this.dy=r,this},Qt.prototype.multiplyInverted=Qt.prototype.UF=function(t){var i=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*i,e=-t.m12*i,o=-t.m21*i,r=t.m11*i,h=i*(t.m21*t.dy-t.m22*t.dx),l=i*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*n+this.m22*e,i=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*h+this.m21*l+this.dx,h=this.m12*h+this.m22*l+this.dy,this.m11=this.m11*n+this.m21*e,this.m12=t,this.m21=i,this.m22=o,this.dx=r,this.dy=h,this},Qt.prototype.invert=Qt.prototype.TA=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*t,n=-this.m21*t,e=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=i,this.m21=n,this.m22=e,this.dx=o,this.dy=r,this},Qt.prototype.rotate=Qt.prototype.rotate=function(t,i,n){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;this.translate(i,n);var e=0,o=0;t===90?(e=0,o=1):t===180?(e=-1,o=0):t===270?(e=0,o=-1):(o=t*Math.PI/180,e=Math.cos(o),o=Math.sin(o)),t=this.m12*e+this.m22*o;var r=this.m11*-o+this.m21*e,h=this.m12*-o+this.m22*e;return this.m11=this.m11*e+this.m21*o,this.m12=t,this.m21=r,this.m22=h,this.translate(-i,-n),this},Qt.prototype.translate=Qt.prototype.translate=function(t,i){return this.dx+=this.m11*t+this.m21*i,this.dy+=this.m12*t+this.m22*i,this},Qt.prototype.scale=Qt.prototype.scale=function(t,i){return i===void 0&&(i=t),this.m11*=t,this.m12*=t,this.m21*=i,this.m22*=i,this},Qt.prototype.transformPoint=Qt.prototype.nb=function(t){var i=t.x,n=t.y;return t.x=i*this.m11+n*this.m21+this.dx,t.y=i*this.m12+n*this.m22+this.dy,t},Qt.prototype.invertedTransformPoint=Qt.prototype.xh=function(t){var i=1/(this.m11*this.m22-this.m12*this.m21),n=-this.m12*i,e=this.m11*i,o=i*(this.m12*this.dx-this.m11*this.dy),r=t.x,h=t.y;return t.x=r*this.m22*i+h*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),t.y=r*n+h*e+o,t},Qt.prototype.transformRect=Qt.prototype.JG=function(t){var u=t.x,h=t.y,a=u+t.width,y=h+t.height,f=this.m11,c=this.m12,i=this.m21,n=this.m22,e=this.dx,o=this.dy,p=u*f+h*i+e,v=u*c+h*n+o,r=a*f+h*i+e,h=a*c+h*n+o,l=u*f+y*i+e,u=u*c+y*n+o,f=a*f+y*i+e,a=a*c+y*n+o,y=p,c=v,p=Math.min(p,r),y=Math.max(y,r),c=Math.min(c,h),v=Math.max(v,h),p=Math.min(p,l),y=Math.max(y,l),c=Math.min(c,u),v=Math.max(v,u),p=Math.min(p,f),y=Math.max(y,f),c=Math.min(c,a),v=Math.max(v,a);return t.x=p,t.y=c,t.width=y-p,t.height=v-c,t};function P(t,i,n,e){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(i===void 0&&(i=0),n===void 0&&(n=0),e===void 0&&(e=0),this.x=t,this.y=i,this.offsetX=n,this.offsetY=e)}s.ga("Spot",P),s.ni(P),s.be(P,{x:!0,y:!0,offsetX:!0,offsetY:!0}),P.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},P.prototype.setTo=P.prototype.m=function(t,i,n,e){return this.x=t,this.y=i,this.offsetX=n,this.offsetY=e,this},P.prototype.set=P.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},P.prototype.copy=function(){var t=new P;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},P.prototype.Ha=function(){return Object.freeze(this),this},P.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},P.prototype.freeze=function(){return this},P.prototype.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this};function le(t,i){return t.x=NaN,t.y=NaN,t.offsetX=i,t}var Bv;P.parse=Bv=function(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return Ni;if(t==="TopLeft")return gi;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return lr;if(t==="TopRight")return jl;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Uu;if(t==="Center")return kt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return Ju;if(t==="BottomLeft")return Dl;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return Rh;if(t==="BottomRight")return $i;if(t==="TopSide")return Fl;if(t==="LeftSide")return Ll;if(t==="RightSide")return Al;if(t==="BottomSide")return Il;if(t==="TopBottomSides")return m0;if(t==="LeftRightSides")return x0;if(t==="TopLeftSides")return w0;if(t==="TopRightSides")return M0;if(t==="BottomLeftSides")return P0;if(t==="BottomRightSides")return T0;if(t==="NotTopSide")return S0;if(t==="NotLeftSide")return k0;if(t==="NotRightSide")return N0;if(t==="NotBottomSide")return C0;if(t==="AllSides")return j0;if(t==="Default")return an;t=t.split(" ");for(var i=0,n=0;t[i]==="";)i++;var e=t[i++];e!==void 0&&0<e.length&&(n=parseFloat(e));for(var o=0;t[i]==="";)i++;e=t[i++],e!==void 0&&0<e.length&&(o=parseFloat(e));for(var r=0;t[i]==="";)i++;e=t[i++],e!==void 0&&0<e.length&&(r=parseFloat(e));for(var h=0;t[i]==="";)i++;return e=t[i++],e!==void 0&&0<e.length&&(h=parseFloat(e)),new P(n,o,r,h)}return new P},P.stringify=function(t){return t.Zc()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},P.prototype.toString=function(){return this.Zc()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(Ni)?"None":this.L(gi)?"TopLeft":this.L(lr)?"Top":this.L(jl)?"TopRight":this.L(Uu)?"Left":this.L(kt)?"Center":this.L(Ju)?"Right":this.L(Dl)?"BottomLeft":this.L(Rh)?"Bottom":this.L($i)?"BottomRight":this.L(Fl)?"TopSide":this.L(Ll)?"LeftSide":this.L(Al)?"RightSide":this.L(Il)?"BottomSide":this.L(m0)?"TopBottomSides":this.L(x0)?"LeftRightSides":this.L(w0)?"TopLeftSides":this.L(M0)?"TopRightSides":this.L(P0)?"BottomLeftSides":this.L(T0)?"BottomRightSides":this.L(S0)?"NotTopSide":this.L(k0)?"NotLeftSide":this.L(N0)?"NotRightSide":this.L(C0)?"NotBottomSide":this.L(j0)?"AllSides":this.L(an)?"Default":"None"},P.prototype.equals=P.prototype.L=function(t){return t instanceof P?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},P.prototype.opposite=P.prototype.YF=function(){return new P(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},P.prototype.includesSide=P.prototype.xj=function(t){if(!this.zj())return!1;if(!t.zj())if(t.L(Ev))t=Ll;else if(t.L(zv))t=Al;else if(t.L(g0))t=Fl;else if(t.L(Rv))t=Il;else return!1;return t=t.offsetY,(this.offsetY&t)===t},P.prototype.isSpot=P.prototype.Zc=function(){return!isNaN(this.x)&&!isNaN(this.y)},P.prototype.isNoSpot=P.prototype.Ud=function(){return isNaN(this.x)||isNaN(this.y)},P.prototype.isSide=P.prototype.zj=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},P.prototype.isNone=P.prototype.ZA=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},P.prototype.isDefault=P.prototype.ge=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0};var Ni;P.None=Ni=le(new P(0,0,0,0),0).Ha();var an;P.Default=an=le(new P(0,0,-1,0),-1).Ha();var gi;P.TopLeft=gi=new P(0,0,0,0).Ha();var lr;P.TopCenter=lr=new P(.5,0,0,0).Ha();var jl;P.TopRight=jl=new P(1,0,0,0).Ha();var Uu;P.LeftCenter=Uu=new P(0,.5,0,0).Ha();var kt;P.Center=kt=new P(.5,.5,0,0).Ha();var Ju;P.RightCenter=Ju=new P(1,.5,0,0).Ha();var Dl;P.BottomLeft=Dl=new P(0,1,0,0).Ha();var Rh;P.BottomCenter=Rh=new P(.5,1,0,0).Ha();var $i;P.BottomRight=$i=new P(1,1,0,0).Ha();var Ne;P.MiddleTop=Ne=lr;var Ce;P.MiddleLeft=Ce=Uu;var On;P.MiddleRight=On=Ju;var je;P.MiddleBottom=je=Rh;var g0;P.Top=g0=lr;var Ev;P.Left=Ev=Uu;var zv;P.Right=zv=Ju;var Rv;P.Bottom=Rv=Rh;var Fl;P.TopSide=Fl=le(new P(0,0,1,s.od),1).Ha();var Ll;P.LeftSide=Ll=le(new P(0,0,1,s.Uc),1).Ha();var Al;P.RightSide=Al=le(new P(0,0,1,s.ed),1).Ha();var Il;P.BottomSide=Il=le(new P(0,0,1,s.dd),1).Ha();var m0;P.TopBottomSides=m0=le(new P(0,0,1,s.od|s.dd),1).Ha();var x0;P.LeftRightSides=x0=le(new P(0,0,1,s.Uc|s.ed),1).Ha();var w0;P.TopLeftSides=w0=le(new P(0,0,1,s.od|s.Uc),1).Ha();var M0;P.TopRightSides=M0=le(new P(0,0,1,s.od|s.ed),1).Ha();var P0;P.BottomLeftSides=P0=le(new P(0,0,1,s.dd|s.Uc),1).Ha();var T0;P.BottomRightSides=T0=le(new P(0,0,1,s.dd|s.ed),1).Ha();var S0;P.NotTopSide=S0=le(new P(0,0,1,s.Uc|s.ed|s.dd),1).Ha();var k0;P.NotLeftSide=k0=le(new P(0,0,1,s.od|s.ed|s.dd),1).Ha();var N0;P.NotRightSide=N0=le(new P(0,0,1,s.od|s.Uc|s.dd),1).Ha();var C0;P.NotBottomSide=C0=le(new P(0,0,1,s.od|s.Uc|s.ed),1).Ha();var j0;P.AllSides=j0=le(new P(0,0,1,s.od|s.Uc|s.ed|s.dd),1).Ha();function Gh(){this.Vb=[1,0,0,1,0,0]}Gh.prototype.copy=function(){var t=new Gh;return t.Vb[0]=this.Vb[0],t.Vb[1]=this.Vb[1],t.Vb[2]=this.Vb[2],t.Vb[3]=this.Vb[3],t.Vb[4]=this.Vb[4],t.Vb[5]=this.Vb[5],t},Gh.prototype.translate=function(t,i){this.Vb[4]+=this.Vb[0]*t+this.Vb[2]*i,this.Vb[5]+=this.Vb[1]*t+this.Vb[3]*i},Gh.prototype.scale=function(t,i){this.Vb[0]*=t,this.Vb[1]*=t,this.Vb[2]*=i,this.Vb[3]*=i};function Yu(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.KE=[],this.pattern=null}Yu.prototype.addColorStop=function(t,i){this.KE.push({offset:t,color:i})};function qu(t,i,n){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Mn=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.Qp=!1,this.Eg=this.st=this.rt=0,this.document=i||document,this.XE=n,this.Rx=null,this.path=[],this.vh=new Gh,this.stack=[],this.qf=[],this.yx=t,this.iJ="http://www.w3.org/2000/svg",this.width=this.yx.width,this.height=this.yx.height,this.rm=kn(this,"svg",{width:this.width+"px",height:this.height+"px",viewBox:"0 0 "+this.yx.width+" "+this.yx.height}),this.rm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.rm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),fs(this,1,0,0,1,0,0),t=s.wm++,i=kn(this,"clipPath",{id:"mainClip"+t}),i.appendChild(kn(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.rm.appendChild(i),this.qf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")}B=qu.prototype,B.arc=function(t,i,n,e,o,r,h,l){var u=2*Math.PI,f=u-1e-6,a=n*Math.cos(e),p=n*Math.sin(e),y=t+a,c=i+p,v=r?0:1;e=r?e-o:o-e,(1e-6<Math.abs(h-y)||1e-6<Math.abs(l-c))&&this.path.push(["L",y,+c]),0>e&&(e=e%u+u),e>f?(this.path.push(["A",n,n,0,1,v,t-a,i-p]),this.path.push(["A",n,n,0,1,v,y,c])):1e-6<e&&this.path.push(["A",n,n,0,+(e>=Math.PI),v,t+n*Math.cos(o),i+n*Math.sin(o)])},B.beginPath=function(){this.path=[]},B.bezierCurveTo=function(t,i,n,e,o,r){this.path.push(["C",t,i,n,e,o,r])},B.clearRect=function(){},B.clip=function(){D0(this,"clipPath",this.path,new Gh)},B.closePath=function(){this.path.push(["z"])},B.createLinearGradient=function(t,i,n,e){var o=new Yu("linear");return o.x1=t,o.y1=i,o.x2=n,o.y2=e,o},B.createPattern=function(){return null},B.createRadialGradient=function(t,i,n,e,o,r){var h=new Yu("radial");return h.x1=t,h.y1=i,h.r1=n,h.x2=e,h.y2=o,h.r2=r,h},B.drawImage=function(t,i,n,e,o,r,h,l,u){var f="";t instanceof HTMLCanvasElement&&(f=t.toDataURL()),t instanceof HTMLImageElement&&(f=t.src),e===void 0&&(r=i,h=n,l=e=t.naturalWidth,u=o=t.naturalHeight),e=e||0,o=o||0,r=r||0,h=h||0,l=l||0,u=u||0,f={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:f,preserveAspectRatio:"xMidYMid slice"},St(e,l)&&St(o,u)||(f.preserveAspectRatio="none");var a="";l/=e,u/=o,(r!==0||h!==0)&&(a+=" translate("+r+", "+h+")"),(l!==1||u!==1)&&(a+=" scale("+l+", "+u+")"),(i!==0||n!==0)&&(a+=" translate("+-i+", "+-n+")"),(i!==0||n!==0||e!==t.naturalWidth||o!==t.naturalHeight)&&(t="CLIP"+s.wm++,r=kn(this,"clipPath",{id:t}),r.appendChild(kn(this,"rect",{x:i,y:n,width:e,height:o})),this.rm.appendChild(r),f["clip-path"]="url(#"+t+")"),Qu(this,"image",f,this.vh,a),this.addElement("image",f)},B.fill=function(){D0(this,"fill",this.path,this.vh)},B.Lg=function(){this.Qp?this.clip():this.fill()},B.fillRect=function(t,i,n,e){Ov(this,"fill",[t,i,n,e],this.vh)},B.fillText=function(t,i,n){t=[t,i,n],i=this.textAlign,i==="left"?i="start":i==="right"?i="end":i==="center"&&(i="middle"),i={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i},Qu(this,"fill",i,this.vh),this.addElement("text",i,t[0])},B.lineTo=function(t,i){this.path.push(["L",t,i])},B.moveTo=function(t,i){this.path.push(["M",t,i])},B.quadraticCurveTo=function(t,i,n,e){this.path.push(["Q",t,i,n,e])},B.rect=function(t,i,n,e){this.path.push(["M",t,i],["L",t+n,i],["L",t+n,i+e],["L",t,i+e],["z"])},B.restore=function(){this.vh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.Mn=t.Mn,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},B.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Mn:this.Mn,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],i=0;i<this.path.length;i++)t.push(this.path[i]);this.stack.push(t),this.stack.push(this.vh.copy())},B.setTransform=function(t,i,n,e,o,r){t===1&&i===0&&n===0&&e===1&&o===0&&r===0||fs(this,t,i,n,e,o,r)},B.scale=function(t,i){this.vh.scale(t,i)},B.translate=function(t,i){this.vh.translate(t,i)},B.transform=function(){},B.stroke=function(){D0(this,"stroke",this.path,this.vh)},B.Kj=function(){this.Qp||this.stroke()},B.strokeRect=function(t,i,n,e){Ov(this,"stroke",[t,i,n,e],this.vh)};function kn(t,i,n,e){if(t=t.document.createElementNS(t.iJ,i),s.Pa(n))for(var o in n)t.setAttributeNS(o==="href"?"http://www.w3.org/1999/xlink":"",o,n[o]);return e!==void 0&&(t.textContent=e),t}B.addElement=function(t,i,n){return t=kn(this,t,i,n),0<this.qf.length?this.qf[this.qf.length-1].appendChild(t):this.rm.appendChild(t),this.Rx=t};function Qu(t,i,n,e,o){t.globalAlpha!==1&&(n.opacity=t.globalAlpha),i==="fill"?(t.fillStyle instanceof Yu?n.fill=Gv(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+i[1]+","+i[2]+","+i[3]+")",n["fill-opacity"]=i[4]),n.fill=t.fillStyle),n.stroke="none"):i==="stroke"&&(n.fill="none",t.strokeStyle instanceof Yu?n.stroke=Gv(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",n["stroke-opacity"]=i[4]),n.stroke=t.strokeStyle),n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),t=e.Vb,t="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",o!==void 0&&(t+=o),n.transform=t}function Gv(t,i){var n="GRAD"+s.wm++,e;if(i.type==="linear")e=kn(t,"linearGradient",{x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(i.type==="radial")e=kn(t,"radialGradient",{x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2,r1:i.r1,r2:i.r2,id:n});else if(i.type==="pattern"){var o=i.pattern;e={width:o.width,height:o.height,id:n,patternUnits:"userSpaceOnUse"};var r="";o instanceof HTMLCanvasElement&&(r=o.toDataURL()),o instanceof HTMLImageElement&&(r=o.src),o={x:0,y:0,width:o.width,height:o.height,href:r},e=kn(t,"pattern",e),e.appendChild(kn(t,"image",o))}else throw Error("invalid gradient");for(var o=i.KE,r=o.length,h=[],l=0;l<r;l++){var f=o[l],u=f.color,f={offset:f.offset,"stop-color":u};/^rgba\(/.test(u)&&(u=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(u),f["stop-color"]="rgb("+u[1]+","+u[2]+","+u[3]+")",f["stop-opacity"]=u[4]),h.push(f)}for(h.sort(function(a,p){return a.offset>p.offset?1:-1}),l=0;l<r;l++)e.appendChild(kn(t,"stop",h[l]));return t.rm.appendChild(e),"url(#"+n+")"}function Ov(t,i,n,e){n={x:n[0],y:n[1],width:n[2],height:n[3]},Qu(t,i,n,e),t.addElement("rect",n)}function D0(t,i,n,e){for(var o=[],r=0;r<n.length;r++){var h=s.Vl(n[r]),l=[h.shift()];if(l[0]==="A")l.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)l.push(h.shift()+","+h.shift());o.push(l.join(" "))}n={d:o.join(" ")},Qu(t,i,n,e),i==="clipPath"?(i="CLIP"+s.wm++,e=kn(t,"clipPath",{id:i}),e.appendChild(kn(t,"path",n)),t.rm.appendChild(e),0<t.qf.length&&t.qf[t.qf.length-1].setAttributeNS(null,"clip-path","url(#"+i+")")):t.addElement("path",n)}function fs(t,i,n,e,o,r,h){var l=new Gh;l.Vb=[i,n,e,o,r,h],i={},Qu(t,"g",i,l),l=t.addElement("g",i),t.qf.push(l)}B.fb=function(){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var t="SHADOW"+s.wm++,i=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n,e,o,r,h;n=kn(this,"feGaussianBlur",{in:"SourceAlpha",result:"blur",SL:this.shadowBlur/2}),e=kn(this,"feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),o=kn(this,"feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),r=kn(this,"feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),h=kn(this,"feMerge",{}),h.appendChild(kn(this,"feMergeNode",{in:"offsetBlur"})),h.appendChild(kn(this,"feMergeNode",{in:"SourceGraphic"})),i.appendChild(n),i.appendChild(e),i.appendChild(o),i.appendChild(r),i.appendChild(h),0<this.qf.length&&this.qf[this.qf.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},B.KB=function(t,i,n){this.rt=t,this.st=i,this.Eg=n},B.pm=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},B.eo=function(){this.shadowOffsetX=this.rt,this.shadowOffsetY=this.st,this.shadowBlur=this.Eg},B.zx=function(){return!1},B.wx=function(){},B.Ke=function(){},B.yy=function(){},qu.prototype.rotate=function(){};function Oo(t,i){this.ownerDocument=i===void 0?document:i;var n=this.ownerDocument.createElement("canvas");n.tabIndex=0,this.Od=n,this.Gk=new _i(n),n.aa=t,Object.seal(this)}B=Oo.prototype,B.toDataURL=function(t,i){return this.Od.toDataURL(t,i)},B.getBoundingClientRect=function(){return this.Od.getBoundingClientRect()},B.focus=function(){return this.Od.focus()},B.addEventListener=function(t,i,n){this.Od.addEventListener(t,i,n)},B.removeEventListener=function(t,i,n){this.Od.removeEventListener(t,i,n)},s.defineProperty(Oo,{width:"width"},function(){return this.Od.width},function(t){this.Od.width=t}),s.defineProperty(Oo,{height:"height"},function(){return this.Od.height},function(t){this.Od.height=t}),s.u(Oo,{style:"style"},function(){return this.Od.style});function _i(t){t.getContext&&t.getContext("2d")||s.k("Browser does not support HTML Canvas Element"),this.ua=t.getContext("2d"),this.Wy=this.Yy=this.Xy="",this.fr=!1,this.Eg=this.st=this.rt=0,Object.seal(this)}_i.prototype.yy=function(t){this.ua.PA=t},s.defineProperty(_i,{fillStyle:"fillStyle"},function(){return this.ua.fillStyle},function(t){this.Wy!==t&&(this.Wy=this.ua.fillStyle=t)}),s.defineProperty(_i,{font:"font"},function(){return this.ua.font},function(t){this.Xy!==t&&(this.Xy=this.ua.font=t)}),s.defineProperty(_i,{globalAlpha:"globalAlpha"},function(){return this.ua.globalAlpha},function(t){this.ua.globalAlpha=t}),s.defineProperty(_i,{lineCap:"lineCap"},function(){return this.ua.lineCap},function(t){this.ua.lineCap=t}),s.defineProperty(_i,{Mn:"lineDashOffset"},function(){return this.ua.Mn},function(t){this.ua.Mn=t}),s.defineProperty(_i,{lineJoin:"lineJoin"},function(){return this.ua.lineJoin},function(t){this.ua.lineJoin=t}),s.defineProperty(_i,{lineWidth:"lineWidth"},function(){return this.ua.lineWidth},function(t){this.ua.lineWidth=t}),s.defineProperty(_i,{miterLimit:"miterLimit"},function(){return this.ua.miterLimit},function(t){this.ua.miterLimit=t}),s.defineProperty(_i,{shadowBlur:"shadowBlur"},function(){return this.ua.shadowBlur},function(t){this.ua.shadowBlur=t}),s.defineProperty(_i,{shadowColor:"shadowColor"},function(){return this.ua.shadowColor},function(t){this.ua.shadowColor=t}),s.defineProperty(_i,{shadowOffsetX:"shadowOffsetX"},function(){return this.ua.shadowOffsetX},function(t){this.ua.shadowOffsetX=t}),s.defineProperty(_i,{shadowOffsetY:"shadowOffsetY"},function(){return this.ua.shadowOffsetY},function(t){this.ua.shadowOffsetY=t}),s.defineProperty(_i,{strokeStyle:"strokeStyle"},function(){return this.ua.strokeStyle},function(t){this.Yy!==t&&(this.Yy=this.ua.strokeStyle=t)}),s.defineProperty(_i,{textAlign:"textAlign"},function(){return this.ua.textAlign},function(t){this.ua.textAlign=t}),s.defineProperty(_i,{PA:"imageSmoothingEnabled"},function(){return this.ua.PA},function(t){this.ua.PA=t}),B=_i.prototype,B.arc=function(t,i,n,e,o,r){this.ua.arc(t,i,n,e,o,r)},B.beginPath=function(){this.ua.beginPath()},B.bezierCurveTo=function(t,i,n,e,o,r){this.ua.bezierCurveTo(t,i,n,e,o,r)},B.clearRect=function(t,i,n,e){this.ua.clearRect(t,i,n,e)},B.clip=function(){this.ua.clip()},B.closePath=function(){this.ua.closePath()},B.createLinearGradient=function(t,i,n,e){return this.ua.createLinearGradient(t,i,n,e)},B.createPattern=function(t,i){return this.ua.createPattern(t,i)},B.createRadialGradient=function(t,i,n,e,o,r){return this.ua.createRadialGradient(t,i,n,e,o,r)},B.drawImage=function(t,i,n,e,o,r,h,l,u){e===void 0?this.ua.drawImage(t,i,n):this.ua.drawImage(t,i,n,e,o,r,h,l,u)},B.fill=function(){this.ua.fill()},B.fillRect=function(t,i,n,e){this.ua.fillRect(t,i,n,e)},B.fillText=function(t,i,n){this.ua.fillText(t,i,n)},B.getImageData=function(t,i,n,e){return this.ua.getImageData(t,i,n,e)},B.lineTo=function(t,i){this.ua.lineTo(t,i)},B.measureText=function(t){return this.ua.measureText(t)},B.moveTo=function(t,i){this.ua.moveTo(t,i)},B.quadraticCurveTo=function(t,i,n,e){this.ua.quadraticCurveTo(t,i,n,e)},B.rect=function(t,i,n,e){this.ua.rect(t,i,n,e)},B.restore=function(){this.ua.restore()},_i.prototype.rotate=function(t){this.ua.rotate(t)},B=_i.prototype,B.save=function(){this.ua.save()},B.setTransform=function(t,i,n,e,o,r){this.ua.setTransform(t,i,n,e,o,r)},B.scale=function(t,i){this.ua.scale(t,i)},B.stroke=function(){this.ua.stroke()},B.transform=function(t,i,n,e,o,r){t===1&&i===0&&n===0&&e===1&&o===0&&r===0||this.ua.transform(t,i,n,e,o,r)},B.translate=function(t,i){this.ua.translate(t,i)},B.Lg=function(t){if(t instanceof yt&&t.type===ae){var i=t.wo;t=t.az,t>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.fr?this.clip():this.fill(),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.fr?this.clip():this.fill()},B.Kj=function(){this.fr||this.stroke()},s.defineProperty(_i,{Qp:"clipInsteadOfFill"},function(){return this.fr},function(t){this.fr=t}),B=_i.prototype,B.KB=function(t,i,n){this.rt=t,this.st=i,this.Eg=n},B.pm=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},B.eo=function(){this.shadowOffsetX=this.rt,this.shadowOffsetY=this.st,this.shadowBlur=this.Eg},B.zx=function(t,i){var n=this.ua;if(n.setLineDash!==void 0)n.setLineDash(t),n.lineDashOffset=i;else if(n.webkitLineDash!==void 0)n.webkitLineDash=t,n.webkitLineDashOffset=i;else return!1;return!0},B.wx=function(){var t=this.ua;t.setLineDash!==void 0?(t.setLineDash(s.no),t.lineDashOffset=0):t.webkitLineDash!==void 0&&(t.webkitLineDash=s.no,t.webkitLineDashOffset=0)},B.Ke=function(t){t&&(this.Xy=""),this.Wy=this.Yy=""};var rt=(Math.sqrt(2)-1)/3*4,Js=new D(0,0).Ha(),F0=new O(0,0,0,0).Ha(),Zu=new xt(0,0,0,0).Ha(),ux=new xt(2,2,2,2).Ha(),fx=new D(6,6).Ha(),ax=new D(-1/0,-1/0).Ha(),px=new D(1/0,1/0).Ha(),Xu=new lt(0,0).Ha(),L0=new lt(1,1).Ha(),Wu=new lt(6,6).Ha(),A0=new lt(8,8).Ha(),yx=new lt(10,10).Ha(),cx=new lt(1/0,1/0).Ha(),vx=new D(NaN,NaN).Ha(),Vv=new lt(NaN,NaN).Ha(),dx=new O(NaN,NaN,NaN,NaN).Ha(),Hv=new P(.156,.156).Ha(),Kv=new P(.844,.844).Ha(),I0=new Bn,No=new Bn,Uv=null;function Ys(t){if(0>=t)return 0;var i=Uv;if(i===null){for(var i=[],n=0;2e3>=n;n++)i[n]=Math.sqrt(n);Uv=i}return 1>t?(n=1/t,2e3>=n?1/i[n|0]:Math.sqrt(t)):2e3>=t?i[t|0]:Math.sqrt(t)}function $(t,i){var n=t-i;return .5>n&&-.5<n}function St(t,i){var n=t-i;return 5e-8>n&&-5e-8<n}function wn(t,i,n,e,o,r,h){0>=o&&(o=1e-6);var l=0,u=0,f=0,a=0;if(t<n?(u=t,l=n):(u=n,l=t),i<e?(a=i,f=e):(a=e,f=i),t===n)return a<=h&&h<=f&&t-o<=r&&r<=t+o;if(i===e)return u<=r&&r<=l&&i-o<=h&&h<=i+o;if(l+=o,u-=o,u<=r&&r<=l&&(f+=o,a-=o,a<=h&&h<=f))if(l-u>f-a)if(t-n>o||n-t>o){if(r=(e-i)/(n-t)*(r-t)+i,r-o<=h&&h<=r+o)return!0}else return!0;else if(i-e>o||e-i>o){if(h=(n-t)/(e-i)*(h-i)+t,h-o<=r&&r<=h+o)return!0}else return!0;return!1}function la(t,i,n,e,o,r,h,l,u,f,a,p){if(wn(t,i,h,l,p,n,e)&&wn(t,i,h,l,p,o,r))return wn(t,i,h,l,p,f,a);var y=(t+n)/2,c=(i+e)/2,v=(n+o)/2,d=(e+r)/2;o=(o+h)/2,r=(r+l)/2,e=(y+v)/2,n=(c+d)/2;var v=(v+o)/2,d=(d+r)/2,g=(e+v)/2,m=(n+d)/2;return la(t,i,y,c,e,n,g,m,u,f,a,p)||la(g,m,v,d,o,r,h,l,u,f,a,p)}function Bl(t,i,n,e,o,r,h,l,u,f){if(wn(t,i,h,l,u,n,e)&&wn(t,i,h,l,u,o,r))fn(f,t,i,0,0),fn(f,h,l,0,0);else{var a=(t+n)/2,p=(i+e)/2,y=(n+o)/2,c=(e+r)/2;o=(o+h)/2,r=(r+l)/2,e=(a+y)/2,n=(p+c)/2;var y=(y+o)/2,c=(c+r)/2,v=(e+y)/2,d=(n+c)/2;Bl(t,i,a,p,e,n,v,d,u,f),Bl(v,d,y,c,o,r,h,l,u,f)}}function Vn(t,i,n,e,o,r,h,l,u,f){if(wn(t,i,h,l,u,n,e)&&wn(t,i,h,l,u,o,r))f.length===0&&(f.push(t),f.push(i)),f.push(h),f.push(l);else{var a=(t+n)/2,p=(i+e)/2,y=(n+o)/2,c=(e+r)/2;o=(o+h)/2,r=(r+l)/2,e=(a+y)/2,n=(p+c)/2;var y=(y+o)/2,c=(c+r)/2,v=(e+y)/2,d=(n+c)/2;Vn(t,i,a,p,e,n,v,d,u,f),Vn(v,d,y,c,o,r,h,l,u,f)}}function Vr(t,i,n,e,o,r,h,l,u,f,a,p,y,c){var v=1-u;t=t*v+n*u,i=i*v+e*u,n=n*v+o*u,e=e*v+r*u,o=o*v+h*u,r=r*v+l*u,l=t*v+n*u,h=i*v+e*u,n=n*v+o*u,e=e*v+r*u,f.x=t,f.y=i,a.x=l,a.y=h,p.x=l*v+n*u,p.y=h*v+e*u,y.x=n,y.y=e,c.x=o,c.y=r}function B0(t,i,n,e,o,r,h,l,u,f){if(wn(t,i,o,r,f,n,e))return wn(t,i,o,r,f,l,u);var a=(t+n)/2,p=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var y=(a+n)/2,c=(p+e)/2;return B0(t,i,a,p,y,c,h,l,u,f)||B0(y,c,n,e,o,r,h,l,u,f)}function E0(t,i,n,e,o,r,h,l){if(wn(t,i,o,r,h,n,e))fn(l,t,i,0,0),fn(l,o,r,0,0);else{var u=(t+n)/2,f=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var a=(u+n)/2,p=(f+e)/2;E0(t,i,u,f,a,p,h,l),E0(a,p,n,e,o,r,h,l)}}function El(t,i,n,e,o,r,h,l){if(wn(t,i,o,r,h,n,e))l.length===0&&(l.push(t),l.push(i)),l.push(o),l.push(r);else{var u=(t+n)/2,f=(i+e)/2;n=(n+o)/2,e=(e+r)/2;var a=(u+n)/2,p=(f+e)/2;El(t,i,u,f,a,p,h,l),El(a,p,n,e,o,r,h,l)}}function $u(t,i,n,e,o,r,h,l,u,f,a,p,y,c){if(0>=y&&(y=1e-6),wn(t,i,h,l,y,n,e)&&wn(t,i,h,l,y,o,r)){var v=(t-h)*(f-p)-(i-l)*(u-a);if(v===0)return!1;if(y=((t*l-i*h)*(u-a)-(t-h)*(u*p-f*a))/v,v=((t*l-i*h)*(f-p)-(i-l)*(u*p-f*a))/v,(u>a?u-a:a-u)<(f>p?f-p:p-f)){if(h=u=0,i<l?(u=i,h=l):(u=l,h=i),v<u||v>h)return!1}else if(t<h?u=t:(u=h,h=t),y<u||y>h)return!1;return c.x=y,c.y=v,!0}var v=(t+n)/2,d=(i+e)/2;n=(n+o)/2,e=(e+r)/2,o=(o+h)/2,r=(r+l)/2;var g=(v+n)/2,m=(d+e)/2;n=(n+o)/2,e=(e+r)/2;var w=(g+n)/2,M=(m+e)/2,S=(a-u)*(a-u)+(p-f)*(p-f),F=!1;return $u(t,i,v,d,g,m,w,M,u,f,a,p,y,c)&&(i=(c.x-u)*(c.x-u)+(c.y-f)*(c.y-f),i<S&&(S=i,F=!0)),t=c.x,v=c.y,$u(w,M,n,e,o,r,h,l,u,f,a,p,y,c)&&(i=(c.x-u)*(c.x-u)+(c.y-f)*(c.y-f),i<S?F=!0:(c.x=t,c.y=v)),F}function _u(t,i,n,e,o,r,h,l,u,f,a,p,y){var c=0;if(0>=y&&(y=1e-6),wn(t,i,h,l,y,n,e)&&wn(t,i,h,l,y,o,r)){if(y=(t-h)*(f-p)-(i-l)*(u-a),y===0)return c;var v=((t*l-i*h)*(u-a)-(t-h)*(u*p-f*a))/y,d=((t*l-i*h)*(f-p)-(i-l)*(u*p-f*a))/y;if(v>=a)return c;if((u>a?u-a:a-u)<(f>p?f-p:p-f)){if(t=u=0,i<l?(u=i,t=l):(u=l,t=i),d<u||d>t)return c}else if(t<h?(u=t,t=h):u=h,v<u||v>t)return c;0<y?c++:0>y&&c--}else{var v=(t+n)/2,d=(i+e)/2,g=(n+o)/2,m=(e+r)/2;o=(o+h)/2,r=(r+l)/2,e=(v+g)/2,n=(d+m)/2;var g=(g+o)/2,m=(m+r)/2,w=(e+g)/2,M=(n+m)/2,c=c+_u(t,i,v,d,e,n,w,M,u,f,a,p,y),c=c+_u(w,M,g,m,o,r,h,l,u,f,a,p,y)}return c}function qs(t,i,n,e,o,r,h){if(St(t,n)){var l=0;return n=0,i<e?(l=i,n=e):(l=e,n=i),e=r,e<l?(h.x=t,h.y=l,!1):e>n?(h.x=t,h.y=n,!1):(h.x=t,h.y=e,!0)}return St(i,e)?(t<n?l=t:(l=n,n=t),e=o,e<l?(h.x=l,h.y=i,!1):e>n?(h.x=n,h.y=i,!1):(h.x=e,h.y=i,!0)):(l=((t-o)*(t-n)+(i-r)*(i-e))/((n-t)*(n-t)+(e-i)*(e-i)),-5e-6>l?(h.x=t,h.y=i,!1):1.000005<l?(h.x=n,h.y=e,!1):(h.x=t+l*(n-t),h.y=i+l*(e-i),!0))}function ur(t,i,n,e,o,r,h,l,u){return $(t,n)&&$(i,e)?(u.x=t,u.y=i,!1):St(o,h)?St(t,n)?(qs(t,i,n,e,o,r,u),!1):(r=(e-i)/(n-t)*(o-t)+i,qs(t,i,n,e,o,r,u)):(l=(l-r)/(h-o),St(t,n)?(r=l*(t-o)+r,n=h=0,i<e?(h=i,n=e):(h=e,n=i),r<h?(u.x=t,u.y=h,!1):r>n?(u.x=t,u.y=n,!1):(u.x=t,u.y=r,!0)):(h=(e-i)/(n-t),St(l,h)?(qs(t,i,n,e,o,r,u),!1):(o=(h*t-l*o+r-i)/(h-l),St(h,0)?(t<n?h=t:(h=n,n=t),o<h?(u.x=h,u.y=i,!1):o>n?(u.x=n,u.y=i,!1):(u.x=o,u.y=i,!0)):(r=h*(o-t)+i,qs(t,i,n,e,o,r,u)))))}function fr(t,i,n,e,o,r,h,l,u){var f=1e21,a=t,p=i;if(ur(t,i,t,e,o,r,h,l,u)){var y=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r);y<f&&(f=y,a=u.x,p=u.y)}return ur(n,i,n,e,o,r,h,l,u)&&(y=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),y<f&&(f=y,a=u.x,p=u.y)),ur(t,i,n,i,o,r,h,l,u)&&(y=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),y<f&&(f=y,a=u.x,p=u.y)),ur(t,e,n,e,o,r,h,l,u)&&(y=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),y<f&&(f=y,a=u.x,p=u.y)),u.x=a,u.y=p,1e21>f}function Qs(t,i,n,e,o,r,h,l,u){n=t-n;var f=o-h,a=h=0;return n===0||f===0?n===0?(l=(r-l)/f,h=t,a=l*h+(r-l*o)):(e=(i-e)/n,h=o,a=e*h+(i-e*t)):(e=(i-e)/n,l=(r-l)/f,t=i-e*t,h=(r-l*o-t)/(e-l),a=e*h+t),u.m(h,a),u}function ua(t,i,n){var e=i.x,o=i.y,r=n.x,h=n.y,l=t.left,u=t.right,f=t.top,a=t.bottom;return e===r?(r=t=0,o<h?(t=o,r=h):(t=h,r=o),l<=e&&e<=u&&t<=a&&r>=f):o===h?(e<r?t=e:(t=r,r=e),f<=o&&o<=a&&t<=u&&r>=l):!!(t.Ia(i)||t.Ia(n)||fa(l,f,u,f,e,o,r,h)||fa(u,f,u,a,e,o,r,h)||fa(u,a,l,a,e,o,r,h)||fa(l,a,l,f,e,o,r,h))}function fa(t,i,n,e,o,r,h,l){return 0>=aa(t,i,n,e,o,r)*aa(t,i,n,e,h,l)&&0>=aa(o,r,h,l,t,i)*aa(o,r,h,l,n,e)}function aa(t,i,n,e,o,r){return n-=t,e-=i,t=o-t,i=r-i,r=t*e-i*n,r===0&&(r=t*n+i*e,0<r&&(r=(t-n)*n+(i-e)*e,0>r&&(r=0))),0>r?-1:0<r?1:0}function bu(t){return 0>t&&(t+=360),360<=t&&(t-=360),t}function Jv(t,i,n,e){var o=Math.PI;e||(i*=o/180,n*=o/180);var r=i>n?-1:1;e=[];var h=o/2,l=i;if(n=Math.min(2*o,Math.abs(n-i)),1e-5>n)return i=l+r*Math.min(n,h),r=0+t*Math.cos(l),l=0+t*Math.sin(l),h=0+t*Math.cos(i),t=0+t*Math.sin(i),i=(r+h)/2,n=(l+t)/2,e.push([r,l,i,n,i,n,h,t]),e;for(;1e-5<n;){i=l+r*Math.min(n,h);var o=(i-l)/2,a=t*Math.cos(o),f=t*Math.sin(o),p=-f,y=a*a+p*p,u=y+a*a+p*f,y=4/3*(Math.sqrt(2*y*u)-u)/(a*f-p*a),f=a-y*p,a=p+y*a,p=-a,y=o+l,o=Math.cos(y),y=Math.sin(y);e.push([0+t*Math.cos(l),0+t*Math.sin(l),0+f*o-a*y,0+f*y+a*o,0+f*o-p*y,0+f*y+p*o,0+t*Math.cos(i),0+t*Math.sin(i)]),n-=Math.abs(i-l),l=i}return e}function tf(t,i,n,e,o,r,h){n=Math.floor((t-n)/o)*o+n,e=Math.floor((i-e)/r)*r+e;var l=n;n+o-t<o/2&&(l=n+o),t=e,e+r-i<r/2&&(t=e+r),h.m(l,t)}function Yv(t,i){var n=Math.max(t,i),e=Math.min(t,i),o=1,r=1;do o=n%e,n=r=e,e=o;while(0<o);return r}function gx(t,i,n,e){var o=0>n,r=0>e,h=0,l=h=0;t<i?(h=1,l=0):(h=0,l=1);var a=0,u=0,p=0,f=0,a=h===0?t:i,p=h===0?n:e;if((h===0?o:r)&&(p=-p),h=l,u=h===0?t:i,f=h===0?n:e,(h===0?o:r)&&(f=-f),t=t=0,0<f)if(0<p){for(i=a*a,t=u*u,a*=p,n=u*f,e=-t+n,o=-t+Math.sqrt(a*a+n*n),u=e,r=0;9999999999>r&&(u=.5*(e+o),!(u===e||u===o));++r)if(l=a/(u+i),h=n/(u+t),l=l*l+h*h-1,0<l)e=u;else if(0>l)o=u;else break;p=i*p/(u+i)-p,f=t*f/(u+t)-f,t=Math.sqrt(p*p+f*f)}else t=Math.abs(f-u);else f=a*a-u*u,t=a*p,t<f?(f=t/f,t=u*Math.sqrt(Math.abs(1-f*f)),p=a*f-p,t=Math.sqrt(p*p+t*t)):t=Math.abs(p-a);return t}function et(t){1<arguments.length&&s.k("Geometry constructor can take at most one optional argument, the Geometry type."),s.oc(this),this.P=!1,t===void 0&&(t=He),this.na=t,this.Hb=this.Ab=this.Oc=this.Ec=0,this.Vj=new E(Pi),this.Ov=this.Vj.F,this.zv=new O().freeze(),this.hb=!0,this.Vq=this.qo=null,this.Wq=NaN,this.hi=gi,this.ii=$i,this.So=this.Uo=NaN,this.Ki=ii}s.ga("Geometry",et),s.ni(et),et.prototype.copy=function(){var t=new et;t.na=this.na,t.Ec=this.Ec,t.Oc=this.Oc,t.Ab=this.Ab,t.Hb=this.Hb;for(var i=this.Vj.n,n=i.length,e=t.Vj,o=0;o<n;o++){var r=i[o].copy();e.add(r)}return t.Ov=this.Ov,t.zv.assign(this.zv),t.hb=this.hb,t.qo=this.qo,t.Vq=this.Vq,t.Wq=this.Wq,t.hi=this.hi.S(),t.ii=this.ii.S(),t.Uo=this.Uo,t.So=this.So,t.Ki=this.Ki,t};var Yi;et.Line=Yi=s.p(et,"Line",0);var so;et.Rectangle=so=s.p(et,"Rectangle",1);var Vo;et.Ellipse=Vo=s.p(et,"Ellipse",2);var He;et.Path=He=s.p(et,"Path",3),et.prototype.Ha=function(){return this.freeze(),Object.freeze(this),this},et.prototype.freeze=function(){this.P=!0;var t=this.fc;t.freeze();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].freeze();return this},et.prototype.Qa=function(){Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this.P=!1;var t=this.fc;t.Qa();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].Qa();return this},et.prototype.equalsApprox=et.prototype.Qc=function(t){if(!(t instanceof et))return!1;if(this.type!==t.type)return this.type===Yi&&t.type===He?qv(this,t):t.type===Yi&&this.type===He?qv(t,this):!1;if(this.type===He){var i=this.fc.n;t=t.fc.n;var n=i.length;if(n!==t.length)return!1;for(var e=0;e<n;e++)if(!i[e].Qc(t[e]))return!1;return!0}return $(this.ha,t.ha)&&$(this.da,t.da)&&$(this.C,t.C)&&$(this.D,t.D)};function qv(t,i){if(t.type!==Yi||i.type!==He)return!1;if(i.fc.count===1){var n=i.fc.fa(0);if(n.yb.count===1&&$(t.ha,n.ha)&&$(t.da,n.da)&&(n=n.yb.fa(0),n.type===ue&&$(t.C,n.C)&&$(t.D,n.D)))return!0}return!1}var Qv;et.stringify=Qv=function(t){return t.toString()},et.prototype.ic=function(t){t.Je===et?this.type=t:s.Lj(this,t)},et.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Yi:return 0>t?"M"+this.ha.toString()+" "+this.da.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ha.toFixed(t)+" "+this.da.toFixed(t)+"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);case so:var i=new O(this.ha,this.da,0,0);return i.KG(this.C,this.D,0,0),0>t?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+i.x.toFixed(t)+" "+i.y.toFixed(t)+"H"+i.right.toFixed(t)+"V"+i.bottom.toFixed(t)+"H"+i.left.toFixed(t)+"z";case Vo:if(i=new O(this.ha,this.da,0,0),i.KG(this.C,this.D,0,0),0>t){var n=i.left.toString()+" "+(i.y+i.height/2).toString(),e=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+n+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+e+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+n}return n=i.left.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),e=i.right.toFixed(t)+" "+(i.y+i.height/2).toFixed(t),"M"+n+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+e+"A"+(i.width/2).toFixed(t)+" "+(i.height/2).toFixed(t)+" 0 0 1 "+n;case He:for(var i="",n=this.fc.n,e=n.length,o=0;o<e;o++){var r=n[o];0<o&&(i+=" x "),r.wu&&(i+="F "),i+=r.toString(t)}return i;default:return this.type.toString()}},et.fillPath=function(t){typeof t!="string"&&s.Fd(t,"string",et,"fillPath:str"),t=t.split(/[Xx]/);for(var i=t.length,o="",n=0;n<i;n++)var e=t[n],o=e.match(/[Ff]/)!==null?n===0?o+e:o+("X"+(e[0]===" "?"":" ")+e):o+((n===0?"":"X ")+"F"+(e[0]===" "?"":" ")+e);return o};var zl;et.parse=zl=function(t,i){function n(){return g>=F-1?!0:u[g+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)!==null}function e(){return g++,u[g]}function o(){var _=new D(parseFloat(e()),parseFloat(e()));return m===m.toLowerCase()&&(_.x=S.x+_.x,_.y=S.y+_.y),_}function r(){return S=o()}function h(){return M=o()}function l(){var _=w.toLowerCase();return _!=="c"&&_!=="s"&&_!=="q"&&_!=="t"?S:new D(2*S.x-M.x,2*S.y-M.y)}i===void 0&&(i=!1),typeof t!="string"&&s.Fd(t,"string",et,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");for(var u=t.split(" "),f=0;f<u.length;f++){var a=u[f];if(a.match(/(\.[0-9]*)(\.)/gm)!==null){for(var p=[],y="",c=!1,v=0;v<a.length;v++){var d=a[v];d!=="."||c?d==="."?(p.push(y),y="."):y+=d:(c=!0,y+=d)}for(p.push(y),u.splice(f,1),a=0;a<p.length;a++)u.splice(f+a,0,p[a]);f+=p.length-1}}for(var g=-1,m="",w="",a=new D(0,0),M=new D(0,0),S=new D(0,0),F=u.length,p=s.s(),c=y=!1,v=!0,f=null;!(g>=F-1);)if(w=m,m=e(),m!=="")switch(m.toUpperCase()){case"X":v=!0,c=y=!1;break;case"M":for(f=r(),p.Yb===null||v===!0?(j(p,f.x,f.y,y,!1,!c),v=!1):p.moveTo(f.x,f.y),a=S;!n();)f=r(),p.lineTo(f.x,f.y);break;case"L":for(;!n();)f=r(),p.lineTo(f.x,f.y);break;case"H":for(;!n();)S=f=new D((m===m.toLowerCase()?S.x:0)+parseFloat(e()),S.y),p.lineTo(S.x,S.y);break;case"V":for(;!n();)S=f=new D(S.x,(m===m.toLowerCase()?S.y:0)+parseFloat(e())),p.lineTo(S.x,S.y);break;case"C":for(;!n();){var d=o(),C=h(),f=r();T(p,d.x,d.y,C.x,C.y,f.x,f.y)}break;case"S":for(;!n();)d=l(),C=h(),f=r(),T(p,d.x,d.y,C.x,C.y,f.x,f.y);break;case"Q":for(;!n();)C=h(),f=r(),_a(p,C.x,C.y,f.x,f.y);break;case"T":for(;!n();)M=C=l(),f=r(),_a(p,C.x,C.y,f.x,f.y);break;case"B":for(;!n();){var f=parseFloat(e()),d=parseFloat(e()),C=parseFloat(e()),G=parseFloat(e()),H=parseFloat(e()),U=H,X=!1;n()||(U=parseFloat(e()),n()||(X=parseFloat(e())!==0)),m===m.toLowerCase()&&(C+=S.x,G+=S.y),p.arcTo(f,d,C,G,H,U,X)}break;case"A":for(;!n();)d=Math.abs(parseFloat(e())),C=Math.abs(parseFloat(e())),G=parseFloat(e()),H=!!parseFloat(e()),U=!!parseFloat(e()),f=r(),zx(p,d,C,G,H,U,f.x,f.y);break;case"Z":f=p.o.fc.n[p.o.fc.length-1],W(p),S=a;break;case"F":for(d="",f=1;u[g+f];)if(u[g+f].match(/[Uu]/)!==null)f++;else if(u[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)===null)f++;else{d=u[g+f];break}d.match(/[Mm]/)?y=!0:Ex(p);break;case"U":for(d="",f=1;u[g+f];)if(u[g+f].match(/[Ff]/)!==null)f++;else if(u[g+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)===null)f++;else{d=u[g+f];break}d.match(/[Mm]/)?c=!0:p.fb(!1)}if(a=p.o,s.q(p),i)for(p=a.fc.i;p.next();)f=p.value,f.wu=!0;return a};function Zv(t,i){for(var n=t.length,e=s.K(),o=0;o<n;o++){var r=t[o];e.x=r[0],e.y=r[1],i.nb(e),r[0]=e.x,r[1]=e.y,e.x=r[2],e.y=r[3],i.nb(e),r[2]=e.x,r[3]=e.y,e.x=r[4],e.y=r[5],i.nb(e),r[4]=e.x,r[5]=e.y,e.x=r[6],e.y=r[7],i.nb(e),r[6]=e.x,r[7]=e.y}s.v(e)}et.prototype.YA=function(){if(this.hb||this.Ov!==this.fc.F)return!0;for(var t=this.fc.n,i=t.length,n=0;n<i;n++)if(t[n].YA())return!0;return!1},et.prototype.computeBounds=function(){this.hb=!1,this.Vq=this.qo=null,this.Wq=NaN,this.Ov=this.fc.F;for(var t=this.fc.n,i=t.length,n=0;n<i;n++){var e=t[n];e.hb=!1;var o=e.yb;e.Mw=o.F;for(var e=o.n,o=e.length,r=0;r<o;r++){var h=e[r];h.hb=!1,h.Kh=null}}t=this.zv,t.Qa(),isNaN(this.Uo)||isNaN(this.So)?t.m(0,0,0,0):t.m(0,0,this.Uo,this.So),Xv(this,t,!1),fn(t,0,0,0,0),t.freeze()},et.prototype.computeBoundsWithoutOrigin=et.prototype.DH=function(){var t=new O;return Xv(this,t,!0),t};function Xv(t,i,n){switch(t.type){case Yi:case so:case Vo:n?i.m(t.Ec,t.Oc,0,0):fn(i,t.Ec,t.Oc,0,0),fn(i,t.Ab,t.Hb,0,0);break;case He:var e=t.fc;t=e.n;for(var e=e.length,o=0;o<e;o++){var r=t[o];n&&o===0?i.m(r.ha,r.da,0,0):fn(i,r.ha,r.da,0,0);for(var h=r.yb.n,l=h.length,u=r.ha,f=r.da,a=0;a<l;a++){var p=h[a];switch(p.type){case ue:case Ke:u=p.C,f=p.D,fn(i,u,f,0,0);break;case ho:Bl(u,f,p.xc,p.Sc,p.Eh,p.Fh,p.C,p.D,.5,i),u=p.C,f=p.D;break;case lo:E0(u,f,p.xc,p.Sc,p.C,p.D,.5,i),u=p.C,f=p.D;break;case qi:case Ue:var y=p.type===qi?Ho(p,r):as(p,r,u,f),c=y.length;if(c===0){u=p.la,f=p.sa,fn(i,u,f,0,0);break}for(var p=null,v=0;v<c;v++)p=y[v],Bl(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,i);p!==null&&(u=p[6],f=p[7]);break;default:s.k("Unknown Segment type: "+p.type)}}}break;default:s.k("Unknown Geometry type: "+t.type)}}et.prototype.normalize=et.prototype.normalize=function(){this.P&&s.ma(this);var t=this.DH();return this.offset(-t.x,-t.y),new D(-t.x,-t.y)},et.prototype.offset=et.prototype.offset=function(t,i){return this.P&&s.ma(this),this.transform(1,0,0,1,t,i),this},et.prototype.scale=et.prototype.scale=function(t,i){return this.P&&s.ma(this),this.transform(t,0,0,i,0,0),this},et.prototype.rotate=et.prototype.rotate=function(t,i,n){this.P&&s.ma(this),i===void 0&&(i=0),n===void 0&&(n=0);var e=s.Wg();return e.reset(),e.rotate(t,i,n),this.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),s.bf(e),this},et.prototype.transform=et.prototype.transform=function(t,i,n,e,o,r){var h=0,l=0;switch(this.type){case Yi:case so:case Vo:h=this.Ec,l=this.Oc,this.Ec=h*t+l*n+o,this.Oc=h*i+l*e+r,h=this.Ab,l=this.Hb,this.Ab=h*t+l*n+o,this.Hb=h*i+l*e+r;break;case He:for(var u=this.fc.n,f=u.length,a=0;a<f;a++){var p=u[a],h=p.ha,l=p.da;p.ha=h*t+l*n+o,p.da=h*i+l*e+r;for(var p=p.yb.n,y=p.length,c=0;c<y;c++){var v=p[c];switch(v.type){case ue:case Ke:h=v.C,l=v.D,v.C=h*t+l*n+o,v.D=h*i+l*e+r;break;case ho:h=v.xc,l=v.Sc,v.xc=h*t+l*n+o,v.Sc=h*i+l*e+r,h=v.Eh,l=v.Fh,v.Eh=h*t+l*n+o,v.Fh=h*i+l*e+r,h=v.C,l=v.D,v.C=h*t+l*n+o,v.D=h*i+l*e+r;break;case lo:h=v.xc,l=v.Sc,v.xc=h*t+l*n+o,v.Sc=h*i+l*e+r,h=v.C,l=v.D,v.C=h*t+l*n+o,v.D=h*i+l*e+r;break;case qi:h=v.la,l=v.sa,v.la=h*t+l*n+o,v.sa=h*i+l*e+r,i!==0&&(h=180*Math.atan2(i,t)/Math.PI,0>h&&(h+=360),v.Ae+=h),0>t&&(v.Ae=180-v.Ae,v.uf=-v.uf),0>e&&(v.Ae=-v.Ae,v.uf=-v.uf),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(i*i+e*e));break;case Ue:h=v.C,l=v.D,v.C=h*t+l*n+o,v.D=h*i+l*e+r,i!==0&&(h=180*Math.atan2(i,t)/Math.PI,0>h&&(h+=360),v.Nj+=h),0>t&&(v.Nj=180-v.Nj,v.gm=!v.gm),0>e&&(v.Nj=-v.Nj,v.gm=!v.gm),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY*=Math.sqrt(i*i+e*e);break;default:s.k("Unknown Segment type: "+v.type)}}}}return this.hb=!0,this},et.prototype.Ia=function(t,i,n,e){var o=t.x,r=t.y,h=this.eb.x-20;t=t.y;for(var l=0,u=0,f=0,a=0,p=0,y=0,c=this.fc.n,v=c.length,d=0;d<v;d++){var g=c[d];if(g.wu){if(n&&g.Ia(o,r,i))return!0;for(var m=g.yb,u=g.ha,f=g.da,w=u,M=f,S=m.n,F=0;F<=m.length;F++){var C,G;switch(F!==m.length?(C=S[F],G=C.type,p=C.C,y=C.D):(G=ue,p=w,y=M),G){case Ke:if(a=pa(o,r,h,t,u,f,w,M),isNaN(a))return!0;l+=a,w=p,M=y;break;case ue:if(a=pa(o,r,h,t,u,f,p,y),isNaN(a))return!0;l+=a;break;case ho:a=_u(u,f,C.xc,C.Sc,C.Eh,C.Fh,p,y,h,t,o,r,.5),l+=a;break;case lo:a=_u(u,f,(u+2*C.xc)/3,(f+2*C.Sc)/3,(2*C.xc+p)/3,(2*C.Sc+y)/3,p,y,h,t,o,r,.5),l+=a;break;case qi:case Ue:G=C.type===qi?Ho(C,g):as(C,g,u,f);var H=G.length;if(H===0){if(a=pa(o,r,h,t,u,f,C.la,C.sa),isNaN(a))return!0;l+=a;break}for(var U=null,X=0;X<H;X++){if(U=G[X],X===0){if(a=pa(o,r,h,t,u,f,U[0],U[1]),isNaN(a))return!0;l+=a}a=_u(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],h,t,o,r,.5),l+=a}U!==null&&(p=U[6],y=U[7]);break;default:s.k("Unknown Segment type: "+C.type)}u=p,f=y}if(l!==0)return!0;l=0}else if(g.Ia(o,r,e?i:i+2))return!0}return l!==0};function pa(t,i,n,e,o,r,h,l){if(wn(o,r,h,l,.05,t,i))return NaN;var u=(t-n)*(r-l);if(u===0)return 0;var f=((t*e-i*n)*(o-h)-(t-n)*(o*l-r*h))/u;if(i=(t*e-i*n)*(r-l)/u,f>=t)return 0;if((o>h?o-h:h-o)<(r>l?r-l:l-r)){if(o=t=0,r<l?(t=r,o=l):(t=l,o=r),i<t||i>o)return 0}else if(o<h?(t=o,o=h):t=h,f<t||f>o)return 0;return 0<u?1:-1}function Wv(t,i,n,e){t=t.fc.n;for(var o=t.length,r=0;r<o;r++)if(t[r].Ia(i,n,e))return!0;return!1}et.prototype.getPointAlongPath=et.prototype.hI=function(t,i){if(0>t?t=0:1<t&&(t=1),i===void 0&&(i=new D),this.type===Yi)return i.m(this.ha+t*(this.C-this.ha),this.da+t*(this.D-this.da)),i;for(var n=this.Hx,e=this.gu,o=n.length,r=this.hu*t,h=0,l=0;l<o;l++)for(var u=e[l],f=u.length,a=0;a<f;a++){var p=u[a];if(h+p>=r)return e=(r-h)/p,n=n[l],l=n[2*a],o=n[2*a+1],i.m(l+(n[2*a+2]-l)*e,o+(n[2*a+3]-o)*e),i;h+=p}return i.m(NaN,NaN),i},et.prototype.getAngleAlongPath=et.prototype.jF=function(t){0>t?t=0:1<t&&(t=1);var i=0;if(this.type===Yi)return i=180*Math.atan2(this.D-this.da,this.C-this.ha)/Math.PI;for(var i=this.Hx,n=this.gu,e=i.length,o=this.hu*t,r=0,h=0;h<e;h++){var l=n[h],u=l.length;for(t=0;t<u;t++){var f=l[t];if(r+f>=o)return i=i[h],i=180*Math.atan2(i[2*t+3]-i[2*t+1],i[2*t+2]-i[2*t])/Math.PI;r+=f}}return NaN},et.prototype.getFractionForPoint=et.prototype.dI=function(t){if(this.type===Yi){var i=this.ha,n=this.da,e=this.C,o=this.D;if(i!==e||n!==o){var r=t.x;t=t.y;var h=0,l=0;return i===e?(n<o?(h=n,l=o):(h=o,l=n),t<=h?h===n?0:1:t>=l?l===n?0:1:Math.abs(t-n)/(l-h)):n===o?(i<e?(h=i,l=e):(h=e,l=i),r<=h?h===i?0:1:r>=l?l===i?0:1:Math.abs(r-i)/(l-h)):((r-i)*(r-i)+(t-n)*(t-n))/((e-i)*(e-i)+(o-n)*(o-n))}}else if(this.type===so){if(i=this.ha,n=this.da,e=this.C,o=this.D,i!==e||n!==o){var h=e-i,l=o-n,u=2*h+2*l,r=t.x;t=t.y,r=Math.min(Math.max(r,i),e),t=Math.min(Math.max(t,n),o);var i=Math.abs(r-i),e=Math.abs(r-e),n=Math.abs(t-n),o=Math.abs(t-o),f=Math.min(i,e,n,o);if(f===n)return r/u;if(f===e)return(h+t)/u;if(f===o)return(2*h+l-r)/u;if(f===i)return(2*h+2*l-t)/u}}else{for(var o=this.Hx,h=this.gu,l=this.hu,u=s.K(),n=1/0,i=e=0,r=o.length,a=f=0,p=0;p<r;p++)for(var y=o[p],c=h[p],v=y.length,d=0;d<v;d+=2){var g=y[d],m=y[d+1];if(d!==0){qs(f,a,g,m,t.x,t.y,u);var w=(u.x-t.x)*(u.x-t.x)+(u.y-t.y)*(u.y-t.y);w<n&&(n=w,e=i,e+=Math.sqrt((u.x-f)*(u.x-f)+(u.y-a)*(u.y-a))),i+=c[(d-2)/2]}f=g,a=m}return s.v(u),t=e/l,0>t?0:1<t?1:t}return 0},s.u(et,{Hx:"flattenedSegments"},function(){return $v(this),this.qo});function $v(t){if(t.qo===null){var i=t.qo=[],n=t.Vq=[],e=[],o=[];if(t.type===Yi)e.push(t.ha),e.push(t.da),e.push(t.C),e.push(t.D),i.push(e),o.push(Math.sqrt((t.ha-t.C)*(t.ha-t.C)+(t.da-t.D)*(t.da-t.D))),n.push(o);else if(t.type===so)e.push(t.ha),e.push(t.da),e.push(t.C),e.push(t.da),e.push(t.C),e.push(t.D),e.push(t.ha),e.push(t.D),e.push(t.ha),e.push(t.da),i.push(e),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.da-t.D)),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.da-t.D)),n.push(o);else if(t.type===Vo){var r=new Pi;r.ha=t.C,r.da=(t.da+t.D)/2;var h=new mt(qi);if(h.Ae=0,h.uf=360,h.la=(t.ha+t.C)/2,h.sa=(t.da+t.D)/2,h.radiusX=Math.abs(t.ha-t.C)/2,h.radiusY=Math.abs(t.da-t.D)/2,r.add(h),t=Ho(h,r),o=t.length,o===0)e.push(h.la),e.push(h.sa);else for(var h=r.ha,r=r.da,l=0;l<o;l++){var u=t[l];Vn(h,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],r=u[7]}i.push(e),n.push(z0(e))}else for(var f=t.fc.i;f.next();){var a=f.value,e=[];e.push(a.ha),e.push(a.da);for(var h=a.ha,r=a.da,p=h,y=r,c=a.yb.n,v=c.length,d=0;d<v;d++){var g=c[d];switch(g.na){case Ke:4<=e.length&&(i.push(e),n.push(z0(e))),e=[],e.push(g.C),e.push(g.D),h=g.C,r=g.D,p=h,y=r;break;case ue:e.push(g.C),e.push(g.D),h=g.C,r=g.D;break;case ho:Vn(h,r,g.Jd,g.Ye,g.oh,g.Dg,g.Ab,g.Hb,.5,e),h=g.C,r=g.D;break;case lo:El(h,r,g.Jd,g.Ye,g.Ab,g.Hb,.5,e),h=g.C,r=g.D;break;case qi:if(t=Ho(g,a),o=t.length,o===0){e.push(g.la),e.push(g.sa),h=g.la,r=g.sa;break}for(l=0;l<o;l++)u=t[l],Vn(h,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],r=u[7];break;case Ue:if(t=as(g,a,h,r),o=t.length,o===0){e.push(g.la),e.push(g.sa),h=g.la,r=g.sa;break}for(l=0;l<o;l++)u=t[l],Vn(h,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,e),h=u[6],r=u[7];break;default:s.k("Segment not of valid type: "+g.na)}g.Sh&&(e.push(p),e.push(y))}4<=e.length&&(i.push(e),n.push(z0(e)))}}}s.u(et,{gu:"flattenedLengths"},function(){return $v(this),this.Vq}),s.u(et,{hu:"flattenedTotalLength"},function(){var t=this.Wq;if(isNaN(t)){if(this.type===Yi)var t=Math.abs(this.C-this.ha),i=Math.abs(this.D-this.da),t=Math.sqrt(t*t+i*i);else if(this.type===so)t=Math.abs(this.C-this.ha),i=Math.abs(this.D-this.da),t=2*t+2*i;else for(var i=this.gu,n=i.length,e=t=0;e<n;e++)for(var o=i[e],r=o.length,h=0;h<r;h++)t+=o[h];this.Wq=t}return t});function z0(t){for(var i=[],n=0,e=0,o=t.length,r=0;r<o;r+=2){var h=t[r],l=t[r+1];r!==0&&(n=Math.sqrt(Gr(n,e,h,l)),i.push(n)),n=h,e=l}return i}s.defineProperty(et,{type:"type"},function(){return this.na},function(t){this.na!==t&&(this.P&&s.ma(this,t),this.na=t,this.hb=!0)}),s.defineProperty(et,{ha:"startX"},function(){return this.Ec},function(t){this.Ec!==t&&(this.P&&s.ma(this,t),this.Ec=t,this.hb=!0)}),s.defineProperty(et,{da:"startY"},function(){return this.Oc},function(t){this.Oc!==t&&(this.P&&s.ma(this,t),this.Oc=t,this.hb=!0)}),s.defineProperty(et,{C:"endX"},function(){return this.Ab},function(t){this.Ab!==t&&(this.P&&s.ma(this,t),this.Ab=t,this.hb=!0)}),s.defineProperty(et,{D:"endY"},function(){return this.Hb},function(t){this.Hb!==t&&(this.P&&s.ma(this,t),this.Hb=t,this.hb=!0)}),s.defineProperty(et,{fc:"figures"},function(){return this.Vj},function(t){this.Vj!==t&&(this.P&&s.ma(this,t),this.Vj=t,this.hb=!0)}),et.prototype.add=et.prototype.add=function(t){return this.Vj.add(t),this},et.prototype.setSpots=function(t,i,n,e,o,r,h,l){return this.P&&s.ma(this),this.hi=new P(t,i,o,r).freeze(),this.ii=new P(n,e,h,l).freeze(),this},s.defineProperty(et,{A:"spot1"},function(){return this.hi},function(t){this.P&&s.ma(this,t),this.hi=t.S()}),s.defineProperty(et,{B:"spot2"},function(){return this.ii},function(t){this.P&&s.ma(this,t),this.ii=t.S()}),s.defineProperty(et,{ae:"defaultStretch"},function(){return this.Ki},function(t){this.P&&s.ma(this,t),this.Ki=t}),s.u(et,{eb:"bounds"},function(){return this.YA()&&this.computeBounds(),this.zv});function Pi(t,i,n,e){s.oc(this),this.P=!1,n===void 0&&(n=!0),this.Km=n,e===void 0&&(e=!0),this.Vo=e,this.Ec=t!==void 0?t:0,this.Oc=i!==void 0?i:0,this.qp=new E(mt),this.Mw=this.qp.F,this.hb=!0}s.ga("PathFigure",Pi),s.ni(Pi),Pi.prototype.copy=function(){var t=new Pi;t.Km=this.Km,t.Vo=this.Vo,t.Ec=this.Ec,t.Oc=this.Oc;for(var i=this.qp.n,n=i.length,e=t.qp,o=0;o<n;o++){var r=i[o].copy();e.add(r)}return t.Mw=this.Mw,t.hb=this.hb,t},Pi.prototype.equalsApprox=Pi.prototype.Qc=function(t){if(!(t instanceof Pi&&$(this.ha,t.ha)&&$(this.da,t.da)))return!1;var i=this.yb.n;t=t.yb.n;var n=i.length;if(n!==t.length)return!1;for(var e=0;e<n;e++)if(!i[e].Qc(t[e]))return!1;return!0},Pi.prototype.toString=function(t){t===void 0&&(t=-1);for(var i=0>t?"M"+this.ha.toString()+" "+this.da.toString():"M"+this.ha.toFixed(t)+" "+this.da.toFixed(t),n=this.yb.n,e=n.length,o=0;o<e;o++)i+=" "+n[o].toString(t);return i},Pi.prototype.freeze=function(){this.P=!0;var t=this.yb;t.freeze();for(var i=t.n,t=t.length,n=0;n<t;n++)i[n].freeze();return this},Pi.prototype.Qa=function(){this.P=!1;var t=this.yb;t.Qa();for(var t=t.n,i=t.length,n=0;n<i;n++)t[n].Qa();return this},Pi.prototype.YA=function(){if(this.hb)return!0;var t=this.yb;if(this.Mw!==t.F)return!0;for(var t=t.n,i=t.length,n=0;n<i;n++)if(t[n].hb)return!0;return!1},s.defineProperty(Pi,{wu:"isFilled"},function(){return this.Km},function(t){this.P&&s.ma(this,t),this.Km=t}),s.defineProperty(Pi,{jm:"isShadowed"},function(){return this.Vo},function(t){this.P&&s.ma(this,t),this.Vo=t}),s.defineProperty(Pi,{ha:"startX"},function(){return this.Ec},function(t){this.P&&s.ma(this,t),this.Ec=t,this.hb=!0}),s.defineProperty(Pi,{da:"startY"},function(){return this.Oc},function(t){this.P&&s.ma(this,t),this.Oc=t,this.hb=!0}),s.defineProperty(Pi,{yb:"segments"},function(){return this.qp},function(t){this.P&&s.ma(this,t),this.qp=t,this.hb=!0}),Pi.prototype.add=Pi.prototype.add=function(t){return this.qp.add(t),this},Pi.prototype.Ia=function(t,i,n){for(var e=this.ha,o=this.da,r=e,h=o,l=this.yb.n,u=l.length,f=0;f<u;f++){var a=l[f];switch(a.type){case Ke:r=a.C,h=a.D,e=a.C,o=a.D;break;case ue:if(wn(e,o,a.C,a.D,n,t,i))return!0;e=a.C,o=a.D;break;case ho:if(la(e,o,a.xc,a.Sc,a.Eh,a.Fh,a.C,a.D,.5,t,i,n))return!0;e=a.C,o=a.D;break;case lo:if(B0(e,o,a.xc,a.Sc,a.C,a.D,.5,t,i,n))return!0;e=a.C,o=a.D;break;case qi:case Ue:var p=a.type===qi?Ho(a,this):as(a,this,e,o),y=p.length;if(y===0){if(wn(e,o,a.la,a.sa,n,t,i))return!0;e=a.la,o=a.sa;break}for(var c=null,v=0;v<y;v++)if(c=p[v],v===0&&wn(e,o,c[0],c[1],n,t,i)||la(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,t,i,n))return!0;c!==null&&(e=c[6],o=c[7]);break;default:s.k("Unknown Segment type: "+a.type)}if(a.Lx&&(e!==r||o!==h)&&wn(e,o,r,h,n,t,i))return!0}return!1};function mt(t,i,n,e,o,r,h,l){s.oc(this),this.P=!1,t===void 0&&(t=ue),this.na=t,this.Ab=i!==void 0?i:0,this.Hb=n!==void 0?n:0,e===void 0&&(e=0),o===void 0&&(o=0),r===void 0&&(r=0),h===void 0&&(h=0),t===Ue?(t=r%360,0>t&&(t+=360),this.Jd=t,this.Ye=0,this.oh=Math.max(e,0),this.Dg=Math.max(o,0),this.Zo=typeof h=="boolean"?!!h:!1,this.uo=!!l):(this.Jd=e,this.Ye=o,t===qi&&(r=Math.max(r,0)),this.oh=r,typeof h=="number"?(t===qi&&(h=Math.max(h,0)),this.Dg=h):this.Dg=0,this.uo=this.Zo=!1),this.Sh=!1,this.hb=!0,this.Kh=null}s.ga("PathSegment",mt),s.ni(mt),mt.prototype.copy=function(){var t=new mt;return t.na=this.na,t.Ab=this.Ab,t.Hb=this.Hb,t.Jd=this.Jd,t.Ye=this.Ye,t.oh=this.oh,t.Dg=this.Dg,t.Zo=this.Zo,t.uo=this.uo,t.Sh=this.Sh,t.hb=this.hb,t},mt.prototype.equalsApprox=mt.prototype.Qc=function(t){if(!(t instanceof mt)||this.type!==t.type||this.Lx!==t.Lx)return!1;switch(this.type){case Ke:case ue:return $(this.C,t.C)&&$(this.D,t.D);case ho:return $(this.C,t.C)&&$(this.D,t.D)&&$(this.xc,t.xc)&&$(this.Sc,t.Sc)&&$(this.Eh,t.Eh)&&$(this.Fh,t.Fh);case lo:return $(this.C,t.C)&&$(this.D,t.D)&&$(this.xc,t.xc)&&$(this.Sc,t.Sc);case qi:return $(this.Ae,t.Ae)&&$(this.uf,t.uf)&&$(this.la,t.la)&&$(this.sa,t.sa)&&$(this.radiusX,t.radiusX)&&$(this.radiusY,t.radiusY);case Ue:return this.gm===t.gm&&this.Nx===t.Nx&&$(this.Nj,t.Nj)&&$(this.C,t.C)&&$(this.D,t.D)&&$(this.radiusX,t.radiusX)&&$(this.radiusY,t.radiusY);default:return!1}},mt.prototype.ic=function(t){t.Je===mt?this.type=t:s.Lj(this,t)},mt.prototype.toString=function(t){t===void 0&&(t=-1);var i="";switch(this.type){case Ke:i=0>t?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case ue:i=0>t?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case ho:i=0>t?"C"+this.xc.toString()+" "+this.Sc.toString()+" "+this.Eh.toString()+" "+this.Fh.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.xc.toFixed(t)+" "+this.Sc.toFixed(t)+" "+this.Eh.toFixed(t)+" "+this.Fh.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case lo:i=0>t?"Q"+this.xc.toString()+" "+this.Sc.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.xc.toFixed(t)+" "+this.Sc.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case qi:i=0>t?"B"+this.Ae.toString()+" "+this.uf.toString()+" "+this.la.toString()+" "+this.sa.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.Ae.toFixed(t)+" "+this.uf.toFixed(t)+" "+this.la.toFixed(t)+" "+this.sa.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Ue:i=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Nj.toString()+" "+(this.Nx?1:0)+" "+(this.gm?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Nj.toFixed(t)+" "+(this.Nx?1:0)+" "+(this.gm?1:0)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;default:i=this.type.toString()}return i+(this.Sh?"z":"")};var Ke;mt.Move=Ke=s.p(mt,"Move",0);var ue;mt.Line=ue=s.p(mt,"Line",1);var ho;mt.Bezier=ho=s.p(mt,"Bezier",2);var lo;mt.QuadraticBezier=lo=s.p(mt,"QuadraticBezier",3);var qi;mt.Arc=qi=s.p(mt,"Arc",4);var Ue;mt.SvgArc=Ue=s.p(mt,"SvgArc",4),mt.prototype.freeze=function(){return this.P=!0,this},mt.prototype.Qa=function(){return this.P=!1,this},mt.prototype.close=mt.prototype.close=function(){return this.Sh=!0,this};function Ho(t,i){if(t.Kh!==null&&i.hb===!1)return t.Kh;var n=t.radiusX,e=t.radiusY;if(e===void 0&&(e=n),n===0||e===0)return t.Kh=[],t.Kh;var o=t.Jd,r=t.Ye,h=Jv(n<e?n:e,t.Ae,t.Ae+t.uf,!1);if(n!==e){var l=s.Wg();l.reset(),n<e?l.scale(1,e/n):l.scale(n/e,1),Zv(h,l),s.bf(l)}for(n=h.length,e=0;e<n;e++)l=h[e],l[0]+=o,l[1]+=r,l[2]+=o,l[3]+=r,l[4]+=o,l[5]+=r,l[6]+=o,l[7]+=r;return t.Kh=h,t.Kh}function as(t,i,n,e){function o(d,g,m,w){return(d*w<g*m?-1:1)*Math.acos((d*m+g*w)/(Math.sqrt(d*d+g*g)*Math.sqrt(m*m+w*w)))}if(t.Kh!==null&&i.hb===!1)return t.Kh;i=t.oh;var r=t.Dg;i===0&&(i=1e-4),r===0&&(r=1e-4);var c=Math.PI/180*t.Jd,h=t.Zo,l=t.uo,u=t.Ab,f=t.Hb,a=Math.cos(c),p=Math.sin(c),y=a*(n-u)/2+p*(e-f)/2,c=-p*(n-u)/2+a*(e-f)/2,v=y*y/(i*i)+c*c/(r*r);return 1<v&&(i*=Math.sqrt(v),r*=Math.sqrt(v)),v=(h===l?-1:1)*Math.sqrt((i*i*r*r-i*i*c*c-r*r*y*y)/(i*i*c*c+r*r*y*y)),isNaN(v)&&(v=0),h=v*i*c/r,v=v*-r*y/i,isNaN(h)&&(h=0),isNaN(v)&&(v=0),n=(n+u)/2+a*h-p*v,e=(e+f)/2+p*h+a*v,f=o(1,0,(y-h)/i,(c-v)/r),a=(y-h)/i,u=(c-v)/r,y=(-y-h)/i,h=(-c-v)/r,c=o(a,u,y,h),y=(a*y+u*h)/(Math.sqrt(a*a+u*u)*Math.sqrt(y*y+h*h)),-1>=y?c=Math.PI:1<=y&&(c=0),!l&&0<c&&(c-=2*Math.PI),l&&0>c&&(c+=2*Math.PI),l=i>r?1:i/r,y=i>r?r/i:1,i=Jv(i>r?i:r,f,f+c,!0),r=s.Wg(),r.reset(),r.translate(n,e),r.rotate(t.Jd,0,0),r.scale(l,y),Zv(i,r),s.bf(r),t.Kh=i,t.Kh}s.defineProperty(mt,{Lx:"isClosed"},function(){return this.Sh},function(t){this.Sh!==t&&(this.Sh=t,this.hb=!0)}),s.defineProperty(mt,{type:"type"},function(){return this.na},function(t){this.P&&s.ma(this,t),this.na=t,this.hb=!0}),s.defineProperty(mt,{C:"endX"},function(){return this.Ab},function(t){this.P&&s.ma(this,t),this.Ab=t,this.hb=!0}),s.defineProperty(mt,{D:"endY"},function(){return this.Hb},function(t){this.P&&s.ma(this,t),this.Hb=t,this.hb=!0}),s.defineProperty(mt,{xc:"point1X"},function(){return this.Jd},function(t){this.P&&s.ma(this,t),this.Jd=t,this.hb=!0}),s.defineProperty(mt,{Sc:"point1Y"},function(){return this.Ye},function(t){this.P&&s.ma(this,t),this.Ye=t,this.hb=!0}),s.defineProperty(mt,{Eh:"point2X"},function(){return this.oh},function(t){this.P&&s.ma(this,t),this.oh=t,this.hb=!0}),s.defineProperty(mt,{Fh:"point2Y"},function(){return this.Dg},function(t){this.P&&s.ma(this,t),this.Dg=t,this.hb=!0}),s.defineProperty(mt,{la:"centerX"},function(){return this.Jd},function(t){this.P&&s.ma(this,t),this.Jd=t,this.hb=!0}),s.defineProperty(mt,{sa:"centerY"},function(){return this.Ye},function(t){this.P&&s.ma(this,t),this.Ye=t,this.hb=!0}),s.defineProperty(mt,{radiusX:"radiusX"},function(){return this.oh},function(t){0>t&&s.Fa(t,">= zero",mt,"radiusX"),this.P&&s.ma(this,t),this.oh=t,this.hb=!0}),s.defineProperty(mt,{radiusY:"radiusY"},function(){return this.Dg},function(t){0>t&&s.Fa(t,">= zero",mt,"radiusY"),this.P&&s.ma(this,t),this.Dg=t,this.hb=!0}),s.defineProperty(mt,{Ae:"startAngle"},function(){return this.Ab},function(t){this.Ab!==t&&(this.P&&s.ma(this,t),t%=360,0>t&&(t+=360),this.Ab=t,this.hb=!0)}),s.defineProperty(mt,{uf:"sweepAngle"},function(){return this.Hb},function(t){this.P&&s.ma(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Hb=t,this.hb=!0}),s.defineProperty(mt,{gm:"isClockwiseArc"},function(){return this.uo},function(t){this.P&&s.ma(this,t),this.uo=t,this.hb=!0}),s.defineProperty(mt,{Nx:"isLargeArc"},function(){return this.Zo},function(t){this.P&&s.ma(this,t),this.Zo=t,this.hb=!0}),s.defineProperty(mt,{Nj:"xAxisRotation"},function(){return this.Jd},function(t){t%=360,0>t&&(t+=360),this.P&&s.ma(this,t),this.Jd=t,this.hb=!0});function Ht(){this.aa=null,this.dA=new D(0,0).freeze(),this.jz=new D(0,0).freeze(),this.wv=this.sw=0,this.xv=1,this.gw="",this.Ww=this.Kv=!1,this.Iv=this.yv=0,this.Qj=this.Tv=this.cw=!1,this.Ir=null,this.Uw=0,this.Gg=this.Tw=null}s.ga("InputEvent",Ht),Ht.prototype.copy=function(){var t=new Ht;return t.aa=this.aa,t.dA.assign(this.Ce),t.jz.assign(this.ea),t.sw=this.sw,t.wv=this.wv,t.xv=this.xv,t.gw=this.gw,t.Kv=this.Kv,t.Ww=this.Ww,t.yv=this.yv,t.Iv=this.Iv,t.cw=this.cw,t.Tv=this.Tv,t.Qj=this.Qj,t.Ir=this.Ir,t.Uw=this.Uw,t.Tw=this.Tw,t.Gg=this.Gg,t},Ht.prototype.toString=function(){var t="^";return this.md!==0&&(t+="M:"+this.md),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.te!==0&&(t+="C:"+this.te),this.oi!==0&&(t+="D:"+this.oi),this.vc&&(t+="h"),this.bubbles&&(t+="b"),this.ea!==null&&(t+="@"+this.ea.toString()),t},s.defineProperty(Ht,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(Ht,{Ce:"viewPoint"},function(){return this.dA},function(t){s.G(t,D,Ht,"viewPoint"),this.dA.assign(t)}),s.defineProperty(Ht,{ea:"documentPoint"},function(){return this.jz},function(t){s.G(t,D,Ht,"documentPoint"),this.jz.assign(t)}),Ht.prototype.getMultiTouchViewPoint=Ht.prototype.Ix=function(t,i){var n=this.g;return n===null||Zd(n,this.event,t,i),i},Ht.prototype.getMultiTouchDocumentPoint=function(t,i){var n=this.g;return n===null||(Zd(n,this.event,t,i),i.assign(n.UB(i))),i},s.defineProperty(Ht,{md:"modifiers"},function(){return this.sw},function(t){this.sw=t}),s.defineProperty(Ht,{button:"button"},function(){return this.wv},function(t){if(this.wv=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),s.defineProperty(Ht,{buttons:"buttons"},function(){return this.xv},function(t){this.xv=t}),s.defineProperty(Ht,{key:"key"},function(){return this.gw},function(t){this.gw=t}),s.defineProperty(Ht,{Hk:"down"},function(){return this.Kv},function(t){this.Kv=t}),s.defineProperty(Ht,{up:"up"},function(){return this.Ww},function(t){this.Ww=t}),s.defineProperty(Ht,{te:"clickCount"},function(){return this.yv},function(t){this.yv=t}),s.defineProperty(Ht,{oi:"delta"},function(){return this.Iv},function(t){this.Iv=t}),s.defineProperty(Ht,{zu:"isMultiTouch"},function(){return this.cw},function(t){this.cw=t}),s.defineProperty(Ht,{vc:"handled"},function(){return this.Tv},function(t){this.Tv=t}),s.defineProperty(Ht,{bubbles:"bubbles"},function(){return this.Qj},function(t){this.Qj=t}),s.defineProperty(Ht,{event:"event"},function(){return this.Ir},function(t){this.Ir=t}),s.u(Ht,{Aj:"isTouchEvent"},function(){var t=Q.TouchEvent,i=this.event;return t&&i instanceof t?!0:(t=Q.PointerEvent)&&i instanceof t&&(i.pointerType==="touch"||i.pointerType==="pen")}),s.u(Ht,{zh:"isMac"},function(){return s.zh}),s.defineProperty(Ht,{timestamp:"timestamp"},function(){return this.Uw},function(t){this.Uw=t}),s.defineProperty(Ht,{Jf:"targetDiagram"},function(){return this.Tw},function(t){this.Tw=t}),s.defineProperty(Ht,{Be:"targetObject"},function(){return this.Gg},function(t){this.Gg=t}),s.defineProperty(Ht,{control:"control"},function(){return(this.md&1)!==0},function(t){this.md=t?this.md|1:this.md&-2}),s.defineProperty(Ht,{shift:"shift"},function(){return(this.md&4)!==0},function(t){this.md=t?this.md|4:this.md&-5}),s.defineProperty(Ht,{alt:"alt"},function(){return(this.md&2)!==0},function(t){this.md=t?this.md|2:this.md&-3}),s.defineProperty(Ht,{Iu:"meta"},function(){return(this.md&8)!==0},function(t){this.md=t?this.md|8:this.md&-9}),s.defineProperty(Ht,{left:"left"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},function(t){this.buttons=t?this.buttons|1:this.buttons&-2}),s.defineProperty(Ht,{right:"right"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},function(t){this.buttons=t?this.buttons|2:this.buttons&-3}),s.defineProperty(Ht,{xL:"middle"},function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},function(t){this.buttons=t?this.buttons|4:this.buttons&-5});function ar(){this.aa=null,this.Sb="",this.Aw=this.Rw=null,this.cr=!1}s.ga("DiagramEvent",ar),ar.prototype.copy=function(){var t=new ar;return t.aa=this.aa,t.Sb=this.Sb,t.Rw=this.Rw,t.Aw=this.Aw,t.cr=this.cr,t},ar.prototype.toString=function(){var t="*"+this.name;return this.MB!==null&&(t+=":"+this.MB.toString()),this.pB!==null&&(t+="("+this.pB.toString()+")"),t},s.defineProperty(ar,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(ar,{name:"name"},function(){return this.Sb},function(t){this.Sb=t}),s.defineProperty(ar,{MB:"subject"},function(){return this.Rw},function(t){this.Rw=t}),s.defineProperty(ar,{pB:"parameter"},function(){return this.Aw},function(t){this.Aw=t}),s.defineProperty(ar,{cancel:"cancel"},function(){return this.cr},function(t){this.cr!==t&&s.Yt("DiagramEvent.cancel","2.0"),this.cr=t});function zt(){this.dr=Jt,this.$m=this.rw="",this.Hs=this.Is=this.Ns=this.Os=this.Ls=this.aa=this.qe=null}s.ga("ChangedEvent",zt);var Co;zt.Transaction=Co=s.p(zt,"Transaction",-1);var Jt;zt.Property=Jt=s.p(zt,"Property",0);var Ei;zt.Insert=Ei=s.p(zt,"Insert",1);var zi;zt.Remove=zi=s.p(zt,"Remove",2),zt.prototype.clear=zt.prototype.clear=function(){this.Hs=this.Is=this.Ns=this.Os=this.Ls=this.aa=this.qe=null},zt.prototype.copy=function(){var t=new zt;t.dr=this.dr,t.rw=this.rw,t.$m=this.$m,t.qe=this.qe,t.aa=this.aa,t.Ls=this.Ls;var i=this.Os;return t.Os=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Ns,t.Ns=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Is,t.Is=s.Pa(i)&&typeof i.S=="function"?i.S():i,i=this.Hs,t.Hs=s.Pa(i)&&typeof i.S=="function"?i.S():i,t},zt.prototype.ic=function(t){t.Je===zt?this.Fc=t:s.Lj(this,t)},zt.prototype.toString=function(){var t="",t=this.Fc===Co?t+"* ":this.Fc===Jt?t+(this.$!==null?"!m":"!d"):t+((this.$!==null?"!m":"!d")+this.Fc);return this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.tf&&this.tf!==this.propertyName&&(t+=" "+this.tf),t+=": ",this.Fc===Co?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=qe(this.object)),this.oldValue!==null&&(t+="  old: "+qe(this.oldValue)),this.Gj!==null&&(t+=" "+this.Gj),this.newValue!==null&&(t+="  new: "+qe(this.newValue)),this.Fj!==null&&(t+=" "+this.Fj)),t},zt.prototype.getValue=zt.prototype.ka=function(t){return t?this.oldValue:this.newValue},zt.prototype.getParam=function(t){return t?this.Gj:this.Fj},zt.prototype.canUndo=zt.prototype.canUndo=function(){return this.$!==null||this.g!==null},zt.prototype.undo=zt.prototype.undo=function(){this.canUndo()&&(this.$!==null?this.$.rn(this,!0):this.g!==null&&this.g.rn(this,!0))},zt.prototype.canRedo=zt.prototype.canRedo=function(){return this.$!==null||this.g!==null},zt.prototype.redo=zt.prototype.redo=function(){this.canRedo()&&(this.$!==null?this.$.rn(this,!1):this.g!==null&&this.g.rn(this,!1))},s.defineProperty(zt,{$:"model"},function(){return this.qe},function(t){this.qe=t}),s.defineProperty(zt,{g:"diagram"},function(){return this.aa},function(t){this.aa=t}),s.defineProperty(zt,{Fc:"change"},function(){return this.dr},function(t){this.dr=t}),s.defineProperty(zt,{tf:"modelChange"},function(){return this.rw},function(t){this.rw=t}),s.defineProperty(zt,{propertyName:"propertyName"},function(){return this.$m},function(t){this.$m=t}),s.u(zt,{KF:"isTransactionFinished"},function(){return this.dr===Co&&(this.$m==="CommittedTransaction"||this.$m==="FinishedUndo"||this.$m==="FinishedRedo")}),s.defineProperty(zt,{object:"object"},function(){return this.Ls},function(t){this.Ls=t}),s.defineProperty(zt,{oldValue:"oldValue"},function(){return this.Os},function(t){this.Os=t}),s.defineProperty(zt,{Gj:"oldParam"},function(){return this.Ns},function(t){this.Ns=t}),s.defineProperty(zt,{newValue:"newValue"},function(){return this.Is},function(t){this.Is=t}),s.defineProperty(zt,{Fj:"newParam"},function(){return this.Hs},function(t){this.Hs=t});function V(t){1<arguments.length&&s.k("Model constructor can only take one optional argument, the Array of node data."),s.oc(this),this.sr=this.Sb="",this.Si=!1,this.Hz={},this.He=[],this.Lc=new tt(null,Object),this.ok="key",this.yo=this.cp=null,this.jr=this.kr=!1,this.Uq=null,this.Vm="category",this.Li=new tt(null,R),this.kk=null,this.ij=!1,this.cA=null,this.ja=new Rt,t!==void 0&&(this.Pg=t)}s.ga("Model",V),V.prototype.cloneProtected=function(t){t.Sb=this.Sb,t.sr=this.sr,t.Si=this.Si,t.ok=this.ok,t.cp=this.cp,t.yo=this.yo,t.kr=this.kr,t.jr=this.jr,t.Uq=this.Uq,t.Vm=this.Vm},V.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},V.prototype.clear=V.prototype.clear=function(){this.He=[],this.Lc.clear(),this.Li.clear(),this.ja.clear()},B=V.prototype,B.toString=function(t){if(t===void 0&&(t=0),1<t)return this.PB();var i=(this.name!==""?this.name:"")+" Model";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0;e<n;e++)var o=s.Ba(t,e),i=i+(" "+this.qb(o)+":"+qe(o))}return i},B.ko=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.Yl!==""&&(t+=`,
  "dataFormat": `+this.quote(this.Yl)),this.ib&&(t+=`,
  "isReadOnly": `+this.ib),this.km!=="key"&&typeof this.km=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.km)),this.vA&&(t+=`,
  "copiesArrays": true`),this.uA&&(t+=`,
  "copiesArrayObjects": true`),this.Xn!=="category"&&typeof this.Xn=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.Xn)),t},B.Ru=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.Yl=t.dataFormat),t.isReadOnly&&(this.ib=t.isReadOnly),t.nodeKeyProperty&&(this.km=t.nodeKeyProperty),t.copiesArrays&&(this.vA=t.copiesArrays),t.copiesArrayObjects&&(this.uA=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Xn=t.nodeCategoryProperty)};function R0(t){return`,
  "modelData": `+bv(t,t.Tk)}function _v(t,i){var n=i.modelData;s.Pa(n)&&(t.Uu(n),t.Tk=n)}B.aC=function(){var t=this.Tk,i=!1,n;for(n in t)if(!ya(n,t[n])){i=!0;break}return t="",i&&(t=R0(this)),t+`,
  "nodeDataArray": `+Je(this,this.Pg,!0)},B.sB=function(t){_v(this,t),t=t.nodeDataArray,s.isArray(t)&&(this.Uu(t),this.Pg=t)};function Rl(t,i,n,e){if(i===n)return!0;if(typeof i!=typeof n||typeof i=="function"||typeof n=="function")return!1;if(Array.isArray(i)&&Array.isArray(n)){if(e.ka(i)===n)return!0;if(e.add(i,n),i.length!==n.length)return!1;for(var o=0;o<i.length;o++)if(!Rl(t,i[o],n[o],e))return!1;return!0}if(s.Pa(i)&&s.Pa(n)){if(e.ka(i)===n)return!0;e.add(i,n);for(o in i){var r=i[o];if(!ya(o,r)){var h=n[o];if(h===void 0||!Rl(t,r,h,e))return!1}}for(var l in n)if(h=n[l],!ya(l,h)&&(r=i[l],r===void 0||!Rl(t,r,h,e)))return!1;return!0}return!1}function Zs(t,i,n){t[n]!==i[n]&&s.k("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+i[n]+'"')}B.bC=function(t){Zs(this,t,"nodeKeyProperty"),this instanceof Lt&&Zs(this,t,"nodeParentKeyProperty");for(var i=new R,n=new R,e=new R().Pc(this.Lc.LF),o=new tt,r=t.Pg,h=0;h<r.length;h++){var l=r[h],u=t.qb(l);if(u!==void 0){e.remove(u);var f=this.we(u);f===null?(i.add(u),n.add(l)):Rl(this,f,l,o)||n.add(l)}else this.eB(l),u=this.qb(l),i.add(u),n.add(l)}return r="",Rl(this,this.Tk,t.Tk,o)||(r+=R0(this)),0<i.count&&(r+=this.Ry+Je(this,i.yc(),!0)),0<n.count&&(r+=this.iC+Je(this,n.yc(),!0)),0<e.count&&(r+=this.Ty+Je(this,e.yc(),!0)),r},V.prototype.computeJsonDifference=V.prototype.computeJSONDifference=function(t,i){return s.G(t,V,V,"computeJsonDifference:newmodel"),i===void 0&&(i=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.ko()+this.bC(t)+"}"},B=V.prototype,B.Ry=`,
  "insertedNodeKeys": `,B.iC=`,
  "modifiedNodeData": `,B.Ty=`,
  "removedNodeKeys": `,B.$B=function(t,i){var n=this,e=!1,o=new R,r=new R,h=new R;t.Wf.each(function(a){a.$===n&&(a.tf==="nodeDataArray"?a.Fc===Ei?o.add(a.newValue):a.Fc===zi&&h.add(a.oldValue):n.Le(a.object)?r.add(a.object):n.Tk===a.object&&a.Fc===Jt&&(e=!0))});var l=new R;o.each(function(a){l.add(n.qb(a)),i||r.add(a)});var u=new R;h.each(function(a){u.add(n.qb(a)),i&&r.add(a)});var f="";return e&&(f+=R0(this)),0<l.count&&(f+=(i?this.Ty:this.Ry)+Je(this,l.yc(),!0)),0<r.count&&(f+=this.iC+Je(this,r.yc(),!0)),0<u.count&&(f+=(i?this.Ry:this.Ty)+Je(this,u.yc(),!0)),f},B.rB=function(t){_v(this,t);var i=t.insertedNodeKeys,n=t.modifiedNodeData,e=new tt;if(s.isArray(n))for(var o=0;o<n.length;o++){var r=s.Ba(n,o),h=this.qb(r);h!=null&&e.set(h,r)}if(s.isArray(i))for(var o=s.cb(i),l=0;l<o;l++)r=s.Ba(i,l),h=this.we(r),h===null&&(h=(h=e.get(r))?h:this.copyNodeData({}),this.zy(h,r),this.Pl(h));if(s.isArray(n)){for(o=s.cb(n),l=0;l<o;l++)if(r=s.Ba(n,l),h=this.qb(r),h=this.we(h),h!==null)for(var u in r)u!=="__gohashid"&&u!==this.km&&u!==this.rq&&this.setDataProperty(h,u,r[u])}if(t=t.removedNodeKeys,s.isArray(t))for(o=s.cb(t),l=0;l<o;l++)r=s.Ba(t,l),h=this.we(r),h!==null&&this.qy(h)},V.prototype.toIncrementalJson=V.prototype.toIncrementalJSON=function(t,i){s.G(t,zt,V,"toIncrementalJson:e"),t.Fc!==Co&&s.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.KF&&n instanceof Nn?(i===void 0&&(i=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(i)+', "incremental": 1'+this.ko()+this.$B(n,t.propertyName==="FinishedUndo")+"}"):'{ "incremental": 0 }'},V.prototype.toJson=V.prototype.toJSON=V.prototype.PB=function(t){return t===void 0&&(t=this.constructor===V?"go.Model":this.constructor===K?"go.GraphLinksModel":this.constructor===Lt?"go.TreeModel":s.pf(this)),'{ "class": '+this.quote(t)+this.ko()+this.aC()+"}"},V.prototype.applyIncrementalJson=V.prototype.applyIncrementalJSON=function(t){var i=null;if(typeof t=="string")if(Q.JSON&&Q.JSON.parse)try{i=Q.JSON.parse(t)}catch{}else s.trace("WARNING: no JSON.parse available");else typeof t=="object"?i=t:s.k("Unable to modify a Model from: "+t);var n=i.incremental;typeof n!="number"&&s.k("Unable to apply non-incremental changes to Model: "+t),n!==0&&(this.Ib("applyIncrementalJson"),this.rB(i),this.Yc("applyIncrementalJson"))},V.fromJson=V.fromJSON=function(t,i){i===void 0&&(i=null),i!==null&&s.G(i,V,V,"fromJson:model");var n=null;if(typeof t=="string")if(Q.JSON&&Q.JSON.parse)try{n=Q.JSON.parse(t)}catch{}else s.trace("WARNING: no JSON.parse available");else typeof t=="object"?n=t:s.k("Unable to construct a Model from: "+t);if(i===null){var e;e=null;var o=n.class;if(typeof o=="string")try{var r=null;o.indexOf("go.")===0?(o=o.substr(3),r=he[o]):(r=he[o],r===void 0&&(r=Q[o])),typeof r=="function"&&(e=new r)}catch{}e===null||e instanceof V?i=e:s.k("Unable to construct a Model of declared class: "+n.class)}return i===null&&(i=new K),i.Ru(n),i.sB(n),i},V.prototype.replaceJsonObjects=V.prototype.Uu=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);s.Pa(e)&&s.GE(t,n,this.Uu(e))}else if(s.Pa(t)){for(n in t)if(e=t[n],s.Pa(e)&&(e=this.Uu(e),t[n]=e,n==="points"&&Array.isArray(e))){for(var o=e.length%2===0,r=0;r<e.length;r++)if(typeof e[r]!="number"){o=!1;break}if(o){for(o=new E(D),r=0;r<e.length/2;r++)o.add(new D(e[2*r],e[2*r+1]));o.freeze(),t[n]=o}}if(typeof t=="object"){if(n=t,e=t.class,e==="NaN")n=NaN;else if(e==="Date")n=new Date(t.value);else if(e==="go.Point")n=new D(yn(t.x),yn(t.y));else if(e==="go.Size")n=new lt(yn(t.width),yn(t.height));else if(e==="go.Rect")n=new O(yn(t.x),yn(t.y),yn(t.width),yn(t.height));else if(e==="go.Margin")n=new xt(yn(t.top),yn(t.right),yn(t.bottom),yn(t.left));else if(e==="go.Spot")n=typeof t.enum=="string"?Bv(t.enum):new P(yn(t.x),yn(t.y),yn(t.offsetX),yn(t.offsetY));else if(e==="go.Brush"){if(n=new yt,n.type=Rr(yt,t.type),typeof t.color=="string"&&(n.color=t.color),t.start instanceof P&&(n.start=t.start),t.end instanceof P&&(n.end=t.end),typeof t.startRadius=="number"&&(n.dv=yn(t.startRadius)),typeof t.endRadius=="number"&&(n.$t=yn(t.endRadius)),t=t.colorStops,s.Pa(t))for(i in t)n.addColorStop(parseFloat(i),t[i])}else e==="go.Geometry"?(i=null,i=typeof t.path=="string"?zl(t.path):new et,i.type=Rr(et,t.type),typeof t.startX=="number"&&(i.ha=yn(t.startX)),typeof t.startY=="number"&&(i.da=yn(t.startY)),typeof t.endX=="number"&&(i.C=yn(t.endX)),typeof t.endY=="number"&&(i.D=yn(t.endY)),t.spot1 instanceof P&&(i.A=t.spot1),t.spot2 instanceof P&&(i.B=t.spot2),n=i):e==="go.EnumValue"&&(i=t.classType,i.indexOf("go.")===0&&(i=i.substr(3)),n=Rr(he[i],t.name));t=n}}return t},V.prototype.quote=function(t){for(var i="",n=t.length,e=0;e<n;e++){var o=t[e];if(o==='"'||o==="\\")i+="\\"+o;else if(o==="\b")i+="\\b";else if(o==="\f")i+="\\f";else if(o===`
`)i+="\\n";else if(o==="\r")i+="\\r";else if(o==="	")i+="\\t";else var r=t.charCodeAt(e),i=16>r?i+("\\u000"+t.charCodeAt(e).toString(16)):32>r?i+("\\u00"+t.charCodeAt(e).toString(16)):r===8232?i+"\\u2028":r===8233?i+"\\u2029":i+o}return'"'+i+'"'},V.prototype.writeJsonValue=V.prototype.hv=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.hv(t.valueOf()):s.isArray(t)?Je(this,t):s.Pa(t)?bv(this,t):typeof t=="function"?"null":t.toString()};function Je(t,i,n){n===void 0&&(n=!1);var e=s.cb(i);if(0>=e)return"[]";var o=new Ku;o.add("[ "),n&&1<e&&o.add(`
`);for(var r=0;r<e;r++){var h=s.Ba(i,r);h!==void 0&&(0<r&&(o.add(","),n&&o.add(`
`)),o.add(t.hv(h)))}return n&&1<e&&o.add(`
`),o.add(" ]"),o.toString()}function ya(t,i){return i===void 0||t==="__gohashid"||t[0]==="_"||typeof i=="function"}function pn(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function bv(t,i){var e=i;if(e instanceof D)i={class:"go.Point",x:pn(e.x),y:pn(e.y)};else if(e instanceof lt)i={class:"go.Size",width:pn(e.width),height:pn(e.height)};else if(e instanceof O)i={class:"go.Rect",x:pn(e.x),y:pn(e.y),width:pn(e.width),height:pn(e.height)};else if(e instanceof xt)i={class:"go.Margin",top:pn(e.top),right:pn(e.right),bottom:pn(e.bottom),left:pn(e.left)};else if(e instanceof P)i=e.Zc()?{class:"go.Spot",x:pn(e.x),y:pn(e.y),offsetX:pn(e.offsetX),offsetY:pn(e.offsetY)}:{class:"go.Spot",enum:e.toString()};else if(e instanceof yt){if(i={class:"go.Brush",type:e.type.name},e.type===vs?i.color=e.color:(e.type===Jo||e.type===ae)&&(i.start=e.start,i.end=e.end,e.type===ae&&(e.dv!==0&&(i.startRadius=pn(e.dv)),isNaN(e.$t)||(i.endRadius=pn(e.$t)))),e.Dk!==null){for(var n={},e=e.Dk.i;e.next();)n[e.key]=e.value;i.colorStops=n}}else if(e instanceof et)i={class:"go.Geometry",type:e.type.name},e.ha!==0&&(i.startX=pn(e.ha)),e.da!==0&&(i.startY=pn(e.da)),e.C!==0&&(i.endX=pn(e.C)),e.D!==0&&(i.endY=pn(e.D)),e.A.L(gi)||(i.spot1=e.A),e.B.L($i)||(i.spot2=e.B),e.type===He&&(i.path=Qv(e));else if(e instanceof Wn)i={class:"go.EnumValue",classType:s.pf(e.Je),name:e.name};else if(e instanceof N||e instanceof x||e instanceof ct||e instanceof V||e instanceof ut||e instanceof it||e instanceof wt||e instanceof At||e instanceof Rt||e instanceof Nn)return s.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+e.toString()),"{}";var n="{",e=!0,o;for(o in i){var r=s.vb(i,o);if(!ya(o,r))if(e?e=!1:n+=", ",n+='"'+o+'":',o==="points"&&r instanceof E&&r.na===D){for(var h="[",r=r.i;r.next();){var l=r.value;1<h.length&&(h+=","),h+=t.hv(l.x),h+=",",h+=t.hv(l.y)}h+="]",n+=h}else n+=t.hv(r)}return n+"}"}function yn(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}s.defineProperty(V,{name:"name"},function(){return this.Sb},function(t){var i=this.Sb;i!==t&&(s.j(t,"string",V,"name"),this.Sb=t,this.h("name",i,t))}),s.defineProperty(V,{Yl:"dataFormat"},function(){return this.sr},function(t){var i=this.sr;i!==t&&(s.j(t,"string",V,"dataFormat"),this.sr=t,this.h("dataFormat",i,t))}),s.defineProperty(V,{ib:"isReadOnly"},function(){return this.Si},function(t){var i=this.Si;i!==t&&(s.j(t,"boolean",V,"isReadOnly"),this.Si=t,this.h("isReadOnly",i,t))}),s.defineProperty(V,{Tk:"modelData"},function(){return this.Hz},function(t){var i=this.Hz;i!==t&&(s.j(t,"object",V,"modelData"),this.Hz=t,this.h("modelData",i,t),this.Jb(t))}),V.prototype.addChangedListener=V.prototype.mn=function(t){s.j(t,"function",V,"addChangedListener:listener"),this.kk===null&&(this.kk=new E("function")),this.kk.add(t)},V.prototype.removeChangedListener=V.prototype.Su=function(t){s.j(t,"function",V,"removeChangedListener:listener"),this.kk!==null&&(this.kk.remove(t),this.kk.count===0&&(this.kk=null))},V.prototype.mx=function(t){if(this.gb||this.ja.tF(t),this.kk!==null)for(var i=this.kk,n=i.length,e=0;e<n;e++)i.fa(e)(t)},V.prototype.raiseChangedEvent=V.prototype.bd=function(t,i,n,e,o,r,h){$t(this,"",t,i,n,e,o,r,h)},V.prototype.raiseChanged=V.prototype.h=function(t,i,n,e,o){$t(this,"",Jt,t,this,i,n,e,o)},V.prototype.raiseDataChanged=V.prototype.qB=function(t,i,n,e,o,r){$t(this,"",Jt,i,t,n,e,o,r)};function $t(t,i,n,e,o,r,h,l,u){l===void 0&&(l=null),u===void 0&&(u=null);var f=new zt;f.$=t,f.Fc=n,f.tf=i,f.propertyName=e,f.object=o,f.oldValue=r,f.Gj=l,f.newValue=h,f.Fj=u,t.mx(f)}s.defineProperty(V,{ja:"undoManager"},function(){return this.cA},function(t){var i=this.cA;i!==t&&(s.G(t,Rt,V,"undoManager"),i!==null&&i.rJ(this),this.cA=t,t!==null&&t.oH(this))}),s.defineProperty(V,{gb:"skipsUndoManager"},function(){return this.ij},function(t){s.j(t,"boolean",V,"skipsUndoManager"),this.ij=t}),V.prototype.rn=function(t,i){if(t!==null&&t.$===this)if(t.Fc===Jt){var n=t.object,e=t.propertyName,o=t.ka(i);s.Ma(n,e,o)}else t.Fc===Ei?(n=t.Fj,t.tf==="nodeDataArray"?(e=t.newValue,s.Pa(e)&&typeof n=="number"&&(o=this.qb(e),i?(s.Ba(this.He,n)===e&&s.Jg(this.He,n),o!==void 0&&this.Lc.remove(o)):(s.Ba(this.He,n)!==e&&s.sh(this.He,n,e),o!==void 0&&this.Lc.add(o,e)))):t.tf===""?(e=t.object,!s.isArray(e)&&t.propertyName&&(e=s.vb(t.object,t.propertyName)),s.isArray(e)&&typeof n=="number"&&(o=t.newValue,i?s.Jg(e,n):s.sh(e,n,o))):s.k("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.Fc===zi?(n=t.Gj,t.tf==="nodeDataArray"?(e=t.oldValue,s.Pa(e)&&typeof n=="number"&&(o=this.qb(e),i?(s.Ba(this.He,n)!==e&&s.sh(this.He,n,e),o!==void 0&&this.Lc.add(o,e)):(s.Ba(this.He,n)===e&&s.Jg(this.He,n),o!==void 0&&this.Lc.remove(o)))):t.tf===""?(e=t.object,!s.isArray(e)&&t.propertyName&&(e=s.vb(t.object,t.propertyName)),s.isArray(e)&&typeof n=="number"&&(o=t.oldValue,i?s.sh(e,n,o):s.Jg(e,n))):s.k("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.Fc!==Co&&s.k("unknown ChangedEvent: "+t.toString())},V.prototype.startTransaction=V.prototype.Ib=function(t){return this.ja.Ib(t)},V.prototype.commitTransaction=V.prototype.Yc=function(t){return this.ja.Yc(t)},V.prototype.rollbackTransaction=V.prototype.mm=function(){return this.ja.mm()},V.prototype.commit=V.prototype.commit=function(t,i){var n=i;n===void 0&&(n="");var e=this.gb;n===null&&(this.gb=!0,n=""),this.ja.Ib(n);var o=!1;try{t(this),o=!0}finally{o?this.ja.Yc(n):this.ja.mm(),this.gb=e}},V.prototype.updateTargetBindings=V.prototype.Jb=function(t,i){i===void 0&&(i=""),$t(this,"SourceChanged",Co,i,t,null,null)},s.defineProperty(V,{km:"nodeKeyProperty"},function(){return this.ok},function(t){var i=this.ok;i!==t&&(jo(t,V,"nodeKeyProperty"),t===""&&s.k("Model.nodeKeyProperty may not be the empty string"),0<this.Lc.count&&s.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ok=t,this.h("nodeKeyProperty",i,t))});function jo(t,i,n){typeof t!="string"&&typeof t!="function"&&s.Fd(t,"string or function",i,n)}V.prototype.getKeyForNodeData=V.prototype.qb=function(t){if(t!==null){var i=this.ok;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("Key value for node data "+t+" is not a number or a string: "+i)}}},V.prototype.setKeyForNodeData=V.prototype.zy=function(t,i){if(i!=null&&_n(i)||s.Fd(i,"number or string",V,"setKeyForNodeData:key"),t!==null){var n=this.ok;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e!==i&&this.we(i)===null&&(s.Ma(t,n,i),this.Lc.remove(e),this.Lc.add(i,t),$t(this,"nodeKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n),this.Tu(e,i))}else s.Ma(t,n,i)}},s.defineProperty(V,{qL:"makeUniqueKeyFunction"},function(){return this.cp},function(t){var i=this.cp;i!==t&&(t!==null&&s.j(t,"function",V,"makeUniqueKeyFunction"),this.cp=t,this.h("makeUniqueKeyFunction",i,t))});function _n(t){return typeof t=="number"||typeof t=="string"}V.prototype.containsNodeData=V.prototype.Le=function(t){var i=this.qb(t);return i===void 0?!1:this.Lc.ka(i)===t},V.prototype.findNodeDataForKey=V.prototype.we=function(t){return t===null&&s.k("Model.findNodeDataForKey:key must not be null"),t!==void 0&&_n(t)?this.Lc.ka(t):null},s.defineProperty(V,{Pg:"nodeDataArray"},function(){return this.He},function(t){var i=this.He;if(i!==t){s.mA(t,V,"nodeDataArray"),this.Lc.clear(),this.WB();for(var n=s.cb(t),e=0;e<n;e++){var o=s.Ba(t,e);if(!s.Pa(o)){s.k("Model.nodeDataArray must only contain Objects, not: "+o);return}s.cq(o)}this.He=t;for(var r=new E(Object),e=0;e<n;e++){var o=s.Ba(t,e),h=this.qb(o);h===void 0||this.Lc.ka(h)!==null?r.add(o):this.Lc.add(h,o)}for(e=r.i;e.next();)o=e.value,this.eB(o),r=this.qb(o),r!==void 0&&this.Lc.add(r,o);for($t(this,"nodeDataArray",Jt,"nodeDataArray",this,i,t),e=0;e<n;e++)o=s.Ba(t,e),this.Aq(o),this.zq(o);this.JE(),s.BI(t)||(this.ib=!0)}}),V.prototype.makeNodeDataKeyUnique=V.prototype.eB=function(t){if(t!==null){var i=this.ok;if(i!==""){var n=this.qb(t);if(n===void 0||this.Lc.contains(n)){var e=this.cp;if(e!==null&&(n=e(this,t),n!=null&&!this.Lc.contains(n))){s.Ma(t,i,n);return}if(typeof n=="string"){for(e=2;this.Lc.contains(n+e);)e++;s.Ma(t,i,n+e)}else if(n===void 0||typeof n=="number"){for(e=-this.Lc.count-1;this.Lc.contains(e);)e--;s.Ma(t,i,e)}else s.k("Model.getKeyForNodeData returned something other than a string or a number: "+n)}}}},V.prototype.addNodeData=V.prototype.Pl=function(t){t!==null&&(s.cq(t),this.Le(t)||td(this,t,!0))};function td(t,i,n){var e=t.qb(i);(e===void 0||t.Lc.ka(e)!==i)&&(t.eB(i),e=t.qb(i),e===void 0?s.k("Model.makeNodeDataKeyUnique failed on "+i+".  Data not added to Model."):(t.Lc.add(e,i),e=null,n&&(e=s.cb(t.He),s.sh(t.He,e,i)),$t(t,"nodeDataArray",Ei,"nodeDataArray",t,null,i,null,e),t.Aq(i),t.zq(i)))}V.prototype.addNodeDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.Pl(s.Ba(t,n));else for(t=t.i;t.next();)this.Pl(t.value)},V.prototype.removeNodeData=V.prototype.qy=function(t){t!==null&&id(this,t,!0)};function id(t,i,n){var e=t.qb(i);if(e!==void 0&&t.Lc.remove(e),e=null,n){if(e=s.Sl(t.He,i),0>e)return;s.Jg(t.He,e)}$t(t,"nodeDataArray",zi,"nodeDataArray",t,i,null,e,null),t.gv(i)}V.prototype.removeNodeDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.qy(s.Ba(t,n));else for(t=t.i;t.next();)this.qy(t.value)},B=V.prototype,B.Tu=function(t,i){var n=ca(this,t);n instanceof R&&this.Li.add(i,n)},B.WB=function(){},B.Aq=function(){},B.zq=function(){},B.gv=function(){};function Ye(t,i,n){if(i!==void 0){var e=t.Li.ka(i);e===null&&(e=new R(Object),t.Li.add(i,e)),e.add(n)}}function uo(t,i,n){if(i!==void 0){var e=t.Li.ka(i);e instanceof R&&(n==null?t.Li.remove(i):(e.remove(n),e.count===0&&t.Li.remove(i)))}}function ca(t,i){if(i===void 0)return null;var n=t.Li.ka(i);return n instanceof R?n:null}V.prototype.clearUnresolvedReferences=V.prototype.JE=function(t){t===void 0?this.Li.clear():this.Li.remove(t)},s.defineProperty(V,{MK:"copyNodeDataFunction"},function(){return this.yo},function(t){var i=this.yo;i!==t&&(t!==null&&s.j(t,"function",V,"copyNodeDataFunction"),this.yo=t,this.h("copyNodeDataFunction",i,t))}),s.defineProperty(V,{vA:"copiesArrays"},function(){return this.kr},function(t){var i=this.kr;i!==t&&(t!==null&&s.j(t,"boolean",V,"copiesArrays"),this.kr=t,this.h("copiesArrays",i,t))}),s.defineProperty(V,{uA:"copiesArrayObjects"},function(){return this.jr},function(t){var i=this.jr;i!==t&&(t!==null&&s.j(t,"boolean",V,"copiesArrayObjects"),this.jr=t,this.h("copiesArrayObjects",i,t))}),V.prototype.copyNodeData=function(t){if(t===null)return null;var i=null,i=this.yo,i=i!==null?i(t,this):va(this,t,!0);return s.Pa(i)&&s.oc(i),i};function va(t,i,n){if(t.vA&&Array.isArray(i)){var e=[];for(n=0;n<i.length;n++){var o=va(t,i[n],t.uA);e.push(o)}return s.oc(e),e}if(n&&s.Pa(i)){n=(n=i.constructor)?new n:{};for(e in i)if(e!=="__gohashid"){var o=s.vb(i,e),r;r=o,r instanceof N||r instanceof x||r instanceof ct||r instanceof Nt||r instanceof Kn||r instanceof ut||r instanceof it||r instanceof wt||r instanceof Ht||r instanceof ar?(e[0]!=="_"&&s.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+e+'" of data object: '+i.toString()+`  
Model data should not have any references to a Diagram or any part of a diagram, such as: `+r.toString()),r=!0):r=r instanceof V||r instanceof Rt||r instanceof Nn||r instanceof zt,r||(o=va(t,o,!1)),s.Ma(n,e,o)}return s.oc(n),n}return i instanceof D||i instanceof lt||i instanceof O||i instanceof P||i instanceof xt?i.copy():i}s.defineProperty(V,{qH:"afterCopyFunction"},function(){return this.Uq},function(t){var i=this.Uq;i!==t&&(t!==null&&s.j(t,"function",V,"afterCopyFunction"),this.Uq=t,this.h("afterCopyFunction",i,t))});var Gl=!1;V.prototype.set=function(t,i,n){this.setDataProperty(t,i,n)},V.prototype.set=V.prototype.setDataProperty=function(t,i,n){if(this.Le(t)){if(i===this.km)this.zy(t,n);else if(i===this.Xn){this.xy(t,n);return}}else!Gl&&t instanceof N&&(Gl=!0,s.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},V.prototype.addArrayItem=function(t,i){this.QA(t,-1,i)},V.prototype.insertArrayItem=V.prototype.QA=function(t,i,n){t===this.He&&s.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>i&&(i=s.cb(t)),s.sh(t,i,n),$t(this,"",Ei,"",t,null,n,null,i)},V.prototype.removeArrayItem=V.prototype.cG=function(t,i){i===void 0&&(i=-1),t===this.He&&s.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),i===-1&&(i=s.cb(t)-1);var n=s.Ba(t,i);s.Jg(t,i),$t(this,"",zi,"",t,n,null,i,null)},s.defineProperty(V,{Xn:"nodeCategoryProperty"},function(){return this.Vm},function(t){var i=this.Vm;i!==t&&(jo(t,V,"nodeCategoryProperty"),this.Vm=t,this.h("nodeCategoryProperty",i,t))}),V.prototype.getCategoryForNodeData=V.prototype.IA=function(t){if(t===null)return"";var i=this.Vm;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getCategoryForNodeData found a non-string category for "+t+": "+i),"")},V.prototype.setCategoryForNodeData=V.prototype.xy=function(t,i){if(s.j(i,"string",V,"setCategoryForNodeData:cat"),t!==null){var n=this.Vm;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),$t(this,"nodeCategory",Jt,n,t,e,i))}else s.Ma(t,n,i)}};function K(t,i){V.call(this),2<arguments.length&&s.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),this.kf=[],this.Vi=new R(Object),this.fd=new tt(null,Object),this.Al="",this.zm=this.xo=this.dp=null,this.Wh="from",this.Xh="to",this.Rm=this.Qm="",this.Pm="category",this.zg="",this.hp="isGroup",this.mh="group",this.lr=!1,t!==void 0&&(this.Pg=t),i!==void 0&&(this.Ah=i)}s.La(K,V),s.ga("GraphLinksModel",K),K.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.Al=this.Al,t.dp=this.dp,t.xo=this.xo,t.Wh=this.Wh,t.Xh=this.Xh,t.Qm=this.Qm,t.Rm=this.Rm,t.Pm=this.Pm,t.zg=this.zg,t.hp=this.hp,t.mh=this.mh,t.lr=this.lr},K.prototype.clear=K.prototype.clear=function(){V.prototype.clear.call(this),this.kf=[],this.fd.clear(),this.Vi.clear()},B=K.prototype,B.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.PB();var i=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0,e=0;e<n;e++)var o=s.Ba(t,e),i=i+(" "+this.qb(o)+":"+qe(o));for(i+=`
 link data:`,t=this.Ah,n=s.cb(t),e=0;e<n;e++)o=s.Ba(t,e),i+=" "+this.cm(o)+"-->"+this.dm(o)}return i},B.ko=function(){var t=V.prototype.ko.call(this),i="";return this.Du!=="category"&&typeof this.Du=="string"&&(i+=`,
  "linkCategoryProperty": `+this.quote(this.Du)),this.Dj!==""&&typeof this.Dj=="string"&&(i+=`,
  "linkKeyProperty": `+this.quote(this.Dj)),this.Nn!=="from"&&typeof this.Nn=="string"&&(i+=`,
  "linkFromKeyProperty": `+this.quote(this.Nn)),this.On!=="to"&&typeof this.On=="string"&&(i+=`,
  "linkToKeyProperty": `+this.quote(this.On)),this.Eu!==""&&typeof this.Eu=="string"&&(i+=`,
  "linkFromPortIdProperty": `+this.quote(this.Eu)),this.Gu!==""&&typeof this.Gu=="string"&&(i+=`,
  "linkToPortIdProperty": `+this.quote(this.Gu)),this.Fu!==""&&typeof this.Fu=="string"&&(i+=`,
  "linkLabelKeysProperty": `+this.quote(this.Fu)),this.rq!=="isGroup"&&typeof this.rq=="string"&&(i+=`,
  "nodeIsGroupProperty": `+this.quote(this.rq)),this.Nu!=="group"&&typeof this.Nu=="string"&&(i+=`,
  "nodeGroupKeyProperty": `+this.quote(this.Nu)),t+i},B.Ru=function(t){V.prototype.Ru.call(this,t),t.linkKeyProperty&&(this.Dj=t.linkKeyProperty),t.linkFromKeyProperty&&(this.Nn=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.On=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.Eu=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.Gu=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.Du=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.Fu=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.rq=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.Nu=t.nodeGroupKeyProperty)},B.aC=function(){var t=V.prototype.aC.call(this),i=`,
  "linkDataArray": `+Je(this,this.Ah,!0);return t+i},B.sB=function(t){V.prototype.sB.call(this,t),t=t.linkDataArray,s.isArray(t)&&(this.Uu(t),this.Ah=t)},B.bC=function(t){if(!(t instanceof K))return s.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";this.Dj===""&&s.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var i=V.prototype.bC.call(this,t);Zs(this,t,"linkKeyProperty"),Zs(this,t,"linkFromKeyProperty"),Zs(this,t,"linkToKeyProperty"),Zs(this,t,"linkLabelKeysProperty"),Zs(this,t,"nodeIsGroupProperty"),Zs(this,t,"nodeGroupKeyProperty");for(var n=new R,e=new R,o=new R().Pc(this.fd.LF),r=new tt,h=t.Ah,l=0;l<h.length;l++){var u=h[l],f=t.cf(u);if(f!==void 0){o.remove(f);var a=this.Zp(f);a===null?(n.add(f),e.add(u)):Rl(this,a,u,r)||e.add(u)}else this.Zx(u),f=this.cf(u),n.add(f),e.add(u)}return t=i,0<n.count&&(t+=this.Qy+Je(this,n.yc(),!0)),0<e.count&&(t+=this.hC+Je(this,e.yc(),!0)),0<o.count&&(t+=this.Sy+Je(this,o.yc(),!0)),t},B.Qy=`,
  "insertedLinkKeys": `,B.hC=`,
  "modifiedLinkData": `,B.Sy=`,
  "removedLinkKeys": `,B.$B=function(t,i){this.Dj===""&&s.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=V.prototype.$B.call(this,t,i),e=this,o=new R,r=new R,h=new R;t.Wf.each(function(f){f.$===e&&(f.tf==="linkDataArray"?f.Fc===Ei?o.add(f.newValue):f.Fc===zi&&h.add(f.oldValue):e.uh(f.object)&&r.add(f.object))});var l=new R;o.each(function(f){l.add(e.cf(f)),i||r.add(f)});var u=new R;return h.each(function(f){u.add(e.cf(f)),i&&r.add(f)}),0<l.count&&(n+=(i?this.Sy:this.Qy)+Je(this,l.yc(),!0)),0<r.count&&(n+=this.hC+Je(this,r.yc(),!0)),0<u.count&&(n+=(i?this.Qy:this.Sy)+Je(this,u.yc(),!0)),n},B.rB=function(t){V.prototype.rB.call(this,t);var i=t.insertedLinkKeys,n=t.modifiedLinkData,e=new tt;if(s.isArray(n))for(var o=0;o<n.length;o++){var r=s.Ba(n,o),h=this.cf(r);h!=null&&e.set(h,r)}if(s.isArray(i))for(var o=s.cb(i),l=0;l<o;l++)r=s.Ba(i,l),h=this.Zp(r),h===null&&(h=(h=e.get(r))?h:this.ox({}),this.tG(h,r),this.Ot(h));if(s.isArray(n)){for(o=s.cb(n),l=0;l<o;l++)if(r=s.Ba(n,l),h=this.cf(r),h=this.Zp(h),h!==null)for(var u in r)u!=="__gohashid"&&u!==this.Dj&&this.setDataProperty(h,u,r[u])}if(t=t.removedLinkKeys,s.isArray(t))for(o=s.cb(t),l=0;l<o;l++)r=s.Ba(t,l),h=this.Zp(r),h!==null&&this.py(h)},B.rn=function(t,i){if(t.Fc===Ei){var n=t.Fj;if(t.tf==="linkDataArray"){var e=t.newValue;if(s.Pa(e)&&typeof n=="number"){var o=this.cf(e);i?(this.Vi.remove(e),s.Ba(this.kf,n)===e&&s.Jg(this.kf,n),o!==void 0&&this.fd.remove(o)):(this.Vi.add(e),s.Ba(this.kf,n)!==e&&s.sh(this.kf,n,e),o!==void 0&&this.fd.add(o,e))}return}if(t.tf==="linkLabelKeys"){e=this.Nk(t.object),s.isArray(e)&&typeof n=="number"&&(i?(n=s.Sl(e,t.newValue),0<=n&&s.Jg(e,n)):0>s.Sl(e,t.newValue)&&s.sh(e,n,t.newValue));return}}else if(t.Fc===zi){if(n=t.Gj,t.tf==="linkDataArray"){e=t.oldValue,s.Pa(e)&&typeof n=="number"&&(o=this.cf(e),i?(this.Vi.add(e),s.Ba(this.kf,n)!==e&&s.sh(this.kf,n,e),o!==void 0&&this.fd.add(o,e)):(this.Vi.remove(e),s.Ba(this.kf,n)===e&&s.Jg(this.kf,n),o!==void 0&&this.fd.remove(o)));return}if(t.tf==="linkLabelKeys"){e=this.Nk(t.object),s.isArray(e)&&typeof n=="number"&&(i?0>s.Sl(e,t.newValue)&&s.sh(e,n,t.newValue):(n=s.Sl(e,t.newValue),0<=n&&s.Jg(e,n)));return}}V.prototype.rn.call(this,t,i)},s.defineProperty(K,{kA:"archetypeNodeData"},function(){return this.zm},function(t){var i=this.zm;i!==t&&(t!==null&&s.G(t,Object,K,"archetypeNodeData"),this.zm=t,this.h("archetypeNodeData",i,t))}),K.prototype.Pn=function(t){if(t!==void 0){var i=this.zm;if(i!==null){var n=this.we(t);n===null&&(n=this.copyNodeData(i),s.Ma(n,this.ok,t),this.Pl(n))}return t}},s.defineProperty(K,{Nn:"linkFromKeyProperty"},function(){return this.Wh},function(t){var i=this.Wh;i!==t&&(jo(t,K,"linkFromKeyProperty"),this.Wh=t,this.h("linkFromKeyProperty",i,t))}),K.prototype.getFromKeyForLinkData=K.prototype.cm=function(t){if(t!==null){var i=this.Wh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("FromKey value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setFromKeyForLinkData=K.prototype.CB=function(t,i){if(i===null&&(i=void 0),i===void 0||_n(i)||s.Fd(i,"number or string",K,"setFromKeyForLinkData:key"),t!==null){var n=this.Wh;if(n!=="")if(i=this.Pn(i),this.uh(t)){var e=s.vb(t,n);e!==i&&(uo(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Ye(this,i,t),$t(this,"linkFromKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{On:"linkToKeyProperty"},function(){return this.Xh},function(t){var i=this.Xh;i!==t&&(jo(t,K,"linkToKeyProperty"),this.Xh=t,this.h("linkToKeyProperty",i,t))}),K.prototype.getToKeyForLinkData=K.prototype.dm=function(t){if(t!==null){var i=this.Xh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("ToKey value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setToKeyForLinkData=K.prototype.IB=function(t,i){if(i===null&&(i=void 0),i===void 0||_n(i)||s.Fd(i,"number or string",K,"setToKeyForLinkData:key"),t!==null){var n=this.Xh;if(n!=="")if(i=this.Pn(i),this.uh(t)){var e=s.vb(t,n);e!==i&&(uo(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Ye(this,i,t),$t(this,"linkToKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Eu:"linkFromPortIdProperty"},function(){return this.Qm},function(t){var i=this.Qm;i!==t&&(jo(t,K,"linkFromPortIdProperty"),t!==this.Nn&&t!==this.On||s.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Qm=t,this.h("linkFromPortIdProperty",i,t))}),K.prototype.getFromPortIdForLinkData=K.prototype.eI=function(t){if(t===null)return"";var i=this.Qm;return i===""?"":(t=s.vb(t,i),t===void 0?"":t)},K.prototype.setFromPortIdForLinkData=K.prototype.DB=function(t,i){if(s.j(i,"string",K,"setFromPortIdForLinkData:portname"),t!==null){var n=this.Qm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),$t(this,"linkFromPortId",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Gu:"linkToPortIdProperty"},function(){return this.Rm},function(t){var i=this.Rm;i!==t&&(jo(t,K,"linkToPortIdProperty"),t!==this.Nn&&t!==this.On||s.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Rm=t,this.h("linkToPortIdProperty",i,t))}),K.prototype.getToPortIdForLinkData=K.prototype.iI=function(t){if(t===null)return"";var i=this.Rm;return i===""?"":(t=s.vb(t,i),t===void 0?"":t)},K.prototype.setToPortIdForLinkData=K.prototype.JB=function(t,i){if(s.j(i,"string",K,"setToPortIdForLinkData:portname"),t!==null){var n=this.Rm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),$t(this,"linkToPortId",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{Fu:"linkLabelKeysProperty"},function(){return this.zg},function(t){var i=this.zg;i!==t&&(jo(t,K,"linkLabelKeysProperty"),this.zg=t,this.h("linkLabelKeysProperty",i,t))}),K.prototype.getLabelKeysForLinkData=K.prototype.Nk=function(t){if(t===null)return s.no;var i=this.zg;return i===""?s.no:(t=s.vb(t,i),t===void 0?s.no:t)},K.prototype.setLabelKeysForLinkData=K.prototype.uG=function(t,i){if(s.mA(i,K,"setLabelKeysForLinkData:arr"),t!==null){var n=this.zg;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);if(e===void 0&&(e=s.no),e!==i){for(var o=s.cb(e),r=0;r<o;r++){var h=s.Ba(e,r);uo(this,h,t)}for(s.Ma(t,n,i),o=s.cb(i),r=0;r<o;r++)h=s.Ba(i,r),this.we(h)===null&&Ye(this,h,t);$t(this,"linkLabelKeys",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n)}}else s.Ma(t,n,i)}},K.prototype.addLabelKeyForLinkData=K.prototype.yE=function(t,i){if(i!=null&&(_n(i)||s.Fd(i,"number or string",K,"addLabelKeyForLinkData:key"),t!==null)){var n=this.zg;if(n!==""){var e=s.vb(t,n);if(e===void 0)n=[],n.push(i),this.uG(t,n);else if(s.isArray(e)){var o=s.Sl(e,i);0<=o||(o=s.cb(e),s.sh(e,1/0,i),this.uh(t)&&(this.we(i)===null&&Ye(this,i,t),$t(this,"linkLabelKeys",Ei,n,t,null,i,null,o)))}else s.k(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},K.prototype.removeLabelKeyForLinkData=K.prototype.qJ=function(t,i){if(i!=null&&(_n(i)||s.Fd(i,"number or string",K,"removeLabelKeyForLinkData:key"),t!==null)){var n=this.zg;if(n!==""){var e=s.vb(t,n);if(s.isArray(e)){var o=s.Sl(e,i);0>o||(s.Jg(e,o),this.uh(t)&&(uo(this,i,t),$t(this,"linkLabelKeys",zi,n,t,i,null,o,null)))}else e!==void 0&&s.k(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},s.defineProperty(K,{Ah:"linkDataArray"},function(){return this.kf},function(t){var i=this.kf;if(i!==t){s.mA(t,K,"linkDataArray"),this.fd.clear();for(var n=s.cb(t),e=0;e<n;e++){var o=s.Ba(t,e);if(!s.Pa(o)){s.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);return}s.cq(o)}if(this.kf=t,this.Dj!==""){for(var r=new E(Object),e=0;e<n;e++){var o=s.Ba(t,e),h=this.cf(o);h===void 0||this.fd.ka(h)!==null?r.add(o):this.fd.add(h,o)}for(e=r.i;e.next();)o=e.value,this.Zx(o),r=this.cf(o),r!==void 0&&this.fd.add(r,o)}for(r=new R(Object),e=0;e<n;e++)o=s.Ba(t,e),r.add(o);for(this.Vi=r,$t(this,"linkDataArray",Jt,"linkDataArray",this,i,t),e=0;e<n;e++)o=s.Ba(t,e),G0(this,o)}}),s.defineProperty(K,{Dj:"linkKeyProperty"},function(){return this.Al},function(t){var i=this.Al;if(i!==t){jo(t,K,"linkKeyProperty"),this.Al=t,this.fd.clear();for(var n=s.cb(this.Ah),e=0;e<n;e++){var o=s.Ba(this.Ah,e),r=this.cf(o);r===void 0&&(this.Zx(o),r=this.cf(o)),r!==void 0&&this.fd.add(r,o)}this.h("linkKeyProperty",i,t)}}),K.prototype.getKeyForLinkData=K.prototype.cf=function(t){if(t!==null){var i=this.Al;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("Key value for link data "+t+" is not a number or a string: "+i)}}},K.prototype.setKeyForLinkData=K.prototype.tG=function(t,i){if(i!=null&&_n(i)||s.Fd(i,"number or string",K,"setKeyForLinkData:key"),t!==null){var n=this.Al;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e!==i&&this.Zp(i)===null&&(s.Ma(t,n,i),this.fd.remove(e),this.fd.add(i,t),$t(this,"linkKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(K,{rL:"makeUniqueLinkKeyFunction"},function(){return this.dp},function(t){var i=this.dp;i!==t&&(t!==null&&s.j(t,"function",K,"makeUniqueLinkKeyFunction"),this.dp=t,this.h("makeUniqueLinkKeyFunction",i,t))}),K.prototype.findLinkDataForKey=K.prototype.Zp=function(t){return t===null&&s.k("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&_n(t)?this.fd.ka(t):null},K.prototype.makeLinkDataKeyUnique=K.prototype.Zx=function(t){if(t!==null){var i=this.Al;if(i!==""){var n=this.cf(t);if(n===void 0||this.fd.contains(n)){var e=this.dp;if(e!==null&&(n=e(this,t),n!=null&&!this.fd.contains(n))){s.Ma(t,i,n);return}if(typeof n=="string"){for(e=2;this.fd.contains(n+e);)e++;s.Ma(t,i,n+e)}else if(n===void 0||typeof n=="number"){for(e=-this.fd.count-1;this.fd.contains(e);)e--;s.Ma(t,i,e)}else s.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+n)}}}},K.prototype.containsLinkData=K.prototype.uh=function(t){return t===null?!1:this.Vi.contains(t)},K.prototype.addLinkData=K.prototype.Ot=function(t){t!==null&&(s.cq(t),this.uh(t)||nd(this,t,!0))};function nd(t,i,n){if(t.Dj!==""){var e=t.cf(i);if(e!==void 0&&t.fd.ka(e)===i)return;if(t.Zx(i),e=t.cf(i),e===void 0){s.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+i+". Data not added to model.");return}t.fd.add(e,i)}t.Vi.add(i),e=null,n&&(e=s.cb(t.kf),s.sh(t.kf,e,i)),$t(t,"linkDataArray",Ei,"linkDataArray",t,null,i,null,e),G0(t,i)}K.prototype.addLinkDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.Ot(s.Ba(t,n));else for(t=t.i;t.next();)this.Ot(t.value)},K.prototype.removeLinkData=K.prototype.py=function(t){t!==null&&ed(this,t,!0)};function ed(t,i,n){t.Vi.remove(i);var e=t.cf(i);if(e!==void 0&&t.fd.remove(e),e=null,n){if(e=s.Sl(t.kf,i),0>e)return;s.Jg(t.kf,e)}if($t(t,"linkDataArray",zi,"linkDataArray",t,i,null,e,null),n=t.cm(i),uo(t,n,i),n=t.dm(i),uo(t,n,i),e=t.Nk(i),s.isArray(e))for(var o=s.cb(e),r=0;r<o;r++)n=s.Ba(e,r),uo(t,n,i)}K.prototype.removeLinkDataCollection=function(t){if(s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++)this.py(s.Ba(t,n));else for(t=t.i;t.next();)this.py(t.value)};function G0(t,i){var n=t.cm(i),n=t.Pn(n);t.we(n)===null&&Ye(t,n,i),n=t.dm(i),n=t.Pn(n),t.we(n)===null&&Ye(t,n,i);var e=t.Nk(i);if(s.isArray(e))for(var o=s.cb(e),r=0;r<o;r++)n=s.Ba(e,r),t.we(n)===null&&Ye(t,n,i)}s.defineProperty(K,{LK:"copyLinkDataFunction"},function(){return this.xo},function(t){var i=this.xo;i!==t&&(t!==null&&s.j(t,"function",K,"copyLinkDataFunction"),this.xo=t,this.h("copyLinkDataFunction",i,t))}),K.prototype.copyLinkData=K.prototype.ox=function(t){if(t===null)return null;var i=null,i=this.xo,i=i!==null?i(t,this):va(this,t,!0);return s.Pa(i)&&(s.oc(i),this.Wh!==""&&s.Ma(i,this.Wh,void 0),this.Xh!==""&&s.Ma(i,this.Xh,void 0),this.zg!==""&&s.Ma(i,this.zg,[])),i},s.defineProperty(K,{rq:"nodeIsGroupProperty"},function(){return this.hp},function(t){var i=this.hp;i!==t&&(jo(t,K,"nodeIsGroupProperty"),this.hp=t,this.h("nodeIsGroupProperty",i,t))}),K.prototype.isGroupForNodeData=K.prototype.WA=function(t){if(t===null)return!1;var i=this.hp;return i===""?!1:!!s.vb(t,i)},s.defineProperty(K,{Nu:"nodeGroupKeyProperty"},function(){return this.mh},function(t){var i=this.mh;i!==t&&(jo(t,K,"nodeGroupKeyProperty"),this.mh=t,this.h("nodeGroupKeyProperty",i,t))}),s.defineProperty(K,{vn:"copiesGroupKeyOfNodeData"},function(){return this.lr},function(t){this.lr!==t&&(s.j(t,"boolean",K,"copiesGroupKeyOfNodeData"),this.lr=t)}),K.prototype.getGroupKeyForNodeData=K.prototype.Dn=function(t){if(t!==null){var i=this.mh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("GroupKey value for node data "+t+" is not a number or a string: "+i)}}},K.prototype.setGroupKeyForNodeData=K.prototype.EB=function(t,i){if(i===null&&(i=void 0),i===void 0||_n(i)||s.Fd(i,"number or string",K,"setGroupKeyForNodeData:key"),t!==null){var n=this.mh;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e!==i&&(uo(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Ye(this,i,t),$t(this,"nodeGroupKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},K.prototype.copyNodeData=function(t){return t===null?null:(t=V.prototype.copyNodeData.call(this,t),this.vn||this.mh===""||s.vb(t,this.mh)===void 0||s.Ma(t,this.mh,void 0),t)},K.prototype.setDataProperty=function(t,i,n){if(this.Le(t))if(i===this.km)this.zy(t,n);else{if(i===this.Xn){this.xy(t,n);return}if(i===this.Nu){this.EB(t,n);return}i===this.rq&&s.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.uh(t)){if(i===this.Nn){this.CB(t,n);return}if(i===this.On){this.IB(t,n);return}if(i===this.Eu){this.DB(t,n);return}if(i===this.Gu){this.JB(t,n);return}if(i===this.Dj){this.tG(t,n);return}if(i===this.Du){this.sG(t,n);return}if(i===this.Fu){this.uG(t,n);return}}else!Gl&&t instanceof N&&(Gl=!0,s.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},B=K.prototype,B.Tu=function(t,i){V.prototype.Tu.call(this,t,i);for(var n=this.Lc.i;n.next();)this.wB(n.value,t,i);for(n=this.Vi.i;n.next();){var e=n.value,o=t,r=i;if(this.cm(e)===o){var h=this.Wh;s.Ma(e,h,r),$t(this,"linkFromKey",Jt,h,e,o,r),typeof h=="string"&&this.Jb(e,h)}if(this.dm(e)===o&&(h=this.Xh,s.Ma(e,h,r),$t(this,"linkToKey",Jt,h,e,o,r),typeof h=="string"&&this.Jb(e,h)),h=this.Nk(e),s.isArray(h))for(var l=s.cb(h),u=this.zg,f=0;f<l;f++)s.Ba(h,f)===o&&(s.GE(h,f,r),$t(this,"linkLabelKeys",Ei,u,e,o,r,f,f))}},B.wB=function(t,i,n){if(this.Dn(t)===i){var e=this.mh;s.Ma(t,e,n),$t(this,"nodeGroupKey",Jt,e,t,i,n),typeof e=="string"&&this.Jb(t,e)}},B.WB=function(){V.prototype.WB.call(this);for(var t=this.Ah,i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);G0(this,e)}},B.Aq=function(t){V.prototype.Aq.call(this,t),t=this.qb(t);var i=ca(this,t);if(i!==null){for(var n=new E(Object),i=i.i;i.next();){var e=i.value;if(this.Le(e)){if(this.Dn(e)===t){var o=this.mh;$t(this,"nodeGroupKey",Jt,o,e,t,t),typeof o=="string"&&this.Jb(e,o),n.add(e)}}else if(this.cm(e)===t&&(o=this.Wh,$t(this,"linkFromKey",Jt,o,e,t,t),typeof o=="string"&&this.Jb(e,o),n.add(e)),this.dm(e)===t&&(o=this.Xh,$t(this,"linkToKey",Jt,o,e,t,t),typeof o=="string"&&this.Jb(e,o),n.add(e)),o=this.Nk(e),s.isArray(o))for(var r=s.cb(o),h=this.zg,l=0;l<r;l++)s.Ba(o,l)===t&&($t(this,"linkLabelKeys",Ei,h,e,t,t,l,l),n.add(e))}for(n=n.i;n.next();)uo(this,t,n.value)}},B.zq=function(t){V.prototype.zq.call(this,t);var i=this.Dn(t);this.we(i)===null&&Ye(this,i,t)},B.gv=function(t){V.prototype.gv.call(this,t);var i=this.Dn(t);uo(this,i,t)},s.defineProperty(K,{Du:"linkCategoryProperty"},function(){return this.Pm},function(t){var i=this.Pm;i!==t&&(jo(t,K,"linkCategoryProperty"),this.Pm=t,this.h("linkCategoryProperty",i,t))}),K.prototype.getCategoryForLinkData=K.prototype.bq=function(t){if(t===null)return"";var i=this.Pm;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getCategoryForLinkData found a non-string category for "+t+": "+i),"")},K.prototype.setCategoryForLinkData=K.prototype.sG=function(t,i){if(s.j(i,"string",K,"setCategoryForLinkData:cat"),t!==null){var n=this.Pm;if(n!=="")if(this.uh(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),$t(this,"linkCategory",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}};function Lt(t){1<arguments.length&&s.k("TreeModel constructor can only take one optional argument, the Array of node data."),V.call(this),this.nh="parent",this.mr=!1,this.Ym="parentLinkCategory",t!==void 0&&(this.Pg=t)}s.La(Lt,V),s.ga("TreeModel",Lt),Lt.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.nh=this.nh,t.mr=this.mr,t.Ym=this.Ym},Lt.prototype.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.PB();var i=(this.name!==""?this.name:"")+" TreeModel";if(0<t){i+=`
 node data:`,t=this.Pg;for(var n=s.cb(t),e=0;e<n;e++)var o=s.Ba(t,e),i=i+(" "+this.qb(o)+":"+qe(o))}return i},Lt.prototype.ko=function(){var t=V.prototype.ko.call(this),i="";return this.Ou!=="parent"&&typeof this.Ou=="string"&&(i+=`,
  "nodeParentKeyProperty": `+this.quote(this.Ou)),t+i},Lt.prototype.Ru=function(t){V.prototype.Ru.call(this,t),t.nodeParentKeyProperty&&(this.Ou=t.nodeParentKeyProperty)},Lt.prototype.Pn=function(t){return t},s.defineProperty(Lt,{Ou:"nodeParentKeyProperty"},function(){return this.nh},function(t){var i=this.nh;i!==t&&(jo(t,Lt,"nodeParentKeyProperty"),this.nh=t,this.h("nodeParentKeyProperty",i,t))}),s.defineProperty(Lt,{wn:"copiesParentKeyOfNodeData"},function(){return this.mr},function(t){this.mr!==t&&(s.j(t,"boolean",Lt,"copiesParentKeyOfNodeData"),this.mr=t)}),Lt.prototype.getParentKeyForNodeData=Lt.prototype.Fn=function(t){if(t!==null){var i=this.nh;if(i!==""&&(i=s.vb(t,i),i!==void 0)){if(_n(i))return i;s.k("ParentKey value for node data "+t+" is not a number or a string: "+i)}}},Lt.prototype.setParentKeyForNodeData=Lt.prototype.ti=function(t,i){if(i===null&&(i=void 0),i===void 0||_n(i)||s.Fd(i,"number or string",Lt,"setParentKeyForNodeData:key"),t!==null){var n=this.nh;if(n!=="")if(i=this.Pn(i),this.Le(t)){var e=s.vb(t,n);e!==i&&(uo(this,e,t),s.Ma(t,n,i),this.we(i)===null&&Ye(this,i,t),$t(this,"nodeParentKey",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},s.defineProperty(Lt,{IL:"parentLinkCategoryProperty"},function(){return this.Ym},function(t){var i=this.Ym;i!==t&&(jo(t,Lt,"parentLinkCategoryProperty"),this.Ym=t,this.h("parentLinkCategoryProperty",i,t))}),Lt.prototype.getParentLinkCategoryForNodeData=Lt.prototype.gI=function(t){if(t===null)return"";var i=this.Ym;return i===""||(i=s.vb(t,i),i===void 0)?"":typeof i=="string"?i:(s.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i),"")},Lt.prototype.setParentLinkCategoryForNodeData=Lt.prototype.IJ=function(t,i){if(s.j(i,"string",Lt,"setParentLinkCategoryForNodeData:cat"),t!==null){var n=this.Ym;if(n!=="")if(this.Le(t)){var e=s.vb(t,n);e===void 0&&(e=""),e!==i&&(s.Ma(t,n,i),$t(this,"parentLinkCategory",Jt,n,t,e,i),typeof n=="string"&&this.Jb(t,n))}else s.Ma(t,n,i)}},Lt.prototype.copyNodeData=function(t){return t===null?null:(t=V.prototype.copyNodeData.call(this,t),this.wn||this.nh===""||s.vb(t,this.nh)===void 0||s.Ma(t,this.nh,void 0),t)},Lt.prototype.setDataProperty=function(t,i,n){if(this.Le(t))if(i===this.km)this.zy(t,n);else{if(i===this.Xn){this.xy(t,n);return}if(i===this.Ou){this.ti(t,n);return}}else!Gl&&t instanceof N&&(Gl=!0,s.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),s.trace("  Is that really your intent?"));var e=s.vb(t,i);e!==n&&(s.Ma(t,i,n),this.qB(t,i,e,n))},B=Lt.prototype,B.Tu=function(t,i){V.prototype.Tu.call(this,t,i);for(var n=this.Lc.i;n.next();)this.wB(n.value,t,i)},B.wB=function(t,i,n){if(this.Fn(t)===i){var e=this.nh;s.Ma(t,e,n),$t(this,"nodeParentKey",Jt,e,t,i,n),typeof e=="string"&&this.Jb(t,e)}},B.Aq=function(t){V.prototype.Aq.call(this,t),t=this.qb(t);var i=ca(this,t);if(i!==null){for(var n=new E(Object),i=i.i;i.next();){var e=i.value;if(this.Le(e)&&this.Fn(e)===t){var o=this.nh;$t(this,"nodeParentKey",Jt,o,e,t,t),typeof o=="string"&&this.Jb(e,o),n.add(e)}}for(n=n.i;n.next();)uo(this,t,n.value)}},B.zq=function(t){V.prototype.zq.call(this,t);var i=this.Fn(t),i=this.Pn(i);this.we(i)===null&&Ye(this,i,t)},B.gv=function(t){V.prototype.gv.call(this,t);var i=this.Fn(t);uo(this,i,t)};function Pt(t,i,n){s.oc(this),this.P=!1,t===void 0?t="":s.j(t,"string",Pt,"constructor:targetprop"),i===void 0?i=t:s.j(i,"string",Pt,"constructor:sourceprop"),n===void 0?n=null:n!==null&&s.j(n,"function",Pt,"constructor:conv"),this.bE=-1,this.Gg=null,this.Dp=t,this.Cp=this.Bt=0,this.Ow=null,this.ds=!1,this.sp=i,this.ir=n,this.ys=od,this.br=null,this.sz=new R}s.ga("Binding",Pt),Pt.prototype.copy=function(){var t=new Pt;return t.Dp=this.Dp,t.Bt=this.Bt,t.Cp=this.Cp,t.Ow=this.Ow,t.ds=this.ds,t.sp=this.sp,t.ir=this.ir,t.ys=this.ys,t.br=this.br,t};var od;Pt.OneWay=od=s.p(Pt,"OneWay",1);var da;Pt.TwoWay=da=s.p(Pt,"TwoWay",2),Pt.parseEnum=function(t,i){return s.j(t,"function",Pt,"parseEnum:ctor"),s.ob(i,t,Pt,"parseEnum:defval"),function(n){return n=Rr(t,n),n===null?i:n}},Pt.prototype.ic=function(t){t.Je===Pt?this.mode=t:s.Lj(this,t)};var qe;Pt.toString=qe=function(t){var i=t;return s.Pa(t)&&(t.text?i=t.text:t.name?i=t.name:t.key!==void 0?i=t.key:t.id!==void 0?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:t.Key!==void 0?i=t.Key:t.Id!==void 0?i=t.Id:t.ID!==void 0&&(i=t.ID))),i===void 0?"undefined":i===null?"null":i.toString()},Pt.prototype.toString=function(){return"Binding("+this.Cy+":"+this.xG+(this.sm!==-1?" "+this.sm:"")+" "+this.mode.name+")"},Pt.prototype.freeze=function(){return this.P=!0,this},Pt.prototype.Qa=function(){return this.P=!1,this},s.defineProperty(Pt,{sm:null},function(){return this.bE},function(t){this.P&&s.ma(this),s.j(t,"number",Pt,"targetId"),this.bE=t}),s.defineProperty(Pt,{Cy:"targetProperty"},function(){return this.Dp},function(t){this.P&&s.ma(this),s.j(t,"string",Pt,"targetProperty"),this.Dp=t}),s.defineProperty(Pt,{Kq:"sourceName"},function(){return this.Ow},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"string",Pt,"sourceName"),this.Ow=t,t!==null&&(this.ds=!1)}),s.defineProperty(Pt,{Px:"isToModel"},function(){return this.ds},function(t){this.P&&s.ma(this),s.j(t,"boolean",Pt,"isToModel"),this.ds=t}),s.defineProperty(Pt,{xG:"sourceProperty"},function(){return this.sp},function(t){this.P&&s.ma(this),s.j(t,"string",Pt,"sourceProperty"),this.sp=t}),s.defineProperty(Pt,{GH:"converter"},function(){return this.ir},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"function",Pt,"converter"),this.ir=t}),s.defineProperty(Pt,{vH:"backConverter"},function(){return this.br},function(t){this.P&&s.ma(this),t!==null&&s.j(t,"function",Pt,"backConverter"),this.br=t}),s.defineProperty(Pt,{mode:"mode"},function(){return this.ys},function(t){this.P&&s.ma(this),s.ob(t,Pt,Pt,"mode"),this.ys=t}),Pt.prototype.makeTwoWay=Pt.prototype.RI=function(t){return t===void 0&&(t=null),t!==null&&s.j(t,"function",Pt,"makeTwoWay"),this.mode=da,this.vH=t,this},Pt.prototype.ofObject=Pt.prototype.by=function(t){return t===void 0&&(t=""),this.Kq=t,this.Px=!1,this},Pt.prototype.ofModel=function(){return this.Kq=null,this.Px=!0,this};function rd(t,i,n){return t=t.Kq,t===null||t===""?i:t==="/"?n.W:t==="."?n:t===".."?n.R:i.Cd(t)}Pt.prototype.updateTarget=Pt.prototype.MG=function(t,i,n){var e=this.sp;if(n===void 0||e===""||e===n){n=this.Dp;var o=this.ir;if(o===null&&n==="")s.trace("Binding error: target property is the empty string: "+this.toString());else{var r=i;if(e!==""&&(r=s.vb(i,e)),r!==void 0)if(o===null)n!==""&&s.Ma(t,n,r);else try{if(n!==""){var h=o(r,t);s.Ma(t,n,h)}else o(r,t)}catch{}}}},Pt.prototype.updateSource=Pt.prototype.Ey=function(t,i,n,e){if(this.ys===da){var o=this.Dp;if(n===void 0||o===n){n=this.sp;var r=this.br,h=t;if(o!==""&&(h=s.vb(t,o)),h!==void 0&&!this.sz.contains(t))try{this.sz.add(t);var l=e!==null?e.g:null,u=l!==null?l.$:null;if(r===null){if(n!=="")u!==null?u.setDataProperty(i,n,h):s.Ma(i,n,h);else if(u!==null&&e!==null&&0<=e.Bu&&e.R!==null&&Array.isArray(e.R.mq)){var f=e.Bu,a=e.R.mq;u.cG(a,f),u.QA(a,f,h)}}else try{if(n!==""){var p=r(h,i,u);u!==null?u.setDataProperty(i,n,p):s.Ma(i,n,p)}else p=r(h,i,u),p!==void 0&&u!==null&&e!==null&&0<=e.Bu&&e.R!==null&&Array.isArray(e.R.mq)&&(f=e.Bu,a=e.R.mq,u.cG(a,f),u.QA(a,f,p))}catch{}}finally{this.sz.remove(t)}}}};function Nn(){this.SG=new E(zt).freeze(),this.Sb="",this.iD=!1}s.ga("Transaction",Nn),Nn.prototype.toString=function(t){var i="Transaction: "+this.name+" "+this.Wf.count.toString()+(this.uu?"":", incomplete");if(t!==void 0&&0<t){t=this.Wf.count;for(var n=0;n<t;n++){var e=this.Wf.fa(n);e!==null&&(i+=`
  `+e.toString())}}return i},Nn.prototype.clear=Nn.prototype.clear=function(){var t=this.Wf;t.Qa();for(var i=t.count-1;0<=i;i--){var n=t.fa(i);n!==null&&n.clear()}t.clear(),t.freeze()},Nn.prototype.canUndo=Nn.prototype.canUndo=function(){return this.uu},Nn.prototype.undo=Nn.prototype.undo=function(){if(this.canUndo())for(var t=this.Wf.count-1;0<=t;t--){var i=this.Wf.fa(t);i!==null&&i.undo()}},Nn.prototype.canRedo=Nn.prototype.canRedo=function(){return this.uu},Nn.prototype.redo=Nn.prototype.redo=function(){if(this.canRedo())for(var t=this.Wf.count,i=0;i<t;i++){var n=this.Wf.fa(i);n!==null&&n.redo()}},s.u(Nn,{Wf:"changes"},function(){return this.SG}),s.defineProperty(Nn,{name:"name"},function(){return this.Sb},function(t){this.Sb=t}),s.defineProperty(Nn,{uu:"isComplete"},function(){return this.iD},function(t){this.iD=t});function Rt(){this.Iz=new R(V),this.jf=!1,this.WG=new E(Nn).freeze(),this.dh=-1,this.wD=999,this.gh=!1,this.Hv=null,this.Ml=0,this.tC=!1,this.lh=new E("string").freeze(),this.gp=new E("number"),this.uz=!0,this.Dz=!1}s.ga("UndoManager",Rt),Rt.prototype.toString=function(t){for(var i="UndoManager "+this.wj+"<"+this.history.count+"<="+this.QF,i=i+"[",n=this.VF.count,e=0;e<n;e++)0<e&&(i+=" "),i+=this.VF.fa(e);if(i+="]",t!==void 0&&0<t)for(n=this.history.count,e=0;e<n;e++)i+=`
 `+this.history.fa(e).toString(t-1);return i},Rt.prototype.clear=Rt.prototype.clear=function(){var t=this.history;t.Qa();for(var i=t.count-1;0<=i;i--){var n=t.fa(i);n!==null&&n.clear()}t.clear(),this.dh=-1,t.freeze(),this.gh=!1,this.Hv=null,this.Ml=0,this.lh.Qa(),this.lh.clear(),this.lh.freeze(),this.gp.clear()},Rt.prototype.addModel=Rt.prototype.oH=function(t){this.Iz.add(t)},Rt.prototype.removeModel=Rt.prototype.rJ=function(t){this.Iz.remove(t)},Rt.prototype.startTransaction=Rt.prototype.Ib=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.lb)return!1;this.uz===!0&&(this.uz=!1,this.Ml++,this.hd("StartingFirstTransaction",t,this.sj),0<this.Ml&&this.Ml--),this.isEnabled&&(this.lh.Qa(),this.lh.add(t),this.lh.freeze(),this.sj===null?this.gp.add(0):this.gp.add(this.sj.Wf.count)),this.Ml++;var i=this.wi===1;return i&&this.hd("StartedTransaction",t,this.sj),i},Rt.prototype.commitTransaction=Rt.prototype.Yc=function(t){return t===void 0&&(t=""),sd(this,!0,t)},Rt.prototype.rollbackTransaction=Rt.prototype.mm=function(){return sd(this,!1,"")};function sd(t,i,n){if(t.lb)return!1;t.nA&&1>t.wi&&s.trace("Ending transaction without having started a transaction: "+n);var e=t.wi===1;e&&i&&t.hd("CommittingTransaction",n,t.sj);var o=0;if(0<t.wi&&(t.Ml--,t.isEnabled)){var r=t.lh.count;0<r&&(n===""&&(n=t.lh.fa(0)),t.lh.Qa(),t.lh.cd(r-1),t.lh.freeze()),r=t.gp.count,0<r&&(o=t.gp.fa(r-1),t.gp.cd(r-1))}if(r=t.sj,e){if(i){if(t.Dz=!1,t.isEnabled&&r!==null){for(i=r,i.uu=!0,i.name=n,e=t.history,e.Qa(),o=e.count-1;o>t.wj;o--)r=e.fa(o),r!==null&&r.clear(),e.cd(o),t.Dz=!0;o=t.QF,o===0&&(o=1),0<o&&e.count>=o&&(r=e.fa(0),r!==null&&r.clear(),e.cd(0),t.dh--),e.add(i),t.dh++,e.freeze(),r=i}t.hd("CommittedTransaction",n,r)}else{t.gh=!0;try{t.isEnabled&&r!==null&&(r.uu=!0,r.undo())}finally{t.hd("RolledBackTransaction",n,r),t.gh=!1}r!==null&&r.clear()}return t.Hv=null,!0}if(t.isEnabled&&!i&&r!==null){for(t=o,n=r.Wf,i=n.count-1;i>=t;i--)e=n.fa(i),e!==null&&e.undo(),n.Qa(),n.cd(i);n.freeze()}return!1}Rt.prototype.canUndo=Rt.prototype.canUndo=function(){if(!this.isEnabled||0<this.wi)return!1;var t=this.IG;return!!(t!==null&&t.canUndo())},Rt.prototype.undo=Rt.prototype.undo=function(){if(this.canUndo()){var t=this.IG;try{this.gh=!0,this.hd("StartingUndo","Undo",t),this.dh--,t.undo()}catch(i){s.trace("undo error: "+i.toString())}finally{this.hd("FinishedUndo","Undo",t),this.gh=!1}}},Rt.prototype.canRedo=Rt.prototype.canRedo=function(){if(!this.isEnabled||0<this.wi)return!1;var t=this.HG;return!!(t!==null&&t.canRedo())},Rt.prototype.redo=Rt.prototype.redo=function(){if(this.canRedo()){var t=this.HG;try{this.gh=!0,this.hd("StartingRedo","Redo",t),this.dh++,t.redo()}catch(i){s.trace("redo error: "+i.toString())}finally{this.hd("FinishedRedo","Redo",t),this.gh=!1}}},Rt.prototype.hd=function(t,i,n){n===void 0&&(n=null);var e=new zt;for(e.Fc=Co,e.propertyName=t,e.object=n,e.oldValue=i,t=this.aJ;t.next();)i=t.value,e.$=i,i.mx(e)},Rt.prototype.handleChanged=Rt.prototype.tF=function(t){if(this.isEnabled&&!this.lb&&!this.skipsEvent(t)){var n=this.sj;n===null&&(this.Hv=n=new Nn);var i=t.copy(),n=n.Wf;n.Qa(),n.add(i),n.freeze(),this.nA&&0>=this.wi&&!this.uz&&(t=t.g,t!==null&&t.Kn===!1||s.trace("Change not within a transaction: "+i.toString()))}},Rt.prototype.skipsEvent=function(t){if(t===null||0>t.Fc.value)return!0;if(t=t.object,t instanceof N){if(t=t.layer,t!==null&&t.Hc)return!0}else if(t instanceof ct&&t.Hc)return!0;return!1},s.u(Rt,{aJ:"models"},function(){return this.Iz.i}),s.defineProperty(Rt,{isEnabled:"isEnabled"},function(){return this.jf},function(t){this.jf=t}),s.u(Rt,{IG:"transactionToUndo"},function(){return 0<=this.wj&&this.wj<=this.history.count-1?this.history.fa(this.wj):null}),s.u(Rt,{HG:"transactionToRedo"},function(){return this.wj<this.history.count-1?this.history.fa(this.wj+1):null}),s.u(Rt,{lb:"isUndoingRedoing"},function(){return this.gh}),s.u(Rt,{history:"history"},function(){return this.WG}),s.defineProperty(Rt,{QF:"maxHistoryLength"},function(){return this.wD},function(t){this.wD=t}),s.u(Rt,{wj:"historyIndex"},function(){return this.dh}),s.u(Rt,{sj:"currentTransaction"},function(){return this.Hv}),s.u(Rt,{wi:"transactionLevel"},function(){return this.Ml}),s.u(Rt,{FF:"isInTransaction"},function(){return 0<this.Ml}),s.defineProperty(Rt,{nA:"checksTransactionLevel"},function(){return this.tC},function(t){this.tC=t}),s.u(Rt,{VF:"nestedTransactionNames"},function(){return this.lh});function it(){0<arguments.length&&s.nd(it),s.oc(this),this.aa=null,this.wC=!1,this.RC=this.xC=!0,this.zC=this.AC=this.SC=this.BC=!1,this.Dl=this.mC=null,this.sE=1.05,this.OC=1,this.Ez=NaN,this.tD=null,this.hA=NaN,this.gA=F0,this.hj=null,this.SD=0}s.ga("CommandHandler",it);var Ol=null,nf="";it.prototype.toString=function(){return"CommandHandler"},s.u(it,{g:"diagram"},function(){return this.aa}),it.prototype.Tc=function(t){this.aa=t},it.prototype.doKeyDown=function(){var t=this.g;if(t!==null){var i=t.N,n=s.zh?i.Iu:i.control,e=i.shift,o=i.alt,r=i.key;!n||r!=="C"&&r!=="Insert"?n&&r==="X"||e&&r==="Del"?this.canCutSelection()&&this.cutSelection():n&&r==="V"||e&&r==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&r==="Y"||o&&e&&r==="Backspace"?this.canRedo()&&this.redo():n&&r==="Z"||o&&r==="Backspace"?this.canUndo()&&this.undo():r==="Del"||r==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&r==="A"?this.canSelectAll()&&this.selectAll():r==="Esc"?this.canStopCommand()&&this.stopCommand():r==="Up"?t.se&&(n?t.scroll("pixel","up"):t.scroll("line","up")):r==="Down"?t.se&&(n?t.scroll("pixel","down"):t.scroll("line","down")):r==="Left"?t.re&&(n?t.scroll("pixel","left"):t.scroll("line","left")):r==="Right"?t.re&&(n?t.scroll("pixel","right"):t.scroll("line","right")):r==="PageUp"?e&&t.re?t.scroll("page","left"):t.se&&t.scroll("page","up"):r==="PageDown"?e&&t.re?t.scroll("page","right"):t.se&&t.scroll("page","down"):r==="Home"?n&&t.se?t.scroll("document","up"):!n&&t.re&&t.scroll("document","left"):r==="End"?n&&t.se?t.scroll("document","down"):!n&&t.re&&t.scroll("document","right"):r===" "?this.canScrollToPart()&&this.scrollToPart():r==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():r==="Add"?this.canIncreaseZoom()&&this.increaseZoom():n&&r==="0"?this.canResetZoom()&&this.resetZoom():e&&r==="Z"?this.canZoomToFit()&&this.zoomToFit():n&&!e&&r==="G"?this.canGroupSelection()&&this.groupSelection():n&&e&&r==="G"?this.canUngroupSelection()&&this.ungroupSelection():i.event&&i.event.which===113?this.canEditTextBlock()&&this.editTextBlock():i.event&&i.event.which===93?this.canShowContextMenu()&&this.showContextMenu():i.bubbles=!0:this.canCopySelection()&&this.copySelection()}},it.prototype.doKeyUp=function(){var t=this.g;t!==null&&(t.N.bubbles=!0)},it.prototype.stopCommand=function(){var t=this.g;if(t!==null){var i=t.Xa;i instanceof pt&&t.Bf&&t.oA(),i!==null&&i.doCancel()}},it.prototype.canStopCommand=function(){return!0},it.prototype.selectAll=function(){var t=this.g;if(t!==null){t.oa();try{t.kc="wait",t.Aa("ChangingSelection");for(var i=t.Hj;i.next();)i.value.jb=!0;for(var n=t.ig;n.next();)n.value.jb=!0;for(var e=t.links;e.next();)e.value.jb=!0}finally{t.Aa("ChangedSelection"),t.kc=""}}},it.prototype.canSelectAll=function(){var t=this.g;return t!==null&&t.Bf},it.prototype.deleteSelection=function(){var t=this.g;if(t!==null&&!t.Aa("SelectionDeleting",t.selection))try{t.kc="wait",t.Ib("Delete"),t.Aa("ChangingSelection");for(var i=new R(L),n=t.selection.i;n.next();)ps(i,n.value,!0,this.QH?1/0:0,this.WE?null:!1,function(e){return e.canDelete()});t.vB(i,!0),t.Aa("SelectionDeleted",i)}finally{t.Aa("ChangedSelection"),t.Yc("Delete"),t.kc=""}},it.prototype.canDeleteSelection=function(){var t=this.g;return!(t===null||t.ib||t.Ef||!t.nn||t.selection.count===0)};function ps(t,i,n,e,o,r){if(r===void 0&&(r=null),!(t.contains(i)||r!==null&&!r(i)||i instanceof vt)){if(t.add(i),i instanceof I){if(n&&i instanceof q)for(var h=i.hc;h.next();)ps(t,h.value,n,e,o,r);if(o!==!1)for(h=i.je;h.next();){var l=h.value;if(!t.contains(l)){var u=l.V,f=l.Z,u=u===null||t.contains(u),f=f===null||t.contains(f);(o?u&&f:u||f)&&ps(t,l,n,e,o,r)}}if(1<e)for(i=i.fF();i.next();)ps(t,i.value,n,e-1,o,r)}else if(i instanceof k)for(i=i.Ff;i.next();)ps(t,i.value,n,e,o,r)}}it.prototype.Tp=function(t,i,n){var e=new tt(L,L);for(t=t.i;t.next();)O0(this,t.value,i,e,n);if(i!==null){n=i.$,t=!1,i.Va.ce!==null&&(t=i.Va.ce.uj);for(var o=new R(k),r=new tt(k,k),h=e.i;h.next();){var l=h.value;if(l instanceof k){var u=l;t||u.V!==null&&u.Z!==null||o.add(u)}else if(n instanceof Lt&&l instanceof I&&l.data!==null){var u=n,f=l,l=h.key,a=l.Kk();a!==null&&(a=e.ka(a),a!==null?(u.ti(f.data,u.qb(a.data)),u=i.Yf(f.data),l=l.Bn(),l!==null&&u!==null&&r.add(l,u)):u.ti(f.data,void 0))}}if(0<o.count&&i.vB(o,!1),0<r.count)for(n=r.i;n.next();)e.add(n.key,n.value)}if(i!==null&&this.g!==null&&(i=i.$,n=i.qH,n!==null)){var p=new tt;e.each(function(y){y.key.data!==null&&p.add(y.key.data,y.value.data)}),n(p,i,this.g.$)}for(i=e.i;i.next();)i.value.Jb();return e};function O0(t,i,n,e,o){if(i===null||o&&!i.canCopy())return null;if(e.contains(i))return e.ka(i);var r=null,h=i.data;if(h!==null&&n!==null){var l=n.$;i instanceof k?l instanceof K&&(h=l.ox(h),s.Pa(h)&&(l.Ot(h),r=n.Yf(h))):(h=l.copyNodeData(h),s.Pa(h)&&(l.Pl(h),r=n.wh(h)))}else Xe(i),r=i.copy(),r!==null&&(n!==null?n.add(r):h!==null&&t.g!==null&&t.HH&&(l=t.g.$,h=r instanceof k&&l instanceof K?l.ox(h):l.copyNodeData(h),s.Pa(h)&&(r.data=h)));if(!(r instanceof L))return null;if(r.jb=!1,r.Og=!1,e.add(i,r),i instanceof I){for(h=i.je;h.next();){if(l=h.value,l.V===i){var u=e.ka(l);u!==null&&(u.V=r)}l.Z===i&&(u=e.ka(l),u!==null&&(u.Z=r))}if(i instanceof q&&r instanceof q)for(h=r,i=i.hc;i.next();)l=O0(t,i.value,n,e,o),l instanceof k||l===null||(l.Ca=h)}else if(i instanceof k&&r instanceof k)for(h=i.V,h!==null&&(h=e.ka(h),h!==null&&(r.V=h)),h=i.Z,h!==null&&(h=e.ka(h),h!==null&&(r.Z=h)),i=i.Ff;i.next();)h=O0(t,i.value,n,e,o),h!==null&&h instanceof I&&(h.Xb=r);return r}it.prototype.copySelection=function(){var t=this.g;if(t!==null){for(var i=new R(L),t=t.selection.i;t.next();)ps(i,t.value,!0,this.KH?1/0:0,this.IH,function(e){return e.canCopy()});this.copyToClipboard(i)}},it.prototype.canCopySelection=function(){var t=this.g;return!!(t!==null&&t.Ck&&t.iA&&t.selection.count!==0)},it.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},it.prototype.canCutSelection=function(){var t=this.g;return!!(t!==null&&!t.ib&&!t.Ef&&t.Ck&&t.nn&&t.iA&&t.selection.count!==0)},it.prototype.copyToClipboard=function(t){var i=this.g;if(i!==null){var n=null;if(t===null)Ol=null,nf="";else{var n=i.$,e=!1,o=!1,r=null;try{if(n instanceof Lt){var h=n,e=h.wn;h.wn=this.PE}n instanceof K&&(h=n,o=h.vn,h.vn=this.OE),r=i.Tp(t,null,!0)}finally{n instanceof Lt&&(n.wn=e),n instanceof K&&(n.vn=o),n=new E(L),n.Pc(r),Ol=n,nf=i.$.Yl}}i.Aa("ClipboardChanged",n)}},it.prototype.pasteFromClipboard=function(){var t=new R(L),i=Ol;if(i===null)return t;var n=this.g;if(n===null||nf!==n.$.Yl)return t;var e=n.$,o=!1,r=!1,h=null;try{if(e instanceof Lt){var l=e,o=l.wn;l.wn=this.PE}e instanceof K&&(l=e,r=l.vn,l.vn=this.OE),h=n.Tp(i,n,!1)}finally{for(e instanceof Lt&&(e.wn=o),e instanceof K&&(e.vn=r),i=h.i;i.next();)n=i.value,e=i.key,n.location.I()||(e.location.I()?n.location=e.location:!n.position.I()&&e.position.I()&&(n.position=e.position)),t.add(n)}return t},it.prototype.pasteSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.kc="wait",i.Ib("Paste"),i.Aa("ChangingSelection");var n=this.pasteFromClipboard();0<n.count&&ff(i);for(var e=n.i;e.next();)e.value.jb=!0;if(i.Aa("ChangedSelection"),t!==null){var o=i.computePartsBounds(i.selection);if(o.I()){var r=i.Va.ce;r===null&&(r=new dt,r.Tc(i));var h=r.computeEffectiveCollection(i.selection);r.moveParts(h,new D(t.x-o.la,t.y-o.sa),!1)}}i.Aa("ClipboardPasted",n)}finally{i.Yc("Paste"),i.kc=""}},it.prototype.canPasteSelection=function(){var t=this.g;return!(t===null||t.ib||t.Ef||!t.Kp||!t.iA||Ol===null||Ol.count===0||nf!==t.$.Yl)},it.prototype.undo=function(){var t=this.g;t!==null&&t.ja.undo()},it.prototype.canUndo=function(){var t=this.g;return t===null||t.ib||t.Ef?!1:t.BE&&t.ja.canUndo()},it.prototype.redo=function(){var t=this.g;t!==null&&t.ja.redo()},it.prototype.canRedo=function(){var t=this.g;return t===null||t.ib||t.Ef?!1:t.BE&&t.ja.canRedo()},it.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.Hy),s.Ad(t,it,"decreaseZoom:factor");var i=this.g;i!==null&&i.Tl===De&&(t*=i.scale,t<i.Ch||t>i.Bh||(i.scale=t))},it.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.Hy),s.Ad(t,it,"canDecreaseZoom:factor");var i=this.g;return i===null||i.Tl!==De?!1:(t*=i.scale,t<i.Ch||t>i.Bh?!1:i.lx)},it.prototype.increaseZoom=function(t){t===void 0&&(t=this.Hy),s.Ad(t,it,"increaseZoom:factor");var i=this.g;i!==null&&i.Tl===De&&(t*=i.scale,t<i.Ch||t>i.Bh||(i.scale=t))},it.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.Hy),s.Ad(t,it,"canIncreaseZoom:factor");var i=this.g;return i===null||i.Tl!==De?!1:(t*=i.scale,t<i.Ch||t>i.Bh?!1:i.lx)},it.prototype.resetZoom=function(t){t===void 0&&(t=this.tx),s.Ad(t,it,"resetZoom:newscale");var i=this.g;i===null||t<i.Ch||t>i.Bh||(i.scale=t)},it.prototype.canResetZoom=function(t){t===void 0&&(t=this.tx),s.Ad(t,it,"canResetZoom:newscale");var i=this.g;return i===null||t<i.Ch||t>i.Bh?!1:i.lx},it.prototype.zoomToFit=function(){var t=this.g;if(t!==null){var i=t.scale,n=t.position;i===this.hA&&!isNaN(this.Ez)&&t.Nd.L(this.gA)?(t.scale=this.Ez,t.position=this.tD,this.hA=NaN,this.gA=F0):(this.Ez=i,this.tD=n.copy(),t.zoomToFit(),this.hA=t.scale,this.gA=t.Nd.copy())}},it.prototype.canZoomToFit=function(){var t=this.g;return t===null?!1:t.lx},it.prototype.scrollToPart=function(t){t===void 0&&(t=null),t!==null&&s.G(t,L,it,"part");var i=this.g;if(i!==null){if(t===null){try{this.hj!==null&&(this.hj.next()?t=this.hj.value:this.hj=null)}catch{this.hj=null}t===null&&(0<i.em.count?this.hj=i.em.i:0<i.selection.count&&(this.hj=i.selection.i),this.hj!==null&&this.hj.next()&&(t=this.hj.value))}if(t!==null){var n=i.Ka;n.Yn("Scroll To Part");var e=this.CJ;if(0<e){var o=Oh(this,t,[t]),r=function(){i.Ib();for(var u=o.pop();0<o.length&&u instanceof I&&u.wc&&(!(u instanceof q)||u.$c);)u=o.pop();0<o.length?(u instanceof L&&i.nG(u.U),u instanceof I&&!u.wc&&(u.wc=!0),u instanceof q&&!u.$c&&(u.$c=!0)):(u instanceof L&&i.IE(u.U),i.uB("LayoutCompleted",h)),i.Yc("Scroll To Part")},h=function(){setTimeout(r,(n.isEnabled?n.duration:0)+e)};i.ax("LayoutCompleted",h),r()}else{var l=i.position.copy();i.IE(t.U),l.Qc(i.position)&&n.Ih()}}}};function Oh(t,i,n){if(i.isVisible())return n;if(i instanceof vt)Oh(t,i.Ze,n);else if(i instanceof k){var e=i.V;e!==null&&Oh(t,e,n),i=i.Z,i!==null&&Oh(t,i,n)}else i instanceof I&&(e=i.Xb,e!==null&&Oh(t,e,n),e=i.Kk(),e!==null&&(e.wc||e.Mq||n.push(e),Oh(t,e,n))),i=i.Ca,i!==null&&(i.$c||i.Gy||n.push(i),Oh(t,i,n));return n}it.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof L)?!1:(t=this.g,t===null||t.selection.count===0&&t.em.count===0?!1:t.re&&t.se)},it.prototype.collapseTree=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Collapse Tree"),i.Ka.Yn("Collapse Tree");var n=new E(I);if(t!==null&&t.wc)t.collapseTree(),n.add(t);else for(var e=i.selection.i;e.next();){var o=e.value;o instanceof I&&(t=o,t.wc&&(t.collapseTree(),n.add(t)))}i.Aa("TreeCollapsed",n)}finally{i.Yc("Collapse Tree")}},it.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null){if(!(t instanceof I&&t.wc))return!1;if(0<t.Gx().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof I&&i.wc&&0<i.Gx().count)return!0;return!1},it.prototype.expandTree=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Expand Tree"),i.Ka.Yn("Expand Tree");var n=new E(I);if(t===null||t.wc)for(var e=i.selection.i;e.next();){var o=e.value;o instanceof I&&(t=o,t.wc||(t.expandTree(),n.add(t)))}else t.expandTree(),n.add(t);i.Aa("TreeExpanded",n)}finally{i.Yc("Expand Tree")}},it.prototype.canExpandTree=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null){if(!(t instanceof I)||t.wc)return!1;if(0<t.Gx().count)return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof I&&!i.wc&&0<i.Gx().count)return!0;return!1},it.prototype.groupSelection=function(){var t=this.g;if(t!==null){var i=t.$;if(i instanceof K){var n=this.CE;if(n!==null){var e=null;try{t.kc="wait",t.Ib("Group"),t.Aa("ChangingSelection");for(var o=new E(L),r=t.selection.i;r.next();){var h=r.value;h.he()&&h.canGroup()&&o.add(h)}for(var l=new E(L),u=o.i;u.next();){for(var f=u.value,r=!1,a=o.i;a.next();)if(f.qi(a.value)){r=!0;break}r||l.add(f)}if(0<l.count){var p=l.first().Ca;if(p!==null)for(;p!==null;){for(var o=!1,y=l.i;y.next();)if(!y.value.qi(p)){o=!0;break}if(o)p=p.Ca;else break}if(n instanceof q)Xe(n),e=n.copy(),e!==null&&t.add(e);else if(i.WA(n)){var c=i.copyNodeData(n);s.Pa(c)&&(i.Pl(c),e=t.Fx(c))}if(e!==null){p!==null&&this.isValidMember(p,e)&&(e.Ca=p);for(var v=l.i;v.next();){var d=v.value;this.isValidMember(e,d)&&(d.Ca=e)}t.select(e)}}t.Aa("ChangedSelection"),t.Aa("SelectionGrouped",e)}finally{t.Yc("Group"),t.kc=""}}}}},it.prototype.canGroupSelection=function(){var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.gx||!(t.$ instanceof K)||this.CE===null)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canGroup())return!0}return!1};function V0(t){var i=s.Za();for(t=t.i;t.next();){var n=t.value;n instanceof k||i.push(n)}t=new R(L);for(var n=i.length,e=0;e<n;e++){for(var o=i[e],r=!0,h=0;h<n;h++)if(o.qi(i[h])){r=!1;break}r&&t.add(o)}return s.ra(i),t}it.prototype.isValidMember=function(t,i){if(i===null||t===i||i instanceof k)return!1;if(t!==null){if(t===i||t.qi(i))return!1;var n=t.gB;if(n!==null&&!n(t,i)||t.data===null&&i.data!==null||t.data!==null&&i.data===null)return!1}return n=this.gB,n!==null?n(t,i):!0},it.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null){var n=i.$;if(n instanceof K)try{i.kc="wait",i.Ib("Ungroup"),i.Aa("ChangingSelection");var e=new E(q);if(t!==null)e.add(t);else for(var o=i.selection.i;o.next();){var r=o.value;r instanceof q&&(t=r,t.canUngroup()&&e.add(t))}if(0<e.count){i.oA();for(var h=e.i;h.next();){var l=h.value;l.expandSubGraph();var u=l.Ca,f=u!==null&&u.data!==null?n.qb(u.data):void 0,a=new E(L);a.Pc(l.hc);for(var p=a.i;p.next();){var y=p.value;if(y.jb=!0,!(y instanceof k)){var c=y.data;c!==null?n.EB(c,f):y.Ca=u}}i.remove(l)}}i.Aa("ChangedSelection"),i.Aa("SelectionUngrouped",e,a)}finally{i.Yc("Ungroup"),i.kc=""}}},it.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib||i.Ef||!i.nn||!i.kx||!(i.$ instanceof K))return!1;if(t!==null){if(!(t instanceof q))return!1;if(t.canUngroup())return!0}else for(t=i.selection.i;t.next();)if(i=t.value,i instanceof q&&i.canUngroup())return!0;return!1},it.prototype.addTopLevelParts=function(t,i){for(var n=!0,e=V0(t).i;e.next();){var o=e.value;o.Ca!==null&&(!i||this.isValidMember(null,o)?o.Ca=null:n=!1)}return n},it.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Collapse SubGraph"),i.Ka.Yn("Collapse SubGraph");var n=new E(q);if(t!==null&&t.$c)t.collapseSubGraph(),n.add(t);else for(var e=i.selection.i;e.next();){var o=e.value;o instanceof q&&(t=o,t.$c&&(t.collapseSubGraph(),n.add(t)))}i.Aa("SubGraphCollapsed",n)}finally{i.Yc("Collapse SubGraph")}},it.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null)return!!(t instanceof q&&t.$c);for(t=i.selection.i;t.next();)if(i=t.value,i instanceof q&&i.$c)return!0;return!1},it.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i!==null)try{i.Ib("Expand SubGraph"),i.Ka.Yn("Expand SubGraph");var n=new E(q);if(t===null||t.$c)for(var e=i.selection.i;e.next();){var o=e.value;o instanceof q&&(t=o,t.$c||(t.expandSubGraph(),n.add(t)))}else t.expandSubGraph(),n.add(t);i.Aa("SubGraphExpanded",n)}finally{i.Yc("Expand SubGraph")}},it.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib)return!1;if(t!==null)return t instanceof q&&!t.$c;for(t=i.selection.i;t.next();)if(i=t.value,i instanceof q&&!i.$c)return!0;return!1},it.prototype.editTextBlock=function(t){t===void 0&&(t=null),t!==null&&s.G(t,ot,it,"editTextBlock");var i=this.g;if(i!==null){var n=i.Va.NB;if(n!==null){if(t===null){t=null;for(var e=i.selection.i;e.next();){var o=e.value;if(o.canEdit()){t=o;break}}if(t===null)return;t=t.bu(function(r){return r instanceof ot&&r.BA})}t!==null&&(i.Xa=null,n.Xg=t,i.Xa=n)}}},it.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var i=this.g;if(i===null||i.ib||i.Ef||!i.jx||i.Va.NB===null)return!1;if(t!==null){if(!(t instanceof ot))return!1;if(t=t.W,t!==null&&t.canEdit())return!0}else for(i=i.selection.i;i.next();)if(t=i.value,t.canEdit()&&(t=t.bu(function(n){return n instanceof ot&&n.BA}),t!==null))return!0;return!1},it.prototype.showContextMenu=function(t){var i=this.g;if(i!==null){var n=i.Va.tA;if(n!==null&&(t===void 0&&(t=0<i.selection.count?i.selection.first():i),t=n.findObjectWithContextMenu(t),t!==null)){var e=new Ht,o=null;t instanceof N?o=t.Ya(kt):i.CI||(o=i.sb,o=new D(o.x+o.width/2,o.y+o.height/2)),o!==null&&(e.g=i,e.Ce=i.Dy(o),e.ea=o,e.left=!1,e.right=!0,e.up=!0,i.N=e),i.Xa=n,Cd(n,!1,t)}}},it.prototype.canShowContextMenu=function(t){var i=this.g;if(i===null)return!1;var n=i.Va.tA;return n===null?!1:(t===void 0&&(t=0<i.selection.count?i.selection.first():i),n.findObjectWithContextMenu(t)!==null)},s.defineProperty(it,{HH:"copiesClipboardData"},function(){return this.wC},function(t){s.j(t,"boolean",it,"copiesClipboardData"),this.wC=t}),s.defineProperty(it,{IH:"copiesConnectedLinks"},function(){return this.xC},function(t){s.j(t,"boolean",it,"copiesConnectedLinks"),this.xC=t}),s.defineProperty(it,{WE:"deletesConnectedLinks"},function(){return this.RC},function(t){s.j(t,"boolean",it,"deletesConnectedLinks"),this.RC=t}),s.defineProperty(it,{KH:"copiesTree"},function(){return this.BC},function(t){s.j(t,"boolean",it,"copiesTree"),this.BC=t}),s.defineProperty(it,{QH:"deletesTree"},function(){return this.SC},function(t){s.j(t,"boolean",it,"deletesTree"),this.SC=t}),s.defineProperty(it,{PE:"copiesParentKey"},function(){return this.AC},function(t){s.j(t,"boolean",it,"copiesParentKey"),this.AC=t}),s.defineProperty(it,{OE:"copiesGroupKey"},function(){return this.zC},function(t){s.j(t,"boolean",it,"copiesGroupKey"),this.zC=t}),s.defineProperty(it,{CE:"archetypeGroupData"},function(){return this.mC},function(t){t!==null&&s.G(t,Object,it,"archetypeGroupData");var i=this.g;i!==null&&(i=i.$,i instanceof K&&(t instanceof q||i.WA(t)||s.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t))),this.mC=t}),s.defineProperty(it,{gB:"memberValidation"},function(){return this.Dl},function(t){t!==null&&s.j(t,"function",it,"memberValidation"),this.Dl=t}),s.defineProperty(it,{tx:"defaultScale"},function(){return this.OC},function(t){s.Ad(t,it,"defaultScale"),0<t||s.k("defaultScale must be larger than zero, not: "+t),this.OC=t}),s.defineProperty(it,{Hy:"zoomFactor"},function(){return this.sE},function(t){s.Ad(t,it,"zoomFactor"),1<t||s.k("zoomFactor must be larger than 1.0, not: "+t),this.sE=t}),s.defineProperty(it,{CJ:"scrollToPartPause"},function(){return this.SD},function(t){s.Ad(t,it,"scrollToPartPause"),this.SD=t});function ut(){0<arguments.length&&s.nd(ut),s.oc(this),this.aa=null,this.Sb="",this.jf=!0,this.gD=!1,this.nE=null,this.Zw=-1}s.ga("Tool",ut),ut.prototype.Tc=function(t){this.aa=t},ut.prototype.toString=function(){return this.name!==""?this.name+" Tool":s.pf(Object.getPrototypeOf(this))},ut.prototype.updateAdornments=function(){},ut.prototype.canStart=function(){return this.isEnabled},ut.prototype.doStart=function(){},ut.prototype.doActivate=function(){this.ta=!0},ut.prototype.doDeactivate=function(){this.ta=!1},ut.prototype.doStop=function(){},ut.prototype.doCancel=function(){this.stopTool()},ut.prototype.stopTool=function(){var t=this.g;t!==null&&t.Xa===this&&(t.Xa=null,t.kc="")},ut.prototype.doMouseDown=function(){!this.ta&&this.canStart()&&this.doActivate()},ut.prototype.doMouseMove=function(){},ut.prototype.doMouseUp=function(){this.stopTool()},ut.prototype.doMouseWheel=function(){},ut.prototype.canStartMultiTouch=function(){return!0},ut.prototype.standardPinchZoomStart=function(){var t=this.g;if(t!==null){var i=t.N,n=i.Ix(0,s.wb(NaN,NaN)),e=i.Ix(1,s.wb(NaN,NaN));if(n.I()&&e.I()&&(this.doCancel(),t.nu("hasGestureZoom"))){t.Ps=t.scale;var o=e.x-n.x,r=e.y-n.y;t.XD=Math.sqrt(o*o+r*r),i.bubbles=!1}s.v(n),s.v(e)}},ut.prototype.standardPinchZoomMove=function(){var t=this.g;if(t!==null){var i=t.N,n=i.Ix(0,s.wb(NaN,NaN)),e=i.Ix(1,s.wb(NaN,NaN));if(n.I()&&e.I()&&(this.doCancel(),t.nu("hasGestureZoom"))){var o=e.x-n.x,r=e.y-n.y,r=Math.sqrt(o*o+r*r)/t.XD,o=new D((Math.min(e.x,n.x)+Math.max(e.x,n.x))/2,(Math.min(e.y,n.y)+Math.max(e.y,n.y))/2),r=t.Ps*r,h=t.pb;if(r!==t.scale&&h.canResetZoom(r)){var l=t.zi;t.zi=o,h.resetZoom(r),t.zi=l}i.bubbles=!1}s.v(n),s.v(e)}},ut.prototype.doKeyDown=function(){var t=this.g;t!==null&&t.N.key==="Esc"&&this.doCancel()},ut.prototype.doKeyUp=function(){},ut.prototype.startTransaction=ut.prototype.Ib=function(t){t===void 0&&(t=this.name),this.Lf=null;var i=this.g;return i===null?!1:i.Ib(t)},ut.prototype.stopTransaction=ut.prototype.Wk=function(){var t=this.g;return t===null?!1:this.Lf===null?t.mm():t.Yc(this.Lf)},ut.prototype.standardMouseSelect=function(){var t=this.g;if(t!==null&&t.Bf){var i=t.N,n=t.eu(i.ea,!1);if(n!==null){if(s.zh?i.Iu:i.control){for(t.Aa("ChangingSelection"),i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&(i.jb=!i.jb),t.Aa("ChangedSelection")}else if(i.shift){if(!n.jb){for(t.Aa("ChangingSelection"),i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&(i.jb=!0),t.Aa("ChangedSelection")}}else if(!n.jb){for(i=n;i!==null&&!i.canSelect();)i=i.Ca;i!==null&&t.select(i)}}else!i.left||(s.zh?i.Iu:i.control)||i.shift||t.oA()}},ut.prototype.standardMouseClick=function(t,i){t===void 0&&(t=null),i===void 0&&(i=function(r){return!r.layer.Hc});var n=this.g;if(n===null)return!1;var e=n.N,o=n.Pe(e.ea,t,i);return e.Be=o,hd(o,e,n),e.vc};function hd(t,i,n){if(i.vc=!1,t===null||t.vu()){var e=0;i.left?e=i.te===1?1:i.te===2?2:1:i.right&&i.te===1&&(e=3);var o="";if(t!==null){switch(e){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}e!==0&&n.Aa(o,t)}else{switch(e){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}e!==0&&n.Aa(o)}if(t!==null)for(;t!==null;){switch(n=null,e){case 1:n=t.click;break;case 2:n=t.Zt?t.Zt:t.click;break;case 3:n=t.sA}if(n!==null&&(n(i,t),i.vc))break;t=t.R}else{switch(t=null,e){case 1:t=n.click;break;case 2:t=n.Zt?n.Zt:n.click;break;case 3:t=n.sA}t!==null&&t(i)}}}ut.prototype.standardMouseOver=function(){var t=this.g;if(t!==null){var i=t.N;if(i.g!==null&&t.Ka.sc!==!0){var n=t.gb;t.gb=!0;var e=t.fh?t.Pe(i.ea,null,null):null;i.Be=e;var o=!1;if(e!==t.zo){var r=t.zo,h=r;for(t.zo=e,this.doCurrentObjectChanged(r,e),i.vc=!1;r!==null;){var l=r.Ku;if(l!==null&&(e===r||e!==null&&e.hm(r)||(l(i,r,e),o=!0,i.vc)))break;r=r.R}for(r=h,i.vc=!1;e!==null&&(l=e.Ju,!(l!==null&&(r===e||r!==null&&r.hm(e)||(l(i,e,r),o=!0,i.vc))));)e=e.R;e=t.zo}if(e!==null){for(r=e,h="";r!==null&&(h=r.cursor,h==="");)r=r.R;for(t.kc=h,i.vc=!1,r=e;r!==null&&(e=r.kB,!(e!==null&&(e(i,r),o=!0,i.vc)));)r=r.R}else t.kc="",e=t.kB,e!==null&&(e(i),o=!0);o&&t.ye(),t.gb=n}}},ut.prototype.doCurrentObjectChanged=function(){},ut.prototype.standardMouseWheel=function(){var t=this.g;if(t!==null){var i=t.N,n=i.oi;if(n!==0&&t.Nd.I()){var e=t.pb,o=t.Va.Lu;if((o===lf&&!i.shift||o===Yl&&i.control)&&(0<n?e.canIncreaseZoom():e.canDecreaseZoom()))o=t.zi,t.zi=i.Ce,0<n?e.increaseZoom():e.decreaseZoom(),t.zi=o,i.bubbles=!1;else if(o===lf&&i.shift||o===Yl&&!i.control){var e=t.position.copy(),o=0<n?n:-n,r=i.event.deltaMode,h=i.event.deltaX,l=i.event.deltaY,u="pixel";if((s.hq||s.iq||s.VA)&&(r=1,0<h&&(h=3),0>h&&(h=-3),0<l&&(l=3),0>l&&(l=-3)),r===void 0||h===void 0||l===void 0||h===0&&l===0||i.shift)!i.shift&&t.se?(r=t.Zu,o=3*o*r,0<n?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):i.shift&&t.re&&(r=t.Yu,o=3*o*r,0<n?t.scroll("pixel","left",o):t.scroll("pixel","right",o));else{switch(r){case 0:u="pixel";break;case 1:u="line";break;case 2:u="page";break;default:u="pixel"}h!==0&&t.re&&(0<h?t.scroll(u,"left",-h):t.scroll(u,"right",h)),l!==0&&t.se&&(0<l?t.scroll(u,"up",-l):t.scroll(u,"down",l))}t.position.L(e)||(i.bubbles=!1)}}}},ut.prototype.standardWaitAfter=function(t,i){s.j(t,"number",ut,"standardWaitAfter:delay"),i===void 0&&(i=this.g.N),this.cancelWaitAfter();var n=this,e=i.copy();this.Zw=s.setTimeout(function(){n.doWaitAfter(e)},t)},ut.prototype.cancelWaitAfter=function(){this.Zw!==-1&&s.clearTimeout(this.Zw),this.Zw=-1},ut.prototype.doWaitAfter=function(){},ut.prototype.findToolHandleAt=function(t,i){var n=this.g;return n===null?null:(n=n.Pe(t,function(e){for(;e!==null&&!(e.R instanceof vt);)e=e.R;return e}),n===null?null:n.W.kd===i?n:null)},ut.prototype.isBeyondDragSize=function(t,i){var n=this.g;if(n===null)return!1;t===void 0&&(t=n.uc.Ce),i===void 0&&(i=n.N.Ce);var o=n.Va.UH,e=o.width,o=o.height;return n.uc.Aj&&(e+=6,o+=6),Math.abs(i.x-t.x)>e||Math.abs(i.y-t.y)>o},s.u(ut,{g:"diagram"},function(){return this.aa}),s.defineProperty(ut,{name:"name"},function(){return this.Sb},function(t){s.j(t,"string",ut,"name"),this.Sb=t}),s.defineProperty(ut,{isEnabled:"isEnabled"},function(){return this.jf},function(t){s.j(t,"boolean",ut,"isEnabled"),this.jf=t}),s.defineProperty(ut,{ta:"isActive"},function(){return this.gD},function(t){s.j(t,"boolean",ut,"isActive"),this.gD=t}),s.defineProperty(ut,{Lf:"transactionResult"},function(){return this.nE},function(t){t!==null&&s.j(t,"string",ut,"transactionResult"),this.nE=t});function dt(){ut.call(this),0<arguments.length&&s.nd(dt),this.name="Dragging",this.yC=this.kD=!0,this.Yr=this.XC=!1,this.oD=!0,this.vz=new lt(NaN,NaN).freeze(),this.wz=gi,this.xz=new D(NaN,NaN).freeze(),this.WC=!1,this.ww=this.vw=this.kz=this.vC=this.VC=this.GC=this.fj=null,this.Dr=this.mD=!1,this.wp=new D(NaN,NaN),this.Pw=new D,this.Sw=!1,this.jD=!0,this.Fo=100,this.Uj=[],this.VG=new R(L).freeze()}s.La(dt,ut),s.ga("DraggingTool",dt),s.defineProperty(dt,{BF:"isCopyEnabled"},function(){return this.kD},function(t){s.j(t,"boolean",dt,"isCopyEnabled"),this.kD=t}),s.defineProperty(dt,{JH:"copiesEffectiveCollection"},function(){return this.yC},function(t){s.j(t,"boolean",dt,"copiesEffectiveCollection"),this.yC=t}),s.defineProperty(dt,{VH:"dragsTree"},function(){return this.XC},function(t){s.j(t,"boolean",dt,"dragsTree"),this.XC=t}),s.defineProperty(dt,{Sk:"isGridSnapEnabled"},function(){return this.Yr},function(t){s.j(t,"boolean",dt,"isGridSnapEnabled"),this.Yr=t}),s.defineProperty(dt,{yI:"isComplexRoutingRealtime"},function(){return this.jD},function(t){s.j(t,"boolean",dt,"isComplexRoutingRealtime"),this.jD=t}),s.defineProperty(dt,{DF:"isGridSnapRealtime"},function(){return this.oD},function(t){s.j(t,"boolean",dt,"isGridSnapRealtime"),this.oD=t}),s.defineProperty(dt,{sF:"gridSnapCellSize"},function(){return this.vz},function(t){s.G(t,lt,dt,"gridSnapCellSize"),this.vz.L(t)||(this.vz=t=t.S())}),s.defineProperty(dt,{jI:"gridSnapCellSpot"},function(){return this.wz},function(t){s.G(t,P,dt,"gridSnapCellSpot"),this.wz.L(t)||(this.wz=t=t.S())}),s.defineProperty(dt,{kI:"gridSnapOrigin"},function(){return this.xz},function(t){s.G(t,D,dt,"gridSnapOrigin"),this.xz.L(t)||(this.xz=t=t.S())}),s.defineProperty(dt,{uj:"dragsLink"},function(){return this.WC},function(t){s.j(t,"boolean",dt,"dragsLink"),this.WC=t}),s.defineProperty(dt,{yn:"currentPart"},function(){return this.GC},function(t){t!==null&&s.G(t,L,dt,"currentPart"),this.GC=t}),s.defineProperty(dt,{ec:"copiedParts"},function(){return this.vC},function(t){this.vC=t}),s.defineProperty(dt,{$b:"draggedParts"},function(){return this.VC},function(t){this.VC=t}),s.u(dt,{aL:"draggingParts"},function(){return this.ec!==null?this.ec.Mj():this.$b!==null?this.$b.Mj():this.VG}),s.defineProperty(dt,{ld:"draggedLink"},function(){return this.kz},function(t){t!==null&&s.G(t,k,dt,"draggedLink"),this.kz!==t&&(this.kz=t,t!==null?(this.vw=t.gc,this.ww=t.zc):this.ww=this.vw=null)}),s.defineProperty(dt,{Mx:"isDragOutStarted"},function(){return this.mD},function(t){this.mD=t}),s.defineProperty(dt,{Vk:"startPoint"},function(){return this.Pw},function(t){s.G(t,D,dt,"startPoint"),this.Pw.L(t)||(this.Pw=t=t.S())}),s.defineProperty(dt,{SE:"delay"},function(){return this.Fo},function(t){s.j(t,"number",dt,"delay"),this.Fo=t}),dt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib&&!t.Rt||!t.Rl&&!t.Ck&&!t.Rt||!t.Bf)return!1;var i=t.N;return!i.left||t.Xa!==this&&(!this.isBeyondDragSize()||i.Aj&&i.timestamp-t.uc.timestamp<this.Fo)?!1:this.findDraggablePart()!==null},dt.prototype.findDraggablePart=function(){var t=this.g;if(t===null||(t=t.eu(t.uc.ea,!1),t===null))return null;for(;t!==null&&!t.canSelect();)t=t.Ca;return t!==null&&(t.canMove()||t.canCopy())?t:null},dt.prototype.standardMouseSelect=function(){var t=this.g;if(t!==null&&t.Bf){var i=t.eu(t.uc.ea,!1);if(i!==null){for(;i!==null&&!i.canSelect();)i=i.Ca;this.yn=i,this.yn.jb||(t.Aa("ChangingSelection"),i=t.N,(s.zh?i.Iu:i.control)||i.shift||ff(t),this.yn.jb=!0,t.Aa("ChangedSelection"))}}},dt.prototype.doActivate=function(){var t=this.g;if(t!==null){this.yn===null&&this.standardMouseSelect();var i=this.yn;i!==null&&(i.canMove()||i.canCopy())&&(this.ta=!0,this.wp.set(t.position),H0(this,t.selection),this.Uj.length=0,this.$b=this.computeEffectiveCollection(t.selection),t.fo=!0,ga(this,this.$b),this.Ib("Drag"),this.Vk=t.uc.ea,t.ef=!0,t.Rt&&(this.Mx=!0,this.Dr=!1,Fi=this,Vl=this.g,this.doSimulatedDragOut()))}};function H0(t,i){if(t.uj){var n=t.g;n!==null&&n.on&&(n.$ instanceof K&&i.count===1&&i.first()instanceof k?(t.ld=i.first(),t.ld.canRelinkFrom()&&t.ld.canRelinkTo()&&t.ld.Ut(),t.fj=n.Va.bG,t.fj===null&&(t.fj=new Cn,t.fj.Tc(n))):(t.ld=null,t.fj=null))}}dt.prototype.computeEffectiveCollection=function(t){var i=this.g!==null&&this.g.Xa===this,n=new tt(L);if(t===null)return n;for(var e=t.i;e.next();)Xs(this,n,e.value,i);if(this.ld!==null&&this.uj)return n;for(e=t.i;e.next();)t=e.value,t instanceof k&&(i=t.V,i===null||n.contains(i)?(i=t.Z,i===null||n.contains(i)||n.remove(t)):n.remove(t));return n};function Do(t,i,n){return n===void 0?new ma(Js):(t=t.Sk,i.Ca!==null&&(t=!1),t?new ma(new D(Math.round(n.x),Math.round(n.y))):new ma(n.copy()))}function Xs(t,i,n,e){if(!i.contains(n)&&(!e||n.canMove()||n.canCopy()))if(n instanceof I){if(i.add(n,Do(t,n,n.location)),n instanceof q)for(var o=n.hc;o.next();)Xs(t,i,o.value,e);for(o=n.je;o.next();){var r=o.value;if(!i.contains(r)){var h=r.V,l=r.Z;h!==null&&i.contains(h)&&l!==null&&i.contains(l)&&Xs(t,i,r,e)}}if(t.VH)for(n=n.fF();n.next();)Xs(t,i,n.value,e)}else if(n instanceof k)for(r=n,i.add(r,Do(t,r)),n=r.Ff;n.next();)Xs(t,i,n.value,e);else n instanceof vt||i.add(n,Do(t,n,n.location))}dt.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;if(t!==null&&yr(t),K0(this),ef(this,this.$b),this.$b=this.yn=null,this.Dr=this.Mx=!1,0<Ws.count){for(var i=Ws.length,n=0;n<i;n++){var e=Ws.fa(n);fd(e),ys(e),K0(e),e.g!==null&&yr(e.g)}Ws.clear()}fd(this),this.wp.m(NaN,NaN),Fi=Vl=null,ys(this),t.ef=!1,t.kc="",t.fo=!1,this.Wk()};function K0(t){var i=t.g;if(i!==null){var n=i.gb;i.gb=!0,cd(t,i.N,null),i.gb=n}t.Uj.length=0}function ld(){var t=Fi;ys(t),J0(t);var i=t.g;i!==null&&t.wp.I()&&(i.position=t.wp),i!==null&&yr(i)}dt.prototype.doCancel=function(){ys(this),J0(this);var t=this.g;t!==null&&this.wp.I()&&(t.position=this.wp),this.stopTool()};function ga(t,i){if(i!==null){t.Sw=!0;for(var n=i.i;n.next();){var e=n.key;e instanceof k&&(e.vi=!0)}}}function ef(t,i){if(i!==null){for(var n=i.i;n.next();){var e=n.key;e instanceof k&&(e.vi=!1,dc(e)&&e.Tb())}t.Sw=!1}}dt.prototype.doKeyDown=function(){var t=this.g;t!==null&&(t=t.N,t!==null&&this.ta&&(t.key==="Esc"?this.doCancel():this.doMouseMove()))},dt.prototype.doKeyUp=function(){var t=this.g;t!==null&&t.N!==null&&this.ta&&this.doMouseMove()};function ud(t,i){for(var n=1/0,e=1/0,o=-1/0,r=-1/0,h=t.i;h.next();){var l=h.value;if(l.he()&&l.isVisible()){var u=l.location,l=u.x,u=u.y;isNaN(l)||isNaN(u)||(l<n&&(n=l),u<e&&(e=u),l>o&&(o=l),u>r&&(r=u))}}n===1/0?i.m(0,0,0,0):i.m(n,e,o-n,r-e)}function U0(t,i){if(t.ec===null){var n=t.g;if(!(n===null||i&&(n.ib||n.Ef))&&t.$b!==null){var e=n.ja;for(e.isEnabled&&e.FF?e.sj!==null&&0<e.sj.Wf.count&&(n.ja.mm(),n.Ib("Drag")):J0(t),n.gb=!i,n.Sq=!i,t.Vk=n.uc.ea,e=t.JH?t.$b.Mj():n.selection,e=n.Tp(e,n,!0),n=e.i;n.next();)n.value.location=n.key.location;n=s.vf(),ud(e,n),s.Bb(n);for(var n=new tt(L),o=t.$b.i;o.next();){var r=o.key;r.he()&&r.canCopy()&&(r=e.ka(r),r!==null&&(r.Ne(),n.add(r,Do(t,r,r.location))))}for(e=e.i;e.next();)o=e.value,o instanceof k&&o.canCopy()&&n.add(o,Do(t,o));t.ec=n,H0(t,n.Mj()),t.ld!==null&&(n=t.ld,e=n.$n,n.Ej(t.Vk.x-(e.x+e.width/2),t.Vk.y-(e.y+e.height/2)))}}}function ys(t){var i=t.g;if(i!==null){if(t.ec!==null&&(i.vB(t.ec.Mj(),!1),t.ec=null,t.$b!==null))for(var n=t.$b.i;n.next();)n.key instanceof k&&(n.value.point=new D(0,0));i.gb=!1,i.Sq=!1,t.Vk=i.uc.ea}}function fd(t){if(t.ld!==null){if(t.uj&&t.fj!==null){var i=t.fj;i.g!==null&&(i.g.remove(i.Wd),i.g.remove(i.Xd))}t.ld=null,t.fj=null}}function Vh(t,i,n){var e=t.g;if(e!==null){var o=t.Vk,r=s.K();r.assign(e.N.ea),t.moveParts(i,r.ui(o),n),s.v(r)}}dt.prototype.moveParts=function(t,i,n){if(t!==null&&(s.G(t,tt,dt,"moveParts:parts"),t.count!==0)){var e=s.K(),o=s.K();o.assign(i),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(i=this.Sw)||ga(this,t);for(var r=new E(wd),h=new E(Cl),l=t.i;l.next();){var u=l.key;if(u.he()){var f=ad(this,u,t);if(f!==null)r.add(new wd(u,l.value,f));else if(!n||u.canMove()){f=l.value.point,e.assign(f);var a=new D,p=this.computeMove(u,e.add(o),t,a);u.location=p,l.value.vG=a.ui(f)}}else l.key instanceof k&&h.add(l.Wa)}for(n=r.i;n.next();)a=n.value,f=a.info.point,e.assign(f),a.Rc.location=e.add(a.lI.vG);for(n=s.K(),f=s.K(),h=h.i;h.next();)if(l=h.value,r=l.key,r instanceof k)if(r.vi)if(a=r.V,u=r.Z,this.ld!==null&&this.uj)if(l=l.value.point,r.xx===null)t.add(r,Do(this,r,o)),u=o.x-l.x,l=o.y-l.y,r.Ej(u,l);else{p=s.wb(0,0),(a=r.l(0))&&a.I()&&p.assign(a),a=s.K(),a.assign(p),a.add(o);var y=a;this.Sk&&(this.DF||this.g.N.up)&&(y=s.K(),pd(this,r,a,y)),a.assign(r.xx(r,a,y)),a.ui(p),t.add(r,Do(this,r,a)),u=a.x-l.x,l=a.y-l.y,r.Ej(u,l),s.v(p),s.v(a),y!==a&&s.v(y)}else a!==null&&(n.assign(a.location),p=t.ka(a),p!==null&&n.ui(p.point)),u!==null&&(f.assign(u.location),p=t.ka(u),p!==null&&f.ui(p.point)),a!==null&&u!==null?n.Qc(f)?(l=l.value.point,a=e,a.assign(n),a.ui(l),t.add(r,Do(this,r,n)),r.Ej(a.x,a.y)):(r.vi=!1,r.Tb()):(l=l.value.point,a=a!==null?n:u!==null?f:o,t.add(r,Do(this,r,a)),u=a.x-l.x,l=a.y-l.y,r.Ej(u,l));else(r.V===null||r.Z===null)&&(l=l.value.point,t.add(r,Do(this,r,o)),u=o.x-l.x,l=o.y-l.y,r.Ej(u,l));s.v(e),s.v(o),s.v(n),s.v(f),i||(bn(this.g),ef(this,t))}};function ad(t,i,n){return i=i.Ca,i!==null&&(t=ad(t,i,n),t!==null||(t=n.ka(i),t!==null))?t:null}function J0(t){if(t.$b!==null){for(var i=t.g,n=t.$b.i;n.next();){var e=n.key;e.he()&&(e.location=n.value.point)}for(n=t.$b.i;n.next();)if(e=n.key,e instanceof k&&e.vi){var o=n.value.point;t.$b.add(e,Do(t,e)),e.Ej(-o.x,-o.y)}i.dg()}}function pd(t,i,n,e){if(e.assign(n),i!==null&&(i=t.g,i!==null)){var o=i.Gn,r=t.sF;i=r.width;var r=r.height,l=t.kI,h=l.x,l=l.y;if(t=t.jI,o!==null){var u=o.Jx;isNaN(i)&&(i=u.width),isNaN(r)&&(r=u.height),o=o.rF,isNaN(h)&&(h=o.x),isNaN(l)&&(l=o.y)}o=s.wb(0,0),o.bv(0,0,i,r,t),tf(n.x,n.y,h+o.x,l+o.y,i,r,e),s.v(o)}}dt.prototype.computeMove=function(t,i,n,e){if(e===void 0&&(e=new D),e.assign(i),t===null)return e;n===void 0&&(n=null);var o=i,r=this.Sk;r&&(this.DF||n===null||this.g!==null&&this.g.N.up)&&(o=s.K(),pd(this,t,i,o)),n=t.xx!==null?t.xx(t,i,o):o;var h=t.$I,l=h.x;isNaN(l)&&(l=r?Math.round(t.location.x):t.location.x),h=h.y,isNaN(h)&&(h=r?Math.round(t.location.y):t.location.y);var u=t.UI,f=u.x;return isNaN(f)&&(f=r?Math.round(t.location.x):t.location.x),u=u.y,isNaN(u)&&(u=r?Math.round(t.location.y):t.location.y),e.m(Math.max(l,Math.min(n.x,f)),Math.max(h,Math.min(n.y,u))),o!==i&&s.v(o),e};function yd(t,i){if(i===null)return!0;var n=i.W;return!!(n===null||n instanceof vt||n.layer.Hc||t.$b&&t.$b.contains(n)||t.ec&&t.ec.contains(n))}function Y0(t,i){var n=t.g;if(n!==null){t.uj&&(t.ld!==null&&(t.ld.V=null,t.ld.Z=null),gd(t,!1));var e=Na(n,i,null,function(u){return!yd(t,u)}),o=n.N;o.Be=e;var r=n.gb,h=!1;try{if(n.gb=!0,h=cd(t,o,e),!t.ta&&Fi===null)return;if(e===null){var l=n.dJ;l!==null&&(l(o),h=!0)}if(!t.ta&&Fi===null||(t.doDragOver(i,e),!t.ta&&Fi===null))return}finally{n.gb=r,h&&n.dg()}(n.re||n.se)&&n.AA(o.Ce)}}function cd(t,i,n){var e=!1,o=t.Uj.length,r=0<o?t.Uj[0]:null;if(n===r)return!1;i.vc=!1;for(var h=0;h<o;h++){var l=t.Uj[h],u=l.cJ;if(u!==null&&(u(i,l,n),e=!0,i.vc))break}if(t.Uj.length=0,!t.ta&&Fi===null||n===null)return e;for(i.vc=!1;n!==null;)t.Uj.push(n),n=vd(n);for(o=t.Uj.length,h=0;h<o&&(l=t.Uj[h],u=l.bJ,u===null||(u(i,l,r),e=!0,!i.vc));h++);return e}function vd(t){var i=t.R;return i!==null?i:t instanceof L&&!(t instanceof q)&&(t=t.Ca,t!==null&&t.oI)?t:null}function dd(t,i,n){var e=t.fj;if(e===null)return null;var o=t.g.An(i,e.$F,function(f){return e.findValidLinkablePort(f,n)});t=s.K();for(var r=1/0,h=null,o=o.i;o.next();){var l=o.value;if(l.W!==null){var u=l.Ya(kt,t),u=i.Cf(u);u<r&&(h=l,r=u)}}return s.v(t),h}function gd(t,i){var n=t.ld;if(n!==null&&!(2>n.qa)){var e=t.g;if(e!==null&&!e.ib){var o=t.fj;if(o!==null){var r=null,h=null;n.V===null&&(r=dd(t,n.l(0),!1),r!==null&&(h=r.W));var l=null,u=null;n.Z===null&&(l=dd(t,n.l(n.qa-1),!0),l!==null&&(u=l.W)),o.isValidLink(h,r,u,l)?i?(n.Up=n.l(0),n.Vp=n.l(n.qa-1),n.vi=!1,n.V=h,r!==null&&(n.Ng=r.le),n.Z=u,l!==null&&(n.Jh=l.le),n.gc!==t.vw&&e.Aa("LinkRelinked",n,t.vw),n.zc!==t.ww&&e.Aa("LinkRelinked",n,t.ww)):kd(o,h,r,u,l):kd(o,null,null,null,null)}}}}dt.prototype.doDragOver=function(){};function md(t,i){var n=t.g;if(n!==null){t.uj&&gd(t,!0),K0(t);var e=Na(n,i,null,function(l){return!yd(t,l)}),o=n.N;if(o.Be=e,e!==null){o.vc=!1;for(var r=e;r!==null;){var h=r.hB;if(h!==null&&(h(o,r),o.vc))break;r=vd(r)}}else r=n.hB,r!==null&&r(o);if(t.ta||Fi!==null){for(o=(t.ec||t.$b).i;o.next();)r=o.key,r instanceof I&&r.je.each(function(l){l.vi=!1});if(t.doDropOnto(i,e),t.ta||Fi!==null){for(e=s.vf(),o=n.selection.i;o.next();)r=o.value,r instanceof I&&mx(n,r.getAvoidableRect(e));s.Bb(e)}}}}function mx(t,i){var n=!1;if(t.sb.Fk(i)&&(n=!0),n=t.DA(i,function(o){return o.W},function(o){return o instanceof k},!0,function(o){return o instanceof k},n),n.count!==0)for(n=n.i;n.next();){var e=n.value;e.fm&&e.Tb()}}dt.prototype.doDropOnto=function(){},dt.prototype.doMouseMove=function(){if(this.ta){var t=this.g;t!==null&&this.yn!==null&&this.$b!==null&&(this.mayCopy()?(t.kc="copy",U0(this,!1),ga(this,this.ec),Vh(this,this.ec,!1),ef(this,this.ec)):this.mayMove()?(ys(this),Vh(this,this.$b,!0)):this.mayDragOut()?(t.kc="no-drop",U0(this,!1),Vh(this,this.ec,!1)):ys(this),Y0(this,t.N.ea))}},dt.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t!==null){var i=!1,n=this.mayCopy();if(n&&this.ec!==null?(ys(this),U0(this,!0),ga(this,this.ec),Vh(this,this.ec,!1),ef(this,this.ec),this.ec!==null&&t.qG(this.ec.Mj())):(i=!0,ys(this),this.mayMove()&&(Vh(this,this.$b,!0),Y0(this,t.N.ea))),this.Dr=!0,md(this,t.N.ea),this.ta){if(this.ec=null,i&&this.$b!==null)for(i=this.$b.i;i.next();){var e=i.key;e instanceof I&&(e=e.Ca,e===null||e.placeholder===null||this.$b.contains(e)||e.placeholder.H())}t.Gc(),ef(this,this.$b),this.Lf=n?"Copy":"Move",t.Aa(n?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},dt.prototype.mayCopy=function(){if(!this.BF)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.Ck||(s.zh?!t.N.alt:!t.N.control))return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canCopy())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canCopy())},dt.prototype.mayDragOut=function(){if(!this.BF)return!1;var t=this.g;if(t===null||!t.Rt||!t.Ck||t.Rl)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canCopy())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canCopy())},dt.prototype.mayMove=function(){var t=this.g;if(t===null||t.ib||!t.Rl)return!1;for(t=t.selection.i;t.next();){var i=t.value;if(i.he()&&i.canMove())return!0}return!!(this.ld!==null&&this.uj&&this.ld.canMove())};var Ws=new E(dt),Fi=null,Vl=null;dt.prototype.getDraggingSource=function(){return Fi},dt.prototype.mayDragIn=function(){var t=this.g;if(t===null||!t.AE||t.ib||t.Ef||!t.Kp)return!1;var i=Fi;return!(i===null||i.g===null||i.g.$.Yl!==t.$.Yl)},dt.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Ka.Ih(),Zl(t),t.Ka.Ih(),t=Fi,t!==null&&t.g!==null&&(t.g.kc="copy",t.g.fo=!0)}},dt.prototype.doSimulatedDragLeave=function(){var t=Fi;t!==null&&t.doSimulatedDragOut(),this.doCancel()},dt.prototype.doSimulatedDragOver=function(){var t=this.g;if(t!==null){var i=Fi;i!==null&&i.$b!==null&&this.mayDragIn()&&(t.kc="copy",xd(this,i.$b.Mj(),!1,t.uc),Vh(this,this.ec,!1),Y0(this,t.N.ea))}},dt.prototype.doSimulatedDrop=function(){var t=this.g;if(t!==null){var i=Fi;if(i!==null){var n=i.g;i.Dr=!0,ys(this),this.mayDragIn()&&(this.Ib("Drop"),xd(this,i.$b.Mj(),!0,t.N),Vh(this,this.ec,!1),this.ec!==null&&t.qG(this.ec.Mj()),md(this,t.N.ea),t.Gc(),i=t.selection,this.ec!==null?this.Lf="ExternalCopy":i=new R(L),this.ec=null,t.doFocus(),t.Aa("ExternalObjectsDropped",i,n),this.Wk())}}};function xd(t,i,n,e){if(t.ec===null){var o=t.g;if(!o.ib&&!o.Ef){o.gb=!n,o.Sq=!n,t.Vk=e.ea,n=o.Tp(i,o,!0);var r=s.vf();ud(i,r),e=r.x+r.width/2,o=r.y+r.height/2,s.Bb(r);var r=t.Pw,h=new tt(L),l=s.K();for(i=i.i;i.next();){var u=i.value,f=n.ka(u);u.he()&&u.canCopy()?(u=u.location,l.m(r.x-(e-u.x),r.y-(o-u.y)),f.location=l,f.Ne(),h.add(f,Do(t,f,l))):u instanceof k&&u.canCopy()&&(f.Ej(r.x-e,r.y-o),h.add(f,Do(t,f)))}s.v(l),t.ec=h,H0(t,h.Mj()),t.ld!==null&&(n=t.ld,e=n.$n,n.Ej(t.Vk.x-(e.x+e.width/2),t.Vk.y-(e.y+e.height/2)))}}}dt.prototype.doSimulatedDragOut=function(){var t=this.g;t!==null&&(this.mayCopy()||this.mayMove()?t.kc="":t.kc="no-drop",t.fo=!1)};function ma(t){this.point=t,this.vG=Js}s.ga("DraggingInfo",ma);function wd(t,i,n){this.Rc=t,this.info=i,this.lI=n}function jt(){0<arguments.length&&s.nd(jt),ut.call(this),this.OD=100,this.rD=!1;var t=new k,i=new Y;i.ff=!0,i.stroke="blue",t.add(i),i=new Y,i.Lq="Standard",i.fill="blue",i.stroke="blue",t.add(i),t.bg="Tool",this.hE=t,t=new I,i=new Y,i.le="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.mb=2,i.Da=L0,t.add(i),t.nm=!1,t.bg="Tool",this.fE=t,this.gE=i,t=new I,i=new Y,i.le="",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",i.mb=2,i.Da=L0,t.add(i),t.nm=!1,t.bg="Tool",this.iE=t,this.jE=i,this.ND=this.MD=this.HD=this.GD=this.JD=null,this.nD=!0,this.iH=new tt(N,"boolean"),this.PD=this.Bl=this.cE=null}s.La(jt,ut),s.ga("LinkingBaseTool",jt),jt.prototype.doStop=function(){var t=this.g;t!==null&&yr(t),this.Tg=this.Sg=this.Rg=this.Qg=this.mc=null,this.Fy.clear(),this.Kf=null},s.defineProperty(jt,{$F:"portGravity"},function(){return this.OD},function(t){s.j(t,"number",jt,"portGravity"),0<=t&&(this.OD=t)}),s.defineProperty(jt,{kq:"isUnconnectedLinkValid"},function(){return this.rD},function(t){s.j(t,"boolean",jt,"isUnconnectedLinkValid"),this.rD=t}),s.defineProperty(jt,{wf:"temporaryLink"},function(){return this.hE},function(t){s.G(t,k,jt,"temporaryLink"),this.hE=t}),s.defineProperty(jt,{Wd:"temporaryFromNode"},function(){return this.fE},function(t){s.G(t,I,jt,"temporaryFromNode"),this.fE=t}),s.defineProperty(jt,{ho:"temporaryFromPort"},function(){return this.gE},function(t){s.G(t,N,jt,"temporaryFromPort"),this.gE=t}),s.defineProperty(jt,{Xd:"temporaryToNode"},function(){return this.iE},function(t){s.G(t,I,jt,"temporaryToNode"),this.iE=t}),s.defineProperty(jt,{io:"temporaryToPort"},function(){return this.jE},function(t){s.G(t,N,jt,"temporaryToPort"),this.jE=t}),s.defineProperty(jt,{mc:"originalLink"},function(){return this.JD},function(t){t!==null&&s.G(t,k,jt,"originalLink"),this.JD=t}),s.defineProperty(jt,{Qg:"originalFromNode"},function(){return this.GD},function(t){t!==null&&s.G(t,I,jt,"originalFromNode"),this.GD=t}),s.defineProperty(jt,{Rg:"originalFromPort"},function(){return this.HD},function(t){t!==null&&s.G(t,N,jt,"originalFromPort"),this.HD=t}),s.defineProperty(jt,{Sg:"originalToNode"},function(){return this.MD},function(t){t!==null&&s.G(t,I,jt,"originalToNode"),this.MD=t}),s.defineProperty(jt,{Tg:"originalToPort"},function(){return this.ND},function(t){t!==null&&s.G(t,N,jt,"originalToPort"),this.ND=t}),s.defineProperty(jt,{Td:"isForwards"},function(){return this.nD},function(t){s.j(t,"boolean",jt,"isForwards"),this.nD=t}),s.u(jt,{Fy:"validPortsCache"},function(){return this.iH}),s.defineProperty(jt,{Kf:"targetPort"},function(){return this.cE},function(t){t!==null&&s.G(t,N,jt,"targetPort"),this.cE=t}),jt.prototype.copyPortProperties=function(t,i,n,e,o){if(t!==null&&i!==null&&n!==null&&e!==null){e.Da=i.U.size,o?(e.Nb=i.Nb,e.um=i.um):(e.Mb=i.Mb,e.am=i.am),n.Gf=kt;var r=s.K();n.location=i.Ya(kt,r),s.v(r),e.angle=i.bm(),this.ky!==null&&this.ky(t,i,n,e,o)}},jt.prototype.setNoTargetPortProperties=function(t,i,n){i!==null&&(i.Da=L0,i.Mb=Ni,i.Nb=Ni),t!==null&&this.g!==null&&(t.location=this.g.N.ea),this.ky!==null&&this.ky(null,null,t,i,n)},jt.prototype.doMouseDown=function(){this.ta&&this.doMouseMove()},jt.prototype.doMouseMove=function(){if(this.ta){var t=this.g;if(t!==null){if(this.Kf=this.findTargetPort(this.Td),this.Kf!==null&&this.Kf.W instanceof I){var i=this.Kf.W;this.Td?this.copyPortProperties(i,this.Kf,this.Xd,this.io,!0):this.copyPortProperties(i,this.Kf,this.Wd,this.ho,!1)}else this.Td?this.setNoTargetPortProperties(this.Xd,this.io,!0):this.setNoTargetPortProperties(this.Wd,this.ho,!1);(t.re||t.se)&&t.AA(t.N.Ce)}}},jt.prototype.findValidLinkablePort=function(t,i){if(t===null)return null;var n=t.W;if(!(n instanceof I))return null;for(;t!==null;){var e=i?t.EG:t.hF;if(e===!0&&(t.le!==null||t instanceof I)&&(i?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(e===!1)break;t=t.R}return null},jt.prototype.findTargetPort=function(t){var i=this.g,n=i.N.ea,e=this.$F;0>=e&&(e=.1);for(var o=this,r=i.An(n,e,function(c){return o.findValidLinkablePort(c,t)},null,!0),e=1/0,i=null,r=r.i;r.next();){var h=r.value,l=h.W;if(l instanceof I){var u=h.Ya(kt,s.K()),f=n.x-u.x,a=n.y-u.y;s.v(u),u=f*f+a*a,u<e&&(f=this.Fy.ka(h),f!==null?f&&(i=h,e=u):t&&this.isValidLink(this.Qg,this.Rg,l,h)||!t&&this.isValidLink(l,h,this.Sg,this.Tg)?(this.Fy.add(h,!0),i=h,e=u):this.Fy.add(h,!1))}}return i!==null&&(n=i.W,n instanceof I&&(n.layer===null||n.layer.St))?i:null},jt.prototype.isValidFrom=function(t,i){if(t===null||i===null)return this.kq;if(this.g!==null&&this.g.Xa===this&&(t.layer!==null&&!t.layer.St||i.hF!==!0))return!1;var n=i.GA;if(1/0>n){if(this.mc!==null&&t===this.Qg&&i===this.Rg)return!0;var e=i.le;if(e===null&&(e=""),t.Ex(e).count>=n)return!1}return!0},jt.prototype.isValidTo=function(t,i){if(t===null||i===null)return this.kq;if(this.g!==null&&this.g.Xa===this&&(t.layer!==null&&!t.layer.St||i.EG!==!0))return!1;var n=i.VJ;if(1/0>n){if(this.mc!==null&&t===this.Sg&&i===this.Tg)return!0;var e=i.le;if(e===null&&(e=""),t.Mg(e).count>=n)return!1}return!0},jt.prototype.isInSameNode=function(t,i){if(t===null||i===null)return!1;if(t===i)return!0;var n=t.W,e=i.W;return n!==null&&n===e},jt.prototype.isLinked=function(t,i){if(t===null||i===null)return!1;var n=t.W;if(!(n instanceof I))return!1;var e=t.le;e===null&&(e="");var o=i.W;if(!(o instanceof I))return!1;var r=i.le;for(r===null&&(r=""),o=o.Mg(r);o.next();)if(r=o.value,r.V===n&&r.Ng===e)return!0;return!1},jt.prototype.isValidLink=function(t,i,n,e){if(!this.isValidFrom(t,i)||!this.isValidTo(n,e)||!(i===null||e===null||(i.bI&&e.UJ||!this.isInSameNode(i,e))&&(i.aI&&e.TJ||!this.isLinked(i,e)))||this.mc!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.mc)||n!==null&&this.isLabelDependentOnLink(n,this.mc))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.mc))return!1;if(t!==null){var o=t.Xx;if(o!==null&&!o(t,i,n,e,this.mc))return!1}return n!==null&&(o=n.Xx,o!==null&&!o(t,i,n,e,this.mc))?!1:(o=this.Xx,o!==null?o(t,i,n,e,this.mc):!0)},jt.prototype.isLabelDependentOnLink=function(t,i){if(t===null)return!1;var n=t.Xb;if(n===null)return!1;if(n===i)return!0;var e=new R(I);return e.add(t),q0(this,n,i,e)};function q0(t,i,n,e){if(i===n)return!0;var o=i.V;return o!==null&&o.Df&&(e.add(o),q0(t,o.Xb,n,e))?!0:(i=i.Z,!!(i!==null&&i.Df&&(e.add(i),q0(t,i.Xb,n,e))))}jt.prototype.isValidCycle=function(t,i,n){if(n===void 0&&(n=null),t===null||i===null)return this.kq;var e=this.g!==null?this.g.aK:af;if(e!==af){if(e===ng){if(e=n||this.wf,e!==null&&!e.bc)return!0;for(e=i.je;e.next();){var o=e.value;if(o!==n&&o.bc&&o.Z===i)return!1}return!of(this,t,i,n,!0)}if(e===eg){if(e=n||this.wf,e!==null&&!e.bc)return!0;for(e=t.je;e.next();)if(o=e.value,o!==n&&o.bc&&o.V===t)return!1;return!of(this,t,i,n,!0)}if(e===bd)return t===i?t=!0:(e=new R(I),e.add(i),t=Md(this,e,t,i,n)),!t;if(e===tg)return!of(this,t,i,n,!1);if(e===ig)return t===i?t=!0:(e=new R(I),e.add(i),t=Pd(this,e,t,i,n)),!t}return!0};function of(t,i,n,e,o){if(i===n)return!0;if(i===null||n===null)return!1;for(var r=i.je;r.next();){var h=r.value;if(h!==e&&(!o||h.bc)&&h.Z===i&&(h=h.V,h!==i&&of(t,h,n,e,o)))return!0}return!1}function Md(t,i,n,e,o){if(n===e)return!0;if(n===null||e===null||i.contains(n))return!1;i.add(n);for(var r=n.je;r.next();){var h=r.value;if(h!==o&&h.Z===n&&(h=h.V,h!==n&&Md(t,i,h,e,o)))return!0}return!1}function Pd(t,i,n,e,o){if(n===e)return!0;if(n===null||e===null||i.contains(n))return!1;i.add(n);for(var r=n.je;r.next();){var h=r.value;if(h!==o){var l=h.V,h=h.Z,l=l===n?h:l;if(l!==n&&Pd(t,i,l,e,o))return!0}}return!1}s.defineProperty(jt,{Xx:"linkValidation"},function(){return this.Bl},function(t){t!==null&&s.j(t,"function",jt,"linkValidation"),this.Bl=t}),s.defineProperty(jt,{ky:"portTargeted"},function(){return this.PD},function(t){t!==null&&s.j(t,"function",jt,"portTargeted"),this.PD=t});function mi(){0<arguments.length&&s.nd(mi),jt.call(this),this.name="Linking",this.oC={},this.nC=null,this.ba=xa,this.YD=null}s.La(mi,jt),s.ga("LinkingTool",mi);var xa;mi.Either=xa=s.p(mi,"Either",0);var Td;mi.ForwardsOnly=Td=s.p(mi,"ForwardsOnly",0);var Sd;mi.BackwardsOnly=Sd=s.p(mi,"BackwardsOnly",0),s.defineProperty(mi,{EE:"archetypeLinkData"},function(){return this.oC},function(t){t!==null&&s.G(t,Object,mi,"archetypeLinkData"),t instanceof N&&s.G(t,k,mi,"archetypeLinkData"),this.oC=t}),s.defineProperty(mi,{DE:"archetypeLabelNodeData"},function(){return this.nC},function(t){t!==null&&s.G(t,Object,mi,"archetypeLabelNodeData"),t instanceof N&&s.G(t,I,mi,"archetypeLabelNodeData"),this.nC=t}),s.defineProperty(mi,{direction:"direction"},function(){return this.ba},function(t){s.ob(t,mi,mi,"direction"),this.ba=t}),s.defineProperty(mi,{yG:"startObject"},function(){return this.YD},function(t){t!==null&&s.G(t,N,mi,"startObject"),this.YD=t}),mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.St)return!1;var i=t.$;return(i instanceof K||i instanceof Lt)&&t.N.left&&(t.Xa===this||this.isBeyondDragSize())?this.findLinkablePort()!==null:!1},mi.prototype.findLinkablePort=function(){var t=this.g;if(t===null)return null;var i=this.yG;if(i===null&&(i=t.Pe(t.uc.ea,null,null)),i===null||!(i.W instanceof I))return null;if(t=this.direction,t===xa||t===Td){var n=this.findValidLinkablePort(i,!1);if(n!==null)return this.Td=!0,n}return(t===xa||t===Sd)&&(n=this.findValidLinkablePort(i,!0),n!==null)?(this.Td=!1,n):null},mi.prototype.doActivate=function(){var t=this.g;if(t!==null){var i=this.findLinkablePort();i!==null&&(this.Ib(this.name),t.ef=!0,t.kc="pointer",this.Td?(this.Xd===null||this.Xd.location.I()||(this.Xd.location=t.N.ea),this.Rg=i,i=this.Rg.W,i instanceof I&&(this.Qg=i),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.ho,!1)):(this.Wd===null||this.Wd.location.I()||(this.Wd.location=t.N.ea),this.Tg=i,i=this.Tg.W,i instanceof I&&(this.Sg=i),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.io,!0)),t.add(this.Wd),t.add(this.Xd),this.wf!==null&&(this.Wd!==null&&(this.wf.V=this.Wd),this.Xd!==null&&(this.wf.Z=this.Xd),this.wf.bc=this.isNewTreeLink(),this.wf.Tb(),t.add(this.wf)),this.ta=!0)}},mi.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;t!==null&&(t.remove(this.wf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.kc="",this.Wk())},mi.prototype.doStop=function(){jt.prototype.doStop.call(this),this.yG=null},mi.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t===null)return;var i=this.Lf=null,n=null,e=null,o=null,r=this.Kf=this.findTargetPort(this.Td);if(r!==null){var h=r.W;h instanceof I&&(this.Td?(this.Qg!==null&&(i=this.Qg,n=this.Rg),e=h,o=r):(i=h,n=r,this.Sg!==null&&(e=this.Sg,o=this.Tg)))}else this.Td?this.Qg!==null&&this.kq&&(i=this.Qg,n=this.Rg):this.Sg!==null&&this.kq&&(e=this.Sg,o=this.Tg);i!==null||e!==null?(h=this.insertLink(i,n,e,o),h!==null?(r===null&&(this.Td?h.Vp=t.N.ea:h.Up=t.N.ea),t.Bf&&t.select(h),this.Lf=this.name,t.Aa("LinkDrawn",h)):(t.$.JE(),this.doNoLink(i,n,e,o))):this.Td?this.doNoLink(this.Qg,this.Rg,null,null):this.doNoLink(null,null,this.Sg,this.Tg)}this.stopTool()},mi.prototype.isNewTreeLink=function(){var t=this.EE;if(t===null)return!0;if(t instanceof k)return t.bc;var i=this.g;return i===null?!0:(t=i.bq(t),i=Aa(i,t),i!==null?i.bc:!0)},mi.prototype.insertLink=function(t,i,n,e){var o=this.g;if(o===null)return null;var r=o.$;if(r instanceof Lt){var h=t;if(i=n,o.Vd||(h=n,i=t),h!==null&&i!==null)return r.ti(i.data,r.qb(h.data)),i.Bn()}else if(r instanceof K){if(h="",t!==null&&(i===null&&(i=t),h=i.le,h===null&&(h="")),i="",n!==null&&(e===null&&(e=n),i=e.le,i===null&&(i="")),e=this.EE,e instanceof k){if(Xe(e),r=e.copy(),r!==null)return r.V=t,r.Ng=h,r.Z=n,r.Jh=i,o.add(r),t=this.DE,t instanceof I&&(Xe(t),t=t.copy(),t!==null&&(t.Xb=r,o.add(t))),r}else if(e!==null&&(e=r.ox(e),s.Pa(e)))return t!==null&&r.CB(e,r.qb(t.data)),r.DB(e,h),n!==null&&r.IB(e,r.qb(n.data)),r.JB(e,i),r.Ot(e),t=this.DE,t===null||t instanceof I||(t=r.copyNodeData(t),s.Pa(t)&&(r.Pl(t),t=r.qb(t),t!==void 0&&r.yE(e,t))),r=o.Yf(e)}return null},mi.prototype.doNoLink=function(){};function Cn(){0<arguments.length&&s.nd(Cn),jt.call(this),this.name="Relinking";var t=new Y;t.Fb="Diamond",t.Da=A0,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Qe=0,this.aD=t,t=new Y,t.Fb="Diamond",t.Da=A0,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Qe=-1,this.kE=t,this.qc=null,this.KD=new O}s.La(Cn,jt),s.ga("RelinkingTool",Cn),Cn.prototype.updateAdornments=function(t){if(t!==null&&t instanceof k){var i="RelinkFrom",n=null;if(t.jb&&this.g!==null&&!this.g.ib){var e=t.Fq;e!==null&&t.canRelinkFrom()&&t.U.I()&&t.isVisible()&&e.U.I()&&e.Cj()&&(n=t.Yp(i),n===null&&(n=this.makeAdornment(e,!1),t.Ol(i,n)))}n===null&&t.Ij(i),i="RelinkTo",n=null,t.jb&&this.g!==null&&!this.g.ib&&(e=t.Fq,e!==null&&t.canRelinkTo()&&t.U.I()&&t.isVisible()&&e.U.I()&&e.Cj()&&(n=t.Yp(i),n===null&&(n=this.makeAdornment(e,!0),t.Ol(i,n)))),n===null&&t.Ij(i)}},Cn.prototype.makeAdornment=function(t,i){var n=new vt;n.type=dr;var e=i?this.SJ:this.$H;return e!==null&&n.add(e.copy()),n.ub=t,n},s.defineProperty(Cn,{$H:"fromHandleArchetype"},function(){return this.aD},function(t){t!==null&&s.G(t,N,Cn,"fromHandleArchetype"),this.aD=t}),s.defineProperty(Cn,{SJ:"toHandleArchetype"},function(){return this.kE},function(t){t!==null&&s.G(t,N,Cn,"toHandleArchetype"),this.kE=t}),s.u(Cn,{handle:"handle"},function(){return this.qc}),Cn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.on)return!1;var i=t.$;return!(i instanceof K||i instanceof Lt)||!t.N.left?!1:(i=this.findToolHandleAt(t.uc.ea,"RelinkFrom"),i===null&&(i=this.findToolHandleAt(t.uc.ea,"RelinkTo")),i!==null)},Cn.prototype.doActivate=function(){var t=this.g;if(t!==null){if(this.mc===null){var i=this.findToolHandleAt(t.uc.ea,"RelinkFrom");if(i===null&&(i=this.findToolHandleAt(t.uc.ea,"RelinkTo")),i===null)return;var n=i.W;if(!(n instanceof vt&&n.Ze instanceof k))return;this.qc=i,this.Td=n===null||n.kd==="RelinkTo",this.mc=n.Ze}this.Ib(this.name),t.ef=!0,t.kc="pointer",this.Rg=this.mc.gc,this.Qg=this.mc.V,this.Tg=this.mc.zc,this.Sg=this.mc.Z,this.KD.set(this.mc.U),this.mc!==null&&0<this.mc.qa&&(this.mc.V===null&&(this.ho!==null&&(this.ho.Da=Xu),this.Wd!==null&&(this.Wd.location=this.mc.l(0))),this.mc.Z===null&&(this.io!==null&&(this.io.Da=Xu),this.Xd!==null&&(this.Xd.location=this.mc.l(this.mc.qa-1)))),this.copyPortProperties(this.Qg,this.Rg,this.Wd,this.ho,!1),this.copyPortProperties(this.Sg,this.Tg,this.Xd,this.io,!0),t.add(this.Wd),t.add(this.Xd),this.wf!==null&&(this.Wd!==null&&(this.wf.V=this.Wd),this.Xd!==null&&(this.wf.Z=this.Xd),this.copyLinkProperties(this.mc,this.wf),this.wf.Tb(),t.add(this.wf)),this.ta=!0}},Cn.prototype.copyLinkProperties=function(t,i){if(t!==null&&i!==null){i.Jp=t.Jp,i.wA=t.wA;var n=t.nf;(n===pu||n===Qr)&&(n=ce),i.nf=n,i.sx=t.sx,i.bc=t.bc,i.points=t.points,i.sy=t.sy,i.Iq=t.Iq,i.Mb=t.Mb,i.am=t.am,i.lu=t.lu,i.mu=t.mu,i.Nb=t.Nb,i.um=t.um,i.ev=t.ev,i.fv=t.fv}},Cn.prototype.doDeactivate=function(){this.ta=!1;var t=this.g;t!==null&&(t.remove(this.wf),t.remove(this.Wd),t.remove(this.Xd),t.ef=!1,t.kc="",this.Wk())},Cn.prototype.doStop=function(){jt.prototype.doStop.call(this),this.qc=null},Cn.prototype.doMouseUp=function(){if(this.ta){var t=this.g;if(t===null)return;this.Lf=null;var i=this.Qg,n=this.Rg,e=this.Sg,o=this.Tg,r=this.mc;if(this.Kf=this.findTargetPort(this.Td),this.Kf!==null){var h=this.Kf.W;h instanceof I&&(this.Td?(e=h,o=this.Kf):(i=h,n=this.Kf))}else this.kq?this.Td?o=e=null:n=i=null:r=null;r!==null?(this.reconnectLink(r,this.Td?e:i,this.Td?o:n,this.Td),this.Kf===null&&(this.Td?r.Vp=t.N.ea:r.Up=t.N.ea,r.Tb()),t.Bf&&(r.jb=!0),this.Lf=this.name,t.Aa("LinkRelinked",r,this.Td?this.Tg:this.Rg)):this.doNoRelink(this.mc,this.Td),ap(this.mc,this.KD)}this.stopTool()},Cn.prototype.reconnectLink=function(t,i,n,e){return this.g===null?!1:(n=n!==null&&n.le!==null?n.le:"",e?(t.Z=i,t.Jh=n):(t.V=i,t.Ng=n),!0)},Cn.prototype.doNoRelink=function(){};function kd(t,i,n,e,o){t.g!==null&&(i!==null?(t.copyPortProperties(i,n,t.Wd,t.ho,!1),t.g.add(t.Wd)):t.g.remove(t.Wd),e!==null?(t.copyPortProperties(e,o,t.Xd,t.io,!0),t.g.add(t.Xd)):t.g.remove(t.Xd))}function Ot(){0<arguments.length&&s.nd(Ot),ut.call(this),this.name="LinkReshaping";var t=new Y;t.Fb="Rectangle",t.Da=Wu,t.fill="lightblue",t.stroke="dodgerblue",this.rl=t,t=new Y,t.Fb="Diamond",t.Da=Wu,t.fill="lightblue",t.stroke="dodgerblue",this.xD=t,this.QD=3,this.Uy=this.qc=null,this.jp=new D,this.yw=null}s.La(Ot,ut),s.ga("LinkReshapingTool",Ot);var wa;Ot.None=wa=s.p(Ot,"None",0);var Hl;Ot.Horizontal=Hl=s.p(Ot,"Horizontal",1);var Kl;Ot.Vertical=Kl=s.p(Ot,"Vertical",2);var Q0;Ot.All=Q0=s.p(Ot,"All",3),Ot.prototype.getReshapingBehavior=Ot.prototype.mF=function(t){return t&&t.Oz?t.Oz:wa},Ot.prototype.setReshapingBehavior=Ot.prototype.av=function(t,i){s.G(t,N,Ot,"setReshapingBehavior:obj"),s.ob(i,Ot,Ot,"setReshapingBehavior:behavior"),t.Oz=i},Ot.prototype.updateAdornments=function(t){if(t!==null&&t instanceof k){if(t.jb&&this.g!==null&&!this.g.ib){var i=t.path;if(i!==null&&t.canReshape()&&t.U.I()&&t.isVisible()&&i.U.I()&&i.Cj()){var n=t.Yp(this.name);if((n===null||n.ED!==t.qa||n.rE!==t.Vu)&&(n=this.makeAdornment(i),n!==null&&(n.ED=t.qa,n.rE=t.Vu,t.Ol(this.name,n))),n!==null){n.location=t.position;return}}}t.Ij(this.name)}},Ot.prototype.makeAdornment=function(t){var i=t.W,n=i.qa,e=i.ac,o=null;if(i.points!==null&&1<n){o=new vt,o.type=dr;var n=i.fu,r=i.Sx,h=e?1:0;if(i.Vu&&i.computeCurve()!==Le)for(var l=n+h;l<r-h;l++){var u=this.makeResegmentHandle(t,l);u!==null&&(u.Qe=l,u.zB=.5,u.GA=999,o.add(u))}for(l=n+1;l<r;l++)if(u=this.makeHandle(t,l),u!==null){if(u.Qe=l,l!==n)if(l===n+1&&e){var h=i.l(n),f=i.l(n+1);$(h.x,f.x)&&$(h.y,f.y)&&(f=i.l(n-1)),$(h.x,f.x)?(this.av(u,Kl),u.cursor="n-resize"):$(h.y,f.y)&&(this.av(u,Hl),u.cursor="w-resize")}else l===r-1&&e?(h=i.l(r-1),f=i.l(r),$(h.x,f.x)&&$(h.y,f.y)&&(h=i.l(r+1)),$(h.x,f.x)?(this.av(u,Kl),u.cursor="n-resize"):$(h.y,f.y)&&(this.av(u,Hl),u.cursor="w-resize")):l!==r&&(this.av(u,Q0),u.cursor="move");o.add(u)}o.ub=t}return o},Ot.prototype.makeHandle=function(){var t=this.pu;return t===null?null:t.copy()},s.defineProperty(Ot,{pu:"handleArchetype"},function(){return this.rl},function(t){t!==null&&s.G(t,N,Ot,"handleArchetype"),this.rl=t}),Ot.prototype.makeResegmentHandle=function(){var t=this.ZI;return t===null?null:t.copy()},s.defineProperty(Ot,{ZI:"midHandleArchetype"},function(){return this.xD},function(t){t!==null&&s.G(t,N,Ot,"midHandleArchetype"),this.xD=t}),s.u(Ot,{handle:"handle"},function(){return this.qc}),s.u(Ot,{Qt:"adornedLink"},function(){return this.Uy}),Ot.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.hx&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Ot.prototype.doActivate=function(){var t=this.g;if(t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null)){var i=this.qc.W.Ze;if(i instanceof k){if(this.Uy=i,t.ef=!0,this.Ib(this.name),i.Vu&&this.qc.GA===999){var n=i.points.copy(),e=this.getResegmentingPoint();if(n.Rd(this.qc.Qe+1,e),i.ac&&n.Rd(this.qc.Qe+1,e),i.points=n,i.Sd(),i.updateAdornments(),this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc===null){this.doDeactivate();return}}this.jp=i.l(this.qc.Qe),this.yw=i.points.copy(),this.ta=!0}}},Ot.prototype.doDeactivate=function(){this.Wk(),this.Uy=this.qc=null;var t=this.g;t!==null&&(t.ef=!1),this.ta=!1},Ot.prototype.doCancel=function(){var t=this.Qt;t!==null&&(t.points=this.yw),this.stopTool()},Ot.prototype.getResegmentingPoint=function(){return this.handle.Ya(kt)},Ot.prototype.doMouseMove=function(){var t=this.g;this.ta&&t!==null&&(t=this.computeReshape(t.N.ea),this.reshape(t))},Ot.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){var i=this.computeReshape(t.N.ea);if(this.reshape(i),i=this.Qt,i!==null&&i.Vu){var n=this.handle.Qe,e=i.l(n-1),o=i.l(n),r=i.l(n+1);if(i.ac){if(n>i.fu+1&&n<i.Sx-1){var h=i.l(n-2);if(Math.abs(e.x-o.x)<this.Gh&&Math.abs(e.y-o.y)<this.Gh&&(Ul(this,h,e,o,r,!0)||Ul(this,h,e,o,r,!1))){var l=i.points.copy();Ul(this,h,e,o,r,!0)?(l.kg(n-2,new D(h.x,(r.y+h.y)/2)),l.kg(n+1,new D(r.x,(r.y+h.y)/2))):(l.kg(n-2,new D((r.x+h.x)/2,h.y)),l.kg(n+1,new D((r.x+h.x)/2,r.y))),l.cd(n),l.cd(n-1),i.points=l,i.Sd()}else h=i.l(n+2),Math.abs(o.x-r.x)<this.Gh&&Math.abs(o.y-r.y)<this.Gh&&(Ul(this,e,o,r,h,!0)||Ul(this,e,o,r,h,!1))&&(l=i.points.copy(),Ul(this,e,o,r,h,!0)?(l.kg(n-1,new D(e.x,(e.y+h.y)/2)),l.kg(n+2,new D(h.x,(e.y+h.y)/2))):(l.kg(n-1,new D((e.x+h.x)/2,e.y)),l.kg(n+2,new D((e.x+h.x)/2,h.y))),l.cd(n+1),l.cd(n),i.points=l,i.Sd())}}else h=s.K(),qs(e.x,e.y,r.x,r.y,o.x,o.y,h)&&h.Cf(o)<this.Gh*this.Gh&&(l=i.points.copy(),l.cd(n),i.points=l,i.Sd()),s.v(h)}t.Gc(),this.Lf=this.name,t.Aa("LinkReshaped",this.Qt,this.yw)}this.stopTool()};function Ul(t,i,n,e,o,r){return r?Math.abs(i.y-n.y)<t.Gh&&Math.abs(n.y-e.y)<t.Gh&&Math.abs(e.y-o.y)<t.Gh:Math.abs(i.x-n.x)<t.Gh&&Math.abs(n.x-e.x)<t.Gh&&Math.abs(e.x-o.x)<t.Gh}s.defineProperty(Ot,{Gh:"resegmentingDistance"},function(){return this.QD},function(t){s.j(t,"number",Ot,"resegmentingDistance"),this.QD=t}),Ot.prototype.reshape=function(t){var i=this.Qt;i.qm();var n=this.handle.Qe,e=this.mF(this.handle);if(i.ac)if(n===i.fu+1)n=i.fu+1,e===Kl?(i.ca(n,i.l(n-1).x,t.y),i.ca(n+1,i.l(n+2).x,t.y)):e===Hl&&(i.ca(n,t.x,i.l(n-1).y),i.ca(n+1,t.x,i.l(n+2).y));else if(n===i.Sx-1)n=i.Sx-1,e===Kl?(i.ca(n-1,i.l(n-2).x,t.y),i.ca(n,i.l(n+1).x,t.y)):e===Hl&&(i.ca(n-1,t.x,i.l(n-2).y),i.ca(n,t.x,i.l(n+1).y));else{var e=n,o=i.l(e),r=i.l(e-1),h=i.l(e+1);$(r.x,o.x)&&$(o.y,h.y)?($(r.x,i.l(e-2).x)&&!$(r.y,i.l(e-2).y)?(i.w(e,t.x,r.y),n++,e++):i.ca(e-1,t.x,r.y),$(h.y,i.l(e+2).y)&&!$(h.x,i.l(e+2).x)?i.w(e+1,h.x,t.y):i.ca(e+1,h.x,t.y)):$(r.y,o.y)&&$(o.x,h.x)?($(r.y,i.l(e-2).y)&&!$(r.x,i.l(e-2).x)?(i.w(e,r.x,t.y),n++,e++):i.ca(e-1,r.x,t.y),$(h.x,i.l(e+2).x)&&!$(h.y,i.l(e+2).y)?i.w(e+1,t.x,h.y):i.ca(e+1,t.x,h.y)):$(r.x,o.x)&&$(o.x,h.x)?($(r.x,i.l(e-2).x)&&!$(r.y,i.l(e-2).y)?(i.w(e,t.x,r.y),n++,e++):i.ca(e-1,t.x,r.y),$(h.x,i.l(e+2).x)&&!$(h.y,i.l(e+2).y)?i.w(e+1,t.x,h.y):i.ca(e+1,t.x,h.y)):$(r.y,o.y)&&$(o.y,h.y)&&($(r.y,i.l(e-2).y)&&!$(r.x,i.l(e-2).x)?(i.w(e,r.x,t.y),n++,e++):i.ca(e-1,r.x,t.y),$(h.y,i.l(e+2).y)&&!$(h.x,i.l(e+2).x)?i.w(e+1,h.x,t.y):i.ca(e+1,h.x,t.y)),i.ca(n,t.x,t.y)}else i.ca(n,t.x,t.y),o=i.V,r=i.gc,o!==null&&(e=o.findVisibleNode(),e!==null&&e!==o&&(o=e,r=o.port)),n===1&&i.computeSpot(!0,r).Ud()&&(e=r.Ya(kt,s.K()),o=i.getLinkPointFromPoint(o,r,e,t,!0,s.K()),i.ca(0,o.x,o.y),s.v(e),s.v(o)),o=i.Z,r=i.zc,o!==null&&(e=o.findVisibleNode(),e!==null&&e!==o&&(o=e,r=o.port)),n===i.qa-2&&i.computeSpot(!1,r).Ud()&&(e=r.Ya(kt,s.K()),o=i.getLinkPointFromPoint(o,r,e,t,!1,s.K()),i.ca(i.qa-1,o.x,o.y),s.v(e),s.v(o));i.qj()},Ot.prototype.computeReshape=function(t){var i=this.Qt,n=this.handle.Qe;switch(this.mF(this.handle)){case Q0:return t;case Kl:return i=i.l(n),new D(i.x,t.y);case Hl:return i=i.l(n),new D(t.x,i.y);default:case wa:return i.l(n)}},s.u(Ot,{EL:"originalPoint"},function(){return this.jp}),s.u(Ot,{FL:"originalPoints"},function(){return this.yw});function Zt(){0<arguments.length&&s.nd(Zt),ut.call(this),this.name="Resizing",this.Zh=new lt(1,1).freeze(),this.Yh=new lt(9999,9999).freeze(),this.Rj=new lt(NaN,NaN).freeze(),this.Yr=!1,this.Kc=null;var t=new Y;t.qh=kt,t.Fb="Rectangle",t.Da=Wu,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.rl=t,this.qc=null,this.jp=new D,this.FD=new lt,this.LD=new D,this.rz=new lt(0,0),this.qz=new lt(1/0,1/0),this.pz=new lt(1,1),this.DD=!0}s.La(Zt,ut),s.ga("ResizingTool",Zt),Zt.prototype.updateAdornments=function(t){if(!(t===null||t instanceof k)){if(t.jb&&this.g!==null&&!this.g.ib){var i=t.jG;if(i!==null&&t.canResize()&&t.U.I()&&t.isVisible()&&i.U.I()&&i.Cj()){var n=t.Yp(this.name);if((n===null||n.ub!==i)&&(n=this.makeAdornment(i)),n!==null){var e=i.bm();n.angle=e;var o=i.Ya(n.Gf,s.K()),r=i.vj();if(n.location=o,s.v(o),o=n.placeholder,o!==null){var i=i.Ja,h=s.tm();h.m(i.width*r,i.height*r),o.Da=h,s.Lk(h)}this.updateResizeHandles(n,e),t.Ol(this.name,n);return}}}t.Ij(this.name)}},Zt.prototype.makeAdornment=function(t){var i=null,i=t.W.iG;if(i===null){i=new vt,i.type=eh,i.Gf=kt;var n=new nn;n.ff=!0,i.add(n),i.add(this.makeHandle(t,gi)),i.add(this.makeHandle(t,jl)),i.add(this.makeHandle(t,$i)),i.add(this.makeHandle(t,Dl)),i.add(this.makeHandle(t,Ne)),i.add(this.makeHandle(t,On)),i.add(this.makeHandle(t,je)),i.add(this.makeHandle(t,Ce))}else if(Xe(i),i=i.copy(),i===null)return null;return i.ub=t,i},Zt.prototype.makeHandle=function(t,i){var n=this.pu;return n===null?null:(n=n.copy(),n.alignment=i,n)},Zt.prototype.updateResizeHandles=function(t,i){if(t!==null){if(!t.alignment.ge()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;n.Ud()&&(n=kt);var e=i;if(0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else if(1<=n.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof A)for(n=t.elements;n.next();)this.updateResizeHandles(n.value,i)}},s.defineProperty(Zt,{pu:"handleArchetype"},function(){return this.rl},function(t){t!==null&&s.G(t,N,Zt,"handleArchetype"),this.rl=t}),s.u(Zt,{handle:"handle"},function(){return this.qc}),s.defineProperty(Zt,{ub:"adornedObject"},function(){return this.Kc},function(t){t!==null&&s.G(t,N,Zt,"adornedObject"),this.Kc=t}),Zt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.Tt&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Zt.prototype.doActivate=function(){var t=this.g;t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null&&(this.Kc=this.qc.W.ub,this.jp.set(this.ub.Ya(this.handle.alignment.YF())),this.LD.set(this.Kc.W.location),this.FD.set(this.Kc.Da),this.pz=this.computeCellSize(),this.rz=this.computeMinSize(),this.qz=this.computeMaxSize(),t.ef=!0,this.DD=t.Ka.isEnabled,t.Ka.isEnabled=!1,this.Ib(this.name),this.ta=!0))},Zt.prototype.doDeactivate=function(){var t=this.g;t!==null&&(this.Wk(),this.Kc=this.qc=null,this.ta=t.ef=!1,t.Ka.isEnabled=this.DD)},Zt.prototype.doCancel=function(){this.ub!==null&&(this.ub.Da=this.ZF,this.ub.W.location=this.jJ),this.stopTool()},Zt.prototype.doMouseMove=function(){var t=this.g;if(this.ta&&t!==null){var r=this.rz,i=this.qz,n=this.pz,e=this.ub.kF(t.N.ea,s.K()),o=this.computeReshape(),r=this.computeResize(e,this.handle.alignment,r,i,n,o);this.resize(r),t.dg(),s.v(e)}},Zt.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){var r=this.rz,i=this.qz,n=this.pz,e=this.ub.kF(t.N.ea,s.K()),o=this.computeReshape(),r=this.computeResize(e,this.handle.alignment,r,i,n,o);this.resize(r),s.v(e),t.Gc(),this.Lf=this.name,t.Aa("PartResized",this.ub,this.ZF)}this.stopTool()},Zt.prototype.resize=function(t){var i=this.g;if(i!==null){var n=this.ub,e=n.W;if(n.Da=t.size,e.Ne(),t=this.ub.Ya(this.handle.alignment.YF()),e instanceof q){var n=i.Va.ce,o=!1;n!==null&&(o=n.Sk,n.Sk=!1);var r=new E(L);r.add(e),i.moveParts(r,this.jp.copy().ui(t),!0),n!==null&&(n.Sk=o)}else e.location=e.location.copy().ui(t).add(this.jp)}},Zt.prototype.computeResize=function(t,i,n,e,o,r){i.Ud()&&(i=kt);var h=this.ub.Ja,l=h.x,u=h.y,f=h.x+h.width,a=h.y+h.height,p=1;if(!r){var p=h.width,y=h.height;0>=p&&(p=1),0>=y&&(y=1),p=y/p}return y=s.K(),tf(t.x,t.y,l,u,o.width,o.height,y),t=h.copy(),0>=i.x?0>=i.y?(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=Math.max(f-t.x,n.width),t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=Math.max(a-t.y,n.height),r||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.x=f-t.width,t.y=a-t.height)):1<=i.y?(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=Math.max(f-t.x,n.width),t.height=Math.max(Math.min(y.y-u,e.height),n.height),r||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.x=f-t.width)):(t.x=Math.max(y.x,f-e.width),t.x=Math.min(t.x,f-n.width),t.width=f-t.x,r||(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p,t.y=u+.5*(a-u-t.height))):1<=i.x?0>=i.y?(t.width=Math.max(Math.min(y.x-l,e.width),n.width),t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=Math.max(a-t.y,n.height),r||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width),t.y=a-t.height)):1<=i.y?(t.width=Math.max(Math.min(y.x-l,e.width),n.width),t.height=Math.max(Math.min(y.y-u,e.height),n.height),r||(i=t.height/t.width,1<=i?(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width))):(t.width=Math.max(Math.min(y.x-l,e.width),n.width),r||(t.height=Math.max(Math.min(p*t.width,e.height),n.height),t.width=t.height/p,t.y=u+.5*(a-u-t.height))):0>=i.y?(t.y=Math.max(y.y,a-e.height),t.y=Math.min(t.y,a-n.height),t.height=a-t.y,r||(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width,t.x=l+.5*(f-l-t.width))):1<=i.y&&(t.height=Math.max(Math.min(y.y-u,e.height),n.height),r||(t.width=Math.max(Math.min(t.height/p,e.width),n.width),t.height=p*t.width,t.x=l+.5*(f-l-t.width))),s.v(y),t},Zt.prototype.computeReshape=function(){var t=ei;return this.ub instanceof Y&&(t=qy(this.ub)),!(t===Li||this.g!==null&&this.g.N.shift)},Zt.prototype.computeMinSize=function(){var t=this.ub.si.copy(),i=this.si;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t},Zt.prototype.computeMaxSize=function(){var t=this.ub.Hf.copy(),i=this.Hf;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t},Zt.prototype.computeCellSize=function(){var t=new lt(NaN,NaN),i=this.ub.W;if(i!==null){var n=i.uJ;!isNaN(n.width)&&0<n.width&&(t.width=n.width),!isNaN(n.height)&&0<n.height&&(t.height=n.height)}return n=this.Np,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height),i=this.g,(isNaN(t.width)||isNaN(t.height))&&i&&(n=i.Va.ce,n!==null&&n.Sk&&(n=n.sF,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height)),i=i.Gn,i!==null&&i.visible&&this.Sk&&(n=i.Jx,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},s.defineProperty(Zt,{si:"minSize"},function(){return this.Zh},function(t){if(s.G(t,lt,Zt,"minSize"),!this.Zh.L(t)){var i=t.width;isNaN(i)&&(i=0),t=t.height,isNaN(t)&&(t=0),this.Zh.m(i,t)}}),s.defineProperty(Zt,{Hf:"maxSize"},function(){return this.Yh},function(t){if(s.G(t,lt,Zt,"maxSize"),!this.Yh.L(t)){var i=t.width;isNaN(i)&&(i=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Yh.m(i,t)}}),s.defineProperty(Zt,{Np:"cellSize"},function(){return this.Rj},function(t){s.G(t,lt,Zt,"cellSize"),this.Rj.L(t)||this.Rj.assign(t)}),s.defineProperty(Zt,{Sk:"isGridSnapEnabled"},function(){return this.Yr},function(t){s.j(t,"boolean",Zt,"isGridSnapEnabled"),this.Yr=t}),s.u(Zt,{ZF:"originalDesiredSize"},function(){return this.FD}),s.u(Zt,{jJ:"originalLocation"},function(){return this.LD});function Qi(){0<arguments.length&&s.nd(Qi),ut.call(this),this.name="Rotating",this.WD=45,this.VD=2,this.Kc=null;var t=new Y;t.Fb="Ellipse",t.Da=A0,t.fill="lightblue",t.stroke="dodgerblue",t.mb=1,t.cursor="pointer",this.rl=t,this.qc=null,this.xw=0,this.RD=new D}s.La(Qi,ut),s.ga("RotatingTool",Qi),Qi.prototype.updateAdornments=function(t){if(t!==null){if(t instanceof k){var i=t.xB;if(i===t||i===t.path||i.ff)return}if(t.jb&&this.g!==null&&!this.g.ib&&(i=t.xB,i!==null&&t.canRotate()&&t.U.I()&&t.isVisible()&&i.U.I()&&i.Cj())){var n=t.Yp(this.name);if((n===null||n.ub!==i)&&(n=this.makeAdornment(i)),n!==null){n.angle=i.bm();var o=null,e=null;i===t||i===t.cg?(o=t.cg,e=t.Gf):(o=i,e=kt);for(var r=o.Ja,e=s.wb(r.width*e.x+e.offsetX,r.height*e.y+e.offsetY);o!==null&&o!==i;)o.transform.nb(e),o=o.R;var o=e.y,r=Math.max(e.x-i.Ja.width,0),h=s.K();n.location=i.Ya(new P(1,0,50+r,o),h),s.v(h),s.v(e),t.Ol(this.name,n);return}}t.Ij(this.name)}},Qi.prototype.makeAdornment=function(t){var i=null,i=t.W.xJ;if(i===null){i=new vt,i.type=Ka,i.Gf=kt;var n=this.pu;n!==null&&i.add(n.copy())}else if(Xe(i),i=i.copy(),i===null)return null;return i.ub=t,i},s.defineProperty(Qi,{pu:"handleArchetype"},function(){return this.rl},function(t){t!==null&&s.G(t,N,Qi,"handleArchetype"),this.rl=t}),s.u(Qi,{handle:"handle"},function(){return this.qc}),s.defineProperty(Qi,{ub:"adornedObject"},function(){return this.Kc},function(t){t!==null&&s.G(t,N,Qi,"adornedObject"),this.Kc=t}),Qi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t!==null&&!t.ib&&t.ix&&t.N.left?this.findToolHandleAt(t.uc.ea,this.name)!==null:!1},Qi.prototype.doActivate=function(){var t=this.g;if(t!==null&&(this.qc=this.findToolHandleAt(t.uc.ea,this.name),this.qc!==null)){this.Kc=this.qc.W.ub;var i=this.Kc.W,n=i.cg;this.RD=this.Kc===i||this.Kc===n?n.Ya(i.Gf):this.Kc.Ya(kt),this.xw=this.Kc.angle,t.ef=!0,t.zA=!0,this.Ib(this.name),this.ta=!0}},Qi.prototype.doDeactivate=function(){var t=this.g;t!==null&&(this.Wk(),this.Kc=this.qc=null,this.ta=t.ef=!1)},Qi.prototype.doCancel=function(){var t=this.g;t!==null&&(t.zA=!1),this.rotate(this.xw),this.stopTool()},Qi.prototype.doMouseMove=function(){var t=this.g;this.ta&&t!==null&&(t=this.computeRotate(t.N.ea),this.rotate(t))},Qi.prototype.doMouseUp=function(){var t=this.g;if(this.ta&&t!==null){t.zA=!1;var i=this.computeRotate(t.N.ea);this.rotate(i),t.Gc(),this.Lf=this.name,t.Aa("PartRotated",this.Kc,this.xw)}this.stopTool()},Qi.prototype.rotate=function(t){this.Kc!==null&&(this.Kc.angle=t)},Qi.prototype.computeRotate=function(t){t=this.RD.Qb(t);var i=this.Kc.R;i!==null&&(t-=i.bm(),360<=t?t-=360:0>t&&(t+=360));var i=Math.min(Math.abs(this.MJ),180),n=Math.min(Math.abs(this.LJ),i/2);return(this.g===null||!this.g.N.shift)&&0<i&&0<n&&(t%i<n?t=Math.floor(t/i)*i:t%i>i-n&&(t=(Math.floor(t/i)+1)*i)),360<=t?t-=360:0>t&&(t+=360),t},s.defineProperty(Qi,{MJ:"snapAngleMultiple"},function(){return this.WD},function(t){s.j(t,"number",Qi,"snapAngleMultiple"),this.WD=t}),s.defineProperty(Qi,{LJ:"snapAngleEpsilon"},function(){return this.VD},function(t){s.j(t,"number",Qi,"snapAngleEpsilon"),this.VD=t}),s.u(Qi,{DL:"originalAngle"},function(){return this.xw});function Jl(){ut.call(this),0<arguments.length&&s.nd(Jl),this.name="ClickSelecting"}s.La(Jl,ut),s.ga("ClickSelectingTool",Jl),Jl.prototype.canStart=function(){return!(!this.isEnabled||this.g===null||this.isBeyondDragSize())},Jl.prototype.doMouseUp=function(){this.ta&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.g!==null&&this.g.N.Aj&&this.g.Va.doToolTip()),this.stopTool()};function Hr(){ut.call(this),0<arguments.length&&s.nd(Hr),this.name="Action",this.oo=null}s.La(Hr,ut),s.ga("ActionTool",Hr),Hr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null)return!1;var i=t.N,n=t.Pe(i.ea,function(e){for(;e.R!==null&&!e.Kx;)e=e.R;return e});return n!==null&&n.Kx?(this.oo=n,t.zo=t.Pe(i.ea,null,null),!0):!1},Hr.prototype.doMouseDown=function(){if(this.ta){var t=this.g.N,i=this.oo;i!==null&&(t.Be=i,i.uE!==null&&i.uE(t,i))}else this.canStart()&&this.doActivate()},Hr.prototype.doMouseMove=function(){if(this.ta){var t=this.g.N,i=this.oo;i!==null&&(t.Be=i,i.vE!==null&&i.vE(t,i))}},Hr.prototype.doMouseUp=function(){if(this.ta){var t=this.g,i=t.N,n=this.oo;if(n===null)return;i.Be=n,n.wE!==null&&n.wE(i,n),this.isBeyondDragSize()||hd(n,i,t)}this.stopTool()},Hr.prototype.doCancel=function(){var t=this.g;if(t!==null){var t=t.N,i=this.oo;if(i===null)return;t.Be=i,i.tE!==null&&i.tE(t,i)}this.stopTool()},Hr.prototype.doStop=function(){this.oo=null};function pr(){ut.call(this),0<arguments.length&&s.nd(pr),this.name="ClickCreating",this.zm=null,this.lD=!0,this.$C=new D(0,0)}s.La(pr,ut),s.ga("ClickCreatingTool",pr),pr.prototype.canStart=function(){if(!this.isEnabled||this.kA===null)return!1;var t=this.g;if(t===null||t.ib||t.Ef||!t.Kp||!t.N.left||this.isBeyondDragSize())return!1;if(this.zI){if(t.N.te===1&&(this.$C=t.N.Ce.copy()),t.N.te!==2||this.isBeyondDragSize(this.$C))return!1}else if(t.N.te!==1)return!1;return!(t.Xa!==this&&t.eu(t.N.ea,!0)!==null)},pr.prototype.doMouseUp=function(){var t=this.g;this.ta&&t!==null&&this.insertPart(t.N.ea),this.stopTool()},pr.prototype.insertPart=function(t){var i=this.g;if(i===null)return null;var n=this.kA;if(n===null)return null;this.Ib(this.name);var e=null;return n instanceof L?n.he()&&(Xe(n),e=n.copy(),e!==null&&i.add(e)):n!==null&&(n=i.$.copyNodeData(n),s.Pa(n)&&(i.$.Pl(n),e=i.wh(n))),e!==null&&(e.location=t,i.Bf&&i.select(e)),i.Gc(),this.Lf=this.name,i.Aa("PartCreated",e),this.Wk(),e},s.defineProperty(pr,{kA:"archetypeNodeData"},function(){return this.zm},function(t){t!==null&&s.G(t,Object,pr,"archetypeNodeData"),this.zm=t}),s.defineProperty(pr,{zI:"isDoubleClick"},function(){return this.lD},function(t){s.j(t,"boolean",pr,"isDoubleClick"),this.lD=t});function Hn(){this.pE=this.vD=this.zz=this.Uz=null}s.ga("HTMLInfo",Hn),s.defineProperty(Hn,{dB:"mainElement"},function(){return this.vD},function(t){t!==null&&s.G(t,HTMLElement,Hn,"mainElement"),this.vD=t}),s.defineProperty(Hn,{show:"show"},function(){return this.Uz},function(t){this.Uz!==t&&(t!==null&&s.j(t,"function",Hn,"show"),this.Uz=t)}),s.defineProperty(Hn,{Hn:"hide"},function(){return this.zz},function(t){this.zz!==t&&(t!==null&&s.j(t,"function",Hn,"hide"),this.zz=t)}),s.defineProperty(Hn,{YB:"valueFunction"},function(){return this.pE},function(t){this.pE=t});function fo(t,i,n){this.text=t,this.LE=i,this.visible=n}function bi(){ut.call(this),0<arguments.length&&s.nd(bi),this.name="ContextMenu",this.FC=this.bz=this.CC=null,this.BD=new D,this.dz=this.Em=null;var t=this;this.aA=function(){t.stopTool()},xx(this)}s.La(bi,ut),s.ga("ContextMenuTool",bi);function xx(t){var i=new Hn;if(i.show=function(o,r,h){h.showDefaultContextMenu()},i.Hn=function(o,r){r.hideDefaultContextMenu()},t.Em=i,t.aA=function(){t.stopTool()},s.RE===!1){var i=s.createElement("div"),n=s.createElement("div");i.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var e=s.createElement("style");Q.document.getElementsByTagName("head")[0].appendChild(e),e.sheet.insertRule(".goCXul { list-style: none; }",0),e.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),e.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",Z0,!1),i.addEventListener("selectstart",Z0,!1),n.addEventListener("contextmenu",Z0,!1),Q.document.body&&(Q.document.body.appendChild(i),Q.document.body.appendChild(n)),s.Wt=i,s.Vt=n,s.RE=!0}}function Z0(t){return t.preventDefault(),!1}bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return t===null||this.isBeyondDragSize()||!t.N.right?!1:!!(this.Em!==null&&t.N.Aj||this.findObjectWithContextMenu()!==null)},bi.prototype.doStart=function(){var t=this.g;t!==null&&this.BD.set(t.uc.ea)},bi.prototype.doStop=function(){this.hideContextMenu(),this.qx=null},bi.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var i=this.g;if(i===null)return null;var n=i.N,e=null;if(t instanceof x||(e=t instanceof N?t:i.Pe(n.ea,null,function(o){return!o.layer.Hc})),e!==null){for(t=e;t!==null;){if(t.contextMenu!==null)return t;t=t.R}if(this.Em!==null&&i.N.Aj)return e.W}else if(i.contextMenu!==null)return i;return null},bi.prototype.doActivate=function(){},bi.prototype.doMouseDown=function(){ut.prototype.doMouseDown.call(this),this.g!==null&&this.g.Va.gf.contains(this)&&Nd(this)},bi.prototype.doMouseUp=function(){Nd(this)};function Nd(t){var i=t.g;if(i!==null)if(t.ta){var n=t.Wl;if(n!==null){if(!(n instanceof Hn)){var e=i.Pe(i.N.ea,null,null);e!==null&&e.hm(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(i.Xa=t,t.doMouseUp())}}else t.canStart()&&(Cd(t,!0),t.ta||t.stopTool())}function Cd(t,i,n){if(n===void 0&&(n=null),i&&t.standardMouseSelect(),!t.standardMouseClick())if(t.ta=!0,i=t.Em,n===null&&(n=t.findObjectWithContextMenu()),n!==null){var e=n.contextMenu;e!==null?(t.qx=n instanceof N?n:null,t.showContextMenu(e,t.qx)):i!==null&&t.showContextMenu(i,t.qx)}else i!==null&&t.showContextMenu(i,null)}bi.prototype.doMouseMove=function(){this.ta&&this.g!==null&&this.g.Va.doMouseMove()},bi.prototype.showContextMenu=function(t,i){i!==null&&s.G(i,N,bi,"showContextMenu:obj");var n=this.g;if(n!==null){if(t!==this.Wl&&this.hideContextMenu(),t instanceof vt){t.bg="Tool",t.nm=!1,t.scale=1/n.scale,t.kd=this.name,t.placeholder!==null&&(t.placeholder.scale=n.scale);var e=t.g;e!==null&&e!==n&&e.remove(t),n.add(t),i!==null?(n=null,e=i.$l(),e!==null&&(n=e.data),t.ub=i,t.data=n):t.data=n.$,t.Ne(),this.positionContextMenu(t,i)}else t instanceof Hn&&t.show(i,n,this);this.Wl=t}},bi.prototype.positionContextMenu=function(t){if(t.placeholder===null){var i=this.g;if(i!==null){var n=i.N.ea.copy(),e=t.za,o=i.sb;i.N.Aj&&(n.x-=e.width),n.x+e.width>o.right&&(n.x-=e.width+5/i.scale),n.x<o.x&&(n.x=o.x),n.y+e.height>o.bottom&&(n.y-=e.height+5/i.scale),n.y<o.y&&(n.y=o.y),t.position=n}}},bi.prototype.hideContextMenu=function(){var t=this.g;if(t!==null){var i=this.Wl;i!==null&&(i instanceof vt?(t.remove(i),this.bz!==null&&this.bz.Ij(i.kd),i.data=null,i.ub=null):i instanceof Hn&&(i.Hn!==null?i.Hn(t,this):i.dB!==null&&(i.dB.style.display="none")),this.Wl=null,this.standardMouseOver())}};function wx(t){return t.g===null?null:(t=new E(fo),t.add(new fo("Copy",function(i){i.pb.copySelection()},function(i){return i.pb.canCopySelection()})),t.add(new fo("Cut",function(i){i.pb.cutSelection()},function(i){return i.pb.canCutSelection()})),t.add(new fo("Delete",function(i){i.pb.deleteSelection()},function(i){return i.pb.canDeleteSelection()})),t.add(new fo("Paste",function(i){i.pb.pasteSelection(i.N.ea)},function(i){return i.pb.canPasteSelection()})),t.add(new fo("Select All",function(i){i.pb.selectAll()},function(i){return i.pb.canSelectAll()})),t.add(new fo("Undo",function(i){i.pb.undo()},function(i){return i.pb.canUndo()})),t.add(new fo("Redo",function(i){i.pb.redo()},function(i){return i.pb.canRedo()})),t.add(new fo("Scroll To Part",function(i){i.pb.scrollToPart()},function(i){return i.pb.canScrollToPart()})),t.add(new fo("Zoom To Fit",function(i){i.pb.zoomToFit()},function(i){return i.pb.canZoomToFit()})),t.add(new fo("Reset Zoom",function(i){i.pb.resetZoom()},function(i){return i.pb.canResetZoom()})),t.add(new fo("Group Selection",function(i){i.pb.groupSelection()},function(i){return i.pb.canGroupSelection()})),t.add(new fo("Ungroup Selection",function(i){i.pb.ungroupSelection()},function(i){return i.pb.canUngroupSelection()})),t.add(new fo("Edit Text",function(i){i.pb.editTextBlock()},function(i){return i.pb.canEditTextBlock()})),t)}bi.prototype.showDefaultContextMenu=function(){var t=this.g;if(t!==null){this.dz===null&&(this.dz=wx(this)),s.Wt.innerHTML="",s.Vt.addEventListener("click",this.aA,!1);var i=this,n=s.createElement("ul");n.className="goCXul",s.Wt.appendChild(n),n.innerHTML="";for(var e=this.dz.i;e.next();){var o=e.value,r=o.visible;if(typeof o.LE=="function"&&(typeof r!="function"||r(t))){r=s.createElement("li"),r.className="goCXli";var h=s.createElement("a");h.className="goCXa",h.href="#",h.TG=o.LE,h.addEventListener("click",function(l){return this.TG(t),i.stopTool(),l.preventDefault(),!1},!1),h.textContent=o.text,r.appendChild(h),n.appendChild(r)}}s.Wt.style.display="block",s.Vt.style.display="block"}},bi.prototype.hideDefaultContextMenu=function(){this.Wl!==null&&this.Wl===this.Em&&(s.Wt.style.display="none",s.Vt.style.display="none",s.Vt.removeEventListener("click",this.aA,!1),this.Wl=null)},s.defineProperty(bi,{Wl:"currentContextMenu"},function(){return this.CC},function(t){this.CC=t,this.bz=t instanceof vt?t.Ze:null}),s.defineProperty(bi,{$K:"defaultTouchContextMenu"},function(){return this.Em},function(t){this.Em=t}),s.defineProperty(bi,{qx:"currentObject"},function(){return this.FC},function(t){t!==null&&s.G(t,N,bi,"currentObject"),this.FC=t}),s.u(bi,{zL:"mouseDownPoint"},function(){return this.BD});function fe(){ut.call(this),0<arguments.length&&s.nd(fe),this.name="DragSelecting",this.Fo=175,this.qD=!1;var t=new L;t.bg="Tool",t.nm=!1;var i=new Y;i.name="SHAPE",i.Fb="Rectangle",i.fill=null,i.stroke="magenta",t.add(i),this.Bm=t}s.La(fe,ut),s.ga("DragSelectingTool",fe),fe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||!t.Bf)return!1;var i=t.N;return!(!i.left||t.Xa!==this&&(!this.isBeyondDragSize()||i.timestamp-t.uc.timestamp<this.SE||t.eu(i.ea,!0)!==null))},fe.prototype.doActivate=function(){var t=this.g;t!==null&&(this.ta=!0,t.ef=!0,t.gb=!0,t.add(this.th),this.doMouseMove())},fe.prototype.doDeactivate=function(){var t=this.g;t!==null&&(yr(t),t.remove(this.th),t.gb=!1,this.ta=t.ef=!1)},fe.prototype.doMouseMove=function(){var t=this.g;if(t!==null&&this.ta&&this.th!==null){var i=this.computeBoxBounds(),n=this.th.Cd("SHAPE");n===null&&(n=this.th.Bd()),n.Da=i.size,this.th.position=i.position,(t.re||t.se)&&t.AA(t.N.Ce)}},fe.prototype.doMouseUp=function(){if(this.ta){var t=this.g;t.remove(this.th);try{t.kc="wait",this.selectInRect(this.computeBoxBounds())}finally{t.kc=""}}this.stopTool()},fe.prototype.computeBoxBounds=function(){var t=this.g;return t===null?new O(0,0,0,0):new O(t.uc.ea,t.N.ea)},fe.prototype.selectInRect=function(t){var i=this.g;if(i!==null){var n=i.N;if(i.Aa("ChangingSelection"),t=i.Jk(t,null,function(r){return r instanceof L?r.canSelect():!1},this.EI),s.zh?n.Iu:n.control)if(n.shift)for(t=t.i;t.next();)n=t.value,n.jb&&(n.jb=!1);else for(t=t.i;t.next();)n=t.value,n.jb=!n.jb;else{if(!n.shift){for(var n=new E(L),e=i.selection.i;e.next();){var o=e.value;t.contains(o)||n.add(o)}for(n=n.i;n.next();)n.value.jb=!1}for(t=t.i;t.next();)n=t.value,n.jb||(n.jb=!0)}i.Aa("ChangedSelection")}},s.defineProperty(fe,{SE:"delay"},function(){return this.Fo},function(t){s.j(t,"number",fe,"delay"),this.Fo=t}),s.defineProperty(fe,{EI:"isPartialInclusion"},function(){return this.qD},function(t){s.j(t,"boolean",fe,"isPartialInclusion"),this.qD=t}),s.defineProperty(fe,{th:"box"},function(){return this.Bm},function(t){t!==null&&s.G(t,L,fe,"box"),this.Bm=t});function ao(){ut.call(this),0<arguments.length&&s.nd(ao),this.name="Panning",this.Lz=new D,this.Qj=!1;var t=this;this.$D=function(){Q.document.removeEventListener("scroll",t.$D,!1),t.stopTool()}}s.La(ao,ut),s.ga("PanningTool",ao),ao.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(t===null||!t.re&&!t.se||!t.N.left||t.Xa!==this&&!this.isBeyondDragSize())},ao.prototype.doActivate=function(){var t=this.g;t!==null&&(this.Qj?(t.N.bubbles=!0,Q.document.addEventListener("scroll",this.$D,!1)):(t.kc="move",t.ef=!0,this.Lz=t.position.copy()),this.ta=!0)},ao.prototype.doDeactivate=function(){var t=this.g;t!==null&&(t.kc="",this.ta=t.ef=!1)},ao.prototype.doCancel=function(){var t=this.g;t!==null&&(t.position=this.Lz,t.ef=!1),this.stopTool()},ao.prototype.doMouseMove=function(){this.move()},ao.prototype.doMouseUp=function(){this.move(),this.stopTool()},ao.prototype.move=function(){var t=this.g;if(this.ta&&t)if(this.Qj)t.N.bubbles=!0;else{var i=t.position,o=t.uc.ea,n=t.N.ea,e=i.x+o.x-n.x,o=i.y+o.y-n.y;t.re||(e=i.x),t.se||(o=i.y),t.position=new D(e,o)}},s.defineProperty(ao,{bubbles:"bubbles"},function(){return this.Qj},function(t){s.j(t,"boolean",ao,"bubbles"),this.Qj=t}),s.u(ao,{GL:"originalPosition"},function(){return this.Lz});function Tt(){0<arguments.length&&s.nd(Tt),ut.call(this),this.name="TextEditing",this.Zz=this.vk=null,this.ZD=$0,this.Kl=null,this.Ta=rf,this.Ms=null,this.yD=1,this.TD=!0;var t=new Hn;this.HC=null,this.PC=t,this.ez=null,Mx(this,t)}s.ga("TextEditingTool",Tt),s.La(Tt,ut);var jd;Tt.LostFocus=jd=s.p(Tt,"LostFocus",0);var X0;Tt.MouseDown=X0=s.p(Tt,"MouseDown",1);var W0;Tt.Tab=W0=s.p(Tt,"Tab",2);var Ma;Tt.Enter=Ma=s.p(Tt,"Enter",3),Tt.SingleClick=s.p(Tt,"SingleClick",0);var $0;Tt.SingleClickSelected=$0=s.p(Tt,"SingleClickSelected",1);var Dd;Tt.DoubleClick=Dd=s.p(Tt,"DoubleClick",2);var rf;Tt.StateNone=rf=s.p(Tt,"StateNone",0);var sf;Tt.StateActive=sf=s.p(Tt,"StateActive",1);var Pa;Tt.StateEditing=Pa=s.p(Tt,"StateEditing",2);var _0;Tt.StateValidating=_0=s.p(Tt,"StateValidating",3);var hf;Tt.StateInvalid=hf=s.p(Tt,"StateInvalid",4);var b0;Tt.StateValidated=b0=s.p(Tt,"StateValidated",5);function Mx(t,i){var n=s.createElement("textarea");t.ez=n,n.addEventListener("input",function(){if(t.Xg!==null){var e=t.WI(this.value);this.style.width=20+e.za.width*this.RJ+"px",this.rows=e.Vx}},!1),n.addEventListener("keydown",function(e){if(t.Xg!==null){var o=e.which;o===13?(t.Xg.Ox===!1&&e.preventDefault(),t.acceptText(Ma)):o===9?(t.acceptText(W0),e.preventDefault()):o===27&&(t.doCancel(),t.g!==null&&t.g.doFocus())}},!1),n.addEventListener("focus",function(){Ld(t)},!1),n.addEventListener("blur",function(){Ad(t)},!1),i.YB=function(){return n.value},i.dB=n,i.show=function(e,o,r){if(r.state===hf)n.style.border="3px solid red",n.focus();else{var y=e.Ya(kt),h=o.position,l=o.scale,u=e.vj()*l;u<r.TF&&(u=r.TF);var f=e.Ja.width*u+6,a=e.Ja.height*u+2,p=(y.x-h.x)*l,y=(y.y-h.y)*l;n.value=e.text,o.tj.style.font=e.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*u+"%",n.style.lineHeight="normal",n.style.width=f+"px",n.style.left=(p-f/2|0)-1+"px",n.style.top=(y-a/2|0)-1+"px",n.style.textAlign=e.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow=" hidden",n.rows=e.Vx,n.RJ=u,o.tj.appendChild(n),n.focus(),r.wy&&(n.select(),n.setSelectionRange(0,9999))}},i.Hn=function(e){e.tj.removeChild(n)}}s.defineProperty(Tt,{Xg:"textBlock"},function(){return this.Zz},function(t){t!==null&&s.G(t,ot,Tt,"textBlock"),this.Zz=t}),s.defineProperty(Tt,{rj:"currentTextEditor"},function(){return this.HC},function(t){this.HC=t}),s.defineProperty(Tt,{OH:"defaultTextEditor"},function(){return this.PC},function(t){this.PC=t}),s.defineProperty(Tt,{zG:"starting"},function(){return this.ZD},function(t){s.ob(t,Tt,Tt,"starting"),this.ZD=t}),Tt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||t.ib||!t.N.left||this.isBeyondDragSize())return!1;var i=t.Pe(t.N.ea);return i!==null&&i instanceof ot&&i.BA&&i.W.canEdit()?(i=i.W,!(i===null||this.zG===$0&&!i.jb||this.zG===Dd&&2>t.N.te)):!1},Tt.prototype.doStart=function(){this.ta||this.Xg===null||this.doActivate()},Tt.prototype.doActivate=function(){if(!this.ta){var t=this.g;if(t!==null){var i=this.Xg;if(i===null&&(i=t.Pe(t.N.ea)),i!==null&&i instanceof ot&&(this.Xg=i,i.W!==null)){this.ta=!0,this.Ta=sf;var n=this.OH;i.DG!==null&&(n=i.DG),this.vk=this.Xg.copy();var e=new O(this.Xg.Ya(gi),this.Xg.Ya($i));t.nG(e),n instanceof Hn?n.show(i,t,this):(n.style.position="absolute",n.style.zIndex="100",n.textEditingTool=this,typeof n.onActivate=="function"&&n.onActivate(),t.tj.appendChild(n),typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&this.wy&&(n.select(),n.setSelectionRange(0,9999))),this.rj=n}}}},Tt.prototype.doCancel=function(){this.Ms!==null&&this.rj instanceof HTMLElement&&(this.rj.style.border=this.Ms,this.Ms=null),this.stopTool()},Tt.prototype.doMouseUp=function(){!this.ta&&this.canStart()&&this.doActivate()},Tt.prototype.doMouseDown=function(){this.ta&&this.acceptText(X0)},Tt.prototype.acceptText=function(t){switch(t){case X0:this.Ta===b0?this.rj instanceof HTMLElement&&this.rj.focus():(this.Ta===sf||this.Ta===hf||this.Ta===Pa)&&(this.Ta=_0,Fd(this));break;case jd:case Ma:case W0:if(Ma===t&&this.Zz.Ox===!0)break;(this.Ta===sf||this.Ta===hf||this.Ta===Pa)&&(this.Ta=_0,Fd(this))}};function Fd(t){var i=t.Xg,n=t.g,e=t.rj;if(i!==null&&e!==null){var o=i.text,r="";e instanceof Hn?e.YB!==null&&(r=e.YB()):(r=e.value,r=typeof r=="function"?r():r),t.isValidText(i,o,r)?(t.Ib(t.name),t.Ta=b0,t.Lf=t.name,i.text=r,i.CG!==null&&i.CG(i,o,r),n!==null&&n.Aa("TextEdited",i,o),t.Wk(),t.stopTool(),n!==null&&n.doFocus()):(t.Ta=hf,i.CA!==null&&i.CA(t,o,r),e instanceof Hn?e.show(i,n,t):(t.Ms===null&&(t.Ms=e.style.border,e.style.border="3px solid red"),typeof e.focus=="function"&&e.focus()))}}Tt.prototype.doDeactivate=function(){var t=this.g;if(t!==null){if(this.Ta=rf,this.Xg=null,this.rj!==null){var i=this.rj;i instanceof Hn?i.Hn(t,this):(typeof i.onDeactivate=="function"&&i.onDeactivate(),i!==null&&t.tj.removeChild(i))}this.ta=!1}},Tt.prototype.doFocus=function(){Ld(this)},Tt.prototype.doBlur=function(){Ad(this)};function Ld(t){if(t.rj!==null&&t.state!==rf){var i=t.ez;t.Ta===sf&&(t.Ta=Pa),typeof i.select=="function"&&t.wy&&(i.select(),i.setSelectionRange(0,9999))}}function Ad(t){if(t.rj!==null&&t.state!==rf){var i=t.ez;typeof i.focus=="function"&&i.focus(),typeof i.select=="function"&&t.wy&&(i.select(),i.setSelectionRange(0,9999))}}Tt.prototype.isValidText=function(t,i,n){s.G(t,ot,Tt,"isValidText:textblock");var e=this.OB;return e!==null&&!e(t,i,n)?!1:(e=t.OB,!!(e===null||e(t,i,n)))},s.defineProperty(Tt,{OB:"textValidation"},function(){return this.Kl},function(t){t!==null&&s.j(t,"function",Tt,"textValidation"),this.Kl=t}),s.defineProperty(Tt,{TF:"minimumEditorScale"},function(){return this.yD},function(t){t!==null&&s.j(t,"number",Tt,"minimumEditorScale"),this.yD=t}),s.defineProperty(Tt,{wy:"selectsTextOnActivate"},function(){return this.TD},function(t){t!==null&&s.j(t,"boolean",Tt,"selectsTextOnActivate"),this.TD=t}),s.defineProperty(Tt,{state:"state"},function(){return this.Ta},function(t){this.Ta!==t&&(s.ob(t,Tt,Tt,"starting"),this.Ta=t)}),Tt.prototype.measureTemporaryTextBlock=Tt.prototype.WI=function(t){var i=this.vk;return i.text=t,Gt(i,this.Xg.$o,1/0),i};function pt(){ut.call(this),this.name="ToolManager",this.YG=new E(ut),this.ZG=new E(ut),this.$G=new E(ut),this.dD=this.eD=850,this.UC=new lt(2,2).Ha(),this.lE=5e3,this.CD=Yl,this.bD=Id,this.Gv=this.IC=null,this.ln=-1}s.La(pt,ut),s.ga("ToolManager",pt);var Yl;pt.WheelScroll=Yl=s.p(pt,"WheelScroll",0);var lf;pt.WheelZoom=lf=s.p(pt,"WheelZoom",1),pt.WheelNone=s.p(pt,"WheelNone",2);var Id;pt.GestureZoom=Id=s.p(pt,"GestureZoom",3);var ql;pt.GestureCancel=ql=s.p(pt,"GestureCancel",4);var uf;pt.GestureNone=uf=s.p(pt,"GestureNone",5),s.defineProperty(pt,{Lu:"mouseWheelBehavior"},function(){return this.CD},function(t){s.ob(t,pt,pt,"mouseWheelBehavior"),this.CD=t}),s.defineProperty(pt,{Mk:"gestureBehavior"},function(){return this.bD},function(t){s.ob(t,pt,pt,"gestureBehavior"),this.bD=t}),pt.prototype.initializeStandardTools=function(){this.kH=new Hr,this.bG=new Cn,this.NI=new Ot,this.lG=new Zt,this.zJ=new Qi,this.PF=new mi,this.ce=new dt,this.TH=new fe,this.kJ=new ao,this.tA=new bi,this.NB=new Tt,this.xH=new pr,this.yH=new Jl},pt.prototype.updateAdornments=function(t){var i=this.Xl;if(i instanceof vt&&this.Gv===t){var n=i.ub;(t!==null?n.W===t:n===null)?this.showToolTip(i,n):this.hideToolTip()}},pt.prototype.doMouseDown=function(){var t=this.g;if(t!==null){var i=t.N;if(i.Aj&&this.Mk===ql&&(i.bubbles=!1),i.zu){if(this.cancelWaitAfter(),this.Mk===uf){i.bubbles=!0;return}if(this.Mk===ql)return;if(t.Xa.canStartMultiTouch()){t.Xa.standardPinchZoomStart();return}}var n=t.ja;n.nA&&n.wi!==0&&s.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var n=this.gf.length,e=0;e<n;e++){var o=this.gf.fa(e);if(o.g===null&&o.Tc(this.g),o.canStart()){t.doFocus(),t.Xa=o,t.Xa===o&&(o.ta||o.doActivate(),o.doMouseDown());return}}t.N.button===1&&(this.Lu===Yl?this.Lu=lf:this.Lu===lf&&(this.Lu=Yl)),this.doActivate(),this.standardWaitAfter(this.vF,i)}},pt.prototype.doMouseMove=function(){var t=this.g;if(t!==null){var i=t.N;if(i.zu){if(this.Mk===uf){i.bubbles=!0;return}if(this.Mk===ql)return;if(t.Xa.canStartMultiTouch()){t.Xa.standardPinchZoomMove();return}}if(this.ta)for(var n=this.eg.length,e=0;e<n;e++){var o=this.eg.fa(e);if(o.g===null&&o.Tc(this.g),o.canStart()){t.doFocus(),t.Xa=o,t.Xa===o&&(o.ta||o.doActivate(),o.doMouseMove());return}}Bd(this,t),t=i.event,t===null||t.type!=="mousemove"&&t.type!=="pointermove"&&t.cancelable||(i.bubbles=!0)}};function Bd(t,i){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.ta?t.vF:t.rI,i.N)}pt.prototype.doCurrentObjectChanged=function(t,i){var n=this.Xl;n===null||i!==null&&n instanceof vt&&(i===n||i.hm(n))||this.hideToolTip()},pt.prototype.doWaitAfter=function(t){var i=this.g;i!==null&&i.zb&&(this.doMouseHover(),this.ta||this.doToolTip(),t.Aj&&!i.N.vc&&(t=t.copy(),t.button=2,t.buttons=2,i.N=t,i.Bp=!0,i.doMouseUp()))},pt.prototype.doMouseHover=function(){var t=this.g;if(t!==null){var i=t.N;i.Be===null&&(i.Be=t.Pe(i.ea,null,null));var n=i.Be;if(n!==null)for(i.vc=!1;n!==null&&(t=this.ta?n.iB:n.jB,!(t!==null&&(t(i,n),i.vc)));)n=n.R;else n=this.ta?t.iB:t.jB,n!==null&&n(i)}},pt.prototype.doToolTip=function(){var t=this.g;if(t!==null){var i=t.N;if(i.Be===null&&(i.Be=t.Pe(i.ea,null,null)),i=i.Be,i!==null){if(t=this.Xl,!(t instanceof vt)||i!==t&&!i.hm(t)){for(;i!==null;){if(t=i.QB,t!==null){this.showToolTip(t,i);return}i=i.R}this.hideToolTip()}}else t=t.QB,t!==null?this.showToolTip(t,null):this.hideToolTip()}},pt.prototype.showToolTip=function(t,i){i!==null&&s.G(i,N,pt,"showToolTip:obj");var n=this.g;if(n!==null){if(t!==this.Xl&&this.hideToolTip(),t instanceof vt){t.bg="Tool",t.nm=!1,t.scale=1/n.scale,t.kd="ToolTip",t.placeholder!==null&&(t.placeholder.scale=n.scale);var e=t.g;e!==null&&e!==n&&e.remove(t),n.add(t),i!==null?(n=null,e=i.$l(),e!==null&&(n=e.data),t.ub=i,t.data=n):t.data=n.$,t.Ne(),this.positionToolTip(t,i)}else t instanceof Hn&&t!==this.Xl&&t.show(i,n,this);if(this.Xl=t,this.ln!==-1&&(s.clearTimeout(this.ln),this.ln=-1),n=this.WJ,0<n&&n!==1/0){var o=this;this.ln=s.setTimeout(function(){o.hideToolTip()},n)}}},pt.prototype.positionToolTip=function(t){if(t.placeholder===null){var i=this.g;if(i!==null){var n=i.N.ea.copy(),e=t.za,o=i.sb;i.N.Aj&&(n.x-=e.width),n.x+e.width>o.right&&(n.x-=e.width+5/i.scale),n.x<o.x&&(n.x=o.x),n.y=n.y+20/i.scale+e.height>o.bottom?n.y-(e.height+5/i.scale):n.y+20/i.scale,n.y<o.y&&(n.y=o.y),t.position=n}}},pt.prototype.hideToolTip=function(){this.ln!==-1&&(s.clearTimeout(this.ln),this.ln=-1);var t=this.g;if(t!==null){var i=this.Xl;i!==null&&(i instanceof vt?(t.remove(i),this.Gv!==null&&this.Gv.Ij(i.kd),i.data=null,i.ub=null):i instanceof Hn&&i.Hn!==null&&i.Hn(t,this),this.Xl=null)}},s.defineProperty(pt,{Xl:"currentToolTip"},function(){return this.IC},function(t){this.IC=t,this.Gv=t!==null&&t instanceof vt?t.Ze:null}),pt.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(t!==null){if(this.ta)for(var i=this.fg.length,n=0;n<i;n++){var e=this.fg.fa(n);if(e.g===null&&e.Tc(this.g),e.canStart()){t.doFocus(),t.Xa=e,t.Xa===e&&(e.ta||e.doActivate(),e.doMouseUp());return}}t.doFocus(),this.doDeactivate()}},pt.prototype.doMouseWheel=function(){this.standardMouseWheel()},pt.prototype.doKeyDown=function(){var t=this.g;t!==null&&t.pb.doKeyDown()},pt.prototype.doKeyUp=function(){var t=this.g;t!==null&&t.pb.doKeyUp()},pt.prototype.doCancel=function(){Fi!==null&&Fi.doCancel(),ut.prototype.doCancel.call(this)},pt.prototype.findTool=function(t){s.j(t,"string",pt,"findTool:name");for(var i=this.gf.length,n=0;n<i;n++){var e=this.gf.fa(n);if(e.name===t)return e}for(i=this.eg.length,n=0;n<i;n++)if(e=this.eg.fa(n),e.name===t)return e;for(i=this.fg.length,n=0;n<i;n++)if(e=this.fg.fa(n),e.name===t)return e;return null},pt.prototype.replaceTool=function(t,i){s.j(t,"string",pt,"replaceTool:name"),i!==null&&(s.G(i,ut,pt,"replaceTool:newtool"),i.g&&i.g!==this.g&&s.k("Cannot share tools between Diagrams: "+i.toString()),i.Tc(this.g));for(var n=this.gf.length,e=0;e<n;e++){var o=this.gf.fa(e);if(o.name===t)return i!==null?this.gf.kg(e,i):this.gf.cd(e),o}for(n=this.eg.length,e=0;e<n;e++)if(o=this.eg.fa(e),o.name===t)return i!==null?this.eg.kg(e,i):this.eg.cd(e),o;for(n=this.fg.length,e=0;e<n;e++)if(o=this.fg.fa(e),o.name===t)return i!==null?this.fg.kg(e,i):this.fg.cd(e),o;return null};function Fo(t,i,n,e){s.j(i,"string",pt,"replaceStandardTool:name"),s.G(e,E,pt,"replaceStandardTool:list"),n!==null&&(s.G(n,ut,pt,"replaceStandardTool:newtool"),n.g&&n.g!==t.g&&s.k("Cannot share tools between Diagrams: "+n.toString()),n.name=i,n.Tc(t.g)),t.findTool(i)?t.replaceTool(i,n):n!==null&&e.add(n)}s.u(pt,{gf:"mouseDownTools"},function(){return this.YG}),s.u(pt,{eg:"mouseMoveTools"},function(){return this.ZG}),s.u(pt,{fg:"mouseUpTools"},function(){return this.$G}),s.defineProperty(pt,{rI:"hoverDelay"},function(){return this.eD},function(t){s.j(t,"number",pt,"hoverDelay"),this.eD=t}),s.defineProperty(pt,{vF:"holdDelay"},function(){return this.dD},function(t){s.j(t,"number",pt,"holdDelay"),this.dD=t}),s.defineProperty(pt,{UH:"dragSize"},function(){return this.UC},function(t){s.G(t,lt,pt,"dragSize"),this.UC=t.S()}),s.defineProperty(pt,{WJ:"toolTipDuration"},function(){return this.lE},function(t){s.j(t,"number",pt,"toolTipDuration"),this.lE=t}),s.defineProperty(pt,{kH:"actionTool"},function(){return this.findTool("Action")},function(t){Fo(this,"Action",t,this.gf)}),s.defineProperty(pt,{bG:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){Fo(this,"Relinking",t,this.gf)}),s.defineProperty(pt,{NI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){Fo(this,"LinkReshaping",t,this.gf)}),s.defineProperty(pt,{lG:"resizingTool"},function(){return this.findTool("Resizing")},function(t){Fo(this,"Resizing",t,this.gf)}),s.defineProperty(pt,{zJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){Fo(this,"Rotating",t,this.gf)}),s.defineProperty(pt,{PF:"linkingTool"},function(){return this.findTool("Linking")},function(t){Fo(this,"Linking",t,this.eg)}),s.defineProperty(pt,{ce:"draggingTool"},function(){return this.findTool("Dragging")},function(t){Fo(this,"Dragging",t,this.eg)}),s.defineProperty(pt,{TH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){Fo(this,"DragSelecting",t,this.eg)}),s.defineProperty(pt,{kJ:"panningTool"},function(){return this.findTool("Panning")},function(t){Fo(this,"Panning",t,this.eg)}),s.defineProperty(pt,{tA:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){Fo(this,"ContextMenu",t,this.fg)}),s.defineProperty(pt,{NB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){Fo(this,"TextEditing",t,this.fg)}),s.defineProperty(pt,{xH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){Fo(this,"ClickCreating",t,this.fg)}),s.defineProperty(pt,{yH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){Fo(this,"ClickSelecting",t,this.fg)});function Kn(){this.JC=Px,this.xr=this.yr=this.aa=null,this.ym=this.zr=this.Ar=0,this.ro=this.sc=this.Wo=this.dk=!1,this.wl=this.jf=!0,this.Ev=this.Dv=this.EC=null,this.DC=0,this.Fv=null,this.tv=new R("string"),this.mz=600,this.aH=new D(0,0),this.rC=this.qC=this.oE=!1,this.Wm=new tt(N,oy)}s.ga("AnimationManager",Kn),Kn.prototype.Tc=function(t){this.aa=t};function Px(t,i,n,e){return t/=e/2,1>t?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i}s.u(Kn,{CK:"animationReasons"},function(){return this.tv}),Kn.prototype.canStart=function(){return!0},Kn.prototype.prepareAutomaticAnimation=Kn.prototype.Yn=function(t){this.jf&&(this.wl||this.aa.Kn)&&(this.tv.add(t),this.canStart(t)&&(this.dk&&this.Ih(),this.sc=!0))};function Ed(t){if(t.jf&&(t.tv.clear(),t.sc)){if(!t.ro)t.sc=!1;else if(t.ym===0){var i=+new Date;t.ym=i,requestAnimationFrame(function(){if(t.sc!==!1&&!t.dk&&t.ym===i){var n=t.aa;n.Ok("temporaryPixelRatio")&&(n.uk=1),ry(n),t.sc=!1,n.Aa("AnimationStarting"),Tx(t,i)}})}}}function $s(t,i,n,e,o,r){if(!(!t.sc||n==="position"&&e.L(o)||i instanceof L&&!i.zF)){var h=t.Wm;if(h.contains(i)){var h=h.ka(i),l=h.start,u=h.end;l[n]===void 0&&(l[n]=_s(e)),h.px&&u[n]!==void 0?h.au[n]=_s(o):(r||(h.au[n]=_s(o)),u[n]=_s(o)),r&&n.indexOf("position:")===0&&i instanceof L&&(h.au.location=_s(i.location))}else l=new Bn,u=new Bn,l[n]=_s(e),u[n]=_s(o),e=u,o=l.position,o instanceof D&&!o.I()&&t.tv.contains("Expand SubGraph")&&o.assign(e.position),l=new oy(l,u,r),r&&n.indexOf("position:")===0&&i instanceof L&&(l.au.location=_s(i.location)),h.add(i,l);t.ro=!0}}function _s(t){return t instanceof D||t instanceof lt?t.copy():t}function Tx(t,i){var n;function e(){if(r.dk!==!1&&r.ym===i){var d=+new Date,g=d>v?f:d-c;ty(r),zd(r,o,y,h,g,f),r.Dv&&r.Dv(),Zl(o),iy(r),d>v?Rd(r):requestAnimationFrame(e)}}n===void 0&&(n=new Bn);var o=t.aa;if(o!==null){var r=t,h=n.cL||t.JC,l=n.BL||null,u=n.CL||null,f=n.duration||t.mz,a=t.aH;for(n=t.Wm.i;n.next();){var p=n.value.start.position;p instanceof D&&(p.I()||p.assign(a))}t.EC=h,t.Dv=l,t.Ev=u,t.DC=f,t.Fv=t.Wm;var y=t.Fv;for(n=y.i;n.next();)l=n.value.end,l["position:placeholder"]&&(u=n.key.findVisibleNode(),u instanceof q&&u.placeholder!==null&&(u=u.placeholder,a=u.Ya(gi),a.x+=u.padding.left,a.y+=u.padding.top,l["position:placeholder"]=a));t.dk=!0,ty(t),zd(t,o,y,h,0,f),Zl(t.aa,!0),iy(t);var c=+new Date,v=c+f;r.ym===i&&requestAnimationFrame(function(){e()})}}function ty(t){if(!t.Wo){var i=t.aa;t.oE=i.gb,t.qC=i.Re,t.rC=i.fo,i.gb=!0,i.Re=!0,i.fo=!0,t.Wo=!0}}function iy(t){var i=t.aa;i.gb=t.oE,i.Re=t.qC,i.fo=t.rC,t.Wo=!1}function zd(t,i,n,e,o,r){for(n=n.i;n.next();){var h=n.key,u=n.value,l=u.start,u=u.end,f;for(f in u)(f!=="position"||!u["position:placeholder"]&&!u["position:node"])&&Ta[f]!==void 0&&Ta[f](h,l[f],u[f],e,o,r)}e=i.UA,i.UA=!0,f=t.JC,t.Ar!==0&&t.zr!==0&&(n=t.Ar,i.rb=f(o,n,t.zr-n,r)),t.yr!==null&&t.xr!==null&&(n=t.yr,t=t.xr,i.ab=new D(f(o,n.x,t.x-n.x,r),f(o,n.y,t.y-n.y,r))),i.UA=e}Kn.prototype.stopAnimation=Kn.prototype.Ih=function(){this.sc===!0&&(this.sc=!1,this.ym=0,this.ro&&this.aa.ye()),this.dk&&this.jf&&Rd(this)};function Rd(t){t.dk=!1,t.ro=!1,ty(t);for(var i=t.aa,n=t.EC,e=t.DC,o=t.Fv.i;o.next();){var r=o.key,h=o.value,l=h.start,u=h.end,f=h.au,a;for(a in u)if(Ta[a]!==void 0){var p=a;!h.px||p!=="position:node"&&p!=="position:placeholder"||(p="position"),Ta[p](r,l[a],f[a]!==void 0?f[a]:h.px?l[a]:u[a],n,e,e)}h.px&&f.location!==void 0&&r instanceof L&&(r.location=f.location),h.ny&&r instanceof L&&r.Dd(!1)}for(n=t.aa.links;n.next();)e=n.value,e.pp!==null&&(e.points=e.pp,e.pp=null);i.Yx.clear(),i.uk=null,i.Gc(),i.oa(),i.dg(),Xd(i),iy(t),t.Ev&&t.Ev(),t.ym=0,t.Fv=null,t.Ev=null,t.Dv=null,t.yr=null,t.xr=null,t.Ar=0,t.zr=0,t.Wm=new tt(N,oy),i.Aa("AnimationFinished"),i.ye()}function ny(t,i,n){var e=i.U,o=n.U,r=null;if(n instanceof q&&(r=n.placeholder),r!==null?(e=r.Ya(gi),e.x+=r.padding.left,e.y+=r.padding.top,$s(t,i,"position",e,i.position,!1)):$s(t,i,"position",new D(o.x+o.width/2-e.width/2,o.y+o.height/2-e.height/2),i.position,!1),$s(t,i,"scale",.01,i.scale,!1),i instanceof q)for(i=i.hc;i.next();)r=i.value,r instanceof I&&ny(t,r,n)}function ey(t,i,n){if(i.isVisible()){var e=null;if(n instanceof q&&(e=n.placeholder),e!==null?$s(t,i,"position:placeholder",i.position,e,!0):$s(t,i,"position:node",i.position,n,!0),$s(t,i,"scale",i.scale,.01,!0),t.sc&&(e=t.Wm,e.contains(i)&&(e.ka(i).ny=!0)),i instanceof q)for(i=i.hc;i.next();)e=i.value,e instanceof I&&ey(t,e,n)}}function Gd(t,i,n){t.sc&&(t.yr===null&&i.I()&&t.xr===null&&(t.yr=i.copy()),t.xr=n.copy(),t.ro=!0)}function Od(t,i,n){t.sc&&t.aa.Kn&&(t.Ar===0&&t.zr===0&&(t.Ar=i),t.zr=n,t.ro=!0)}s.defineProperty(Kn,{isEnabled:"isEnabled"},function(){return this.jf},function(t){s.j(t,"boolean",Kn,"isEnabled"),this.jf=t}),s.defineProperty(Kn,{duration:"duration"},function(){return this.mz},function(t){s.j(t,"number",Kn,"duration"),1>t&&s.Fa(t,">= 1",Kn,"duration"),this.mz=t}),s.u(Kn,{df:"isAnimating"},function(){return this.dk}),s.u(Kn,{FI:"isTicking"},function(){return this.Wo}),s.defineProperty(Kn,{GF:"isInitial"},function(){return this.wl},function(t){s.j(t,"boolean",Kn,"isInitial"),this.wl=t});function oy(t,i,n){this.start=t,this.end=i,this.au=new Bn,this.px=n,this.ny=!1}var Ta={opacity:function(t,i,n,e,o,r){t.opacity=e(o,i,n-i,r)},position:function(t,i,n,e,o,r){o!==r?t.Ay(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r)):t.position=new D(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r))},"position:node":function(t,i,n,e,o,r){var h=t.U,l=n.U;n=l.x+l.width/2-h.width/2,h=l.y+l.height/2-h.height/2,o!==r?t.Ay(e(o,i.x,n-i.x,r),e(o,i.y,h-i.y,r)):t.position=new D(e(o,i.x,n-i.x,r),e(o,i.y,h-i.y,r))},"position:placeholder":function(t,i,n,e,o,r){o!==r?t.Ay(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r)):t.position=new D(e(o,i.x,n.x-i.x,r),e(o,i.y,n.y-i.y,r))},scale:function(t,i,n,e,o,r){t.scale=e(o,i,n-i,r)},visible:function(t,i,n,e,o,r){t.visible=o!==r?i:n}};function ct(){0<arguments.length&&s.nd(ct),s.oc(this),this.aa=null,this.xb=new E(L),this.Sb="",this.Dc=1,this.Cz=!1,this.Fl=this.fA=this.gl=this.fl=this.el=this.dl=this.bl=this.cl=this.al=this.il=this.$k=this.hl=this.Zk=this.Yk=!0,this.Az=!1,this.Qs=[]}s.ga("Layer",ct),ct.prototype.Tc=function(t){this.aa=t},ct.prototype.toString=function(t){t===void 0&&(t=0);var i='Layer "'+this.name+'"';if(0>=t)return i;for(var n=0,e=0,o=0,r=0,h=0,l=this.xb.i;l.next();){var u=l.value;u instanceof q?o++:u instanceof I?e++:u instanceof k?r++:u instanceof vt?h++:n++}if(l="",0<n&&(l+=n+" Parts "),0<e&&(l+=e+" Nodes "),0<o&&(l+=o+" Groups "),0<r&&(l+=r+" Links "),0<h&&(l+=h+" Adornments "),1<t)for(t=this.xb.i;t.next();)n=t.value,l+=`
    `+n.toString(),e=n.data,e!==null&&s.Pd(e)&&(l+=" #"+s.Pd(e)),n instanceof I?l+=" "+qe(e):n instanceof k&&(l+=" "+qe(n.V)+" "+qe(n.Z));return i+" "+this.xb.count+": "+l},ct.prototype.findObjectAt=ct.prototype.Pe=function(t,i,n){if(i===void 0&&(i=null),n===void 0&&(n=null),this.Fl===!1)return null;var e=!1;this.g!==null&&this.g.sb.Ia(t)&&(e=!0);for(var o=s.K(),r=this.xb.n,h=r.length;h--;){var l=r[h];if((e!==!0||mr(l)!==!1)&&l.isVisible()&&(o.assign(t),un(o,l.rh),l=l.Pe(o,i,n),l!==null&&(i!==null&&(l=i(l)),l!==null&&(n===null||n(l)))))return s.v(o),l}return s.v(o),null},ct.prototype.findObjectsAt=ct.prototype.du=function(t,i,n,e){if(i===void 0&&(i=null),n===void 0&&(n=null),e instanceof E||e instanceof R||(e=new R(N)),this.Fl===!1)return e;var o=!1;this.g!==null&&this.g.sb.Ia(t)&&(o=!0);for(var r=s.K(),h=this.xb.n,l=h.length;l--;){var u=h[l];if((o!==!0||mr(u)!==!1)&&u.isVisible()){r.assign(t),un(r,u.rh);var f=u;u.du(r,i,n,e)&&(i!==null&&(f=i(f)),f===null||n!==null&&!n(f)||(e instanceof R&&e.add(f),e instanceof E&&e.add(f)))}}return s.v(r),e},ct.prototype.findObjectsIn=ct.prototype.Jk=function(t,i,n,e,o){if(i===void 0&&(i=null),n===void 0&&(n=null),e===void 0&&(e=!1),o instanceof E||o instanceof R||(o=new R(N)),this.Fl===!1)return o;var r=!1;this.g!==null&&this.g.sb.Fk(t)&&(r=!0);for(var h=this.xb.n,l=h.length;l--;){var u=h[l];if((r!==!0||mr(u)!==!1)&&u.isVisible()){var f=u;u.Jk(t,i,n,e,o)&&(i!==null&&(f=i(f)),f===null||n!==null&&!n(f)||(o instanceof R&&o.add(f),o instanceof E&&o.add(f)))}}return o},ct.prototype.DA=function(t,i,n,e,o,r,h){if(this.Fl===!1)return o;for(var l=this.xb.n,u=l.length;u--;){var f=l[u];if((h!==!0||mr(f)!==!1)&&r(f)&&f.isVisible()){var a=f;f.Jk(t,i,n,e,o)&&(i!==null&&(a=i(a)),a===null||n!==null&&!n(a)||(o instanceof R&&o.add(a),o instanceof E&&o.add(a)))}}return o},ct.prototype.findObjectsNear=ct.prototype.An=function(t,i,n,e,o,r){if(n===void 0&&(n=null),e===void 0&&(e=null),o===void 0&&(o=!0),o!==!1&&o!==!0&&((o instanceof E||o instanceof R)&&(r=o),o=!0),r instanceof E||r instanceof R||(r=new R(N)),this.Fl===!1)return r;var h=!1;this.g!==null&&this.g.sb.Ia(t)&&(h=!0);for(var l=s.K(),u=s.K(),f=this.xb.n,a=f.length;a--;){var p=f[a];if((h!==!0||mr(p)!==!1)&&p.isVisible()){l.assign(t),un(l,p.rh),u.m(t.x+i,t.y),un(u,p.rh);var y=p;p.An(l,u,n,e,o,r)&&(n!==null&&(y=n(y)),y===null||e!==null&&!e(y)||(r instanceof R&&r.add(y),r instanceof E&&r.add(y)))}}return s.v(l),s.v(u),r},B=ct.prototype,B.If=function(t,i){if(this.visible){var n;n=i===void 0?t.sb:i;for(var e=this.xb.n,o=e.length,r=s.Za(),h=s.Za(),l=0;l<o;l++){var u=e[l];if(u.uD=l,!(u instanceof k&&u.Mf===!1)){if(u instanceof vt){var f=u;if(f.Ze!==null)continue}Iv(u.U,n)?(u.If(!0),r.push(u)):(u.If(!1),u.ex!==null&&0<u.ex.count&&h.push(u))}}for(l=0;l<r.length;l++)for(f=u=r[l],f.Q&16384&&(f.updateAdornments(),nc(f,!1)),u=u.ex;u.next();)f=u.value,Gt(f,1/0,1/0),f.jc(),f.If(!0);for(l=0;l<h.length;l++)u=h[l],u.updateAdornments(),nc(u,!0);s.ra(r),s.ra(h)}},B.ve=function(t,i,n){if(this.visible&&this.Dc!==0&&(n===void 0&&(n=!0),n||!this.Hc)){n=this.xb.n;var e=n.length;if(e!==0){this.Dc!==1&&(t.globalAlpha=this.Dc);var o=this.Qs;o.length=0;for(var r=i.scale,h=0;h<e;h++){var l=n[h];if(mr(l)){if(l instanceof k){var u=l;if(u.ac&&o.push(u),u.Mf===!1)continue}u=l.U,1<u.width*r||1<u.height*r?l.ve(t,i):Tf(l,t)}}t.globalAlpha=1}}};function Sx(t,i,n,e){if(t.visible&&t.Dc!==0){t.Dc!==1&&(i.globalAlpha=t.Dc);var o=t.Qs;o.length=0;var r=n.scale;t=t.xb.n;for(var h=t.length,l=e.length,u=0;u<h;u++){var f=t[u];if(mr(f)){if(f instanceof k){var a=f;if(a.ac&&o.push(a),a.Mf===!1)continue}var a=Wh(f,f.U),p;t:{p=a;for(var y=e,c=l,v=2/r,d=4/r,g=0;g<c;g++){var m=y[g];if(m.width!==0&&m.height!==0&&p.xF(m.x-v,m.y-v,m.width+d,m.height+d)){p=!0;break t}}p=!1}p&&(1<a.width*r||1<a.height*r?f.ve(i,n):Tf(f,i))}}i.globalAlpha=1}}B.h=function(t,i,n,e,o){var r=this.g;r!==null&&r.bd(Jt,t,this,i,n,e,o)},B.eq=function(t,i,n){var e=this.xb;if(i.iw=this,t>=e.count)t=e.count;else if(e.fa(t)===i)return-1;return e.Rd(t,i),i.qu(n),e=this.g,e!==null&&(n?e.oa():e.eq(i)),Sa(this,t,i),t},B.rf=function(t,i,n){if(!n&&i.layer!==this&&i.layer!==null)return i.layer.rf(t,i,n);var e=this.xb;if(0>t||t>=e.length){if(t=e.indexOf(i),0>t)return-1}else if(e.fa(t)!==i&&(t=e.indexOf(i),0>t))return-1;return i.ru(n),e.cd(t),e=this.g,e!==null&&(n?e.oa():e.rf(i)),i.iw=null,t};function Sa(t,i,n){if(i=kx(t,i,n),n instanceof q&&n!==null&&isNaN(n.mo)){if(n.hc.count!==0){for(var e=-1,o=t.xb.n,r=o.length,h=0;h<r;h++){var l=o[h];if(l===n&&(i=h,0<=e)||0>e&&l.Ca===n&&(e=h,0<=i))break}!(0>e)&&e<i&&(o=t.xb,o.cd(i),o.Rd(e,n))}n=n.Ca,n!==null&&Sa(t,-1,n)}}function kx(t,i,n){var e=n.mo;if(isNaN(e))return i;t=t.xb;var o=t.count;if(1>=o)return i;if(0>i&&(i=t.indexOf(n)),0>i)return-1;for(var r=i-1,h=NaN;0<=r&&(h=t.fa(r).mo,!!isNaN(h));)r--;for(var l=i+1,u=NaN;l<o&&(u=t.fa(l).mo,!!isNaN(u));)l++;if(!isNaN(h)&&h>e)for(;;){if(r===-1||h<=e){if(r++,r===i)break;return t.cd(i),t.Rd(r,n),r}for(h=NaN;0<=--r&&(h=t.fa(r).mo,isNaN(h)););}else if(!isNaN(u)&&u<e)for(;;){if(l===o||u>=e){if(l--,l===i)break;return t.cd(i),t.Rd(l,n),l}for(u=NaN;++l<o&&(u=t.fa(l).mo,isNaN(u)););}return i}B.clear=function(){for(var t=this.xb.yc(),i=t.length,n=0;n<i;n++)t[n].If(!1),this.rf(-1,t[n],!1);this.Qs.length=0},s.u(ct,{Hj:"parts"},function(){return this.xb.i}),s.u(ct,{JL:"partsBackwards"},function(){return this.xb.Ln}),s.u(ct,{g:"diagram"},function(){return this.aa}),s.defineProperty(ct,{name:"name"},function(){return this.Sb},function(t){s.j(t,"string",ct,"name");var i=this.Sb;if(i!==t){var n=this.g;if(n!==null)for(i===""&&s.k("Cannot rename default Layer to: "+t),n=n.Ux;n.next();)n.value.name===t&&s.k("Layer.name is already present in this diagram: "+t);for(this.Sb=t,this.h("name",i,t),t=this.xb.i;t.next();)t.value.bg=this.Sb}}),s.defineProperty(ct,{opacity:"opacity"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(s.j(t,"number",ct,"opacity"),(0>t||1<t)&&s.Fa(t,"0 <= value <= 1",ct,"opacity"),this.Dc=t,this.h("opacity",i,t),t=this.g,t!==null&&t.oa())}),s.defineProperty(ct,{Hc:"isTemporary"},function(){return this.Cz},function(t){var i=this.Cz;i!==t&&(s.j(t,"boolean",ct,"isTemporary"),this.Cz=t,this.h("isTemporary",i,t))}),s.defineProperty(ct,{visible:"visible"},function(){return this.fA},function(t){var i=this.fA;if(i!==t){for(s.j(t,"boolean",ct,"visible"),this.fA=t,this.h("visible",i,t),i=this.xb.i;i.next();)i.value.Dd(t);t=this.g,t!==null&&t.oa()}}),s.defineProperty(ct,{Ug:"pickable"},function(){return this.Fl},function(t){var i=this.Fl;i!==t&&(s.j(t,"boolean",ct,"pickable"),this.Fl=t,this.h("pickable",i,t))}),s.defineProperty(ct,{AF:"isBoundsIncluded"},function(){return this.Az},function(t){this.Az!==t&&(this.Az=t,this.g!==null&&this.g.Gc())}),s.defineProperty(ct,{Ck:"allowCopy"},function(){return this.Yk},function(t){var i=this.Yk;i!==t&&(s.j(t,"boolean",ct,"allowCopy"),this.Yk=t,this.h("allowCopy",i,t))}),s.defineProperty(ct,{nn:"allowDelete"},function(){return this.Zk},function(t){var i=this.Zk;i!==t&&(s.j(t,"boolean",ct,"allowDelete"),this.Zk=t,this.h("allowDelete",i,t))}),s.defineProperty(ct,{jx:"allowTextEdit"},function(){return this.hl},function(t){var i=this.hl;i!==t&&(s.j(t,"boolean",ct,"allowTextEdit"),this.hl=t,this.h("allowTextEdit",i,t))}),s.defineProperty(ct,{gx:"allowGroup"},function(){return this.$k},function(t){var i=this.$k;i!==t&&(s.j(t,"boolean",ct,"allowGroup"),this.$k=t,this.h("allowGroup",i,t))}),s.defineProperty(ct,{kx:"allowUngroup"},function(){return this.il},function(t){var i=this.il;i!==t&&(s.j(t,"boolean",ct,"allowUngroup"),this.il=t,this.h("allowUngroup",i,t))}),s.defineProperty(ct,{St:"allowLink"},function(){return this.al},function(t){var i=this.al;i!==t&&(s.j(t,"boolean",ct,"allowLink"),this.al=t,this.h("allowLink",i,t))}),s.defineProperty(ct,{on:"allowRelink"},function(){return this.cl},function(t){var i=this.cl;i!==t&&(s.j(t,"boolean",ct,"allowRelink"),this.cl=t,this.h("allowRelink",i,t))}),s.defineProperty(ct,{Rl:"allowMove"},function(){return this.bl},function(t){var i=this.bl;i!==t&&(s.j(t,"boolean",ct,"allowMove"),this.bl=t,this.h("allowMove",i,t))}),s.defineProperty(ct,{hx:"allowReshape"},function(){return this.dl},function(t){var i=this.dl;i!==t&&(s.j(t,"boolean",ct,"allowReshape"),this.dl=t,this.h("allowReshape",i,t))}),s.defineProperty(ct,{Tt:"allowResize"},function(){return this.el},function(t){var i=this.el;i!==t&&(s.j(t,"boolean",ct,"allowResize"),this.el=t,this.h("allowResize",i,t))}),s.defineProperty(ct,{ix:"allowRotate"},function(){return this.fl},function(t){var i=this.fl;i!==t&&(s.j(t,"boolean",ct,"allowRotate"),this.fl=t,this.h("allowRotate",i,t))}),s.defineProperty(ct,{Bf:"allowSelect"},function(){return this.gl},function(t){var i=this.gl;i!==t&&(s.j(t,"boolean",ct,"allowSelect"),this.gl=t,this.h("allowSelect",i,t))});function x(t){function i(){Q.document.removeEventListener("DOMContentLoaded",i,!1),n.setScrollWidth()}1<arguments.length&&s.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),s.oc(this),$y=[],this.Wc=!0,this.lC=new Kn,this.lC.Tc(this),this.zd=17,this.as=!1,this.Pz="default";var n=this;Q.document.body!==null?this.setScrollWidth():Q.document.addEventListener("DOMContentLoaded",i,!1),this.dc=new E(ct),this.Cb=this.Db=0,this.qk=this.Ob=this.hf=this.zb=null,this.hG(),this.To=null,this.gG(),this.ab=new D(NaN,NaN).freeze(),this.rb=1,this.Yv=new D(NaN,NaN).freeze(),this.Zv=NaN,this.qw=1e-4,this.ow=100,this.jd=new Qt,this.$w=new D(NaN,NaN).freeze(),this.Qv=new O(NaN,NaN,NaN,NaN).freeze(),this.Hw=new xt(0,0,0,0).freeze(),this.Iw=Uh,this.Lw=!0,this.Ew=this.Cw=null,this.Am=De,this.Dm=an,this.ul=De,this.Qo=an,this.$v=this.Xv=gi,this.Fe=!0,this.Wr=!1,this.vg=new R(L),this.ol=new tt(k,O),this.Cr=!0,this.$q=250,this.so=-1,this.vv=new xt(16,16,16,16).freeze(),this.Go=this.Tf=!1,this.Lo=!0,this.Pi=new Ht,this.xd=new Ht,this.Rb=new Ht,this.jh=this.Di=null,this.Bp=!1,this.hz=this.iz=null,this.Vy=Q.PointerEvent&&(s.hq||s.iq||s.VA)&&Q.navigator&&Q.navigator.msPointerEnabled!==!1,mg(this),this.ip=new R(I),this.Ll=new R(q),this.bp=new R(k),this.xb=new R(L),this.ew=!0,this.Vw=th,this.hD=!1,this.Xw=af,this.cz=this.fz=this.$z=null,this.Cv="",this.wr="auto",this.Hi=this.jj=this.Yi=this.tw=this.Zi=this.$i=this.aj=this.Gi=this.Mi=this.Ei=null,this.Jz=!1,this.Nz={},this.lp=[null,null],this.$y=null,this.Sq=this.gz=this.Vz=this.UD=this.ij=!1,this.sD=!0,this.Jm=this.$d=!1,this.qe=null;var e=this;this.zD=function(r){if(r.$===e.$&&e.Ua){e.Ua=!1;try{var h=r.Fc;r.tf===""&&h===Jt&&cy(e,r.object,r.propertyName)}finally{e.Ua=!0}}},this.AD=function(r){Fx(e,r)},this.qE=!0,this.dh=-2,this.Ii=new tt(Object,L),this.Sj=new tt(Object,k),this.Mm=new tt(Object,Array),this.kp=new tt("string",Array),this.Mz=new E(oi),this.Si=!1,this.Zk=this.Yk=this.lv=this.jf=!0,this.nv=this.mv=!1,this.sv=this.qv=this.gl=this.fl=this.el=this.dl=this.bl=this.cl=this.al=this.pv=this.il=this.$k=this.hl=!0,this.fh=this.pD=!1,this.rv=this.ov=this.Vv=this.Uv=!0,this.Kw=this.Gw=16,this.Rz=this.Fw=!1,this.kt=this.Jw=null,this.Sz=this.Tz=0,this.lf=new xt(5).freeze(),this.Nw=new R(L).freeze(),this.pw=999999999,this.Wv=new R(L).freeze(),this.vl=this.Im=this.ck=!0,this.sl=this.bk=!1,this.oe=null,this.Pj=!0,this.eh=!1,this.XG=new R(k),this.fD=new R(cu),this.rk=this.Kd=null,this.Ps=1,this.XD=0,this.ph={scale:1,position:new D,bounds:new O,isScroll:!1},this.eA=new O(NaN,NaN,NaN,NaN).freeze(),this.Jv=new O(NaN,NaN,NaN,NaN).freeze(),this.fw=!1,this.Lv=null,this.zw=new R(Lo),Kd(this),this.kw=this.Sv=this.uw=this.MC=this.LC=this.NC=this.jk=this.ql=this.bj=null,Hd(this),this.td=null,this.Rv=!1,this.zo=null,this.Va=new pt,this.Va.initializeStandardTools(),this.Xa=this.Xt=this.Va,this.pb=new it,this.$=new K,this.ij=!0,this.Ub=new wt,this.ij=!1,this.YC=this.lz=null,this.wd=1,this.uk=null;var o=s.vfo.split(".");s.vx.licenseKey!==!0&&o[0]==="1"&&7>parseInt(o[1],10)&&(s.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+s.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),s.vx.licenseKey=!0),this.Vh=1,this.ik=0,this.hw=new D,this.bA=500,this.uv=new D,this.tt=null,this.fk=!1,this.preventDefault=this.my=this.uq=this.vq=this.tq=this.sq=this.Tn=this.Vn=this.Un=this.Rn=this.Sn=this.ZB=this.RB=this.SB=this.TB=this.Hl=this.gt=this.Gl=this.ft=null,this.bw=!1,this.tl=new jy,t!==void 0&&Dy(this,t),this.Wc=!1}s.ga("Diagram",x),x.prototype.clear=x.prototype.clear=function(){this.$.clear(),Ol=null,nf="",Vd(this,!1),this.Jv=new O(NaN,NaN,NaN,NaN).freeze(),this.oa()};function Vd(t,i){var n=null;t.td!==null&&(n=t.td.W),t.Ka.Ih();for(var e=[],o=t.dc.length,r=0;r<o;r++){var h=t.dc.n[r];if(i)for(var l=h.Hj;l.next();){var u=l.value;u!==n&&u.data===null&&e.push(u)}h.clear()}if(t.vg.clear(),t.ol.clear(),t.ip.clear(),t.Ll.clear(),t.bp.clear(),t.xb.clear(),t.Ii.clear(),t.Sj.clear(),t.Mm.clear(),t.Nw.Qa(),t.Nw.clear(),t.Nw.freeze(),t.Wv.Qa(),t.Wv.clear(),t.Wv.freeze(),t.zo=null,s.My=[],n!==null&&(t.add(n),t.xb.remove(n)),i)for(n=0;n<e.length;n++)t.add(e[n])}x.prototype.reset=x.prototype.reset=function(){this.Wc=!0,this.clear(),this.dc=new E(ct),this.hG(),this.gG(),this.ab=new D(NaN,NaN).freeze(),this.rb=1,this.Yv=new D(NaN,NaN).freeze(),this.Zv=NaN,this.qw=1e-4,this.ow=100,this.$w=new D(NaN,NaN).freeze(),this.Qv=new O(NaN,NaN,NaN,NaN).freeze(),this.Hw=new xt(0,0,0,0).freeze(),this.Iw=Uh,this.Lw=!0,this.Ew=this.Cw=null,this.Am=De,this.Dm=an,this.ul=De,this.Qo=an,this.$v=this.Xv=gi,this.$q=250,this.vv=new xt(16,16,16,16).freeze(),this.ew=!0,this.Vw=th,this.Xw=af,this.wr="auto",this.Hi=this.jj=this.Yi=this.tw=this.Zi=this.$i=this.aj=this.Gi=this.Mi=this.Ei=null,this.Si=!1,this.Zk=this.Yk=this.lv=this.jf=!0,this.nv=this.mv=!1,this.rv=this.ov=this.Vv=this.Uv=this.sv=this.qv=this.gl=this.fl=this.el=this.dl=this.bl=this.cl=this.al=this.pv=this.il=this.$k=this.hl=!0,this.Kw=this.Gw=16,this.lf=new xt(5).freeze(),this.pw=999999999,this.oe=null,this.fw=!1,Hd(this),this.td=null,this.Va=new pt,this.Va.initializeStandardTools(),this.Xa=this.Xt=this.Va,this.pb=new it,this.ij=!0,Kd(this),this.Ub=new wt,this.ij=!1,this.$=new K,this.eh=!1,this.Lo=!0,this.Wc=this.Tf=!1,this.oa(),this.jh=this.Di=null,mg(this),this.Cv=""};function Hd(t){t.bj=new tt("string",L);var i=new I,n=new ot;n.bind(new Pt("text","",qe)),i.add(n),t.NC=i,t.bj.add("",i),i=new I,n=new ot,n.stroke="brown",n.bind(new Pt("text","",qe)),i.add(n),t.bj.add("Comment",i),i=new I,i.nm=!1,i.lA=!1,n=new Y,n.Fb="Ellipse",n.fill="black",n.stroke=null,n.Da=new lt(3,3).Ha(),i.add(n),t.bj.add("LinkLabel",i),t.ql=new tt("string",q),i=new q,i.BB="GROUPPANEL",i.type=Gy,n=new ot,n.font="bold 12pt sans-serif",n.bind(new Pt("text","",qe)),i.add(n),n=new A(vr),n.name="GROUPPANEL";var e=new Y;e.Fb="Rectangle",e.fill="rgba(128,128,128,0.2)",e.stroke="black",n.add(e),e=new nn,e.padding=new xt(5,5,5,5).Ha(),n.add(e),i.add(n),t.LC=i,t.ql.add("",i),t.jk=new tt("string",k),i=new k,n=new Y,n.ff=!0,i.add(n),n=new Y,n.Lq="Standard",n.fill="black",n.stroke=null,n.mb=0,i.add(n),t.MC=i,t.jk.add("",i),i=new k,n=new Y,n.ff=!0,n.stroke="brown",i.add(n),t.jk.add("Comment",i),i=new vt,i.type=vr,n=new Y,n.fill=null,n.stroke="dodgerblue",n.mb=3,i.add(n),n=new nn,n.margin=new xt(1.5,1.5,1.5,1.5).Ha(),i.add(n),t.uw=i,t.Sv=i,i=new vt,i.type=dr,n=new Y,n.ff=!0,n.fill=null,n.stroke="dodgerblue",n.mb=3,i.add(n),t.kw=i}x.prototype.setScrollWidth=function(t){t=t===void 0?Q.document.body:t;var i=s.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var n=s.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.style.boxSizing="content-box",n.appendChild(i),t.appendChild(n);var e=i.offsetWidth;n.style.overflow="scroll",i=i.offsetWidth,e===i&&(i=n.clientWidth),t.removeChild(n),n=e-i,n!==0||s.EF||(n=11),this.zd=n,n=s.createElement("div"),n.dir="rtl",n.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",n.textContent="A",t.appendChild(n),e="reverse",0<n.scrollLeft?e="default":(n.scrollLeft=1,n.scrollLeft===0&&(e="negative")),t.removeChild(n),this.Pz=e},x.prototype.ic=function(t){t.Je===x?this.Tl=t:s.Lj(this,t)},x.prototype.toString=function(t){t===void 0&&(t=0);var i="";if(this.tj&&this.tj.id&&(i=this.tj.id),i='Diagram "'+i+'"',0>=t)return i;for(var n=this.dc.i;n.next();)i+=`
  `+n.value.toString(t-1);return i},x.fromDiv=function(t){var i=t;return typeof t=="string"&&(i=Q.document.getElementById(t)),i instanceof HTMLDivElement&&i.aa instanceof x?i.aa:null},s.defineProperty(x,{tj:"div"},function(){return this.Ob},function(t){if(t!==null&&s.G(t,HTMLDivElement,x,"div"),this.Ob!==t){$y=[];var i=this.Ob;i!==null?(i.aa=void 0,i.innerHTML="",this.zb!==null&&(this.zb.removeEventListener("touchstart",this.TB,!1),this.zb.removeEventListener("touchmove",this.SB,!1),this.zb.removeEventListener("touchend",this.RB,!1),this.zb.Od.aa=null),i=this.Va,i!==null&&(i.gf.each(function(n){n.cancelWaitAfter()}),i.eg.each(function(n){n.cancelWaitAfter()}),i.fg.each(function(n){n.cancelWaitAfter()})),i.cancelWaitAfter(),this.Xa.doCancel(),this.hf=this.zb=null,Q.removeEventListener("resize",this.ZB,!1),Q.removeEventListener("mousemove",this.Sn,!0),Q.removeEventListener("mousedown",this.Rn,!0),Q.removeEventListener("mouseup",this.Un,!0),Q.removeEventListener("wheel",this.Vn,!0),Q.removeEventListener("mouseout",this.Tn,!0)):this.eh=!1,this.Ob=null,t!==null&&((i=t.aa)&&(i.tj=null),Dy(this,t),this.yq())}});function Nx(t){var i=t.zb;t.Vy?(i.addEventListener("pointerdown",t.sq,!1),i.addEventListener("pointermove",t.tq,!1),i.addEventListener("pointerup",t.vq,!1),i.addEventListener("pointerout",t.uq,!1)):(i.addEventListener("touchstart",t.TB,!1),i.addEventListener("touchmove",t.SB,!1),i.addEventListener("touchend",t.RB,!1),i.addEventListener("mousemove",t.Sn,!1),i.addEventListener("mousedown",t.Rn,!1),i.addEventListener("mouseup",t.Un,!1),i.addEventListener("mouseout",t.Tn,!1)),i.addEventListener("wheel",t.Vn,!1),i.addEventListener("keydown",t.HI,!1),i.addEventListener("keyup",t.II,!1),i.addEventListener("selectstart",function(n){return n.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(n){return n.preventDefault(),!1},!1),i.addEventListener("gesturestart",function(n){t.Va.Mk!==uf&&(t.Va.Mk===ql?n.preventDefault():(n.preventDefault(),t.Ps=t.scale,t.Xa.doCancel()))},!1),i.addEventListener("gesturechange",function(n){if(t.Va.Mk!==uf)if(t.Va.Mk===ql)n.preventDefault();else{n.preventDefault();var e=n.scale;if(t.Ps!==null){var o=t.Db,r=t.Cb,h=t.zb.getBoundingClientRect();n=new D(n.pageX-Q.scrollX-o/h.width*h.left,n.pageY-Q.scrollY-r/h.height*h.top),e*=t.Ps,o=t.pb,e!==t.scale&&o.canResetZoom(e)&&(r=t.zi,t.zi=n,o.resetZoom(e),t.zi=r)}}},!1),Q.addEventListener("resize",t.ZB,!1)}x.prototype.computePixelRatio=function(){if(this.uk!==null)return this.uk;var t=this.hf;return(Q.devicePixelRatio||1)/(t.ua.webkitBackingStorePixelRatio||t.ua.mozBackingStorePixelRatio||t.ua.msBackingStorePixelRatio||t.ua.oBackingStorePixelRatio||t.ua.backingStorePixelRatio||1)},x.prototype.doMouseMove=function(){this.Xa.doMouseMove()},x.prototype.doMouseDown=function(){this.Xa.doMouseDown()},x.prototype.doMouseUp=function(){this.Xa.doMouseUp()},x.prototype.doMouseWheel=function(){this.Xa.doMouseWheel()},x.prototype.doKeyDown=function(){this.Xa.doKeyDown()},x.prototype.doKeyUp=function(){this.Xa.doKeyUp()},x.prototype.doFocus=function(){this.focus()},x.prototype.focus=x.prototype.focus=function(){if(this.zb)if(this.DJ)this.zb.focus();else{var t=Q.scrollX||Q.pageXOffset,i=Q.scrollY||Q.pageYOffset;this.zb.focus(),Q.scrollTo(t,i)}};function ry(t){if(t.zb!==null){var i=t.Ob;if(i.clientWidth!==0&&i.clientHeight!==0){var n=t.sl?t.zd:0,e=t.bk?t.zd:0,o=t.wd;t.wd=t.computePixelRatio(),t.wd!==o&&(t.Wr=!0,t.ye()),(i.clientWidth!==t.Db+n||i.clientHeight!==t.Cb+e)&&(t.Im=!0,t.Fe=!0,i=t.Ub,i!==null&&i.Qx&&t.Tl===De&&(t.Go=!0,i.J()),t.$d||t.ye())}}}function Kd(t){var i=new ct;i.name="Background",t.Nt(i),i=new ct,i.name="",t.Nt(i),i=new ct,i.name="Foreground",t.Nt(i),i=new ct,i.name="Adornment",i.Hc=!0,t.Nt(i),i=new ct,i.name="Tool",i.Hc=!0,i.AF=!0,t.Nt(i),i=new ct,i.name="Grid",i.Bf=!1,i.Ug=!1,i.Hc=!0,t.nH(i,t.cu("Background"))}function Ud(t){t.td=new A(Yh),t.td.name="GRID";var i=new Y;i.Fb="LineH",i.stroke="lightgray",i.mb=.5,i.interval=1,t.td.add(i),i=new Y,i.Fb="LineH",i.stroke="gray",i.mb=.5,i.interval=5,t.td.add(i),i=new Y,i.Fb="LineH",i.stroke="gray",i.mb=1,i.interval=10,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="lightgray",i.mb=.5,i.interval=1,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="gray",i.mb=.5,i.interval=5,t.td.add(i),i=new Y,i.Fb="LineV",i.stroke="gray",i.mb=1,i.interval=10,t.td.add(i),i=new L,i.add(t.td),i.bg="Grid",i.mo=0,i.XA=!1,i.zF=!1,i.Ug=!1,i.cB="GRID",t.add(i),t.xb.remove(i),t.td.visible=!1}function Cx(){this.aa.Rz?this.aa.Rz=!1:this.aa.isEnabled?this.aa.SH(this):uy(this.aa)}function Jd(t){this.aa.isEnabled?(this.aa.Tz=t.target.scrollTop,this.aa.Sz=t.target.scrollLeft):uy(this.aa)}x.prototype.diagramScroll=x.prototype.SH=function(t){if(this.zb!==null){this.Fw=!0;var u=this.Nd,c=this.sb,h=this.ty,i=u.x-h.left,n=u.y-h.top,e=u.width+h.left+h.right,o=u.height+h.top+h.bottom,r=u.right+h.right,h=u.bottom+h.bottom,l=c.x,u=c.y,f=c.width,a=c.height,p=c.right,y=c.bottom,c=this.scale,v;if(v=t.scrollLeft,this.as)switch(this.Pz){case"negative":v=v+t.scrollWidth-t.clientWidth;break;case"reverse":v=t.scrollWidth-v-t.clientWidth}var d=v;f<e||a<o?(v=s.wb(this.position.x,this.position.y),this.re&&this.Sz!==d&&(v.x=d/c+i,this.Sz=d),this.se&&this.Tz!==t.scrollTop&&(v.y=t.scrollTop/c+n,this.Tz=t.scrollTop),this.position=v,s.v(v),this.Im=this.Fw=!1):(v=s.K(),t.dH&&this.re&&(i<l&&(this.position=v.m(d+i,this.position.y)),r>p&&(this.position=v.m(-(this.Jw.scrollWidth-this.Db)+d-this.Db/c+r,this.position.y))),t.eH&&this.se&&(n<u&&(this.position=v.m(this.position.x,t.scrollTop+n)),h>y&&(this.position=v.m(this.position.x,-(this.Jw.scrollHeight-this.Cb)+t.scrollTop-this.Cb/c+h))),s.v(v),cs(this),this.Im=this.Fw=!1,u=this.Nd,c=this.sb,r=u.right,p=c.right,h=u.bottom,y=c.bottom,i=u.x,l=c.x,n=u.y,u=c.y,f>=e&&i>=l&&r<=p&&(this.kt.style.width="1px"),a>=o&&n>=u&&h<=y&&(this.kt.style.height="1px"))}},x.prototype.computeBounds=function(){return 0<this.vg.count&&bn(this),Yd(this)};function Yd(t){if(t.gF.I()){var i=t.gF.copy();return i.bx(t.padding),i}for(var n=!0,e=t.dc.n,o=e.length,r=0;r<o;r++){var h=e[r];if(h.visible&&(!h.Hc||h.AF))for(var h=h.xb.n,l=h.length,u=0;u<l;u++){var f=h[u];f.XA&&f.isVisible()&&(f=f.U,f.I()&&(n?(n=!1,i=f.copy()):i.Zg(f)))}}return n&&(i=new O(0,0,0,0)),i.bx(t.padding),i}x.prototype.computePartsBounds=function(t,i){i===void 0&&(i=!1);for(var n=null,e=t.i;e.next();){var o=e.value;!i&&o instanceof k||(o.Ne(),n===null?n=o.U.copy():n.Zg(o.U))}return n===null?new O(NaN,NaN,0,0):n};function Ko(t,i){if((i||t.eh)&&!t.Wc&&t.zb!==null&&!t.Ka.df&&t.Nd.I()){t.Wc=!0;var e=t.Am;i&&t.ul!==De&&(e=t.ul);var n=e!==De?ka(t,e):t.scale,e=t.sb.copy(),o=t.Db/n,r=t.Cb/n,h=null,l=t.Ka;l.sc&&(h=t.ab.copy()),t.position.Qa();var u=t.Dm;i&&!u.Zc()&&t.Qo.Zc()&&(u=t.Qo),sy(t,t.ab,t.Nd,o,r,u,i),t.position.freeze(),h!==null&&Gd(l,h,t.ab),o=t.scale,t.scale=n,t.Wc=!1,n=t.sb,n.Qc(e)||t.Pu(e,n,o,t.scale,!1)}}function ka(t,i){var n=t.pb.tx;if(t.zb===null)return n;t.ck&&Wl(t,t.computeBounds());var o=t.Nd;if(!o.I())return n;var e=o.width,o=o.height,r=t.Db,h=t.Cb,l=r/e,u=h/o;return i===Xl?(e=Math.min(u,l),e>n&&(e=n),e<t.Ch&&(e=t.Ch),e>t.Bh&&(e=t.Bh),e):i===Fa?(e=u>l?(h-t.zd)/o:(r-t.zd)/e,e>n&&(e=n),e<t.Ch&&(e=t.Ch),e>t.Bh&&(e=t.Bh),e):t.scale}x.prototype.zoomToFit=x.prototype.zoomToFit=function(){this.scale=ka(this,Xl),this.uy!==Uh&&(this.ab.Qa(),sy(this,this.ab,this.Nd,this.Db/this.rb,this.Cb/this.rb,this.Dm,!0),this.ab.freeze())},x.prototype.zoomToRect=function(t,i){i===void 0&&(i=Xl);var n=t.width,e=t.height;if(!(n===0||e===0||isNaN(n)&&isNaN(e))){var r=1;if(i===Xl||i===Fa)if(isNaN(n))r=this.sb.height*this.scale/e;else if(isNaN(e))r=this.sb.width*this.scale/n;else var r=this.Db,o=this.Cb,r=i===Fa?o/e>r/n?(o-(this.bk?this.zd:0))/e:(r-(this.sl?this.zd:0))/n:Math.min(o/e,r/n);this.scale=r,this.position=new D(t.x,t.y)}},s.defineProperty(x,{UA:null},function(){return this.Wc},function(t){this.Wc=t}),x.prototype.alignDocument=function(t,i){this.ck&&Wl(this,this.computeBounds());var n=this.Nd,e=this.sb;this.position=new D(n.x+(t.x*n.width+t.offsetX)-(i.x*e.width-i.offsetX),n.y+(t.y*n.height+t.offsetY)-(i.y*e.height-i.offsetY))};function sy(t,i,n,e,o,r,h){var l=i.x,u=i.y;(h||t.uy===Uh)&&(r.Zc()&&(e>n.width&&(l=n.x+(r.x*n.width+r.offsetX)-(r.x*e-r.offsetX)),o>n.height&&(u=n.y+(r.y*n.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.ty,h=e-n.width,e<n.width+r.left+r.right?(l=Math.min(l+e/2,n.right+Math.max(h,r.right)-e/2),l=Math.max(l,n.left-Math.max(h,r.left)+e/2),l-=e/2):l>n.left?l=n.left:l<n.right-e&&(l=n.right-e),e=o-n.height,o<n.height+r.top+r.bottom?(u=Math.min(u+o/2,n.bottom+Math.max(e,r.bottom)-o/2),u=Math.max(u,n.top-Math.max(e,r.top)+o/2),u-=o/2):u>n.top?u=n.top:u<n.bottom-o&&(u=n.bottom-o)),i.x=isFinite(l)?l:-t.padding.left,i.y=isFinite(u)?u:-t.padding.top,t.aG!==null&&(t=t.aG(t,i),i.x=t.x,i.y=t.y)}x.prototype.findPartAt=x.prototype.eu=function(t,i){var n=i?Na(this,t,function(e){return e.W},function(e){return e.canSelect()}):Na(this,t,function(e){return e.W});return n instanceof L?n:null},x.prototype.findObjectAt=x.prototype.Pe=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null),bn(this);for(var e=this.dc.Ln;e.next();){var o=e.value;if(o.visible&&(o=o.Pe(t,i,n),o!==null))return o}return null};function Na(t,i,n,e){for(n===void 0&&(n=null),e===void 0&&(e=null),bn(t),t=t.dc.Ln;t.next();){var o=t.value;if(o.visible&&!o.Hc&&(o=o.Pe(i,n,e),o!==null))return o}return null}x.prototype.findObjectsAt=x.prototype.du=function(t,i,n,e){i===void 0&&(i=null),n===void 0&&(n=null),e instanceof E||e instanceof R||(e=new R(N)),bn(this);for(var o=this.dc.Ln;o.next();){var r=o.value;r.visible&&r.du(t,i,n,e)}return e},x.prototype.findObjectsIn=x.prototype.Jk=function(t,i,n,e,o){i===void 0&&(i=null),n===void 0&&(n=null),e===void 0&&(e=!1),o instanceof E||o instanceof R||(o=new R(N)),bn(this);for(var r=this.dc.Ln;r.next();){var h=r.value;h.visible&&h.Jk(t,i,n,e,o)}return o},x.prototype.DA=function(t,i,n,e,o,r){var h=new R(N);bn(this);for(var l=this.dc.Ln;l.next();){var u=l.value;u.visible&&u.DA(t,i,n,e,h,o,r)}return h},x.prototype.findObjectsNear=x.prototype.An=function(t,i,n,e,o,r){n===void 0&&(n=null),e===void 0&&(e=null),o===void 0&&(o=!0),o!==!1&&o!==!0&&((o instanceof E||o instanceof R)&&(r=o),o=!0),r instanceof E||r instanceof R||(r=new R(N)),bn(this);for(var h=this.dc.Ln;h.next();){var l=h.value;l.visible&&l.An(t,i,n,e,o,r)}return r},x.prototype.acceptEvent=function(t){var i=this.xd;return this.xd=this.Rb,this.Rb=i,Hh(this,this,t,i,t instanceof MouseEvent),i};function Hh(t,i,n,e,o){e.g=i,e.event=n,o?Kh(t,n,e):(e.Ce=i.Rb.Ce,e.ea=i.Rb.ea),t=0,n.ctrlKey&&(t+=1),n.altKey&&(t+=2),n.shiftKey&&(t+=4),n.metaKey&&(t+=8),e.md=t,e.button=n.button,n.buttons===void 0||s.xu||(e.buttons=n.buttons),s.zh&&n.button===0&&n.ctrlKey&&(e.button=2),e.Hk=!1,e.up=!1,e.te=1,e.oi=0,e.vc=!1,e.bubbles=!1,e.timestamp=Date.now(),e.zu=!1,e.Jf=Ql(n),e.Be=null}function Ql(t){var i=t.target.aa;if(!i){var n=t.path;n||typeof t.CH!="function"||(n=t.CH()),n&&n[0]&&(i=n[0].aa)}return i||null}function qd(t,i,n,e){var o=t.xd;return t.xd=t.Rb,t.Rb=o,o.g=t,Kh(t,n,o),o.button=0,o.buttons=1,n=0,i.ctrlKey&&(n+=1),i.altKey&&(n+=2),i.shiftKey&&(n+=4),i.metaKey&&(n+=8),o.md=n,o.Hk=!0,o.up=!1,o.te=1,o.oi=0,o.vc=!1,o.bubbles=!0,o.event=i,o.timestamp=Date.now(),o.zu=e,o.Jf=Ql(i),o.Be=null,e||(t.Pi=o.copy()),Fi=null,o}function Qd(t,i,n,e){var o=t.xd;t.xd=t.Rb,t.Rb=o;var r=null;return o.g=t,n!==null?((r=Q.document.elementFromPoint(n.clientX,n.clientY))&&r.aa?r=r.aa:(n=i.targetTouches!==void 0?i.targetTouches[0]:i,r=t),o.Jf=r,Kh(t,n,o)):t.xd!==null?(o.ea=t.xd.ea,o.Ce=t.xd.Ce,o.Jf=t.xd.Jf):t.Pi!==null&&(o.ea=t.Pi.ea,o.Ce=t.Pi.Ce,o.Jf=t.Pi.Jf),o.button=0,o.buttons=1,t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),o.md=t,o.Hk=!1,o.up=!1,o.te=1,o.oi=0,o.vc=!1,o.bubbles=!1,o.event=i,o.timestamp=Date.now(),o.zu=e,o.Be=null,o}function Uo(t,i){return t.bubbles?!0:(i.stopPropagation!==void 0&&i.stopPropagation(),i.preventDefault(),i.cancelBubble=!0,!1)}x.prototype.HI=function(t){if(!this.aa.isEnabled)return!1;var i=this.aa.Rb;switch(Hh(this.aa,this.aa,t,i,!1),i.key=String.fromCharCode(t.which),i.Hk=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return this.aa.doKeyDown(),Uo(i,t)},x.prototype.II=function(t){if(!this.aa.isEnabled)return!1;var i=this.aa.Rb;switch(Hh(this.aa,this.aa,t,i,!1),i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return this.aa.doKeyUp(),Uo(i,t)},x.prototype.Nr=function(t){var n=this.zb;if(n===null)return new D(0,0);var e=this.Db,i=this.Cb,n=n.getBoundingClientRect(),e=t.clientX-e/n.width*n.left;return t=t.clientY-i/n.height*n.top,this.jd!==null?(t=new D(e,t),un(t,this.jd),t):new D(e,t)};function Kh(t,i,n){var e=t.zb,o=t.Db,r=t.Cb,h=0,l=0;e!==null&&(e=e.getBoundingClientRect(),h=i.clientX-o/e.width*e.left,l=i.clientY-r/e.height*e.top),n.Ce.m(h,l),t.jd!==null?(i=s.wb(h,l),t.jd.xh(i),n.ea.assign(i),s.v(i)):n.ea.m(h,l)}function Zd(t,i,n,e){var o=null;if(i.targetTouches!==void 0){if(2>i.targetTouches.length)return;o=i.targetTouches[n]}else if(t.lp[0]!==null)o=t.lp[n];else return;n=t.zb,i=t.Db,t=t.Cb;var r=0,h=0;n!==null&&o!==null&&(n=n.getBoundingClientRect(),r=o.clientX-i/n.width*n.left,h=o.clientY-t/n.height*n.top),e.m(r,h)}x.prototype.invalidateDocumentBounds=x.prototype.Gc=function(){this.ck||(this.ck=!0,this.ye(!0))};function Xd(t){t.$d||bn(t),t.ck&&Wl(t,t.computeBounds())}x.prototype.redraw=x.prototype.yq=function(){this.Wc||this.$d||(this.oa(),bs(this),cs(this),this.Gc(),this.dg())},x.prototype.isUpdateRequested=function(){return this.Tf},x.prototype.delayInitialization=function(t){t===void 0&&(t=null);var i=this.Ka,n=i.isEnabled;i.Ih(),i.isEnabled=!1,Zl(this),this.eh=!1,i.isEnabled=n,t!==null&&s.setTimeout(t,1)},x.prototype.requestUpdate=x.prototype.ye=function(t){if(t===void 0&&(t=!1),this.Tf!==!0&&!(this.Wc||t===!1&&this.$d)){this.Tf=!0;var i=this;requestAnimationFrame(function(){i.Tf&&i.dg()})}},x.prototype.maybeUpdate=x.prototype.dg=function(){(!this.Lo||this.Tf)&&(this.Lo&&(this.Lo=!1),Zl(this))};function Ca(t,i){t.Ka.df||t.Wc||!t.Im||uy(t)||(i&&bn(t),Ko(t,!1))}function Zl(t,i){if(!t.$d&&(t.Tf=!1,t.Ob!==null)){t.$d=!0;var n=t.Ka,e=t.Mz;if(!n.Wo&&e.length!==0){for(var o=e.n,r=o.length,h=0;h<r;h++){var l=o[h];ie(l,!1),l.H()}e.clear()}e=t.fD,0<e.count&&(e.each(function(u){u.XB()}),e.clear()),o=e=!1,n.df&&(o=!0,e=t.gb,t.gb=!0),n.sc||ry(t),Ca(t,!1),t.td!==null&&(t.td.visible&&!t.Rv&&(Kr(t),t.Rv=!0),!t.td.visible&&t.Rv&&(t.Rv=!1)),bn(t),r=!1,(!t.eh||t.Pj)&&(t.eh?dg(t,!t.Go):(t.Ib("Initial Layout"),n.isEnabled===!1&&n.Ih(),dg(t,!1)),r=!0),t.Go=!1,bn(t),t.Vz||n.df||Xd(t),Ca(t,!0),r&&(t.eh||jx(t),t.Aa("LayoutCompleted")),bn(t),r&&!t.eh&&(t.eh=!0,t.Yc("Initial Layout"),t.gb||t.ja.clear(),s.setTimeout(function(){t.ri=!1},1)),Wd(t),Ed(n),i||t.ve(t.hf),o&&(t.gb=e),t.$d=!1}}s.u(x,{Kn:null},function(){return this.eh});function jx(t){var i=t.dc.n;if(t.If(i,i.length,t),t.ul!==De?t.scale=ka(t,t.ul):t.Am!==De?t.scale=ka(t,t.Am):(i=t.vI,isFinite(i)&&0<i&&(t.scale=i)),i=t.uI,i.I())t.position=i;else{i=s.K(),i.ao(t.Nd,t.tI);var n=t.sb,n=s.lg(0,0,n.width,n.height),e=s.K();e.ao(n,t.wI),e.m(i.x-e.x,i.y-e.y),t.position=e,s.Bb(n),s.v(e),s.v(i),bs(t),Ca(t,!0),Ko(t,!0)}t.Aa("InitialLayoutCompleted"),Kr(t)}function bn(t){if((t.$d||!t.Ka.df)&&t.vg.count!==0){for(var i=0;23>i;i++){var n=t.vg.i;if(n===null||t.vg.count===0)break;t.vg=new R(L),t.XB(n,t.vg)}t.ig.each(function(e){e instanceof q&&e.ya&65536&&(e.ya^=65536)})}}x.prototype.XB=function(t,i){for(t.reset();t.next();){var n=t.value;!n.he()||n instanceof q||(n.im()?(Gt(n,1/0,1/0),n.jc()):i.add(n))}for(t.reset();t.next();)n=t.value,n instanceof q&&n.isVisible()&&hy(this,n);for(t.reset();t.next();)n=t.value,n instanceof k&&n.isVisible()&&(n.im()?(Gt(n,1/0,1/0),n.jc()):i.add(n));for(t.reset();t.next();)n=t.value,n instanceof vt&&n.isVisible()&&(n.im()?(Gt(n,1/0,1/0),n.jc()):i.add(n))};function hy(t,i){for(var n=s.Za(),e=s.Za(),o=i.hc;o.next();){var r=o.value;r.isVisible()&&(r instanceof q?(gs(r)||Qe(r)||ms(r))&&hy(t,r):r instanceof k?r.V===i||r.Z===i?e.push(r):n.push(r):(Gt(r,1/0,1/0),r.jc()))}for(var o=n.length,h=0;h<o;h++)r=n[h],Gt(r,1/0,1/0),r.jc();for(s.ra(n),Gt(i,1/0,1/0),i.jc(),o=e.length,h=0;h<o;h++)r=e[h],Gt(r,1/0,1/0),r.jc();s.ra(e)}x.prototype.If=function(t,i,n,e){var o=this.Ka;if(this.vl||o.df)for(o=0;o<i;o++)t[o].If(n,e)},x.prototype.ve=function(t,i){i===void 0&&(i=null),this.Ob===null&&s.k("No div specified");var n=this.zb;n===null&&s.k("No canvas specified");var e=this.Ka;if(!e.sc&&(Da(this),this.Ob.style.opacity!=="0")){var o=t!==this.hf,r=this.dc.n,l=r.length,h=this;if(this.If(r,l,h),o)t.Ke(!0),cs(this);else if(!this.Fe&&i===null&&!e.dk)return;var l=this.ab,u=this.rb,f=Math.round(l.x*u)/u,a=Math.round(l.y*u)/u,e=this.jd;for(e.reset(),u!==1&&e.scale(u),l.x===0&&l.y===0||e.translate(-f,-a),u=this.wd,s.In?(n.width=n.width,t.Ke(!0),t.scale(u,u)):(t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.clearRect(0,0,this.Db,this.Cb)),t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=i!==null?function(y){var c=i;if(y.visible&&y.Dc!==0){var v=y.xb.n,d=v.length;if(d!==0){y.Dc!==1&&(t.globalAlpha=y.Dc),y=y.Qs,y.length=0;for(var g=h.scale,m=0;m<d;m++){var w=v[m];if(mr(w)&&!c.contains(w)){if(w instanceof k){var M=w;if(M.ac&&y.push(M),M.Mf===!1)continue}M=w.U,1<M.width*g||1<M.height*g?w.ve(t,h):Tf(w,t)}}t.globalAlpha=1}}}:function(y){y.ve(t,h)},ly(this,t),l=r.length,f=0;f<l;f++)t.setTransform(1,0,0,1,0,0),t.scale(u,u),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n(r[f]);this.tl?this.tl.vm(this)&&this.Lv():this.Nr=function(){return new D(0,0)},o?(this.hf.Ke(!0),cs(this)):this.Fe=this.vl=!1}};function Dx(t,i,n,e,o){t.Ob===null&&s.k("No div specified");var r=t.zb;if(r===null&&s.k("No canvas specified"),!t.Ka.sc){var h=t.hf;if(t.Fe){Da(t);var l=t.wd;s.In?(r.width=r.width,h.Ke(!0)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,t.Db*l,t.Cb*l)),h.yy(!1),h.drawImage(t.lz.Od,0<e?0:Math.round(-e),0<o?0:Math.round(-o)),o=t.ab;var r=t.rb,u=Math.round(o.x*r)/r,f=Math.round(o.y*r)/r;for(e=t.jd,e.reset(),r!==1&&e.scale(r),o.x===0&&o.y===0||e.translate(-u,-f),h.save(),h.beginPath(),o=n.length,r=0;r<o;r++)u=n[r],u.width!==0&&u.height!==0&&h.rect(Math.floor(u.x),Math.floor(u.y),Math.ceil(u.width),Math.ceil(u.height));for(h.clip(),h.setTransform(1,0,0,1,0,0),h.scale(l,l),h.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.dc.n,o=n.length,t.If(n,o,t),ly(t,h),r=0;r<o;r++)Sx(n[r],h,t,i);h.restore(),h.Ke(!0),t.tl?t.tl.vm(t)&&t.Lv():t.Nr=function(){return new D(0,0)},t.vl=!1,t.Fe=!1,t.my()}}}function ja(t,i,n,e,o,r,h,l,u,f){t.Ob===null&&s.k("No div specified"),t.zb===null&&s.k("No canvas specified"),h===void 0&&(h=null),l===void 0&&(l=null),u===void 0&&(u=!1),f===void 0&&(f=!1),Da(t),t.hf.Ke(!0),cs(t),t.Jm=!0;var a=t.rb;t.rb=o;var p=t.dc.n,y=p.length;try{var c=new O(r.x,r.y,e.width/o,e.height/o),v=c.copy();v.bx(n),Kr(t,v),bn(t),t.If(p,y,t,c);var d=t.wd;i.setTransform(1,0,0,1,0,0),i.scale(d,d),i.clearRect(0,0,e.width,e.height),l!==null&&l!==""&&(i.fillStyle=l,i.fillRect(0,0,e.width,e.height));var g=s.Wg();g.reset(),g.translate(n.left,n.top),g.scale(o),r.x===0&&r.y===0||g.translate(-r.x,-r.y),i.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),s.bf(g),ly(t,i);var m;if(h!==null){var w=new R(L),M=h.i;for(M.reset();M.next();){var S=M.value;f===!1&&S.layer.name==="Grid"||S===null||w.add(S)}m=function(G){var H=u;if(G.visible&&G.Dc!==0&&(H===void 0&&(H=!0),H||!G.Hc)){var H=G.xb.n,U=H.length;if(U!==0){G.Dc!==1&&(i.globalAlpha=G.Dc),G=G.Qs,G.length=0;for(var X=t.scale,_=0;_<U;_++){var Mt=H[_];if(mr(Mt)&&w.contains(Mt)){if(Mt instanceof k){var Dt=Mt;if(Dt.ac&&G.push(Dt),Dt.Mf===!1)continue}Dt=Mt.U,1<Dt.width*X||1<Dt.height*X?Mt.ve(i,t):Tf(Mt,i)}}i.globalAlpha=1}}}}else if(!u&&f){var F=t.Gn.W,C=F.layer;m=function(G){G===C?F.ve(i,t):G.ve(i,t,u)}}else m=function(G){G.ve(i,t,u)};for(n=0;n<y;n++)m(p[n]);t.Jm=!1,t.tl?t.tl.vm(t)&&t.Lv():t.Nr=function(){return new D(0,0)}}finally{t.rb=a,t.hf.Ke(!0),cs(t),t.If(p,y,t),Kr(t)}}x.prototype.getRenderingHint=x.prototype.Ok=function(t){return this.qk[t]},x.prototype.setRenderingHint=x.prototype.JJ=function(t,i){this.qk[t]=i,this.yq()},x.prototype.resetRenderingHints=x.prototype.hG=function(){this.qk=new Bn,this.qk.drawShadows=!0,this.qk.textGreeking=!0,this.qk.viewportOptimizations=!(s.EF||s.hq||s.iq),this.qk.temporaryPixelRatio=!0,this.qk.pictureRatioOptimization=!0};function ly(t,i){var n=t.qk;n!==null&&(n.imageSmoothingEnabled!==void 0&&i.yy(!!n.imageSmoothingEnabled),n=n.defaultFont,n!=null&&(i.font=n))}x.prototype.getInputOption=x.prototype.nu=function(t){return this.To[t]},x.prototype.setInputOption=function(t,i){this.To[t]=i},x.prototype.resetInputOptions=x.prototype.gG=function(){this.To=new Bn,this.To.extraTouchArea=10,this.To.extraTouchThreshold=10,this.To.hasGestureZoom=!0},x.prototype.setProperties=function(t){s.$u(this,t)};function Wd(t){if(t.ja.wi===0&&t.ol.count!==0){for(;0<t.ol.count;){var i=t.ol;for(t.ol=new tt(k,O),i=i.i;i.next();){var n=i.key;ap(n,i.value),n.fe()}}t.oa()}}x.prototype.oa=function(t){if(t===void 0&&(t=null),t===null)this.Fe=!0,this.ye();else{var i=this.sb;t!==null&&t.I()&&i.$f(t)&&(this.Fe=!0,this.ye())}for(i=this.zw.i;i.next();)i.value.oa(t)},x.prototype.yF=function(t,i){if(this.Fe!==!0){this.Fe=!0;var n=this.Ok("temporaryPixelRatio")===!0;if(this.Ok("viewportOptimizations")===!0&&this.uy!==og&&this.ty.Bx(0,0,0,0)&&i.width===t.width&&i.height===t.height){var e=this.scale,o=s.vf(),r=Math.max(t.x,i.x),h=Math.max(t.y,i.y),l=Math.min(t.x+t.width,i.x+i.width),u=Math.min(t.y+t.height,i.y+i.height);if(o.x=r,o.y=h,o.width=Math.max(0,l-r)*e,o.height=Math.max(0,u-h)*e,0<o.width&&0<o.height){if(!this.$d&&(this.Tf=!1,this.Ob!==null)){this.$d=!0,Wd(this),this.Nd.I()||Wl(this,this.computeBounds());var f=this.zb;if(f!==null){var a=this.wd,h=this.Db*a,l=this.Cb*a,r=this.scale*a,e=Math.round(Math.round(i.x*r)-Math.round(t.x*r)),r=Math.round(Math.round(i.y*r)-Math.round(t.y*r)),u=this.lz,c=this.YC;u.width!==h&&(u.width=h),u.height!==l&&(u.height=l),c.clearRect(0,0,h,l);var u=190*this.wd,p=70*this.wd,g=Math.max(e,0),y=Math.max(r,0),v=Math.floor(h-g),m=Math.floor(l-y);c.yy(!1),c.drawImage(f.Od,g,y,v,m,0,0,v,m),this.tl.vm(this)&&c.clearRect(0,0,u,p);var f=s.Za(),c=s.Za(),m=Math.abs(e),v=Math.abs(r),d=g===0?0:h-m,g=s.wb(d,0),m=s.wb(m+d,l);c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y)));var w=this.jd;w.reset(),w.scale(a,a),this.rb!==1&&w.scale(this.rb),a=this.ab,(a.x!==0||a.y!==0)&&isFinite(a.x)&&isFinite(a.y)&&w.translate(-a.x,-a.y),un(g,w),un(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),d=y===0?0:l-v,g.m(0,d),m.m(h,v+d),c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),un(g,w),un(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),this.tl.vm(this)&&(h=0<e?0:-e,l=0<r?0:-r,g.m(h,l),m.m(u+h,p+l),c.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))),un(g,w),un(m,w),f.push(new O(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y)))),s.v(g),s.v(m),Ca(this,!1),Dx(this,f,c,e,r),s.ra(f),s.ra(c),this.$d=!1}}}else this.dg();s.Bb(o),n&&(this.uk=1,this.dg(),this.uk=null,this.my())}else n?(this.uk=1,this.dg(),this.uk=null,this.my()):this.dg()}};function bs(t){t.Im===!1&&(t.Im=!0)}function cs(t){t.vl===!1&&(t.vl=!0)}function Da(t){t.Wr!==!1&&(t.Wr=!1,$d(t,t.Db,t.Cb))}function $d(t,i,n){var e=t.zb,r=t.wd,o=i*r,r=n*r;(e.width!==o||e.height!==r)&&(e.width=o,e.height=r,e.style.width=i+"px",e.style.height=n+"px",t.Fe=!0,t.hf.Ke(!0))}function uy(t){var i=t.zb;if(i===null)return!0;var f=t.Ob,n=t.Db,e=t.Cb,o=t.eA.copy();if(!o.I())return!0;var r=!1,h=t.sl?t.zd:0,l=t.bk?t.zd:0,u=f.clientWidth||n+h,f=f.clientHeight||e+l;(u!==n+h||f!==e+l)&&(t.sl=!1,t.bk=!1,l=h=0,t.Db=u,t.Cb=f,r=t.Wr=!0),t.Im=!1;var M=t.sb,C=t.Nd,y=0,v=0,g=0,w=0,u=M.width,f=M.height,a=t.ty;t.rA.Zc()?(C.width>u&&(y=a.left,v=a.right),C.height>f&&(g=a.top,w=a.bottom)):(y=a.left,v=a.right,g=a.top,w=a.bottom);var a=C.width+y+v,p=C.height+g+w,y=C.x-y,c=M.x,v=C.right+v,d=M.right+h,g=C.y-g,m=M.y,w=C.bottom+w,M=M.bottom+l,S="1px",F="1px",C=t.scale,H=!(a<u+h),G=!(p<f+l);t.uy===Uh&&(H||G)&&(H&&t.NA&&t.re&&(S=1,y+1<c&&(S=Math.max((c-y)*C+t.Db,S)),v>d+1&&(S=Math.max((v-d)*C+t.Db,S)),u+h+1<a&&(S=Math.max((a-u+h)*C+t.Db,S)),S=S.toString()+"px"),G&&t.OA&&t.se&&(F=1,g+1<m&&(F=Math.max((m-g)*C+t.Cb,F)),w>M+1&&(F=Math.max((w-M)*C+t.Cb,F)),f+l+1<p&&(F=Math.max((p-f+l)*C+t.Cb,F)),F=F.toString()+"px"));var H=S!=="1px",U=F!=="1px";if(H&&U||!H&&!U||(G=!(p<f+l),U&&(d-=t.zd),H&&(M-=t.zd),a<u+h||!t.NA||!t.re||(S=1,y+1<c&&(S=Math.max((c-y)*C+t.Db,S)),v>d+1&&(S=Math.max((v-d)*C+t.Db,S)),u+1<a&&(S=Math.max((a-u)*C+t.Db,S)),S=S.toString()+"px"),H=S!=="1px",h=t.Cb,H!==t.bk&&(h=H?t.Cb-t.zd:t.Cb+t.zd),G&&t.OA&&t.se&&(F=1,g+1<m&&(F=Math.max((m-g)*C+h,F)),w>M+1&&(F=Math.max((w-M)*C+h,F)),f+1<p&&(F=Math.max((p-f)*C+h,F)),F=F.toString()+"px"),U=F!=="1px"),t.Fw&&H===t.bk&&U===t.sl)return n===t.Db&&e===t.Cb||t.dg(),!1;if(H!==t.bk&&(t.Cb=S==="1px"?t.Cb+t.zd:Math.max(t.Cb-t.zd,1),r=!0),t.bk=H,t.kt.style.width=S,U!==t.sl&&(t.Db=F==="1px"?t.Db+t.zd:Math.max(t.Db-t.zd,1),r=!0,t.as&&(h=s.K(),U?(i.style.left=t.zd+"px",t.position=h.m(t.ab.x+t.zd/t.scale,t.ab.y)):(i.style.left="0px",t.position=h.m(t.ab.x-t.zd/t.scale,t.ab.y)),s.v(h))),t.sl=U,t.kt.style.height=F,t.Rz=!0,r&&(t.Wr=!0),i=t.Jw,h=i.scrollLeft,t.NA&&t.re&&(u+1<a?h=(t.position.x-y)*C:y+1<c?h=i.scrollWidth-i.clientWidth:v>d+1&&(h=t.position.x*C)),t.as)switch(t.Pz){case"negative":h=-(i.scrollWidth-h-i.clientWidth);break;case"reverse":h=i.scrollWidth-h-i.clientWidth}return i.scrollLeft=h,t.OA&&t.se&&(f+1<p?i.scrollTop=(t.position.y-g)*C:g+1<m?i.scrollTop=i.scrollHeight-i.clientHeight:w>M+1&&(i.scrollTop=t.position.y*C)),u=t.Db,f=t.Cb,i.style.width=u+(t.sl?t.zd:0)+"px",i.style.height=f+(t.bk?t.zd:0)+"px",n!==u||e!==f||t.Ka.sc?(M=t.sb,t.Pu(o,M,C,t.scale,r),!1):!0}x.prototype.add=x.prototype.add=function(t){s.G(t,L,x,"add:part");var i=t.g;if(i!==this){i!==null&&s.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+i.toString()),this.Sq&&(t.zl="Tool");var n=t.bg,i=this.cu(n);i===null&&(i=this.cu("")),i===null&&s.k('Cannot add a Part when unable find a Layer named "'+n+'" and there is no default Layer'),t.layer!==i&&(n=i.eq(99999999,t,t.g===this),0<=n&&this.bd(Ei,"parts",i,null,t,null,n),i.Hc||this.Gc(),t.J(uu),n=t.Tx,n!==null&&n(t,null,i))}},x.prototype.eq=function(t){if(t instanceof I){if(this.ip.add(t),t instanceof q){var i=t.Ca;i===null?this.Ll.add(t):i.fp.add(t),i=t.Ub,i!==null&&(i.g=this)}}else t instanceof k?this.bp.add(t):t instanceof vt||this.xb.add(t);var n=this;oh(t,function(e){sg(n,e)}),(t instanceof vt||t instanceof q&&t.Lb!==null)&&t.H(),i=t.data,i!==null&&(t instanceof vt||(t instanceof k?this.Sj.add(i,t):this.Ii.add(i,t)),oh(t,function(e){vy(n,e)})),Qe(t)!==!0&&ms(t)!==!0||this.vg.add(t),d1(t,!0,this),m1(t)?(t.U.I()&&this.oa(Wh(t,t.U)),this.Gc()):t.isVisible()&&t.U.I()&&this.oa(Wh(t,t.U)),this.ye()},x.prototype.rf=function(t){if(t.Ut(),t instanceof I){if(this.ip.remove(t),t instanceof q){var i=t.Ca;i===null?this.Ll.remove(t):i.fp.remove(t),i=t.Ub,i!==null&&(i.g=null)}}else t instanceof k?this.bp.remove(t):t instanceof vt||this.xb.remove(t);var n=this;oh(t,function(e){hg(n,e)}),i=t.data,i!==null&&(t instanceof vt||(t instanceof k?this.Sj.remove(i):this.Ii.remove(i)),oh(t,function(e){dy(n,e)})),this.vg.remove(t),m1(t)?(t.U.I()&&this.oa(Wh(t,t.U)),this.Gc()):t.isVisible()&&t.U.I()&&this.oa(Wh(t,t.U)),this.ye()},x.prototype.remove=x.prototype.remove=function(t){s.G(t,L,x,"remove:part"),fy(this,t,!0)};function fy(t,i,n){var e=i.layer;e!==null&&e.g===t&&(i.jb=!1,i.Og=!1,i.J(fu),n&&i.zn(),n=e.rf(-1,i,!1),0<=n&&t.bd(zi,"parts",e,i,null,n,null),t=i.Tx,t!==null&&t(i,e,null))}x.prototype.removeParts=x.prototype.vB=function(t,i){if(s.isArray(t))for(var n=s.cb(t),e=0;e<n;e++){var o=s.Ba(t,e);i&&!o.canDelete()||this.remove(o)}else for(o=new R(L),o.Pc(t),n=o.i;n.next();)o=n.value,i&&!o.canDelete()||this.remove(o)},x.prototype.copyParts=x.prototype.Tp=function(t,i,n){return this.pb.Tp(t,i,n)},x.prototype.moveParts=x.prototype.moveParts=function(t,i,n){s.G(i,D,x,"moveParts:offset");var e=this.Va;if(e!==null){e=e.ce,e===null&&(e=new dt,e.Tc(this));var o=new tt(L);if(t!==null)t=t.i;else{for(t=this.Hj;t.next();)Xs(e,o,t.value,n);for(t=this.ig;t.next();)Xs(e,o,t.value,n);t=this.links}for(;t.next();)Xs(e,o,t.value,n);e.moveParts(o,i,n)}};function ay(t,i,n){if(s.G(i,ct,x,"addLayer:layer"),i.g!==null&&i.g!==t&&s.k("Cannot share a Layer with another Diagram: "+i+" of "+i.g),n===null?i.g!==null&&s.k("Cannot add an existing Layer to this Diagram again: "+i):(s.G(n,ct,x,"addLayer:existingLayer"),n.g!==t&&s.k("Existing Layer must be in this Diagram: "+n+" not in "+n.g),i===n&&s.k("Cannot move a Layer before or after itself: "+i)),i.g!==t){i=i.name,t=t.dc,n=t.count;for(var e=0;e<n;e++)t.fa(e).name===i&&s.k("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}}x.prototype.addLayer=x.prototype.Nt=function(t){ay(this,t,null),t.Tc(this);var i=this.dc,n=i.count-1;if(!t.Hc)for(;0<=n&&i.fa(n).Hc;)n--;i.Rd(n+1,t),this.qe!==null&&this.bd(Ei,"layers",this,null,t,null,n+1),this.oa(),this.Gc()},x.prototype.addLayerBefore=x.prototype.nH=function(t,i){ay(this,t,i),t.Tc(this);var n=this.dc,e=n.indexOf(t);0<=e&&(n.remove(t),this.qe!==null&&this.bd(zi,"layers",this,t,null,e,null));for(var o=n.count,r=0;r<o;r++)if(n.fa(r)===i){n.Rd(r,t);break}this.qe!==null&&this.bd(Ei,"layers",this,null,t,null,r),this.oa(),0>e&&this.Gc()},x.prototype.addLayerAfter=function(t,i){ay(this,t,i),t.Tc(this);var n=this.dc,e=n.indexOf(t);0<=e&&(n.remove(t),this.qe!==null&&this.bd(zi,"layers",this,t,null,e,null));for(var o=n.count,r=0;r<o;r++)if(n.fa(r)===i){n.Rd(r+1,t);break}this.qe!==null&&this.bd(Ei,"layers",this,null,t,null,r+1),this.oa(),0>e&&this.Gc()},x.prototype.removeLayer=function(t){if(s.G(t,ct,x,"removeLayer:layer"),t.g!==this&&s.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),t.name!==""){var i=this.dc,n=i.indexOf(t);if(i.remove(t)){for(i=t.xb.copy().i;i.next();){var e=i.value,o=e.bg;e.bg=o!==t.name?o:""}this.qe!==null&&this.bd(zi,"layers",this,t,null,n,null),this.oa(),this.Gc()}}},x.prototype.findLayer=x.prototype.cu=function(t){for(var i=this.Ux;i.next();){var n=i.value;if(n.name===t)return n}return null},x.prototype.addModelChangedListener=x.prototype.pH=function(t){s.j(t,"function",x,"addModelChangedListener:listener"),this.jh===null&&(this.jh=new E("function")),this.jh.add(t),this.$.mn(t)},x.prototype.removeModelChangedListener=function(t){s.j(t,"function",x,"removeModelChangedListener:listener"),this.jh!==null&&(this.jh.remove(t),this.jh.count===0&&(this.jh=null)),this.$.Su(t)},x.prototype.addChangedListener=x.prototype.mn=function(t){s.j(t,"function",x,"addChangedListener:listener"),this.Di===null&&(this.Di=new E("function")),this.Di.add(t)},x.prototype.removeChangedListener=x.prototype.Su=function(t){s.j(t,"function",x,"removeChangedListener:listener"),this.Di!==null&&(this.Di.remove(t),this.Di.count===0&&(this.Di=null))},x.prototype.mx=function(t){if(this.gb||this.ja.tF(t),t.Fc!==Co&&(this.ri=!0),this.Di!==null)for(var i=this.Di,n=i.length,e=0;e<n;e++)i.fa(e)(t)},x.prototype.raiseChangedEvent=x.prototype.bd=function(t,i,n,e,o,r,h){r===void 0&&(r=null),h===void 0&&(h=null);var l=new zt;l.g=this,l.Fc=t,l.propertyName=i,l.object=n,l.oldValue=e,l.Gj=r,l.newValue=o,l.Fj=h,this.mx(l)},x.prototype.raiseChanged=x.prototype.h=function(t,i,n,e,o){this.bd(Jt,t,this,i,n,e,o)},s.u(x,{Ka:"animationManager"},function(){return this.lC}),s.u(x,{ja:"undoManager"},function(){return this.qe.ja}),s.defineProperty(x,{gb:"skipsUndoManager"},function(){return this.ij},function(t){s.j(t,"boolean",x,"skipsUndoManager"),this.ij=t,this.qe.ij=t}),s.defineProperty(x,{zA:"delaysLayout"},function(){return this.gz},function(t){this.gz=t}),x.prototype.rn=function(t,i){if(t!==null&&t.g===this){var n=this.Re;try{this.Re=!0;var e=t.Fc,o;if(e===Jt){var r=t.object,h=t.propertyName,l=t.ka(i);if(s.Ma(r,h,l),r instanceof N){var u,f=r.W;f!==null&&f.Sd()}this.ri=!0}else if(e===Ei){var a=t.object,p=t.Fj,r=t.newValue;if(a instanceof A){if(typeof p=="number"&&r instanceof N){u=r;var y=a;i?y.rf(p):y.Rd(p,u),f=a.W,f!==null&&f.Sd()}else if(typeof p=="number"&&r instanceof Nt){var c=r,y=a;i?c.xe?y.fG(p):y.dG(p):(o=c.xe?y.ee(c.index):y.de(c.index),o.Sp(c))}}else if(a instanceof ct){var v=t.Gj===!0;if(typeof p=="number"&&r instanceof L){var f=r,d=a;i?(f.jb=!1,f.Og=!1,f.Sd(),d.rf(v?p:-1,f,v)):d.eq(p,f,v)}}else if(a instanceof x){if(typeof p=="number"&&r instanceof ct){var g=r;i?this.dc.cd(p):(e=g,e.Tc(this),this.dc.Rd(p,e))}}else s.k("unknown ChangedEvent.Insert object: "+t.toString());this.ri=!0}else e===zi?(a=t.object,p=t.Gj,r=t.oldValue,a instanceof A?typeof p=="number"&&r instanceof N?(y=a,i?y.Rd(p,r):y.rf(p)):typeof p=="number"&&r instanceof Nt&&(c=r,y=a,i?(o=c.xe?y.ee(c.index):y.de(c.index),o.Sp(c)):c.xe?y.fG(p):y.dG(p)):a instanceof ct?(v=t.Fj===!0,typeof p=="number"&&r instanceof L&&(f=r,d=a,i?0>d.xb.indexOf(f)&&d.eq(p,f,v):(f.jb=!1,f.Og=!1,f.Sd(),d.rf(v?p:-1,f,v)))):a instanceof x?typeof p=="number"&&r instanceof ct&&(g=r,i?(e=g,e.Tc(this),this.dc.Rd(p,e)):this.dc.cd(p)):s.k("unknown ChangedEvent.Remove object: "+t.toString()),this.ri=!0):e!==Co&&s.k("unknown ChangedEvent: "+t.toString())}finally{this.Re=n}}},x.prototype.startTransaction=x.prototype.Ib=function(t){return this.ja.Ib(t)},x.prototype.commitTransaction=x.prototype.Yc=function(t){return this.ja.Yc(t)},x.prototype.rollbackTransaction=x.prototype.mm=function(){return this.ja.mm()},x.prototype.commit=x.prototype.commit=function(t,i){var n=i;n===void 0&&(n="");var e=this.gb;n===null&&(this.gb=!0,n=""),this.ja.Ib(n);var o=!1;try{t(this),o=!0}finally{o?this.ja.Yc(n):this.ja.mm(),this.gb=e}},x.prototype.updateAllTargetBindings=x.prototype.LG=function(t){t===void 0&&(t="");for(var i=this.Hj;i.next();)i.value.Jb(t);for(i=this.ig;i.next();)i.value.Jb(t);for(i=this.links;i.next();)i.value.Jb(t)},x.prototype.updateAllRelationshipsFromData=x.prototype.$J=function(){for(var t=this.$,i=new R,n=t.Pg,e=0;e<n.length;e++){var o=n[e];i.add(o)}var r=[];for(this.ig.each(function(f){f.data===null||i.contains(f.data)||r.push(f.data)}),this.Hj.each(function(f){f.data===null||i.contains(f.data)||r.push(f.data)}),r.forEach(function(f){id(t,f,!1)}),e=0;e<n.length;e++){var o=n[e],h=this.wh(o);h===null&&td(t,o,!1)}if(t instanceof K){for(var l=new R,n=t.Ah,e=0;e<n.length;e++)o=n[e],l.add(o);var u=[];for(this.links.each(function(f){f.data===null||l.contains(f.data)||u.push(f.data)}),u.forEach(function(f){ed(t,f,!1)}),e=0;e<n.length;e++)o=n[e],h=this.Yf(o),h===null&&nd(t,o,!1)}for(e=this.Hj;e.next();)h=e.value,h.updateRelationshipsFromData();for(e=this.ig;e.next();)e.value.updateRelationshipsFromData();for(e=this.links;e.next();)h=e.value,h.updateRelationshipsFromData()};function _d(t,i,n){if(t.Wc||t.$d)t.rb=n,n=t.Ka,n.sc&&Od(n,i,t.rb);else if(t.Wc=!0,t.zb===null)t.rb=n;else{var e=t.sb.copy(),o=t.Db,r=t.Cb;e.width=t.Db/i,e.height=t.Cb/i;var h=t.zi.x,l=t.zi.y,u=t.rA;isNaN(h)&&(u.zj()?u.xj(Ll)?h=0:u.xj(Al)&&(h=o-1):h=u.Zc()?u.x*(o-1):o/2),isNaN(l)&&(u.zj()?u.xj(Fl)?l=0:u.xj(Il)&&(l=r-1):l=u.Zc()?u.y*(r-1):r/2),t.mG!==null&&(n=t.mG(t,n)),n<t.Ch&&(n=t.Ch),n>t.Bh&&(n=t.Bh),o=s.wb(t.ab.x+h/i-h/n,t.ab.y+l/i-l/n),t.position=o,s.v(o),t.rb=n,t.Pu(e,t.sb,i,n,!1),t.Wc=!1,Ko(t,!1),n=t.Ka,n.sc&&Od(n,i,t.rb),t.oa(),bs(t)}}x.prototype.Pu=function(t,i,n,e,o){t.L(i)||(o===void 0&&(o=!1),o||bs(this),cs(this),e=this.Ub,e===null||!e.Qx||this.Tl!==De||o||t.width===i.width&&t.height===i.height||e.J(),e=this.Xa,this.fh===!0&&e instanceof pt&&(this.N.ea=this.UB(this.N.Ce),Bd(e,this)),this.Wc||this.yF(t,i),Kr(this),this.ph.scale=n,this.ph.position.x=t.x,this.ph.position.y=t.y,this.ph.bounds.set(t),this.ph.isScroll=o,this.Aa("ViewportBoundsChanged",this.ph,t),this.$A&&this.links.each(function(r){r.fm&&r.U.$f(i)&&r.Tb()}))};function Kr(t,i){i===void 0&&(i=null);var n=t.td;if(n!==null&&n.visible){for(var e=s.tm(),o=1,r=1,h=n.xa.n,l=h.length,u=0;u<l;u++){var f=h[u],a=f.interval;2>a||(Oy(f.Fb)?r=r*a/Yv(r,a):o=o*a/Yv(o,a))}if(h=n.Jx,e.m(r*h.width,o*h.height),h=r=u=l=0,i!==null)l=i.width,u=i.height,r=i.x,h=i.y;else{for(o=s.vf(),r=t.sb,o.m(r.x,r.y,r.width,r.height),h=t.zw.i;h.next();)r=h.value.sb,r.I()&&fn(o,r.x,r.y,r.width,r.height);if(!o.I()){s.Bb(o);return}l=o.width,u=o.height,r=o.x,h=o.y,s.Bb(o)}n.width=l+2*e.width,n.height=u+2*e.height,o=s.K(),tf(r,h,0,0,e.width,e.height,o),o.offset(-e.width,-e.height),s.Lk(e),n.W.location=o,s.v(o)}}x.prototype.clearSelection=x.prototype.oA=function(){var t=0<this.selection.count;t&&this.Aa("ChangingSelection"),ff(this),t&&this.Aa("ChangedSelection")};function ff(t){if(t=t.selection,0<t.count){for(var i=t.yc(),n=i.length,e=0;e<n;e++)i[e].jb=!1;t.Qa(),t.clear(),t.freeze()}}x.prototype.select=x.prototype.select=function(t){t!==null&&(s.G(t,L,x,"select:part"),t.layer.g===this&&(!t.jb||1<this.selection.count)&&(this.Aa("ChangingSelection"),ff(this),t.jb=!0,this.Aa("ChangedSelection")))},x.prototype.selectCollection=x.prototype.qG=function(t){if(this.Aa("ChangingSelection"),ff(this),s.isArray(t))for(var i=s.cb(t),n=0;n<i;n++){var e=s.Ba(t,n);e instanceof L||s.k("Diagram.selectCollection given something that is not a Part: "+e),e.jb=!0}else for(t=t.i;t.next();)e=t.value,e instanceof L||s.k("Diagram.selectCollection given something that is not a Part: "+e),e.jb=!0;this.Aa("ChangedSelection")},x.prototype.clearHighlighteds=x.prototype.wH=function(){var t=this.em;if(0<t.count){for(var i=t.yc(),n=i.length,e=0;e<n;e++)i[e].Og=!1;t.Qa(),t.clear(),t.freeze()}},x.prototype.highlight=function(t){t!==null&&t.layer.g===this&&(s.G(t,L,x,"highlight:part"),!t.Og||1<this.em.count)&&(this.wH(),t.Og=!0)},x.prototype.highlightCollection=function(t){for(var i=new R(L).Pc(t),n=this.em.copy().oy(i).i;n.next();)t=n.value,t.Og=!1;for(i=i.i;i.next();)t=i.value,t instanceof L||s.k("Diagram.highlightCollection given something that is not a Part: "+t),t.Og=!0},x.prototype.scroll=x.prototype.scroll=function(t,i,n){n===void 0&&(n=1);var e=i==="up"||i==="down",o=0;if(t==="pixel")o=n;else if(t==="line")o=n*(e?this.Zu:this.Yu);else if(t==="page")t=e?this.sb.height:this.sb.width,t*=this.scale,t!==0&&(o=Math.max(t-(e?this.Zu:this.Yu),0),o*=n);else{if(t==="document"){o=this.Nd,e=this.sb,n=s.K(),i==="up"?this.position=n.m(e.x,o.y):i==="left"?this.position=n.m(o.x,e.y):i==="down"?this.position=n.m(e.x,o.bottom-e.height):i==="right"&&(this.position=n.m(o.right-e.width,e.y)),s.v(n);return}s.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,n=this.position.copy(),i==="up"?n.y=this.position.y-o:i==="down"?n.y=this.position.y+o:i==="left"?n.x=this.position.x-o:i==="right"?n.x=this.position.x+o:s.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),this.position=n},x.prototype.scrollToRect=x.prototype.nG=function(t){var i=this.sb;i.Fk(t)||(t=t.Ul,t.x-=i.width/2,t.y-=i.height/2,this.position=t)},x.prototype.centerRect=x.prototype.IE=function(t){var i=this.sb;t=t.Ul,t.x-=i.width/2,t.y-=i.height/2,this.position=t},x.prototype.transformDocToView=x.prototype.Dy=function(t){var i=this.jd;i.reset(),this.rb!==1&&i.scale(this.rb);var n=this.ab;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),t.copy().transform(this.jd)},x.prototype.transformViewToDoc=x.prototype.UB=function(t){var i=this.jd;i.reset(),this.rb!==1&&i.scale(this.rb);var n=this.ab;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&i.translate(-n.x,-n.y),un(t.copy(),this.jd)};var De;x.None=De=s.p(x,"None",0);var Xl;x.Uniform=Xl=s.p(x,"Uniform",1);var Fa;x.UniformToFill=Fa=s.p(x,"UniformToFill",2);var af;x.CycleAll=af=s.p(x,"CycleAll",10);var bd;x.CycleNotDirected=bd=s.p(x,"CycleNotDirected",11);var tg;x.CycleNotDirectedFast=tg=s.p(x,"CycleNotDirectedFast",12);var ig;x.CycleNotUndirected=ig=s.p(x,"CycleNotUndirected",13);var ng;x.CycleDestinationTree=ng=s.p(x,"CycleDestinationTree",14);var eg;x.CycleSourceTree=eg=s.p(x,"CycleSourceTree",15);var Uh;x.DocumentScroll=Uh=s.p(x,"DocumentScroll",1);var og;x.InfiniteScroll=og=s.p(x,"InfiniteScroll",2);var th;x.TreeParentCollapsed=th=s.p(x,"TreeParentCollapsed",21);var py;x.AllParentsCollapsed=py=s.p(x,"AllParentsCollapsed",22);var yy;x.AnyParentsCollapsed=yy=s.p(x,"AnyParentsCollapsed",23),s.defineProperty(x,{aK:"validCycle"},function(){return this.Xw},function(t){var i=this.Xw;i!==t&&(s.ob(t,x,x,"validCycle"),this.Xw=t,this.h("validCycle",i,t))}),s.u(x,{Ux:"layers"},function(){return this.dc.i}),s.defineProperty(x,{Ef:"isModelReadOnly"},function(){var t=this.qe;return t===null?!1:t.ib},function(t){var i=this.qe;i!==null&&(i.ib=t)}),s.defineProperty(x,{ib:"isReadOnly"},function(){return this.Si},function(t){var i=this.Si;i!==t&&(s.j(t,"boolean",x,"isReadOnly"),this.Si=t,this.h("isReadOnly",i,t))}),s.defineProperty(x,{isEnabled:"isEnabled"},function(){return this.jf},function(t){var i=this.jf;i!==t&&(s.j(t,"boolean",x,"isEnabled"),this.jf=t,this.h("isEnabled",i,t))}),s.defineProperty(x,{iA:"allowClipboard"},function(){return this.lv},function(t){var i=this.lv;i!==t&&(s.j(t,"boolean",x,"allowClipboard"),this.lv=t,this.h("allowClipboard",i,t))}),s.defineProperty(x,{Ck:"allowCopy"},function(){return this.Yk},function(t){var i=this.Yk;i!==t&&(s.j(t,"boolean",x,"allowCopy"),this.Yk=t,this.h("allowCopy",i,t))}),s.defineProperty(x,{nn:"allowDelete"},function(){return this.Zk},function(t){var i=this.Zk;i!==t&&(s.j(t,"boolean",x,"allowDelete"),this.Zk=t,this.h("allowDelete",i,t))}),s.defineProperty(x,{Rt:"allowDragOut"},function(){return this.mv},function(t){var i=this.mv;i!==t&&(s.j(t,"boolean",x,"allowDragOut"),this.mv=t,this.h("allowDragOut",i,t))}),s.defineProperty(x,{AE:"allowDrop"},function(){return this.nv},function(t){var i=this.nv;i!==t&&(s.j(t,"boolean",x,"allowDrop"),this.nv=t,this.h("allowDrop",i,t))}),s.defineProperty(x,{jx:"allowTextEdit"},function(){return this.hl},function(t){var i=this.hl;i!==t&&(s.j(t,"boolean",x,"allowTextEdit"),this.hl=t,this.h("allowTextEdit",i,t))}),s.defineProperty(x,{gx:"allowGroup"},function(){return this.$k},function(t){var i=this.$k;i!==t&&(s.j(t,"boolean",x,"allowGroup"),this.$k=t,this.h("allowGroup",i,t))}),s.defineProperty(x,{kx:"allowUngroup"},function(){return this.il},function(t){var i=this.il;i!==t&&(s.j(t,"boolean",x,"allowUngroup"),this.il=t,this.h("allowUngroup",i,t))}),s.defineProperty(x,{Kp:"allowInsert"},function(){return this.pv},function(t){var i=this.pv;i!==t&&(s.j(t,"boolean",x,"allowInsert"),this.pv=t,this.h("allowInsert",i,t))}),s.defineProperty(x,{St:"allowLink"},function(){return this.al},function(t){var i=this.al;i!==t&&(s.j(t,"boolean",x,"allowLink"),this.al=t,this.h("allowLink",i,t))}),s.defineProperty(x,{on:"allowRelink"},function(){return this.cl},function(t){var i=this.cl;i!==t&&(s.j(t,"boolean",x,"allowRelink"),this.cl=t,this.h("allowRelink",i,t))}),s.defineProperty(x,{Rl:"allowMove"},function(){return this.bl},function(t){var i=this.bl;i!==t&&(s.j(t,"boolean",x,"allowMove"),this.bl=t,this.h("allowMove",i,t))}),s.defineProperty(x,{hx:"allowReshape"},function(){return this.dl},function(t){var i=this.dl;i!==t&&(s.j(t,"boolean",x,"allowReshape"),this.dl=t,this.h("allowReshape",i,t))}),s.defineProperty(x,{Tt:"allowResize"},function(){return this.el},function(t){var i=this.el;i!==t&&(s.j(t,"boolean",x,"allowResize"),this.el=t,this.h("allowResize",i,t))}),s.defineProperty(x,{ix:"allowRotate"},function(){return this.fl},function(t){var i=this.fl;i!==t&&(s.j(t,"boolean",x,"allowRotate"),this.fl=t,this.h("allowRotate",i,t))}),s.defineProperty(x,{Bf:"allowSelect"},function(){return this.gl},function(t){var i=this.gl;i!==t&&(s.j(t,"boolean",x,"allowSelect"),this.gl=t,this.h("allowSelect",i,t))}),s.defineProperty(x,{BE:"allowUndo"},function(){return this.qv},function(t){var i=this.qv;i!==t&&(s.j(t,"boolean",x,"allowUndo"),this.qv=t,this.h("allowUndo",i,t))}),s.defineProperty(x,{lx:"allowZoom"},function(){return this.sv},function(t){var i=this.sv;i!==t&&(s.j(t,"boolean",x,"allowZoom"),this.sv=t,this.h("allowZoom",i,t))}),s.defineProperty(x,{OA:"hasVerticalScrollbar"},function(){return this.Vv},function(t){var i=this.Vv;i!==t&&(s.j(t,"boolean",x,"hasVerticalScrollbar"),this.Vv=t,bs(this),this.oa(),this.h("hasVerticalScrollbar",i,t),Ko(this,!1))}),s.defineProperty(x,{NA:"hasHorizontalScrollbar"},function(){return this.Uv},function(t){var i=this.Uv;i!==t&&(s.j(t,"boolean",x,"hasHorizontalScrollbar"),this.Uv=t,bs(this),this.oa(),this.h("hasHorizontalScrollbar",i,t),Ko(this,!1))}),s.defineProperty(x,{re:"allowHorizontalScroll"},function(){return this.ov},function(t){var i=this.ov;i!==t&&(s.j(t,"boolean",x,"allowHorizontalScroll"),this.ov=t,this.h("allowHorizontalScroll",i,t),Ko(this,!1))}),s.defineProperty(x,{se:"allowVerticalScroll"},function(){return this.rv},function(t){var i=this.rv;i!==t&&(s.j(t,"boolean",x,"allowVerticalScroll"),this.rv=t,this.h("allowVerticalScroll",i,t),Ko(this,!1))}),s.defineProperty(x,{Yu:"scrollHorizontalLineChange"},function(){return this.Gw},function(t){var i=this.Gw;i!==t&&(s.j(t,"number",x,"scrollHorizontalLineChange"),0>t&&s.Fa(t,">= 0",x,"scrollHorizontalLineChange"),this.Gw=t,this.h("scrollHorizontalLineChange",i,t))}),s.defineProperty(x,{Zu:"scrollVerticalLineChange"},function(){return this.Kw},function(t){var i=this.Kw;i!==t&&(s.j(t,"number",x,"scrollVerticalLineChange"),0>t&&s.Fa(t,">= 0",x,"scrollVerticalLineChange"),this.Kw=t,this.h("scrollVerticalLineChange",i,t))}),s.defineProperty(x,{N:"lastInput"},function(){return this.Rb},function(t){this.Rb=t}),s.defineProperty(x,{uc:"firstInput"},function(){return this.Pi},function(t){this.Pi=t}),s.defineProperty(x,{kc:"currentCursor"},function(){return this.Cv},function(t){if(t===""&&(t=this.wr),this.Cv!==t){s.j(t,"string",x,"currentCursor");var i=this.zb,n=this.Ob;if(i!==null){this.Cv=t;var e=i.style.cursor;i.style.cursor=t,n.style.cursor=t,i.style.cursor===e&&(i.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,i.style.cursor===e&&(i.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,i.style.cursor===e&&(i.style.cursor=t,n.style.cursor=t)))}}}),s.defineProperty(x,{RK:"defaultCursor"},function(){return this.wr},function(t){t===""&&(t="auto");var i=this.wr;i!==t&&(s.j(t,"string",x,"defaultCursor"),this.wr=t,this.h("defaultCursor",i,t))}),s.defineProperty(x,{click:"click"},function(){return this.Ei},function(t){var i=this.Ei;i!==t&&(t!==null&&s.j(t,"function",x,"click"),this.Ei=t,this.h("click",i,t))}),s.defineProperty(x,{Zt:"doubleClick"},function(){return this.Mi},function(t){var i=this.Mi;i!==t&&(t!==null&&s.j(t,"function",x,"doubleClick"),this.Mi=t,this.h("doubleClick",i,t))}),s.defineProperty(x,{sA:"contextClick"},function(){return this.Gi},function(t){var i=this.Gi;i!==t&&(t!==null&&s.j(t,"function",x,"contextClick"),this.Gi=t,this.h("contextClick",i,t))}),s.defineProperty(x,{kB:"mouseOver"},function(){return this.aj},function(t){var i=this.aj;i!==t&&(t!==null&&s.j(t,"function",x,"mouseOver"),this.aj=t,this.h("mouseOver",i,t))}),s.defineProperty(x,{jB:"mouseHover"},function(){return this.$i},function(t){var i=this.$i;i!==t&&(t!==null&&s.j(t,"function",x,"mouseHover"),this.$i=t,this.h("mouseHover",i,t))}),s.defineProperty(x,{iB:"mouseHold"},function(){return this.Zi},function(t){var i=this.Zi;i!==t&&(t!==null&&s.j(t,"function",x,"mouseHold"),this.Zi=t,this.h("mouseHold",i,t))}),s.defineProperty(x,{dJ:"mouseDragOver"},function(){return this.tw},function(t){var i=this.tw;i!==t&&(t!==null&&s.j(t,"function",x,"mouseDragOver"),this.tw=t,this.h("mouseDragOver",i,t))}),s.defineProperty(x,{hB:"mouseDrop"},function(){return this.Yi},function(t){var i=this.Yi;i!==t&&(t!==null&&s.j(t,"function",x,"mouseDrop"),this.Yi=t,this.h("mouseDrop",i,t))}),s.defineProperty(x,{QB:"toolTip"},function(){return this.jj},function(t){var i=this.jj;i!==t&&(this.jj=t,this.h("toolTip",i,t))}),s.defineProperty(x,{contextMenu:"contextMenu"},function(){return this.Hi},function(t){var i=this.Hi;i!==t&&(this.Hi=t,this.h("contextMenu",i,t))}),s.defineProperty(x,{pb:"commandHandler"},function(){return this.$y},function(t){var i=this.$y;i!==t&&(s.G(t,it,x,"commandHandler"),t.g!==null&&s.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),i!==null&&i.Tc(null),this.$y=t,t.Tc(this))}),s.defineProperty(x,{Va:"toolManager"},function(){return this.$z},function(t){var i=this.$z;i!==t&&(s.G(t,pt,x,"toolManager"),t.g!==null&&s.k("Cannot share ToolManagers between Diagrams: "+t.toString()),i!==null&&i.Tc(null),this.$z=t,t.Tc(this))}),s.defineProperty(x,{Xt:"defaultTool"},function(){return this.fz},function(t){var i=this.fz;i!==t&&(s.G(t,ut,x,"defaultTool"),this.fz=t,this.Xa===i&&(this.Xa=t))}),s.defineProperty(x,{Xa:"currentTool"},function(){return this.cz},function(t){var i=this.cz;i!==null&&(i.ta&&i.doDeactivate(),i.cancelWaitAfter(),i.doStop()),t===null&&(t=this.Xt),t!==null&&(s.G(t,ut,x,"currentTool"),this.cz=t,t.Tc(this),t.doStart())}),s.u(x,{selection:"selection"},function(){return this.Nw}),s.defineProperty(x,{VI:"maxSelectionCount"},function(){return this.pw},function(t){var i=this.pw;if(i!==t)if(s.j(t,"number",x,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.pw=t,this.h("maxSelectionCount",i,t),!this.ja.lb&&(t=this.selection.count-t,0<t)){this.Aa("ChangingSelection");for(var i=this.selection.yc(),n=0;n<t;n++)i[n].jb=!1;this.Aa("ChangedSelection")}}else s.Fa(t,">= 0",x,"maxSelectionCount")}),s.defineProperty(x,{hJ:"nodeSelectionAdornmentTemplate"},function(){return this.uw},function(t){var i=this.uw;i!==t&&(s.G(t,vt,x,"nodeSelectionAdornmentTemplate"),this.uw=t,this.h("nodeSelectionAdornmentTemplate",i,t))}),s.defineProperty(x,{mI:"groupSelectionAdornmentTemplate"},function(){return this.Sv},function(t){var i=this.Sv;i!==t&&(s.G(t,vt,x,"groupSelectionAdornmentTemplate"),this.Sv=t,this.h("groupSelectionAdornmentTemplate",i,t))}),s.defineProperty(x,{OI:"linkSelectionAdornmentTemplate"},function(){return this.kw},function(t){var i=this.kw;i!==t&&(s.G(t,vt,x,"linkSelectionAdornmentTemplate"),this.kw=t,this.h("linkSelectionAdornmentTemplate",i,t))}),s.u(x,{em:"highlighteds"},function(){return this.Wv}),s.defineProperty(x,{ri:"isModified"},function(){var t=this.ja;return t.isEnabled?t.sj!==null?!0:this.bw&&this.dh!==t.wj:this.bw},function(t){if(this.bw!==t){s.j(t,"boolean",x,"isModified"),this.bw=t;var i=this.ja;!t&&i.isEnabled&&(this.dh=i.wj),t||rg(this)}});function rg(t){var i=t.ri;t.qE!==i&&(t.qE=i,t.Aa("Modified"))}s.defineProperty(x,{$:"model"},function(){return this.qe},function(t){var i=this.qe;if(i!==t){s.G(t,V,x,"model"),this.Xa.doCancel(),i!==null&&i.ja!==t.ja&&i.ja.FF&&s.k("Do not replace a Diagram.model while a transaction is in progress."),Vd(this,!0),this.eh=!1,this.Lo=!0,this.dh=-2,this.Tf=!1;var n=this.$d;this.$d=!0,this.Ka.Yn("Model"),i!==null&&(this.jh!==null&&this.jh.each(function(e){i.Su(e)}),i.Su(this.AD)),this.qe=t,t.mn(this.zD),xy(this,t.Pg),t instanceof K&&wy(this,t.Ah),t.Su(this.zD),t.mn(this.AD),this.jh!==null&&this.jh.each(function(e){t.mn(e)}),this.$d=n,this.Wc||this.oa(),i!==null&&(t.ja.isEnabled=i.ja.isEnabled)}}),s.defineProperty(x,{Ua:null},function(){return this.sD},function(t){this.sD=t}),s.u(x,{Yx:null},function(){return this.XG});function Fx(t,i){if(i.$===t.$){var n=i.Fc,e=i.propertyName;if(n===Co&&e[0]==="S")if(e==="StartingFirstTransaction")n=t.Va,n.gf.each(function(J){J.Tc(t)}),n.eg.each(function(J){J.Tc(t)}),n.fg.each(function(J){J.Tc(t)}),t.$d||t.eh||(t.Go=!0,t.Lo&&(t.Tf=!0));else if(e==="StartingUndo"||e==="StartingRedo"){var o=t.Ka;o.df&&!t.gb&&o.Ih(),t.Aa("ChangingSelection")}else e==="StartedTransaction"&&(o=t.Ka,o.df&&!t.gb&&o.Ih());else if(t.Ua){t.Ua=!1;try{var r=i.tf;if(r!=="")if(n===Jt){if(r==="linkFromKey"){var h=i.object,l=t.Yf(h);if(l!==null){var u=i.newValue,f=t.Oe(u);l.V=f}}else if(r==="linkToKey")h=i.object,l=t.Yf(h),l!==null&&(u=i.newValue,f=t.Oe(u),l.Z=f);else if(r==="linkFromPortId"){if(h=i.object,l=t.Yf(h),l!==null){var a=i.newValue;typeof a=="string"&&(l.Ng=a)}}else if(r==="linkToPortId")h=i.object,l=t.Yf(h),l!==null&&(a=i.newValue,typeof a=="string"&&(l.Jh=a));else if(r==="nodeGroupKey"){var h=i.object,p=t.wh(h);if(p!==null){var y=i.newValue;if(y!==void 0){var c=t.Oe(y);p.Ca=c instanceof q?c:null}else p.Ca=null}}else if(r==="linkLabelKeys"){if(h=i.object,l=t.Yf(h),l!==null){var v=i.oldValue,d=i.newValue;if(s.isArray(v))for(var g=s.cb(v),m=0;m<g;m++){var w=s.Ba(v,m),f=t.Oe(w);f!==null&&(f.Xb=null)}if(s.isArray(d))for(g=s.cb(d),m=0;m<g;m++)w=s.Ba(d,m),f=t.Oe(w),f!==null&&(f.Xb=l)}}else if(r==="nodeParentKey"){var M=i.object,S=t.Oe(i.newValue),F=t.Fx(M);if(t.rk!==null)S!==null&&(t.rk.data=M,t.rk.kd=t.bq(M));else if(F!==null){var C=F.Bn();C!==null?S===null?t.remove(C):t.Vd?C.V=S:C.Z=S:La(t,S,F)}}else if(r==="parentLinkCategory"){var M=i.object,F=t.Fx(M),G=i.newValue;F!==null&&typeof G=="string"&&(C=F.Bn(),C!==null&&(C.kd=G))}else if(r==="nodeCategory"){var h=i.object,H=t.wh(h),G=i.newValue;H!==null&&typeof G=="string"&&(H.kd=G)}else if(r==="linkCategory"){var h=i.object,U=t.Yf(h),G=i.newValue;U!==null&&typeof G=="string"&&(U.kd=G)}else if(r==="nodeDataArray"){var X=i.oldValue;Ia(t,X);var _=i.newValue;xy(t,_)}else r==="linkDataArray"&&(X=i.oldValue,Ia(t,X),_=i.newValue,wy(t,_));t.ri=!0}else n===Ei?(_=i.newValue,r==="nodeDataArray"&&s.Pa(_)?lg(t,_):r==="linkDataArray"&&s.Pa(_)?My(t,_):r==="linkLabelKeys"&&_n(_)&&(l=t.Yf(i.object),f=t.Oe(_),l!==null&&f!==null&&(f.Xb=l)),t.ri=!0):n===zi?(X=i.oldValue,r==="nodeDataArray"&&s.Pa(X)||r==="linkDataArray"&&s.Pa(X)?Py(t,X):r==="linkLabelKeys"&&_n(X)&&(f=t.Oe(X),f!==null&&(f.Xb=null)),t.ri=!0):n===Co&&(r==="SourceChanged"?i.object!==null?cy(t,i.object,i.propertyName):(t.$J(),t.LG()):r==="ModelDisplaced"&&t.lm());else if(n===Jt){var Mt=i.propertyName,h=i.object;h===t.$?(Mt==="nodeKeyProperty"||Mt==="nodeCategoryProperty"||Mt==="linkFromKeyProperty"||Mt==="linkToKeyProperty"||Mt==="linkFromPortIdProperty"||Mt==="linkToPortIdProperty"||Mt==="linkLabelKeysProperty"||Mt==="nodeIsGroupProperty"||Mt==="nodeGroupKeyProperty"||Mt==="nodeParentKeyProperty"||Mt==="linkCategoryProperty")&&(t.ja.lb||t.lm()):cy(t,h,Mt),t.ri=!0}else if(n===Ei||n===zi)Lx(t,i),t.ri=!0;else if(n===Co){(e==="FinishedUndo"||e==="FinishedRedo")&&(t.Aa("ChangedSelection"),bn(t)),o=t.Ka,e==="RolledBackTransaction"&&o.Ih(),t.Go=!0,t.dg(),t.ja.wi===0&&Ed(o),e==="CommittedTransaction"&&t.ja.Dz&&(t.dh=Math.min(t.dh,t.ja.wj-1));var Dt=i.KF;Dt&&(rg(t),t.Yx.clear()),!t.Jz&&Dt&&(t.Jz=!0,s.setTimeout(function(){t.Xa.standardMouseOver(),t.Jz=!1},10))}}finally{t.Ua=!0}}}}function cy(t,i,n){if(typeof n=="string"){var e=t.wh(i);if(e!==null)e.Jb(n),t.$ instanceof Lt&&(e=t.Yf(i),e!==null&&e.Jb(n));else{for(var e=null,o=t.Mm.i;o.next();){for(var r=o.value,h=0;h<r.length;h++){var l=r[h].YH(i);l!==null&&(e===null&&(e=s.Za()),e.push(l))}if(e!==null)break}if(e!==null){for(o=0;o<e.length;o++)e[o].Jb(n);s.ra(e)}}i===t.$.Tk&&t.LG(n)}}s.defineProperty(x,{Re:"skipsModelSourceBindings"},function(){return this.UD},function(t){this.UD=t}),s.defineProperty(x,{fo:null},function(){return this.Vz},function(t){this.Vz=t});function Lx(t,i){var n=i.Fc===Ei,e=n?i.Fj:i.Gj,o=n?i.newValue:i.oldValue,r=t.Mm.ka(i.object);if(Array.isArray(r))for(var h=0;h<r.length;h++){var l=r[h];if(n)Ug(l,o,e);else{var u=e;if(!(0>u)){var f=u;wf(l)&&f++,l.rf(f,!0),Jg(l,f,u)}}}}function vy(t,i){var n=i.hk;if(s.isArray(n)){var e=t.Mm.ka(n);if(e===null)e=[],e.push(i),t.Mm.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function dy(t,i){var n=i.hk;if(s.isArray(n)){var e=t.Mm.ka(n);if(e!==null){for(var o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1),e.length===0&&t.Mm.remove(n);break}}}}function sg(t,i){for(var n=i.xa.n,e=n.length,o=0;o<e;o++){var r=n[o];r instanceof oi&&gy(t,r)}}function gy(t,i){var n=i.element;if(n!==null&&n instanceof HTMLImageElement){var e=i.Ve;if(e!==null&&(e.No instanceof Event&&i.We!==null&&i.We(i,e.No),e.Zr===!0&&(i.ki!==null&&i.ki(i,e.Qz),i.g!==null&&i.g.Mz.add(i))),n=n.src,e=t.kp.ka(n),e===null)e=[],e.push(i),t.kp.add(n,e);else{for(n=0;n<e.length;n++)if(e[n]===i)return;e.push(i)}}}function hg(t,i){for(var n=i.xa.n,e=n.length,o=0;o<e;o++){var r=n[o];r instanceof oi&&my(t,r)}}function my(t,i){var n=i.element;if(n!==null&&n instanceof HTMLImageElement){var n=n.src,e=t.kp.ka(n);if(e!==null){for(var o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1),e.length===0&&(t.kp.remove(n),_y(n));break}}}}x.prototype.rebuildParts=x.prototype.lm=function(){for(var t=this.nB.i;t.next();){var i=t.value,n=t.key;(!i.he()||i instanceof q)&&s.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(t=this.MA.i;t.next();)i=t.value,n=t.key,i instanceof q||s.k('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(t=this.bB.i;t.next();)i=t.value,n=t.key,i instanceof k||s.k('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(t=s.Za(),i=this.selection.i;i.next();)(n=i.value.data)&&t.push(n);for(var i=s.Za(),e=this.em.i;e.next();)(n=e.value.data)&&i.push(n);for(n=s.Za(),e=this.ig.i;e.next();){var o=e.value;o.data!==null&&(n.push(o.data),n.push(o.location))}for(e=this.links.i;e.next();)o=e.value,o.data!==null&&(n.push(o.data),n.push(o.location));for(e=this.Hj.i;e.next();)o=e.value,o.data!==null&&(n.push(o.data),n.push(o.location));for(e=this.$,e instanceof K&&Ia(this,e.Ah),Ia(this,e.Pg),xy(this,e.Pg),e instanceof K&&wy(this,e.Ah),e=0;e<t.length;e++)o=this.wh(t[e]),o!==null&&(o.jb=!0);for(e=0;e<i.length;e++)o=this.wh(i[e]),o!==null&&(o.Og=!0);for(e=0;e<n.length;e+=2)o=this.wh(n[e]),o!==null&&(o.location=n[e+1]);s.ra(t),s.ra(i),s.ra(n)};function xy(t,i){if(i!==null){for(var n=t.$,e=n instanceof K,o=s.cb(i),r=0;r<o;r++){var h=s.Ba(i,r);n.Le(h)?lg(t,h,!1):e&&My(t,h)}if(e||n instanceof Lt){for(r=0;r<o;r++)h=s.Ba(i,r),n.Le(h)&&pg(t,h);if(e)for(n=t.links;n.next();)yu(n.value)}Sy(t,!1)}}function lg(t,i,n){if(i!=null&&!t.ja.lb&&!t.Ii.contains(i)){n===void 0&&(n=!0);var e=t.IA(i),o=ag(t,i,e);if(o!==null&&(Xe(o),o=o.copy(),o!==null)){var r=t.Re;t.Re=!0,o.Ci=e,o.Zd=i,t.add(o),o.Zd=null,o.data=i,n&&pg(t,i),t.Re=r}}}x.prototype.IA=function(t){return this.$.IA(t)};var ug=!1,fg=!1;function ag(t,i,n){var e=!1,o=t.$;return o instanceof K&&(e=o.WA(i)),e?(i=t.MA.ka(n),i===null&&(i=t.MA.ka(""),i===null&&(fg||(fg=!0,s.trace('No Group template found for category "'+n+'"'),s.trace("  Using default group template")),i=t.LC))):(i=t.nB.ka(n),i===null&&(i=t.nB.ka(""),i===null&&(ug||(ug=!0,s.trace('No Node template found for category "'+n+'"'),s.trace("  Using default node template")),i=t.NC))),i}function pg(t,i){var n=t.$;if(n instanceof K||n instanceof Lt){var e=n.qb(i);if(e!==void 0){var o=ca(n,e),r=t.wh(i);if(o!==null&&r!==null){for(o=o.i;o.next();){var h=o.value;if(n instanceof K){var l=n;if(l.Le(h)){if(r instanceof q&&l.Dn(h)===e){var u=r,h=t.wh(h);h!==null&&(h.Ca=u)}}else{var f=t.Yf(h);if(f!==null&&r instanceof I&&(u=r,l.cm(h)===e&&(f.V=u),l.dm(h)===e&&(f.Z=u),h=l.Nk(h),s.isArray(h))){for(l=0;l<s.cb(h);l++)if(s.Ba(h,l)===e){u.Xb=f;break}}}}else n instanceof Lt&&(f=n,f.Le(h)&&r instanceof I&&(u=r,f.Fn(h)===e&&(h=t.Fx(h),La(t,u,h))))}uo(n,e)}n instanceof K?(n=n.Dn(i),n!==void 0&&(n=t.Oe(n),n instanceof q&&(r.Ca=n))):n instanceof Lt&&(n=n.Fn(i),n!==void 0&&r instanceof I&&(u=r,r=t.Oe(n),La(t,r,u)))}}}function La(t,i,n){if(i!==null&&n!==null){var e=t.Va.PF,o=i,r=n;if(t.Vd){for(i=r.je;i.next();)if(i.value.Z===r)return}else for(o=n,r=i,i=o.je;i.next();)if(i.value.V===o)return;if((e===null||!of(e,o,r,null,!0))&&(e=t.bq(n.data),i=Aa(t,e),i!==null&&(Xe(i),i=i.copy(),i!==null))){var h=t.Re;t.Re=!0,i.Ci=e,i.Zd=n.data,i.V=o,i.Z=r,t.add(i),i.Zd=null,i.data=n.data,t.Re=h}}}function wy(t,i){if(i!==null){for(var n=s.cb(i),e=0;e<n;e++){var o=s.Ba(i,e);My(t,o)}Sy(t,!1)}}function My(t,i){if(i!=null&&!t.ja.lb&&!t.Sj.contains(i)){var n=t.bq(i),e=Aa(t,n);if(e!==null&&(Xe(e),e=e.copy(),e!==null)){var o=t.Re;t.Re=!0,e.Ci=n,e.Zd=i;var n=t.$,r=n.eI(i);if(r!==""&&(e.Ng=r),r=n.cm(i),r!==void 0&&(r=t.Oe(r),r instanceof I&&(e.V=r)),r=n.iI(i),r!==""&&(e.Jh=r),r=n.dm(i),r!==void 0&&(r=t.Oe(r),r instanceof I&&(e.Z=r)),n=n.Nk(i),s.isArray(n))for(var r=s.cb(n),h=0;h<r;h++){var l=s.Ba(n,h),l=t.Oe(l);l!==null&&(l.Xb=e)}t.add(e),e.Zd=null,e.data=i,t.Re=o}}}x.prototype.bq=function(t){var i=this.$,n="";return i instanceof K?n=i.bq(t):i instanceof Lt&&(n=i.gI(t)),n};var yg=!1;function Aa(t,i){var n=t.bB.ka(i);return n===null&&(n=t.bB.ka(""),n===null&&(yg||(yg=!0,s.trace('No Link template found for category "'+i+'"'),s.trace("  Using default link template")),n=t.MC)),n}function Ia(t,i){for(var n=s.cb(i),e=0;e<n;e++){var o=s.Ba(i,e);Py(t,o)}}function Py(t,i){if(i!=null){var n=t.wh(i);if(n!==null){fy(t,n,!1);var e=t.$;if(e instanceof K&&n instanceof I){var o=n,n=e.qb(o.data);if(n!==void 0){for(var r=o.je;r.next();)Ye(e,n,r.value.data);if(o.Df&&(r=o.Xb,r!==null&&Ye(e,n,r.data)),o instanceof q)for(o=o.hc;o.next();)r=o.value.data,e.Le(r)&&Ye(e,n,r)}}else if(e instanceof Lt&&n instanceof I){if(o=n,n=e.qb(o.data),r=t.Yf(o.data),r!==null){r.jb=!1,r.Og=!1;var h=r.layer;if(h!==null){var l=h.rf(-1,r,!1);0<=l&&t.bd(zi,"parts",h,r,null,l,null),l=r.Tx,l!==null&&l(r,h,null)}}for(r=t.Vd,o=o.je;o.next();)h=o.value,h=(r?h.Z:h.V).data,e.Le(h)&&Ye(e,n,h)}}}}x.prototype.findPartForKey=x.prototype.ZH=function(t){if(t==null)return null;var i=this.$.we(t);return i!==null?this.Ii.ka(i):this.$ instanceof K&&(i=this.$.Zp(t),i!==null)?this.Sj.ka(i):null},x.prototype.findNodeForKey=x.prototype.Oe=function(t){return t==null||(t=this.$.we(t),t===null)?null:(t=this.Ii.ka(t),t instanceof I?t:null)},x.prototype.findPartForData=x.prototype.wh=function(t){if(t===null)return null;var i=this.Ii.ka(t);return i!==null?i:i=this.Sj.ka(t)},x.prototype.findNodeForData=x.prototype.Fx=function(t){return t===null?null:(t=this.Ii.ka(t),t instanceof I?t:null)},x.prototype.findLinkForData=x.prototype.Yf=function(t){return t===null?null:this.Sj.ka(t)},x.prototype.findNodesByExample=function(t){for(var i=new R(I),n=this.ip.i;n.next();){var e=n.value,o=e.data;if(o!==null)for(var r=0;r<arguments.length;r++){var h=arguments[r];if(s.Pa(h)&&Ty(this,o,h)){i.add(e);break}}}return i.i},x.prototype.findLinksByExample=function(t){for(var i=new R(k),n=this.bp.i;n.next();){var e=n.value,o=e.data;if(o!==null)for(var r=0;r<arguments.length;r++){var h=arguments[r];if(s.Pa(h)&&Ty(this,o,h)){i.add(e);break}}}return i.i};function Ty(t,i,n){for(var e in n){var o=i[e],r=n[e];if(s.isArray(r)){if(!s.isArray(o)||o.length<r.length)return!1;for(var h=0;h<o.length;h++){var l=o[h],u=r[h];if(u!==void 0&&!cg(t,l,u))return!1}}else if(!cg(t,o,r))return!1}return!0}function cg(t,i,n){if(typeof n=="function"){if(!n(i))return!1}else if(n instanceof RegExp){if(!i||!n.test(i.toString()))return!1}else if(s.Pa(i)&&s.Pa(n)){if(!Ty(t,i,n))return!1}else if(i!==n)return!1;return!0}s.defineProperty(x,{AL:"nodeTemplate"},function(){return this.bj.ka("")},function(t){var i=this.bj.ka("");i!==t&&(s.G(t,L,x,"nodeTemplate"),this.bj.add("",t),this.h("nodeTemplate",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{nB:"nodeTemplateMap"},function(){return this.bj},function(t){var i=this.bj;i!==t&&(s.G(t,tt,x,"nodeTemplateMap"),this.bj=t,this.h("nodeTemplateMap",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{eL:"groupTemplate"},function(){return this.ql.ka("")},function(t){var i=this.ql.ka("");i!==t&&(s.G(t,q,x,"groupTemplate"),this.ql.add("",t),this.h("groupTemplate",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{MA:"groupTemplateMap"},function(){return this.ql},function(t){var i=this.ql;i!==t&&(s.G(t,tt,x,"groupTemplateMap"),this.ql=t,this.h("groupTemplateMap",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{pL:"linkTemplate"},function(){return this.jk.ka("")},function(t){var i=this.jk.ka("");i!==t&&(s.G(t,k,x,"linkTemplate"),this.jk.add("",t),this.h("linkTemplate",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{bB:"linkTemplateMap"},function(){return this.jk},function(t){var i=this.jk;i!==t&&(s.G(t,tt,x,"linkTemplateMap"),this.jk=t,this.h("linkTemplateMap",i,t),this.ja.lb||this.lm())}),s.defineProperty(x,{CI:null},function(){return this.fh},function(t){this.fh=t}),s.defineProperty(x,{ef:"isMouseCaptured"},function(){return this.pD},function(t){var i=this.zb;i!==null&&(t?(this.N.bubbles=!1,this.Vy?(i.removeEventListener("pointermove",this.tq,!1),i.removeEventListener("pointerdown",this.sq,!1),i.removeEventListener("pointerup",this.vq,!1),i.removeEventListener("pointerout",this.uq,!1),Q.addEventListener("pointermove",this.tq,!0),Q.addEventListener("pointerdown",this.sq,!0),Q.addEventListener("pointerup",this.vq,!0),Q.addEventListener("pointerout",this.uq,!0)):(i.removeEventListener("mousemove",this.Sn,!1),i.removeEventListener("mousedown",this.Rn,!1),i.removeEventListener("mouseup",this.Un,!1),i.removeEventListener("mouseout",this.Tn,!1),Q.addEventListener("mousemove",this.Sn,!0),Q.addEventListener("mousedown",this.Rn,!0),Q.addEventListener("mouseup",this.Un,!0),Q.addEventListener("mouseout",this.Tn,!0)),i.removeEventListener("wheel",this.Vn,!1),Q.addEventListener("wheel",this.Vn,!0),Q.addEventListener("selectstart",this.preventDefault,!1)):(this.Vy?(Q.removeEventListener("pointermove",this.tq,!0),Q.removeEventListener("pointerdown",this.sq,!0),Q.removeEventListener("pointerup",this.vq,!0),Q.removeEventListener("pointerout",this.uq,!0),i.addEventListener("pointermove",this.tq,!1),i.addEventListener("pointerdown",this.sq,!1),i.addEventListener("pointerup",this.vq,!1),i.addEventListener("pointerout",this.uq,!1)):(Q.removeEventListener("mousemove",this.Sn,!0),Q.removeEventListener("mousedown",this.Rn,!0),Q.removeEventListener("mouseup",this.Un,!0),Q.removeEventListener("mouseout",this.Tn,!0),i.addEventListener("mousemove",this.Sn,!1),i.addEventListener("mousedown",this.Rn,!1),i.addEventListener("mouseup",this.Un,!1),i.addEventListener("mouseout",this.Tn,!1)),Q.removeEventListener("wheel",this.Vn,!0),Q.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("wheel",this.Vn,!1)),this.pD=t)}),s.defineProperty(x,{position:"position"},function(){return this.ab},function(t){var i=this.ab;if(!i.L(t)){s.G(t,D,x,"position");var n=this.sb.copy();if(t=t.copy(),!this.Wc&&this.zb!==null){this.Wc=!0;var e=this.scale;sy(this,t,this.Nd,this.Db/e,this.Cb/e,this.Dm,!1),this.Wc=!1}this.ab=t.S(),t=this.Ka,t.sc&&Gd(t,i,this.ab),this.Wc||this.Pu(n,this.sb,this.rb,this.rb,!1)}}),s.defineProperty(x,{uI:"initialPosition"},function(){return this.Yv},function(t){this.Yv.L(t)||(s.G(t,D,x,"initialPosition"),this.Yv=t.S())}),s.defineProperty(x,{vI:"initialScale"},function(){return this.Zv},function(t){this.Zv!==t&&(s.j(t,"number",x,"initialScale"),this.Zv=t)}),s.defineProperty(x,{Gn:"grid"},function(){return this.td===null&&Ud(this),this.td},function(t){var i=this.td;if(i!==t){i===null&&(Ud(this),i=this.td),s.G(t,A,x,"grid"),t.type!==Yh&&s.k("Diagram.grid must be a Panel of type Panel.Grid");var n=i.R;n!==null&&n.remove(i),this.td=t,t.name="GRID",n!==null&&n.add(t),Kr(this),this.oa(),this.h("grid",i,t)}}),s.u(x,{sb:"viewportBounds"},function(){var t=this.eA;if(this.zb===null)return t;var i=this.ab,n=this.rb;return t.m(i.x,i.y,Math.max(this.Db,0)/n,Math.max(this.Cb,0)/n),t}),s.defineProperty(x,{gF:"fixedBounds"},function(){return this.Qv},function(t){var i=this.Qv;i.L(t)||(s.G(t,O,x,"fixedBounds"),t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||s.k("fixedBounds width/height must not be Infinity"),this.Qv=t=t.S(),this.Gc(),this.h("fixedBounds",i,t))}),s.defineProperty(x,{ty:"scrollMargin"},function(){return this.Hw},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"scrollMargin");var i=this.Hw;i.L(t)||(this.Hw=t=t.S(),this.h("scrollMargin",i,t),this.yq())}),s.defineProperty(x,{uy:"scrollMode"},function(){return this.Iw},function(t){var i=this.Iw;i!==t&&(s.ob(t,x,x,"scrollMode"),this.Iw=t,t===Uh&&Ko(this,!1),this.h("scrollMode",i,t),this.yq())}),s.defineProperty(x,{DJ:"scrollsPageOnFocus"},function(){return this.Lw},function(t){var i=this.Lw;i!==t&&(s.j(t,"boolean",x,"scrollsPageOnFocus"),this.Lw=t,this.h("scrollsPageOnFocus",i,t))}),s.defineProperty(x,{aG:"positionComputation"},function(){return this.Cw},function(t){var i=this.Cw;i!==t&&(t!==null&&s.j(t,"function",x,"positionComputation"),this.Cw=t,Ko(this,!1),this.h("positionComputation",i,t))}),s.defineProperty(x,{mG:"scaleComputation"},function(){return this.Ew},function(t){var i=this.Ew;i!==t&&(t!==null&&s.j(t,"function",x,"scaleComputation"),this.Ew=t,_d(this,this.scale,this.scale),this.h("scaleComputation",i,t))}),s.u(x,{Nd:"documentBounds"},function(){return this.Jv});function Wl(t,i){t.ck=!1;var n=t.Jv;n.L(i)||(i=i.S(),t.Jv=i,Ko(t,!1),t.Aa("DocumentBoundsChanged",null,n.copy()),bs(t))}s.defineProperty(x,{$A:"isVirtualized"},function(){return this.fw},function(t){var i=this.fw;i!==t&&(s.j(t,"boolean",x,"isVirtualized"),this.fw=t,this.h("isVirtualized",i,t))}),s.defineProperty(x,{scale:"scale"},function(){return this.rb},function(t){var i=this.rb;s.Ad(t,x,"scale"),i!==t&&_d(this,i,t)}),s.defineProperty(x,{Tl:"autoScale"},function(){return this.Am},function(t){var i=this.Am;i!==t&&(s.ob(t,x,x,"autoScale"),this.Am=t,this.h("autoScale",i,t),t!==De&&Ko(this,!1))}),s.defineProperty(x,{hL:"initialAutoScale"},function(){return this.ul},function(t){var i=this.ul;i!==t&&(s.ob(t,x,x,"initialAutoScale"),this.ul=t,this.h("initialAutoScale",i,t))}),s.defineProperty(x,{wI:"initialViewportSpot"},function(){return this.$v},function(t){var i=this.$v;i!==t&&(s.G(t,P,x,"initialViewportSpot"),t.Zc()||s.k("initialViewportSpot must be a specific Spot: "+t),this.$v=t,this.h("initialViewportSpot",i,t))}),s.defineProperty(x,{tI:"initialDocumentSpot"},function(){return this.Xv},function(t){var i=this.Xv;i!==t&&(s.G(t,P,x,"initialDocumentSpot"),t.Zc()||s.k("initialViewportSpot must be a specific Spot: "+t),this.Xv=t,this.h("initialDocumentSpot",i,t))}),s.defineProperty(x,{Ch:"minScale"},function(){return this.qw},function(t){s.Ad(t,x,"minScale");var i=this.qw;i!==t&&(0<t?(this.qw=t,this.h("minScale",i,t),t>this.scale&&(this.scale=t)):s.Fa(t,"> 0",x,"minScale"))}),s.defineProperty(x,{Bh:"maxScale"},function(){return this.ow},function(t){s.Ad(t,x,"maxScale");var i=this.ow;i!==t&&(0<t?(this.ow=t,this.h("maxScale",i,t),t<this.scale&&(this.scale=t)):s.Fa(t,"> 0",x,"maxScale"))}),s.defineProperty(x,{zi:"zoomPoint"},function(){return this.$w},function(t){this.$w.L(t)||(s.G(t,D,x,"zoomPoint"),this.$w=t=t.S())}),s.defineProperty(x,{rA:"contentAlignment"},function(){return this.Dm},function(t){var i=this.Dm;i.L(t)||(s.G(t,P,x,"contentAlignment"),this.Dm=t=t.S(),this.h("contentAlignment",i,t),Ko(this,!1))}),s.defineProperty(x,{iL:"initialContentAlignment"},function(){return this.Qo},function(t){var i=this.Qo;i.L(t)||(s.G(t,P,x,"initialContentAlignment"),this.Qo=t=t.S(),this.h("initialContentAlignment",i,t))}),s.defineProperty(x,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"padding");var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.Gc(),this.h("padding",i,t))}),s.u(x,{ig:"nodes"},function(){return this.ip.i}),s.u(x,{links:"links"},function(){return this.bp.i}),s.u(x,{Hj:"parts"},function(){return this.xb.i}),x.prototype.findTopLevelNodesAndLinks=function(){for(var t=new R(L),i=this.ip.i;i.next();){var n=i.value;n.jq&&t.add(n)}for(i=this.bp.i;i.next();)n=i.value,n.jq&&t.add(n);return t.i},x.prototype.findTopLevelGroups=function(){return this.Ll.i},s.defineProperty(x,{Ub:"layout"},function(){return this.oe},function(t){var i=this.oe;i!==t&&(s.G(t,wt,x,"layout"),i!==null&&(i.g=null,i.group=null),this.oe=t,t.g=this,t.group=null,this.Pj=!0,this.h("layout",i,t),this.ye())}),x.prototype.layoutDiagram=function(t){bn(this),t&&Sy(this,!0),this.Go=!0,Zl(this)};function Sy(t,i){for(var n=t.Ll.i;n.next();)vg(t,n.value,i);t.Ub!==null&&(i?t.Ub.sf=!1:t.Ub.J())}function vg(t,i,n){if(i!==null){for(var e=i.fp.i;e.next();)vg(t,e.value,n);i.Ub!==null&&(n?i.Ub.sf=!1:i.Ub.J())}}function dg(t,i){if(t.Pj&&!t.gz){var n=t.Ua;t.Ua=!0;var e=t.ja.wi,o=t.Ub;try{e===0&&t.Ib("Layout");var r=t.Ka;1>=e&&!r.df&&!r.sc&&(i||r.Yn("Layout")),t.Pj=!1;for(var h=t.Ll.i;h.next();)gg(t,h.value,i,e);o.sf||(!i||o.JF||e===0?(o.doLayout(t),bn(t),o.sf=!0):t.Pj=!0)}finally{e===0&&t.Yc("Layout"),t.Pj=!o.sf,t.Ua=n}}}function gg(t,i,n,e){if(i!==null){for(var o=i.fp.i;o.next();)gg(t,o.value,n,e);o=i.Ub,o===null||o.sf||(!n||o.JF||e===0?(i.Wn=!i.location.I(),o.doLayout(i),i.J(tc),hy(t,i),o.sf=!0):t.Pj=!0)}}s.defineProperty(x,{Vd:"isTreePathToChildren"},function(){return this.ew},function(t){var i=this.ew;if(i!==t&&(s.j(t,"boolean",x,"isTreePathToChildren"),this.ew=t,this.h("isTreePathToChildren",i,t),!this.ja.lb))for(t=this.ig;t.next();)Sf(t.value)}),x.prototype.findTreeRoots=function(){for(var t=new E(I),i=this.ig;i.next();){var n=i.value;n.jq&&n.Bn()===null&&t.add(n)}return t.i},s.defineProperty(x,{VB:"treeCollapsePolicy"},function(){return this.Vw},function(t){var i=this.Vw;i!==t&&(t!==th&&t!==py&&t!==yy&&s.k("Unknown Diagram.treeCollapsePolicy: "+t),this.Vw=t,this.h("treeCollapsePolicy",i,t))}),s.defineProperty(x,{yh:null},function(){return this.hD},function(t){this.hD=t});function mg(t){function i(o){var r=o.toLowerCase(),h=new E("function");n.add(o,h),n.add(r,h),e.add(o,o),e.add(r,o)}var n=new tt("string",E),e=new tt("string","string");i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),t.iz=n,t.hz=e}function xg(t,i){var n=t.hz.ka(i);return n!==null?n:t.hz.ka(i.toLowerCase())}function ky(t,i){var n=t.iz.ka(i);return n!==null||(n=t.iz.ka(i.toLowerCase()),n!==null)?n:(s.k("Unknown DiagramEvent name: "+i),null)}x.prototype.addDiagramListener=x.prototype.ax=function(t,i){s.j(t,"string",x,"addDiagramListener:name"),s.j(i,"function",x,"addDiagramListener:listener");var n=ky(this,t);n!==null&&n.add(i)},x.prototype.removeDiagramListener=x.prototype.uB=function(t,i){s.j(t,"string",x,"removeDiagramListener:name"),s.j(i,"function",x,"addDiagramListener:listener");var n=ky(this,t);n!==null&&n.remove(i)},x.prototype.raiseDiagramEvent=x.prototype.Aa=function(t,i,n){var e=ky(this,t),o=new ar;if(o.g=this,t=xg(this,t),t!==null&&(o.name=t),i!==void 0&&(o.MB=i),n!==void 0&&(o.pB=n),i=e.length,i===1)e=e.fa(0),e(o);else if(i!==0)for(n=e.yc(),t=0;t<i;t++)e=n[t],e(o);return o.cancel};function wg(t){return t.Ka.df?!1:(t=t.Xa,t instanceof dt?!t.Sw||t.yI:!0)}x.prototype.isUnoccupied=x.prototype.lq=function(t,i){return i===void 0&&(i=null),Ny(this,!1,null,i).lq(t.x,t.y,t.width,t.height)},x.prototype.computeOccupiedArea=function(){return this.$A?this.sb.copy():this.ck?Yd(this):this.Nd.copy()};function Ny(t,i,n,e){if(t.Kd===null&&(t.Kd=new tl),t.Kd.su||t.Kd.group!==n||t.Kd.LB!==e){if(n===null){i=t.computeOccupiedArea(),i.Zf(100,100),t.Kd.initialize(i),i=s.vf();for(var o=t.ig;o.next();){var r=o.value,h=r.layer;h!==null&&h.visible&&!h.Hc&&Cy(t,r,e,i)}}else for(0<n.hc.count&&(i=t.computePartsBounds(n.hc,!1),i.Zf(20,20),t.Kd.initialize(i)),i=s.vf(),o=n.hc;o.next();)r=o.value,r instanceof I&&Cy(t,r,e,i);s.Bb(i),t.Kd.group=n,t.Kd.LB=e,t.Kd.su=!1}else i&&wc(t.Kd);return t.Kd}function Cy(t,i,n,e){if(i!==n){if(i.isVisible()&&i.lA&&!i.Df){n=i.getAvoidableRect(e),e=t.Kd.Op,i=t.Kd.Mp;for(var o=n.x+n.width,r=n.y+n.height,h=n.x;h<o;h+=e){for(var l=n.y;l<r;l+=i)pp(t.Kd,h,l);pp(t.Kd,h,r)}for(l=n.y;l<r;l+=i)pp(t.Kd,o,l);pp(t.Kd,o,r)}else if(i instanceof q)for(i=i.hc;i.next();)o=i.value,o instanceof I&&Cy(t,o,n,e)}}x.invalidatePositionArray=x.prototype.SA=function(t){this.Kd!==null&&!this.Kd.su&&(t===void 0&&(t=null),t===null||t.lA&&!t.Df)&&(this.Kd.su=!0)},x.prototype.simulatedMouseMove=function(t,i,n){if(Fi!==null){var e=Fi.g;n instanceof x||(n=null);var o=Vl;return n!==o&&(o!==null&&o!==e&&o.Va.ce!==null&&(yr(o),Fi.Mx=!1,o.Va.ce.doSimulatedDragLeave()),Vl=n,n!==null&&n!==e&&n.Va.ce!==null&&(ld(),o=n.Va.ce,Ws.contains(o)||Ws.add(o),n.Va.ce.doSimulatedDragEnter())),n===null||n===e||!n.AE||n.ib||!n.Kp?!1:(e=n.Va.ce,e!==null&&(t!==null?i=n.Nr(t):i===null&&(i=new D),n.Rb.ea=i,n.Rb.Ce=n.Dy(i),n.Rb.Hk=!1,n.Rb.up=!1,e.doSimulatedDragOver()),!0)}return!1},x.prototype.simulatedMouseUp=function(t,i,n,e){if(Fi!==null){e===null&&(e=i),i=Vl;var o=Fi.g;if(e!==i){if(i!==null&&i!==o&&i.Va.ce!==null)return yr(i),Fi.Mx=!1,i.Va.ce.doSimulatedDragLeave(),!1;Vl=e,e!==null&&e.Va.ce!==null&&(ld(),i=e.Va.ce,Ws.contains(i)||Ws.add(i),e.Va.ce.doSimulatedDragEnter())}if(e===null)return Fi.doCancel(),!0;if(e!==this)return t!==null&&(n=e.Nr(t)),e.Rb.ea=n,e.Rb.Ce=e.Dy(n),e.Rb.Hk=!1,e.Rb.up=!0,t=e.Va.ce,t!==null&&t.doSimulatedDrop(),t=Fi,t!==null&&(e=t.mayCopy(),t.Lf=e?"Copy":"Move",t.stopTool()),!0}return!1},s.defineProperty(x,{FK:"autoScrollInterval"},function(){return this.$q},function(t){var i=this.$q;s.Ad(t,x,"scale"),i!==t&&(this.$q=t,this.h("autoScrollInterval",i,t))}),s.defineProperty(x,{HE:"autoScrollRegion"},function(){return this.vv},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,x,"autoScrollRegion");var i=this.vv;i.L(t)||(this.vv=t=t.S(),this.Gc(),this.h("autoScrollRegion",i,t))}),x.prototype.doAutoScroll=x.prototype.AA=function(t){this.uv.assign(t),Pg(this,this.uv).Qc(this.position)?yr(this):Mg(this)};function Mg(t){t.so===-1&&(t.so=s.setTimeout(function(){if(t.so!==-1){yr(t);var i=t.N.event;if(i!==null){var n=Pg(t,t.uv);n.Qc(t.position)||(t.position=n,t.N.ea=t.UB(t.uv),n=Ql(i),t.simulatedMouseMove(i,null,n)||t.doMouseMove(),t.ck=!0,Wl(t,t.Nd.copy().Zg(t.computeBounds())),t.Fe=!0,t.dg(),Mg(t))}}},t.$q))}function yr(t){t.so!==-1&&(s.clearTimeout(t.so),t.so=-1)}function Pg(t,i){var n=t.position,e=t.HE;if(0>=e.top&&0>=e.left&&0>=e.right&&0>=e.bottom)return n;var r=t.sb,o=t.scale,r=s.lg(0,0,r.width*o,r.height*o),h=s.wb(0,0);if(i.x>=r.x&&i.x<r.x+e.left){var l=Math.max(t.Yu,1),l=l|0;h.x-=l,i.x<r.x+e.left/2&&(h.x-=l),i.x<r.x+e.left/4&&(h.x-=4*l)}else i.x<=r.x+r.width&&i.x>r.x+r.width-e.right&&(l=Math.max(t.Yu,1),l|=0,h.x+=l,i.x>r.x+r.width-e.right/2&&(h.x+=l),i.x>r.x+r.width-e.right/4&&(h.x+=4*l));return i.y>=r.y&&i.y<r.y+e.top?(l=Math.max(t.Zu,1),l|=0,h.y-=l,i.y<r.y+e.top/2&&(h.y-=l),i.y<r.y+e.top/4&&(h.y-=4*l)):i.y<=r.y+r.height&&i.y>r.y+r.height-e.bottom&&(l=Math.max(t.Zu,1),l|=0,h.y+=l,i.y>r.y+r.height-e.bottom/2&&(h.y+=l),i.y>r.y+r.height-e.bottom/4&&(h.y+=4*l)),h.Qc(Js)||(n=new D(n.x+h.x/o,n.y+h.y/o)),s.Bb(r),s.v(h),n}x.prototype.makeSvg=x.prototype.makeSVG=function(t){return t===void 0&&(t=new Bn),t.context="svg",t=Sg(this,t),t!==null?t.rm:null},x.prototype.makeImage=function(t){t===void 0&&(t=new Bn);var i=(t.document||document).createElement("img");return i.src=this.QI(t),i},x.prototype.makeImageData=x.prototype.QI=function(t){t===void 0&&(t=new Bn);var i=Sg(this,t);if(i!==null){var n=t.returnType,n=n===void 0?"string":n.toLowerCase();switch(n){case"imagedata":return i.Gk.getImageData(0,0,i.width,i.height);case"blob":if(i=i.Od,n=t.callback,typeof n!="function"){s.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if(typeof i.toBlob=="function")return i.toBlob(n,t.type,t.details),"toBlob";if(typeof i.msToBlob=="function")return n(i.msToBlob()),"msToBlob";n(null);break;default:return i.toDataURL(t.type,t.details)}}return""};var Tg=!1;function Sg(t,i){if(t.Ka.Ih(),t.dg(),t.zb===null)return null;typeof i!="object"&&s.k("properties argument must be an Object.");var n=!1,e=i.size||null,o=i.scale||null;i.scale!==void 0&&isNaN(i.scale)&&(o="NaN");var r=i.maxSize;i.maxSize===void 0&&(n=!0,r=i.context==="svg"?new lt(1/0,1/0):new lt(2e3,2e3));var h=i.position||null,l=i.parts||null,u=i.padding===void 0?1:i.padding,f=i.background||null,a=i.omitTemporary;a===void 0&&(a=!0);var p=i.document||document,y=i.elementFinished||null,c=i.showTemporary;c===void 0&&(c=!a),a=i.showGrid,a===void 0&&(a=c),e!==null&&isNaN(e.width)&&isNaN(e.height)&&(e=null),typeof u=="number"?u=new xt(u):u instanceof xt||s.k("MakeImage padding must be a Margin or a number."),u.left=Math.max(u.left,0),u.right=Math.max(u.right,0),u.top=Math.max(u.top,0),u.bottom=Math.max(u.bottom,0),t.hf.Ke(!0);var v=new Oo(null,p),d=v.Gk;if(!(e||o||l||h))return v.width=t.Db+Math.ceil(u.left+u.right),v.height=t.Cb+Math.ceil(u.top+u.bottom),i.context==="svg"?(d=new qu(v.Od,p,y),ja(t,d,u,new lt(v.width,v.height),t.rb,t.ab,l,f,c,a),d):(t.Cr=!1,ja(t,d,u,new lt(v.width,v.height),t.rb,t.ab,l,f,c,a),t.Cr=!0,v);var g=t.pb.tx,m=new D(0,0),w=t.Nd.copy();if(w.BG(t.padding),c)for(var M=!0,M=t.dc.n,S=M.length,F=0;F<S;F++){var C=M[F];if(C.visible&&C.Hc)for(var C=C.xb.n,G=C.length,H=0;H<G;H++){var U=C[H];U.XA&&U.isVisible()&&(U=U.U,U.I()&&w.Zg(U))}}if(m.x=w.x,m.y=w.y,l!==null){var X,M=!0,S=l.i;for(S.reset();S.next();)U=S.value,U instanceof L&&(C=U.layer,C!==null&&!C.visible||C!==null&&!c&&C.Hc||!U.isVisible()||(U=U.U,U.I()&&(M?(M=!1,X=U.copy()):X.Zg(U))));M&&(X=new O(0,0,0,0)),w.width=X.width,w.height=X.height,m.x=X.x,m.y=X.y}return h!==null&&h.I()&&(m=h,o||(o=g)),M=U=0,u!==null&&(U=u.left+u.right,M=u.top+u.bottom),F=S=0,e!==null&&(S=e.width,F=e.height,isFinite(S)&&(S=Math.max(0,S-U)),isFinite(F)&&(F=Math.max(0,F-M))),X=h=0,e!==null&&o!==null?(o==="NaN"&&(o=g),e.I()?(h=S,X=F):isNaN(F)?(h=S,X=w.height*o):(h=w.width*o,X=F)):e!==null?e.I()?(o=Math.min(S/w.width,F/w.height),h=S,X=F):isNaN(F)?(o=S/w.width,h=S,X=w.height*o):(o=F/w.height,h=w.width*o,X=F):o!==null?o==="NaN"&&r.I()?(o=Math.min((r.width-U)/w.width,(r.height-M)/w.height),o>g?(o=g,h=w.width,X=w.height):(h=r.width,X=r.height)):(h=w.width*o,X=w.height*o):(o=g,h=w.width,X=w.height),u!==null?(h+=U,X+=M):u=new xt(0),r!==null&&(e=r.width,r=r.height,i.context!=="svg"&&n&&!Tg&&(h>e||X>r)&&(s.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(X)+" vs 2000x2000) Consider increasing the max size."),Tg=!0),isNaN(e)&&(e=2e3),isNaN(r)&&(r=2e3),isFinite(e)&&(h=Math.min(h,e)),isFinite(r)&&(X=Math.min(X,r))),v.width=Math.ceil(h),v.height=Math.ceil(X),i.context==="svg"?(d=new qu(v.Od,p,y),ja(t,d,u,new lt(Math.ceil(h),Math.ceil(X)),o,m,l,f,c,a),d):(t.Cr=!1,ja(t,d,u,new lt(Math.ceil(h),Math.ceil(X)),o,m,l,f,c,a),t.Cr=!0,v)}x.inherit=function(t,i){if(typeof t=="function"&&Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);s.j(t,"function",x,"inherit"),s.j(i,"function",x,"inherit"),i.fH&&s.k("Cannot inherit from "+s.pf(i)),s.La(t,i)};function jy(){this.aE=null,this.hH="63ad05bbe23a1786468a4c741b6d2",this.Ni=this.hH===this._tk?!0:null}jy.prototype.vm=function(t){if(t.hf.setTransform(t.wd,0,0,t.wd,0,0),this.Ni===null){var i="f",n=Q[s.Kg("76a715b2f73f148a")][s.Kg("72ba13b5")];if(t=s.Kg,this.Ni=!0,Q[t("7da7")]&&Q[t("7da7")][t("76a115b6ed251eaf4692")]){var e=Q[t("7da7")][t("76a115b6ed251eaf4692")],e=t(e).split(t("39e9"));if(!(6>e.length)){var o=t(e[1]).split(".");if(e[4]==="7da71ca0"){var r=t(s[t("6cae19")]).split(".");if(o[0]>r[0]||o[0]===r[0]&&o[1]>=r[1]){for(r=n[t("76ad18b4f73e")],o=n[t("73a612b6fb191d")](t("35e7"))+2;o<r;o++)i+=n[o];if(n=i[t("73a612b6fb191d")](t(e[2])),0>n&&t(e[2])!==t("7da71ca0ad381e90")&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),0>n&&(n=i[t("73a612b6fb191d")](t("76a715b2ef3e149757"))),(this.Ni=!(0<=n&&n<i[t("73a612b6fb191d")](t("35"))))&&(i=t(e[2]),i[0]==="#")){for(n=Q.document[t("79ba13b2f7333e8846865a7d00")]("div"),o=e[0].replace(/[A-Za-z]/g,"");4>o.length;)o+="9";if(o=o.substr(o.length-4),e=""+["gsh","gsf"][parseInt(o.substr(0,1),10)%2],e+=["Header","Background","Display","Feedback"][parseInt(o.substr(0,1),10)%4],n[t("79a417a0f0181a8946")]=e,Q.document[t("78a712aa")]){if(Q.document[t("78a712aa")][t("7bb806b6ed32388c4a875b")](n),o=Q[t("7dad0290ec3b0b91578e5b40007031bf")](n)[t("7dad0283f1390b81519f4645156528bf")](t("78a704b7e62456904c9b12701b6532a8")),Q.document[t("78a712aa")][t("68ad1bbcf533388c4a875b")](n),o){if(o.indexOf(parseInt(i[1]+i[2],16))!==-1&&o.indexOf(parseInt(i[3]+i[4],16))!==-1)this.Ni=!1;else if(s.xu||s.hq||s.iq||s.VA)for(e="."+e,o=0;o<document.styleSheets.length;o++){t=document.styleSheets[o].rules||document.styleSheets[o].cssRules;for(var h in t)if(e===t[h].selectorText){this.Ni=!1;break}}}}else this.Ni=null,this.Ni=!1}}}}}else{for(r=n[t("76ad18b4f73e")],o=n[t("73a612b6fb191d")](t("35e7"))+2;o<r;o++)i+=n[o];n=i[t("73a612b6fb191d")](t("7da71ca0ad381e90")),this.Ni=!(0<=n&&n<i[t("73a612b6fb191d")](t("35")))}}return 0<this.Ni&&this!==this.aE},jy.prototype.t=function(){this.aE=null};function Dy(t,i){i!=null||s.k("Diagram setup requires an argument DIV."),t.Ob!==null&&s.k("Diagram has already completed setup."),typeof i=="string"?t.Ob=Q.document.getElementById(i):i instanceof HTMLDivElement?t.Ob=i:s.k("No DIV or DIV id supplied: "+i),t.Ob===null&&s.k("Invalid DIV id; could not get element with id: "+i),t.Ob.aa!==void 0&&s.k("Invalid div id; div already has a Diagram associated with it."),Q.getComputedStyle(t.Ob,null).position==="static"&&(t.Ob.style.position="relative"),t.Ob.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.Ob.style["-ms-touch-action"]="none",t.Ob.innerHTML="",t.Ob.aa=t;var e=new Oo(t);e.Od.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",e.style!==void 0&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",Q.getComputedStyle(t.Ob,null).getPropertyValue("direction")==="rtl"&&(t.as=!0),e.style.zIndex="2",e.style.aM="none",e.style.webkitUserSelect="none",e.style.MozUserSelect="none"),t.Db=t.Ob.clientWidth||1,t.Cb=t.Ob.clientHeight||1,t.zb=e,t.hf=e.Gk;var n=t.hf;t.wd=t.computePixelRatio(),$d(t,t.Db,t.Cb),t.Lv=function(){return!0},t.Ob.insertBefore(e.Od,t.Ob.firstChild),e=new Oo(null),e.width=1,e.height=1,t.lz=e,t.YC=e.Gk;var e=s.createElement("div"),o=s.createElement("div");e.style.position="absolute",e.style.overflow="auto",e.style.width=t.Db+"px",e.style.height=t.Cb+"px",e.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ob.appendChild(e),e.appendChild(o),e.onscroll=Cx,e.onmousedown=Jd,e.ontouchstart=Jd,e.aa=t,e.dH=!0,e.eH=!0,t.Jw=e,t.kt=o,t.my=s.QE(function(){t.uk=null,t.oa()},300,!1),t.ZB=s.QE(function(){ry(t)},250,!1),t.preventDefault=function(r){return r.preventDefault(),!1},t.Sn=function(r){if(t.isEnabled){t.fh=!0;var h=t.xd;s.In&&h.Aj?(r.preventDefault(),r.simulated=!0,t.tt=r):(t.xd=t.Rb,t.Rb=h,Hh(t,t,r,h,!0),t.simulatedMouseMove(r,null,r.target.aa)||(t.doMouseMove(),t.Xa.isBeyondDragSize()&&(t.Vh=0),Uo(h,r)))}},t.Rn=function(r){if(t.isEnabled){t.fh=!0;var h=t.xd;s.In&&t.tt!==null?(t.tt=r,r.preventDefault()):s.In&&400>r.timeStamp-t.ik||t.fk?r.preventDefault():(t.xd=t.Rb,t.Rb=h,Hh(t,t,r,h,!0),h.Hk=!0,h.te=r.detail,(s.hq||s.iq)&&(r.timeStamp-t.ik<t.bA&&!t.Xa.isBeyondDragSize()?t.Vh++:t.Vh=1,t.ik=r.timeStamp,h.te=t.Vh),t.Pi=h,h.Ir.simulated===!0?(r.preventDefault(),r.simulated=!0):(Fi=null,t.doMouseDown(),t.Pi=t.Pi.copy(),r.button===1?r.preventDefault():Uo(h,r)))}},t.Un=function(r){if(t.isEnabled)if(t.fk&&r.button===2)r.preventDefault();else if(t.fk&&r.button===0&&(t.fk=!1),t.Bp)r.preventDefault();else{t.fh=!0;var h=t.xd;if(s.In){if(400>r.timeStamp-t.ik){r.preventDefault();return}t.ik=r.timeStamp}s.In&&t.tt!==null?(t.tt=null,r.preventDefault()):(t.xd=t.Rb,t.Rb=h,Hh(t,t,r,h,!0),h.up=!0,h.te=r.detail,(s.hq||s.iq)&&(h.te=t.Vh),h.bubbles=r.bubbles,h.Jf=Ql(r),t.simulatedMouseUp(r,null,new D,h.Jf)||(t.doMouseUp(),yr(t),Uo(h,r)))}},t.Vn=function(r){if(t.isEnabled){var h=t.xd;t.xd=t.Rb,t.Rb=h,Hh(t,t,r,h,!0),h.bubbles=!0;var l=0,u=0;r.deltaX!==void 0?(l=0<r.deltaX?1:-1,u=0<r.deltaY?1:-1,h.oi=Math.abs(r.deltaX)>Math.abs(r.deltaY)?-l:-u):r.wheelDeltaX!==void 0?(l=0<r.wheelDeltaX?-1:1,u=0<r.wheelDeltaY?-1:1,h.oi=Math.abs(r.wheelDeltaX)>Math.abs(r.wheelDeltaY)?-l:-u):h.oi=r.wheelDelta!==void 0?0<r.wheelDelta?1:-1:0,t.doMouseWheel(),Uo(h,r)}},t.Tn=function(){if(t.isEnabled){t.fh=!1;var r=t.Xa;r.cancelWaitAfter(),r.standardMouseOver()}},t.TB=function(r){if(t.isEnabled){t.Bp=!1,t.fk=!0;var h=qd(t,r,r.targetTouches[0],1<r.touches.length);t.doMouseDown(),Uo(h,r)}},t.SB=function(r){if(t.isEnabled){var h=null;0<r.targetTouches.length?h=r.targetTouches[0]:0<r.changedTouches.length&&(h=r.changedTouches[0]);var l=Qd(t,r,h,1<r.touches.length);t.simulatedMouseMove(h||r,null,l.Jf)||t.doMouseMove(),Uo(l,r)}},t.RB=function(r){if(t.isEnabled){if(t.Bp)r.preventDefault();else if(!(1<r.touches.length)){var h=null,l=null;0<r.targetTouches.length?l=r.targetTouches[0]:0<r.changedTouches.length&&(l=r.changedTouches[0]);var u=t.xd;if(t.xd=t.Rb,t.Rb=u,u.g=t,u.te=1,l!==null){h=Q.document.elementFromPoint(l.clientX,l.clientY),h!==null&&h.aa instanceof x&&h.aa!==t&&Kh(h.aa,l,u),Kh(t,l,u);var f=l.screenX,a=l.screenY,p=t.hw;r.timeStamp-t.ik<t.bA&&!(25<Math.abs(p.x-f)||25<Math.abs(p.y-a))?t.Vh++:t.Vh=1,u.te=t.Vh,t.ik=r.timeStamp,t.hw.m(f,a)}f=0,r.ctrlKey&&(f+=1),r.altKey&&(f+=2),r.shiftKey&&(f+=4),r.metaKey&&(f+=8),u.md=f,u.button=0,u.buttons=1,u.Hk=!1,u.up=!0,u.oi=0,u.vc=!1,u.bubbles=!1,u.event=r,u.timestamp=Date.now(),u.Jf=h===null?Ql(r):h.aa?h.aa:null,u.Be=null,t.simulatedMouseUp(l||r,null,new D,u.Jf)||t.doMouseUp(),Uo(u,r),t.fk=!1}}},t.sq=function(r){if(t.isEnabled){t.fh=!0;var h=t.Nz;h[r.pointerId]===void 0&&(h[r.pointerId]=r);var h=t.lp,l=!1;if(h[0]!==null&&h[0].pointerId===r.pointerId)h[0]=r;else if(h[1]!==null&&h[1].pointerId===r.pointerId)h[1]=r,l=!0;else if(h[0]===null)h[0]=r;else if(h[1]===null)h[1]=r,l=!0;else{r.preventDefault();return}(r.pointerType==="touch"||r.pointerType==="pen")&&(t.Bp=!1,t.fk=!0),h=qd(t,r,r,l),r.pointerType!=="touch"&&(h.button=r.button,r.buttons===void 0||s.xu||(h.buttons=r.buttons),s.zh&&r.button===0&&r.ctrlKey&&(h.button=2)),t.doMouseDown(),r.button===1?r.preventDefault():Uo(h,r)}},t.tq=function(r){if(t.isEnabled){t.fh=!0;var h=t.lp;if(h[0]!==null&&h[0].pointerId===r.pointerId)h[0]=r;else{if(h[1]!==null&&h[1].pointerId===r.pointerId){h[1]=r;return}if(h[0]===null)h[0]=r;else return}h[0].pointerId===r.pointerId&&(h=Qd(t,r,r,h[1]!==null),r.pointerType!=="touch"&&(h.button=r.button,r.buttons===void 0||s.xu||(h.buttons=r.buttons),s.zh&&r.button===0&&r.ctrlKey&&(h.button=2)),t.simulatedMouseMove(r,null,h.Jf)||(t.doMouseMove(),Uo(h,r)))}},t.vq=function(r){if(t.isEnabled){t.fh=!0;var h=r.pointerType==="touch"||r.pointerType==="pen",l=t.Nz;if(h&&t.Bp)delete l[r.pointerId],r.preventDefault();else if(l=t.lp,l[0]!==null&&l[0].pointerId===r.pointerId){l[0]=null,l=t.xd,t.xd=t.Rb,t.Rb=l;var u=Q.document.elementFromPoint(r.clientX,r.clientY);u!==null&&u.aa instanceof x&&u.aa!==t&&Kh(u.aa,r,l),Kh(t,r,l),l.g=t;var f=t.hw,a=h?25:10;r.timeStamp-t.ik<t.bA&&!(Math.abs(f.x-r.screenX)>a||Math.abs(f.y-r.screenY)>a)?t.Vh++:t.Vh=1,l.te=t.Vh,t.ik=r.timeStamp,t.hw.m(r.screenX,r.screenY),f=0,r.ctrlKey&&(f+=1),r.altKey&&(f+=2),r.shiftKey&&(f+=4),r.metaKey&&(f+=8),l.md=f,l.button=r.button,r.buttons===void 0||s.xu||(l.buttons=r.buttons),s.zh&&r.button===0&&r.ctrlKey&&(l.button=2),l.Hk=!1,l.up=!0,l.oi=0,l.vc=!1,l.bubbles=!0,l.event=r,l.timestamp=Date.now(),l.Jf=u===null?Ql(r):u.aa?u.aa:null,l.Be=null,t.simulatedMouseUp(r,null,new D,l.Jf)||(t.doMouseUp(),yr(t),Uo(l,r),h&&(t.fk=!1))}else l[1]!==null&&l[1].pointerId===r.pointerId&&(l[1]=null)}},t.uq=function(r){if(t.isEnabled){t.fh=!1;var h=t.Nz;h[r.pointerId]&&delete h[r.pointerId],h=t.lp,h[0]!==null&&h[0].pointerId===r.pointerId&&(h[0]=null),h[1]!==null&&h[1].pointerId===r.pointerId&&(h[1]=null),r.pointerType!=="touch"&&r.pointerType!=="pen"&&(r=t.Xa,r.cancelWaitAfter(),r.standardMouseOver())}},n.Ke(!0),Nx(t)}function kg(t){1<arguments.length&&s.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),x.call(this,t),this.Rt=!0,this.Rl=!1,this.ib=!0,this.rA=lr,this.Ub=new Et}s.La(kg,x),s.ga("Palette",kg);function Lo(t){1<arguments.length&&s.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),x.call(this,t),this.Ka.isEnabled=!1,this.Wc=!0,this.pk=null,this.Mv=!0,this.JJ("drawShadows",!1);var i=new L,n=new Y;n.stroke="magenta",n.mb=2,n.fill="transparent",n.name="BOXSHAPE",i.nm=!0,i.BB="BOXSHAPE",i.cB="BOXSHAPE",i.kG="BOXSHAPE",i.cursor="move",i.add(n),this.Bm=i,n=new vt,n.type=eh,n.Gf=kt;var e=new nn;e.ff=!0,n.add(e),e=new Y,e.qh=kt,e.Fb="Rectangle",e.Da=new lt(64,64),e.cursor="se-resize",e.alignment=$i,n.add(e),i.iG=n,this.nn=this.Ck=!1,this.Bf=this.Tt=!0,this.HE=new xt(0,0,0,0),this.Xz=new Oo(null),this.gH=this.Xz.Gk,this.Va.ce=new pf,this.Va.lG=new Fy;var o=this;this.click=function(){var r=o.pk;if(r!==null){var h=r.sb,l=o.N.ea;r.position=new D(l.x-h.width/2,l.y-h.height/2)}},this.XF=function(){Ba(o)},this.WF=function(){o.pk!==null&&(o.Gc(),o.oa())},this.Tl=Xl,this.Wc=!1}s.La(Lo,x),s.ga("Overview",Lo);function Ax(t){t.Wc||t.$d||t.Tf!==!1||(t.Tf=!0,requestAnimationFrame(function(){if(t.Tf&&!t.$d&&(t.Tf=!1,t.Ob!==null)){if(t.$d=!0,bn(t),t.Nd.I()||Wl(t,t.computeBounds()),t.Ob===null&&s.k("No div specified"),t.zb===null&&s.k("No canvas specified"),t.Fe){var i=t.pk;if(i!==null&&!i.Ka.df&&!i.Ka.sc){var i=t.hf,n=t.Xz;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.zb.width,t.zb.height),i.drawImage(n.Od,0,0),n=t.jd,n.reset(),t.scale!==1&&n.scale(t.scale),t.position.x===0&&t.position.y===0||n.translate(-t.position.x,-t.position.y),i.scale(t.wd,t.wd),i.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var n=t.dc.n,e=n.length,o=0;o<e;o++)n[o].ve(i,t);t.vl=!1,t.Fe=!1}}t.$d=!1}}))}Lo.prototype.computePixelRatio=function(){return 1},Lo.prototype.ve=function(){if(this.Ob===null&&s.k("No div specified"),this.zb===null&&s.k("No canvas specified"),this.Fe){var t=this.pk;if(t!==null&&!t.Ka.df){Da(this);var n=t.Gn;(n!==null&&n.visible&&isNaN(n.width)||isNaN(n.height))&&Kr(t);var i=this.zb,n=this.hf,e=this.Xz,o=this.gH;e.width=i.width,e.height=i.height,n.Ke(!0),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),e=this.jd,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),n.scale(this.wd,this.wd),n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=this.Mv,r=this.sb,h=t.dc.n,l=h.length,t=0;t<l;t++){var u=h[t],f=n,a=r,p=e;if(u.visible&&u.Dc!==0&&(p===void 0&&(p=!0),p||!u.Hc)){u.Dc!==1&&(f.globalAlpha=u.Dc);for(var p=this.scale,u=u.xb.n,y=u.length,c=0;c<y;c++){var v=u[c],d=v.U;d.$f(a)&&(1<d.width*p||1<d.height*p?v.ve(f,this):Tf(v,f))}f.globalAlpha=1}}for(o.drawImage(i.Od,0,0),i=this.dc.n,o=i.length,t=0;t<o;t++)i[t].ve(n,this);this.Fe=this.vl=!1}}},s.defineProperty(Lo,{oB:"observed"},function(){return this.pk},function(t){var i=this.pk;t!==null&&s.G(t,x,Lo,"observed"),t instanceof Lo&&s.k("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(i!==null&&(this.remove(this.th),i.uB("ViewportBoundsChanged",this.XF),i.uB("DocumentBoundsChanged",this.WF),i.zw.remove(this)),this.pk=t,t!==null&&(t.ax("ViewportBoundsChanged",this.XF),t.ax("DocumentBoundsChanged",this.WF),t.zw.add(this),this.add(this.th),Ba(this)),this.Gc(),this.h("observed",i,t))}),s.defineProperty(Lo,{th:"box"},function(){return this.Bm},function(t){var i=this.Bm;i!==t&&(this.Bm=t,this.remove(i),this.add(this.Bm),Ba(this),this.h("box",i,t))}),s.defineProperty(Lo,{bL:"drawsTemporaryLayers"},function(){return this.Mv},function(t){this.Mv!==t&&(this.Mv=t,this.yq())});function Ba(t){var i=t.th;if(i!==null){var n=t.pk;if(n!==null){t.Fe=!0;var n=n.sb,e=i.Fq,o=s.tm();o.m(n.width,n.height),e.Da=o,s.Lk(o),t=2/t.scale,e instanceof Y&&(e.mb=t),i.location=new D(n.x-t/2,n.y-t/2)}}}Lo.prototype.computeBounds=function(){var t=this.pk;return t===null?F0:t.Nd},Lo.prototype.yF=function(){this.Fe!==!0&&(this.Fe=!0,Ax(this))},Lo.prototype.Pu=function(t,i,n,e,o){this.Wc||(cs(this),this.oa(),bs(this),this.Gc(),Ba(this),this.ph.scale=n,this.ph.position.x=t.x,this.ph.position.y=t.y,this.ph.bounds.set(t),this.ph.isScroll=o,this.Aa("ViewportBoundsChanged",this.ph,t))};function pf(){dt.call(this),this.El=null}s.La(pf,dt),pf.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(t===null||!t.Rl||!t.Bf)return!1;var i=t.oB;if(i===null)return!1;if(this.findDraggablePart()===null){var n=i.sb;this.El=new D(n.width/2,n.height/2),t=t.uc.ea,i.position=new D(t.x-this.El.x,t.y-this.El.y)}return!0},pf.prototype.doActivate=function(){this.El=null,dt.prototype.doActivate.call(this)},pf.prototype.moveParts=function(){var t=this.g,i=t.oB;if(i!==null){var n=t.th;if(n!==null){if(this.El===null){var e=t.uc.ea,n=n.location;this.El=new D(e.x-n.x,e.y-n.y)}t=t.N.ea,i.position=new D(t.x-this.El.x,t.y-this.El.y)}}};function Fy(){Zt.call(this)}s.La(Fy,Zt),Fy.prototype.resize=function(t){var i=this.g.oB;if(i!==null){var n=i.sb.copy(),e=i.scale;(n.width!==t.width||n.height!==t.height)&&0<t.width&&0<t.height&&(i.scale=Math.min(e*n.width/t.width,e*n.height/t.height))}};function Ea(){this.hg=this.ad=this.Ed=this.Ic=0}function yt(t){1<arguments.length&&s.k("Brush constructor can take at most one optional argument, the Brush type."),s.oc(this),this.P=!1,t===void 0?(this.na=vs,this.vo="black"):typeof t=="string"?(this.na=vs,this.vo=t):(this.na=t,this.vo="black");var i=this.na;i===Jo?(this.vp=lr,this.Jo=Rh):this.Jo=i===ae?this.vp=kt:this.vp=Ni,this.Qw=0,this.Nv=NaN,this.bh=this.Bw=this.ah=null,this.az=this.wo=0}s.ga("Brush",yt);var vs;yt.Solid=vs=s.p(yt,"Solid",0);var Jo;yt.Linear=Jo=s.p(yt,"Linear",1);var ae;yt.Radial=ae=s.p(yt,"Radial",2);var $l;yt.Pattern=$l=s.p(yt,"Pattern",4);var _l;yt.Lab=_l=s.p(yt,"Lab",5);var Ng;yt.HSL=Ng=s.p(yt,"HSL",6),yt.prototype.copy=function(){var t=new yt;return t.na=this.na,t.vo=this.vo,t.vp=this.vp.S(),t.Jo=this.Jo.S(),t.Qw=this.Qw,t.Nv=this.Nv,this.ah!==null&&(t.ah=this.ah.copy()),t.Bw=this.Bw,t},B=yt.prototype,B.Ha=function(){return this.freeze(),Object.freeze(this),this},B.freeze=function(){return this.P=!0,this.ah!==null&&this.ah.freeze(),this},B.Qa=function(){return Object.isFrozen(this)&&s.k("cannot thaw constant: "+this),this.P=!1,this.ah!==null&&this.ah.Qa(),this},B.ic=function(t){t.Je===yt?this.type=t:s.Lj(this,t)},B.toString=function(){var t="Brush(";if(this.type===vs)t+=this.color;else if(t=this.type===Jo?t+"Linear ":this.type===ae?t+"Radial ":this.type===$l?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.Dk!==null)for(var i=this.Dk.i;i.next();)t+=" "+i.key+":"+i.value;return t+")"},yt.prototype.addColorStop=yt.prototype.addColorStop=function(t,i){this.P&&s.ma(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&s.Fa(t,"0 <= loc <= 1",yt,"addColorStop:loc"),s.j(i,"string",yt,"addColorStop:color"),this.ah===null&&(this.ah=new tt("number","string")),this.ah.add(t,i),this.na===vs&&(this.type=Jo),this.bh=null},s.defineProperty(yt,{type:"type"},function(){return this.na},function(t){this.P&&s.ma(this,t),s.ob(t,yt,yt,"type"),this.na=t,this.start.Ud()&&(t===Jo?this.start=lr:t===ae&&(this.start=kt)),this.end.Ud()&&(t===Jo?this.end=Rh:t===ae&&(this.end=kt)),this.bh=null}),s.defineProperty(yt,{color:"color"},function(){return this.vo},function(t){this.P&&s.ma(this,t),this.vo=t,this.bh=null}),s.defineProperty(yt,{start:"start"},function(){return this.vp},function(t){this.P&&s.ma(this,t),s.G(t,P,yt,"start"),this.vp=t.S(),this.bh=null}),s.defineProperty(yt,{end:"end"},function(){return this.Jo},function(t){this.P&&s.ma(this,t),s.G(t,P,yt,"end"),this.Jo=t.S(),this.bh=null}),s.defineProperty(yt,{dv:"startRadius"},function(){return this.Qw},function(t){this.P&&s.ma(this,t),s.Ad(t,yt,"startRadius"),0>t&&s.Fa(t,">= zero",yt,"startRadius"),this.Qw=t,this.bh=null}),s.defineProperty(yt,{$t:"endRadius"},function(){return this.Nv},function(t){this.P&&s.ma(this,t),s.Ad(t,yt,"endRadius"),0>t&&s.Fa(t,">= zero",yt,"endRadius"),this.Nv=t,this.bh=null}),s.defineProperty(yt,{Dk:"colorStops"},function(){return this.ah},function(t){this.P&&s.ma(this,t),this.ah=t,this.bh=null}),s.defineProperty(yt,{pattern:"pattern"},function(){return this.Bw},function(t){this.P&&s.ma(this,t),this.Bw=t,this.bh=null}),yt.randomColor=function(t,i){t===void 0&&(t=128),i===void 0&&(i=Math.max(t,255));var o=Math.abs(i-t),n=Math.floor(t+Math.random()*o).toString(16),e=Math.floor(t+Math.random()*o).toString(16),o=Math.floor(t+Math.random()*o).toString(16);return 2>n.length&&(n="0"+n),2>e.length&&(e="0"+e),2>o.length&&(o="0"+o),"#"+n+e+o};var pe=new Oo(null).Gk,Cg;yt.isValidColor=Cg=function(t){if(t==="black")return!0;if(t==="")return!1;pe.fillStyle="#000000";var i=pe.fillStyle;return pe.fillStyle=t,pe.fillStyle!==i?!0:(pe.fillStyle="#FFFFFF",i=pe.fillStyle,pe.fillStyle=t,pe.fillStyle!==i)};var Vt=new Ea,Ur=new Ea,cn=new Ea,Yo=new Ea;yt.lighten=function(t){return jg(t)},yt.prototype.lightenBy=function(t,i){this.P&&s.ma(this);var n=t===void 0||typeof t!="number"?.2:t,e=i===void 0?_l:i;if(this.type===vs)tu(this.color),this.color=bl(n,e);else if((this.type===Jo||this.type===ae)&&this.Dk!==null)for(var o=this.Dk.i;o.next();)tu(o.value),this.addColorStop(o.key,bl(n,e));return this};var jg;yt.lightenBy=jg=function(t,i,n){return i=i===void 0||typeof i!="number"?.2:i,n=n===void 0?_l:n,tu(t),bl(i,n)},yt.darken=function(t){return Dg(t)},yt.prototype.darkenBy=function(t,i){this.P&&s.ma(this);var n=t===void 0||typeof t!="number"?.2:t,e=i===void 0?_l:i;if(this.type===vs)tu(this.color),this.color=bl(-n,e);else if((this.type===Jo||this.type===ae)&&this.Dk!==null)for(var o=this.Dk.i;o.next();)tu(o.value),this.addColorStop(o.key,bl(-n,e));return this};var Dg;yt.darkenBy=Dg=function(t,i,n){return i=i===void 0||typeof i!="number"?.2:i,n=n===void 0?_l:n,tu(t),bl(-i,n)};function bl(t,i){switch(i){case _l:var n=100*Ly(Vt.Ic),u=100*Ly(Vt.Ed),e=100*Ly(Vt.ad);return cn.Ic=.4124564*n+.3575761*u+.1804375*e,cn.Ed=.2126729*n+.7151522*u+.072175*e,cn.ad=.0193339*n+.119192*u+.9503041*e,cn.hg=Vt.hg,n=By(cn.Ic/iu[0]),u=By(cn.Ed/iu[1]),e=By(cn.ad/iu[2]),Yo.Ic=116*u-16,Yo.Ed=500*(n-u),Yo.ad=200*(u-e),Yo.hg=cn.hg,Yo.Ic=Math.min(100,Math.max(0,Yo.Ic+100*t)),n=(Yo.Ic+16)/116,u=n-Yo.ad/200,cn.Ic=iu[0]*Fg(Yo.Ed/500+n),cn.Ed=iu[1]*(Yo.Ic>za*Iy?Math.pow(n,3):Yo.Ic/za),cn.ad=iu[2]*Fg(u),cn.hg=Yo.hg,n=-.969266*cn.Ic+1.8760108*cn.Ed+.041556*cn.ad,u=.0556434*cn.Ic+-.2040259*cn.Ed+1.0572252*cn.ad,Vt.Ic=255*Ay((3.2404542*cn.Ic+-1.5371385*cn.Ed+-.4985314*cn.ad)/100),Vt.Ed=255*Ay(n/100),Vt.ad=255*Ay(u/100),Vt.hg=cn.hg,Vt.Ic=Math.round(Vt.Ic),255<Vt.Ic?Vt.Ic=255:0>Vt.Ic&&(Vt.Ic=0),Vt.Ed=Math.round(Vt.Ed),255<Vt.Ed?Vt.Ed=255:0>Vt.Ed&&(Vt.Ed=0),Vt.ad=Math.round(Vt.ad),255<Vt.ad?Vt.ad=255:0>Vt.ad&&(Vt.ad=0),"rgba("+Vt.Ic+", "+Vt.Ed+", "+Vt.ad+", "+Vt.hg+")";case Ng:var e=Vt.Ic/255,o=Vt.Ed/255,r=Vt.ad/255,h=Math.max(e,o,r),u=Math.min(e,o,r),l=h-u,u=(h+u)/2;if(l===0)n=e=0;else{switch(h){case e:n=(o-r)/l%6;break;case o:n=(r-e)/l+2;break;case r:n=(e-o)/l+4}n*=60,0>n&&(n+=360),e=l/(1-Math.abs(2*u-1))}return Ur.Ic=Math.round(n),Ur.Ed=Math.round(100*e),Ur.ad=Math.round(100*u),Ur.hg=Vt.hg,Ur.ad=Math.min(100,Math.max(0,Ur.ad+100*t)),"hsla("+Ur.Ic+", "+Ur.Ed+"%, "+Ur.ad+"%, "+Ur.hg+")";default:return s.k("Unknown color space: "+i),"rgba(0, 0, 0, 1)"}}function tu(t){pe.clearRect(0,0,1,1),pe.fillStyle="#000000";var i=pe.fillStyle;pe.fillStyle=t,pe.fillStyle!==i?(pe.fillRect(0,0,1,1),t=pe.getImageData(0,0,1,1).data,Vt.Ic=t[0],Vt.Ed=t[1],Vt.ad=t[2],Vt.hg=t[3]/255):(pe.fillStyle="#FFFFFF",pe.fillStyle=t,Vt.Ic=0,Vt.Ed=0,Vt.ad=0,Vt.hg=1)}function Ly(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ay(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var Iy=216/24389,za=24389/27,iu=[95.047,100,108.883];function By(t){return t>Iy?Math.pow(t,1/3):(za*t+16)/116}function Fg(t){var i=t*t*t;return i>Iy?i:(116*t-16)/za}function N(){s.oc(this),this.M=4225027,this.Dc=1,this.ej=null,this.Sb="",this.cc=this.Gb=null,this.ab=new D(NaN,NaN).freeze(),this.Ue=Vv,this.Zh=Xu,this.Yh=cx,this.jd=new Qt,this.Xk=new Qt,this.Wi=new Qt,this.rb=this.Ho=1,this.mg=0,this.Fg=Ao,this.Sm=Zu,this.ud=new O(NaN,NaN,NaN,NaN).freeze(),this.pc=new O(NaN,NaN,NaN,NaN).freeze(),this.Nc=new O(0,0,NaN,NaN).freeze(),this.Y=this.Vs=this.Ws=null,this.xm=this.me=an,this.ht=0,this.gj=1,this.gr=0,this.Fi=1,this.xt=null,this.lt=-1/0,this.cn=0,this.dn=Js,this.en=ce,this.pr="",this.Ac=this.ia=null,this.to=-1,this.jn=this.og=this.ll=this.tp=null,this.Oz=wa,this.Zm=null}s.ni(N),s.ga("GraphObject",N),N.prototype.cloneProtected=function(t){t.M=this.M|6144,t.Dc=this.Dc,t.Sb=this.Sb,t.Gb=this.Gb,t.cc=this.cc,t.ab.assign(this.ab),t.Ue=this.Ue.S(),t.Zh=this.Zh.S(),t.Yh=this.Yh.S(),t.Wi=this.Wi.copy(),t.rb=this.rb,t.mg=this.mg,t.Fg=this.Fg,t.Sm=this.Sm.S(),t.ud.assign(this.ud),t.pc.assign(this.pc),t.Nc.assign(this.Nc),t.Vs=this.Vs,this.Y!==null&&(t.Y=this.Y.copy()),t.me=this.me.S(),t.xm=this.xm.S(),t.ht=this.ht,t.gj=this.gj,t.gr=this.gr,t.Fi=this.Fi,t.xt=this.xt,t.lt=this.lt,t.cn=this.cn,t.dn=this.dn.S(),t.en=this.en,t.pr=this.pr,this.ia!==null&&(t.ia=this.ia.copy()),t.Ac=this.Ac,t.to=this.to,this.ll!==null&&(t.ll=s.Vl(this.ll)),this.og!==null&&(t.og=this.og.copy()),t.jn=this.jn},N.prototype.addCopyProperty=N.prototype.mH=function(t){var i=this.ll;if(s.isArray(i)){for(var n=0;n<i.length;n++)if(i[n]===t)return}else this.ll=i=[];i.push(t)},N.prototype.pi=function(t){t.Ws=null,t.Zm=null,t.H()},N.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.ll!==null)for(var i=0;i<this.ll.length;i++){var n=this.ll[i];t[n]=this[n]}return t},N.prototype.copy=function(){return this.clone()},N.prototype.ic=function(t){t.Je===k?t.name.indexOf("Orient")===0?this.Eq=t:s.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.Je===N?this.stretch=t:s.Lj(this,t)},N.prototype.toString=function(){return s.pf(Object.getPrototypeOf(this))+"#"+s.Pd(this)};var ei;N.None=ei=s.p(N,"None",0);var Ao;N.Default=Ao=s.p(N,"Default",0);var tn;N.Vertical=tn=s.p(N,"Vertical",4);var Zi;N.Horizontal=Zi=s.p(N,"Horizontal",5);var ii;N.Fill=ii=s.p(N,"Fill",3);var Li;N.Uniform=Li=s.p(N,"Uniform",1);var yf;N.UniformToFill=yf=s.p(N,"UniformToFill",2);var cf;N.FlipVertical=cf=s.p(N,"FlipVertical",1);var vf;N.FlipHorizontal=vf=s.p(N,"FlipHorizontal",2);var df;N.FlipBoth=df=s.p(N,"FlipBoth",3);function te(t){t.ia===null&&(t.ia=new Ry)}N.prototype.Qd=function(){if(this.Y===null){var t=new vp;t.$j=Ni,t.zk=Ni,t.Yj=10,t.xk=10,t.Xj=au,t.wk=au,t.Zj=0,t.yk=0,this.Y=t}};function nu(t,i,n,e,o,r,h){var l=.001,u=r.length;t.moveTo(i,n),e-=i,l=o-n,e===0&&(e=.001),o=l/e;for(var f=Math.sqrt(e*e+l*l),a=0,p=!0,y=h!==0;.1<=f;){if(y){for(l=r[a++%u],l-=h;0>l;)l+=r[a++%u],p=!p;y=!1}else l=r[a++%u];l>f&&(l=f);var c=Math.sqrt(l*l/(1+o*o));0>e&&(c=-c),i+=c,n+=o*c,p?t.lineTo(i,n):t.moveTo(i,n),f-=l,p=!p}}N.prototype.raiseChangedEvent=N.prototype.bd=function(t,i,n,e,o,r,h){var l=this.W;if(l!==null&&(l.Zn(t,i,n,e,o,r,h),Jh(this)&&n===this&&t===Jt&&ih(this,l,i),n===l&&(l.M&16777216)!==0&&l.data!==null))for(t=this.xa.n,n=t.length,e=0;e<n;e++)o=t[e],o instanceof A&&oh(o,function(u){u.data!==null&&u.M&16777216&&u.Jb(i)})};function ih(t,i,n){var e=t.$l();if(e!==null)for(var o=t.Ac.i;o.next();){var r=o.value,h=null;if(r.Kq!==null){if(h=rd(r,e,t),h===null)continue;r.Ey(t,h,n,null)}else if(r.Px){var l=i.g;l===null||l.Re||r.Ey(t,l.$.Tk,n,e)}else{var u=e.data;if(u===null)continue;l=i.g,l===null||l.Re||r.Ey(t,u,n,e)}h===t&&(l=e.Dx(r.sm),l!==null&&r.MG(l,h,n))}}N.prototype.Dx=function(t){return this.to===t?this:null},N.prototype.raiseChanged=N.prototype.h=function(t,i,n){this.bd(Jt,t,this,i,n)};function qo(t,i,n,e,o){var r=t.ud,h=t.Wi;h.reset(),Ey(t,h,i,n,e,o),t.Wi=h,r.x=i,r.y=n,r.width=e,r.height=o,h.yu()||h.JG(r)}function Lg(t,i,n,e){return t.Ug===!1?!1:(e.multiply(t.transform),n?t.$f(i,e):t.un(i,e))}N.prototype.eF=function(t,i,n){if(this.Ug===!1)return!1;var e=this.Ja;return i=t.Cf(i),n?xn(t.x,t.y,0,0,0,e.height)<=i||xn(t.x,t.y,0,e.height,e.width,e.height)<=i||xn(t.x,t.y,e.width,e.height,e.width,0)<=i||xn(t.x,t.y,e.width,0,0,0)<=i:t.Xf(0,0)<=i&&t.Xf(0,e.height)<=i&&t.Xf(e.width,0)<=i&&t.Xf(e.width,e.height)<=i},N.prototype.Yg=function(){return!0},N.prototype.containsPoint=N.prototype.Ia=function(t){var i=s.K();i.assign(t),this.transform.nb(i);var n=this.U;if(!n.I())return s.v(i),!1;var e=this.g;if(e!==null&&e.fk){var o=e.nu("extraTouchThreshold"),r=e.nu("extraTouchArea"),h=r/2,l=this.Ja,e=this.vj()*e.scale,u=1/e;if(l.width*e<o&&l.height*e<o)return t=hr(n.x-h*u,n.y-h*u,n.width+r*u,n.height+r*u,i.x,i.y),s.v(i),t}return(this instanceof vt||this instanceof Y?hr(n.x-5,n.y-5,n.width+10,n.height+10,i.x,i.y):n.Ia(i))?(o=!1,o=this.og&&!this.og.Ia(i)?!1:this.cc!==null&&n.Ia(i)||this.Gb!==null&&this.Nc.Ia(t)?!0:this.Ek(t),s.v(i),o):(s.v(i),!1)},N.prototype.Ek=function(t){var i=this.Ja;return hr(0,0,i.width,i.height,t.x,t.y)},N.prototype.containsRect=N.prototype.Fk=function(t){if(this.angle===0)return this.U.Fk(t);var i=this.Ja,i=s.lg(0,0,i.width,i.height),n=this.transform,e=!1,o=s.wb(t.x,t.y);return i.Ia(n.xh(o))&&(o.m(t.x,t.bottom),i.Ia(n.xh(o))&&(o.m(t.right,t.bottom),i.Ia(n.xh(o))&&(o.m(t.right,t.y),i.Ia(n.xh(o))&&(e=!0)))),s.v(o),s.Bb(i),e},N.prototype.containedInRect=N.prototype.un=function(t,i){if(i===void 0)return t.Fk(this.U);var n=this.Ja,e=!1,o=s.wb(0,0);return t.Ia(i.nb(o))&&(o.m(0,n.height),t.Ia(i.nb(o))&&(o.m(n.width,n.height),t.Ia(i.nb(o))&&(o.m(n.width,0),t.Ia(i.nb(o))&&(e=!0)))),s.v(o),e},N.prototype.intersectsRect=N.prototype.$f=function(t,i){if(i===void 0&&(i=this.transform,this.angle===0))return t.$f(this.U);var n=this.Ja,e=i,o=s.wb(0,0),r=s.wb(0,n.height),h=s.wb(n.width,n.height),l=s.wb(n.width,0),u=!1;if(t.Ia(e.nb(o))||t.Ia(e.nb(r))||t.Ia(e.nb(h))||t.Ia(e.nb(l)))u=!0;else{var n=s.lg(0,0,n.width,n.height),f=s.wb(t.x,t.y);n.Ia(e.xh(f))?u=!0:(f.m(t.x,t.bottom),n.Ia(e.xh(f))?u=!0:(f.m(t.right,t.bottom),n.Ia(e.xh(f))?u=!0:(f.m(t.right,t.y),n.Ia(e.xh(f))&&(u=!0)))),s.v(f),s.Bb(n),!u&&(ua(t,o,r)||ua(t,r,h)||ua(t,h,l)||ua(t,l,o))&&(u=!0)}return s.v(o),s.v(r),s.v(h),s.v(l),u},N.prototype.getDocumentPoint=N.prototype.Ya=function(t,i){if(i===void 0&&(i=new D),t instanceof P){t.Ud()&&s.k("getDocumentPoint:s Spot must be specific: "+t.toString());var n=this.Ja;i.m(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else i.set(t);return this.rh.nb(i),i},N.prototype.getDocumentAngle=N.prototype.bm=function(){var t;return t=this.rh,t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},N.prototype.getDocumentScale=N.prototype.vj=function(){if(!(this.M&4096))return this.Ho;var t=this.rb;return this.R!==null?t*this.R.vj():t},N.prototype.getLocalPoint=N.prototype.kF=function(t,i){return i===void 0&&(i=new D),i.assign(t),this.rh.xh(i),i},N.prototype.getNearestIntersectionPoint=N.prototype.lF=function(t,i,n){return this.En(t.x,t.y,i.x,i.y,n)},B=N.prototype,B.En=function(t,i,n,e,o){var r=this.transform,h=1/(r.m11*r.m22-r.m12*r.m21),l=r.m22*h,u=-r.m12*h,f=-r.m21*h,a=r.m11*h,p=h*(r.m21*r.dy-r.m22*r.dx),y=h*(r.m12*r.dx-r.m11*r.dy);return this.pn!==null?(r=this.U,fr(r.left,r.top,r.right,r.bottom,t,i,n,e,o)):(h=t*l+i*f+p,t=t*u+i*a+y,i=n*l+e*f+p,n=n*u+e*a+y,o.m(0,0),e=this.Ja,n=fr(0,0,e.width,e.height,h,t,i,n,o),o.transform(r),n)};function Gt(t,i,n,e,o){if(gs(t)!==!1){var h=t.margin,r=h.right+h.left,h=h.top+h.bottom;i=Math.max(i-r,0),n=Math.max(n-h,0),o=o||0,e=Math.max((e||0)-r,0),o=Math.max(o-h,0);var r=t.angle,h=0,h=t.Da,l=0;t instanceof Y&&(l=t.mb),r===90||r===270?(i=isFinite(h.height)?h.height+l:i,n=isFinite(h.width)?h.width+l:n):(i=isFinite(h.width)?h.width+l:i,n=isFinite(h.height)?h.height+l:n);var h=e||0,l=o||0,u=t instanceof A;switch(Io(t,!0)){case ei:l=h=0,u&&(n=i=1/0);break;case ii:isFinite(i)&&i>e&&(h=i),isFinite(n)&&n>o&&(l=n);break;case Zi:isFinite(i)&&i>e&&(h=i),l=0,u&&(n=1/0);break;case tn:isFinite(n)&&n>o&&(l=n),h=0,u&&(i=1/0)}var u=t.Hf,f=t.si;h>u.width&&f.width<u.width&&(h=u.width),l>u.height&&f.height<u.height&&(l=u.height),e=Math.max(h/t.scale,f.width),o=Math.max(l/t.scale,f.height),u.width<e&&(e=Math.min(f.width,e)),u.height<o&&(o=Math.min(f.height,o)),i=Math.min(u.width,i),n=Math.min(u.height,n),i=Math.max(e,i),n=Math.max(o,n),(r===90||r===270)&&(h=i,i=n,n=h,h=e,e=o,o=h),t.ud.Qa(),t.Qn(i,n,e,o),t.ud.freeze(),t.ud.I()||s.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),ie(t,!1)}}B.Qn=function(){},B.yj=function(){return!1},B.jc=function(t,i,n,e,o){this.Ri();var r=s.vf();if(r.assign(this.pc),this.pc.Qa(),Qe(this)===!1){var h=this.pc;h.x=t,h.y=i,h.width=n,h.height=e}else this.pj(t,i,n,e);this.pc.freeze(),this.og=o===void 0?null:o,n=!1,o!==void 0?n=!0:(o=this.R,o===null||o.type!==Ze&&o.type!==yo||(o=o.R),o!==null&&(o=o.Nc,e=this.za,this.pn!==null&&(e=this.pc),n=i+e.height,e=t+e.width,n=!(0<=t+.05&&e<=o.width+.05&&0<=i+.05&&n<=o.height+.05),this instanceof ot&&(t=this.Nc,this.nw>t.height||this.zf.Ge>t.width))&&(n=!0)),this.M=n?this.M|256:this.M&-257,this.pc.I()||s.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.pc.toString()),this.ey(r,this.pc),nh(this,!1),s.Bb(r)},B.pj=function(){};function Ra(t,i,n,e,o){var r=t.U;if(r.x=i,r.y=n,r.width=e,r.height=o,!t.Da.I()){r=t.ud,n=t.margin,i=n.right+n.left;var h=n.top+n.bottom;switch(n=r.width+i,r=r.height+h,e+=i,o+=h,i=Io(t,!0),n===e&&r===o&&(i=ei),i){case ei:(n>e||r>o)&&(ie(t,!0),Gt(t,n>e?e:n,r>o?o:r));break;case ii:ie(t,!0),Gt(t,e,o,0,0);break;case Zi:ie(t,!0),Gt(t,e,r,0,0);break;case tn:ie(t,!0),Gt(t,n,o,0,0)}}}B.ey=function(t,i){var n=this.W;n!==null&&n.g!==null&&(n.Fq!==this&&n.jG!==this&&n.xB!==this||oc(n,!0),this.oa(),d0(t,i)||(n.Rk(),this.Ks(n)))},B.Ks=function(t){this.le!==null&&(oc(t,!0),t instanceof I&&P1(t,this))},s.defineProperty(N,{co:"shadowVisible"},function(){return this.jn},function(t){var i=this.jn;i!==t&&(this.jn=t,this.oa(),this.h("shadowVisible",i,t))}),N.prototype.ve=function(t,i){if(this.visible){var n=this instanceof A&&(this.type===Ze||this.type===yo),e=this.pc;if(n||e.width!==0&&e.height!==0&&!isNaN(e.x)&&!isNaN(e.y)){var o=this.opacity;if(o!==0){var r=1;if(o!==1&&(r=t.globalAlpha,t.globalAlpha=r*o),t instanceof qu){t:if(this.visible){var n=null,h=t.Rx;if(this instanceof A&&(this.type===Ze||this.type===yo))Ag(this,t,i);else{var l=this.pc;if(l.width!==0&&l.height!==0&&!isNaN(l.x)&&!isNaN(l.y)){var u=this.transform,f=this.R;this.M&4096&&Ga(this);var e=(this.M&256)!==0,a=!1;if(this instanceof ot&&(t.font=this.font),e){if(a=f.Yg()?f.Ja:f.U,this.og!==null)var v=this.og,p=v.x,y=v.y,c=v.width,v=v.height;else p=Math.max(l.x,a.x),y=Math.max(l.y,a.y),c=Math.min(l.right,a.right)-p,v=Math.min(l.bottom,a.bottom)-y;if(p>l.width+l.x||l.x>a.width+a.x||y>l.height+l.y||l.y>a.height+a.y)break t;a=!0,fs(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(p,y,c,v),t.clip()}if(this.yj()){var d=this;if(!d.isVisible())break t}t.vh.Vb=[1,0,0,1,0,0],this instanceof ot&&1<this.Vx&&fs(t,1,0,0,1,0,0),p=!1,this.yj()&&this.jm&&i.Ok("drawShadows")&&(y=this.hn,t.KB(y.x*i.scale*i.wd,y.y*i.scale*i.wd,d.Eg),t.eo(),t.shadowColor=d.gn),d=!1,this.W&&i.Ok("drawShadows")&&(d=this.W.jm),this.co===!0?(t.eo(),p===!1&&d&&(fs(t,1,0,0,1,0,0),t.fb(),p=!0)):this.co===!1&&t.pm(),this.cc!==null&&(Un(this,t,this.cc,!0,!0),p===!1&&d&&(fs(t,1,0,0,1,0,0),t.fb(),p=!0),this.cc instanceof yt&&this.cc.type===ae?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.Lg(this.cc)):t.fillRect(l.x,l.y,l.width,l.height)),this instanceof A?fs(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy):t.vh.Vb=[u.m11,u.m12,u.m21,u.m22,u.dx,u.dy],this.Gb!==null&&(p===!1&&d&&(fs(t,1,0,0,1,0,0),t.fb(),p=!0),c=this.Ja,u=l=0,y=c.width,c=c.height,v=0,this instanceof Y&&(c=this.Sa.eb,l=c.x,u=c.y,y=c.width,c=c.height,v=this.ji),Un(this,t,this.Gb,!0,!1),this.Gb instanceof yt&&this.Gb.type===ae?(t.beginPath(),t.rect(l-v/2,u-v/2,y+v,c+v),t.Lg(this.Gb)):t.fillRect(l-v/2,u-v/2,y+v,c+v)),d&&(this.Gb!==null||this.cc!==null||f!==null&&f.M&512||f!==null&&(f.type===vr||f.type===eh)&&f.Bd()!==this)?(Oa(this,!0),this.co===null&&t.pm()):Oa(this,!1),this.Ik(t,i),d&&this.M&512&&t.eo(),this.yj()&&d&&t.pm(),e&&(t.restore(),a&&t.qf.pop()),this instanceof A&&(n=t.qf.pop()),p===!0&&t.qf.pop(),this instanceof ot&&1<this.Vx&&(n=t.qf.pop()),t.XE!==null&&(n===null&&(h===t.Rx?(fs(t,1,0,0,1,0,0),n=t.qf.pop()):n=t.Rx),t.XE(this,n))}}}}else if(n)Ag(this,t,i);else{if(this instanceof k&&this.Hu(!1),n=this.transform,h=this.R,this.M&4096&&Ga(this),f=!1,d=this.W,l=0,d&&i.Ok("drawShadows")&&(f=d.jm)&&(a=d.hn,l=Math.max(a.y,a.x)*i.scale*i.wd),!(u=i.Jm)){var c=l,v=this.Nc,l=this.Xk,g=l.m11,m=l.m21,w=l.dx,M=l.m12,S=l.m22,F=l.dy,C,G,H=G=0,l=G*g+H*m+w,u=G*M+H*S+F,y=p=0;G=v.width+c,H=0,C=G*g+H*m+w,G=G*M+H*S+F,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,G=v.width+c,H=v.height+c,C=G*g+H*m+w,G=G*M+H*S+F,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,G=0,H=v.height+c,C=G*g+H*m+w,G=G*M+H*S+F,l=Math.min(l,C),u=Math.min(u,G),p=Math.max(l+p,C)-l,y=Math.max(u+y,G)-u,c=i.eA,v=c.x,g=c.y,u=!(l>c.width+v||v>p+l||u>c.height+g||g>y+u)}if(u){if(l=(this.M&256)!==0,t.Qp&&(l=!1),this instanceof ot&&(t.font=this.font),l){if(u=h.Yg()?h.Ja:h.U,this.og!==null?(v=this.og,p=v.x,y=v.y,c=v.width,v=v.height):(p=Math.max(e.x,u.x),y=Math.max(e.y,u.y),c=Math.min(e.right,u.right)-p,v=Math.min(e.bottom,u.bottom)-y),p>e.width+e.x||e.x>u.width+u.x){o!==1&&(t.globalAlpha=r);return}t.save(),t.beginPath(),t.rect(p,y,c,v),t.clip()}if(this.yj()){if(!d.isVisible()){o!==1&&(t.globalAlpha=r);return}f&&(t.KB(a.x*i.scale*i.wd,a.y*i.scale*i.wd,d.Eg),t.eo(),t.shadowColor=d.gn)}this.co===!0?t.eo():this.co===!1&&t.pm(),this.cc!==null&&(Un(this,t,this.cc,!0,!0),this.cc instanceof yt&&this.cc.type===ae?(t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.Lg(this.cc)):t.fillRect(e.x,e.y,e.width,e.height)),n.yu()||t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),f&&(h!==null&&h.M&512||h!==null&&(h.type===vr||h.type===eh)&&h.Bd()!==this)&&this.co===null&&t.pm(),this.Gb!==null&&(u=this.Ja,a=e=0,d=u.width,u=u.height,p=0,this instanceof Y&&(u=this.Sa.eb,e=u.x,a=u.y,d=u.width,u=u.height,p=this.ji),Un(this,t,this.Gb,!0,!1),this.Gb instanceof yt&&this.Gb.type===ae?(t.beginPath(),t.rect(e-p/2,a-p/2,d+p,u+p),t.Lg(this.Gb)):t.fillRect(e-p/2,a-p/2,d+p,u+p)),f&&(this.Gb!==null||this.cc!==null||h!==null&&h.M&512||h!==null&&(h.type===vr||h.type===eh)&&h.Bd()!==this)?(Oa(this,!0),this.co===null&&t.pm()):Oa(this,!1),this.Ik(t,i),f&&this.M&512&&t.eo(),this.yj()&&f&&t.pm(),l?(t.restore(),this instanceof A?t.Ke(!0):t.Ke(!1)):n.yu()||(h=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*h,-n.m12*h,-n.m21*h,n.m11*h,h*(n.m21*n.dy-n.m22*n.dx),h*(n.m12*n.dx-n.m11*n.dy)))}}o!==1&&(t.globalAlpha=r)}}}};function Ag(t,i,n){var e=t.pc;t.cc!==null&&(Un(t,i,t.cc,!0,!0),t.cc instanceof yt&&t.cc.type===ae?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.Lg(t.cc)):i.fillRect(e.x,e.y,e.width,e.height)),t.Gb!==null&&(Un(t,i,t.Gb,!0,!1),t.Gb instanceof yt&&t.Gb.type===ae?(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.Lg(t.Gb)):i.fillRect(e.x,e.y,e.width,e.height)),t.Ik(i,n)}N.prototype.Ik=function(){};function Un(t,i,n,e,o){if(n!==null){var r=1,h=1;if(typeof n=="string")e?i.fillStyle=n:i.strokeStyle=n;else if(n.type===vs)e?i.fillStyle=n.color:i.strokeStyle=n.color;else{var l,h=t.Ja,r=h.width,h=h.height;if(o)var u=t.U,r=u.width,h=u.height;var f=i instanceof _i;if(f&&n.bh&&(n.type===$l||n.wo===r&&n.az===h))l=n.bh;else{var a=u=0,p=0,y=0,c=0,v=0,v=c=0;if(o&&(u=t.U,r=u.width,h=u.height,c=u.x,v=u.y),u=n.start.x*r+n.start.offsetX,a=n.start.y*h+n.start.offsetY,p=n.end.x*r+n.end.offsetX,y=n.end.y*h+n.end.offsetY,u+=c,p+=c,a+=v,y+=v,n.type===Jo)l=i.createLinearGradient(u,a,p,y);else if(n.type===ae)v=isNaN(n.$t)?Math.max(r,h)/2:n.$t,isNaN(n.dv)?(c=0,v=Math.max(r,h)/2):c=n.dv,l=i.createRadialGradient(u,a,c,p,y,v);else if(n.type===$l)try{l=i.createPattern(n.pattern,"repeat")}catch{l=null}else s.Fd(n.type,"Brush type");if(n.type!==$l&&(o=n.Dk,o!==null))for(o=o.i;o.next();)l.addColorStop(o.key,o.value);if(f&&(n.bh=l,l!==null&&(n.wo=r,n.az=h),l===null&&n.type===$l&&n.wo!==-1)){n.wo=-1;var d=t.g;d!==null&&n.wo===-1&&s.setTimeout(function(){d.yq()},600)}}e?i.fillStyle=l:i.strokeStyle=l}}}N.prototype.isContainedBy=N.prototype.hm=function(t){if(t instanceof A)t:{if(this!==t&&t!==null)for(var i=this.R;i!==null;){if(i===t){t=!0;break t}i=i.R}t=!1}else t=!1;return t},N.prototype.isVisibleObject=N.prototype.Cj=function(){if(!this.visible)return!1;var t=this.R;return t!==null?t.Cj():!0},N.prototype.isEnabledObject=N.prototype.vu=function(){for(var t=this instanceof A?this:this.R;t!==null&&t.isEnabled;)t=t.R;return t===null},s.defineProperty(N,{YE:"enabledChanged"},function(){return this.ia!==null?this.ia.Gr:null},function(t){te(this);var i=this.ia.Gr;i!==t&&(t!==null&&s.j(t,"function",N,"enabledChanged"),this.ia.Gr=t,this.h("enabledChanged",i,t))});function Ga(t){if(t.M&2048){var i=t.jd;if(i.reset(),!t.pc.I()||!t.ud.I()){eu(t,!1);return}i.translate(t.pc.x,t.pc.y),i.translate(-t.za.x,-t.za.y);var n=t.Ja;Ey(t,i,n.x,n.y,n.width,n.height),eu(t,!1),ds(t,!0)}t.M&4096&&(i=t.R,i===null?(t.Xk.set(t.jd),t.Ho=t.scale,ds(t,!1)):i.rh!==null&&(n=t.Xk,n.reset(),i.Yg()?n.multiply(i.Xk):i.R!==null&&n.multiply(i.R.Xk),n.multiply(t.jd),t.Ho=t.scale*i.Ho,ds(t,!1)))}function Ey(t,i,n,e,o,r){if(t.scale!==1&&i.scale(t.scale),t.angle!==0){var h=kt;t.yj()&&t.Gf.Zc()&&(h=t.Gf);var l=s.K();if(t instanceof L&&t.cg!==t)for(n=t.cg,e=n.Ja,l.bv(e.x,e.y,e.width,e.height,h),n.Wi.nb(l),l.offset(-n.za.x,-n.za.y),h=n.R;h!==null&&h!==t;)h.Wi.nb(l),l.offset(-h.za.x,-h.za.y),h=h.R;else l.bv(n,e,o,r,h);i.rotate(t.angle,l.x,l.y),s.v(l)}}B=N.prototype,B.H=function(t){if(t===void 0&&(t=!1),gs(this)!==!0){ie(this,!0),nh(this,!0);var i=this.R;i===null||t||i.H()}},B.gq=function(){gs(this)!==!0&&(ie(this,!0),nh(this,!0))};function gf(t){if(Qe(t)===!1){var i=t.R;i!==null?i.H():t.yj()&&(i=t.g,i!==null&&(i.vg.add(t),t instanceof I&&t.ag(),i.ye())),nh(t,!0)}}B.Ri=function(){!(this.M&2048)&&(eu(this,!0),ds(this,!0))},B.RA=function(){ds(this,!0)},B.oa=function(){var t=this.W;t!==null&&t.oa()};function Io(t,i){var n=t.stretch,e=t.R;return e!==null&&e.na===qr?mf(t,e.ee(t.Wb),e.de(t.column),i):e!==null&&e.na===vr&&e.Bd()===t?cr(t,ii,i):n===Ao?e!==null?e.na===eh&&e.Bd()===t?cr(t,ii,i):(n=e.ae,n===Ao?cr(t,ei,i):cr(t,n,i)):cr(t,ei,i):cr(t,n,i)}function mf(t,i,n,e){var o=t.stretch;if(o!==Ao)return cr(t,o,e);var r=o=null;switch(i.stretch){case tn:r=!0;break;case ii:r=!0}switch(n.stretch){case Zi:o=!0;break;case ii:o=!0}return i=t.R.ae,o===null&&(o=i===Zi||i===ii),r===null&&(r=i===tn||i===ii),o===!0&&r===!0?cr(t,ii,e):o===!0?cr(t,Zi,e):r===!0?cr(t,tn,e):cr(t,ei,e)}function cr(t,i,n){if(n)return i;if(i===ei||(n=t.Da,n.I()))return ei;if(t=t.angle,!isNaN(n.width))if(t!==90&&t!==270){if(i===Zi)return ei;if(i===ii)return tn}else{if(i===tn)return ei;if(i===ii)return Zi}if(!isNaN(n.height))if(t!==90&&t!==270){if(i===tn)return ei;if(i===ii)return Zi}else{if(i===Zi)return ei;if(i===ii)return tn}return i}s.defineProperty(N,{Eq:"segmentOrientation"},function(){return this.en},function(t){var i=this.en;i!==t&&(this.en=t,this.H(),this.h("segmentOrientation",i,t),t===ce&&(this.angle=0))}),s.defineProperty(N,{Qe:"segmentIndex"},function(){return this.lt},function(t){t=Math.round(t);var i=this.lt;i!==t&&(this.lt=t,this.H(),this.h("segmentIndex",i,t))}),s.defineProperty(N,{zB:"segmentFraction"},function(){return this.cn},function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var i=this.cn;i!==t&&(this.cn=t,this.H(),this.h("segmentFraction",i,t))}),s.defineProperty(N,{AB:"segmentOffset"},function(){return this.dn},function(t){var i=this.dn;i.L(t)||(this.dn=t=t.S(),this.H(),this.h("segmentOffset",i,t))}),s.defineProperty(N,{stretch:"stretch"},function(){return this.Fg},function(t){var i=this.Fg;i!==t&&(this.Fg=t,this.H(),this.h("stretch",i,t))}),s.defineProperty(N,{name:"name"},function(){return this.Sb},function(t){var i=this.Sb;i!==t&&(this.Sb=t,this.W!==null&&(this.W.Um=null),this.h("name",i,t))}),s.defineProperty(N,{opacity:"opacity"},function(){return this.Dc},function(t){var i=this.Dc;i!==t&&(s.j(t,"number",N,"opacity"),(0>t||1<t)&&s.Fa(t,"0 <= value <= 1",N,"opacity"),this.Dc=t,this.h("opacity",i,t),t=this.g,i=this.W,t!==null&&i!==null&&t.oa(Wh(i,i.U)))}),s.defineProperty(N,{visible:"visible"},function(){return(this.M&1)!==0},function(t){var i=(this.M&1)!==0;i!==t&&(this.M^=1,this.h("visible",i,t),i=this.R,i!==null?i.H():this.yj()&&this.Dd(t),this.oa(),Ig(this))}),s.defineProperty(N,{Ug:"pickable"},function(){return(this.M&2)!==0},function(t){var i=(this.M&2)!==0;i!==t&&(this.M^=2,this.h("pickable",i,t))}),s.defineProperty(N,{aI:"fromLinkableDuplicates"},function(){return(this.M&4)!==0},function(t){var i=(this.M&4)!==0;i!==t&&(this.M^=4,this.h("fromLinkableDuplicates",i,t))}),s.defineProperty(N,{bI:"fromLinkableSelfNode"},function(){return(this.M&8)!==0},function(t){var i=(this.M&8)!==0;i!==t&&(this.M^=8,this.h("fromLinkableSelfNode",i,t))}),s.defineProperty(N,{TJ:"toLinkableDuplicates"},function(){return(this.M&16)!==0},function(t){var i=(this.M&16)!==0;i!==t&&(this.M^=16,this.h("toLinkableDuplicates",i,t))}),s.defineProperty(N,{UJ:"toLinkableSelfNode"},function(){return(this.M&32)!==0},function(t){var i=(this.M&32)!==0;i!==t&&(this.M^=32,this.h("toLinkableSelfNode",i,t))}),s.defineProperty(N,{ff:"isPanelMain"},function(){return(this.M&64)!==0},function(t){var i=(this.M&64)!==0;i!==t&&(this.M^=64,this.H(),this.h("isPanelMain",i,t))}),s.defineProperty(N,{Kx:"isActionable"},function(){return(this.M&128)!==0},function(t){var i=(this.M&128)!==0;i!==t&&(this.M^=128,this.h("isActionable",i,t))}),s.defineProperty(N,{pn:"areaBackground"},function(){return this.cc},function(t){var i=this.cc;i!==t&&(t instanceof yt&&t.freeze(),this.cc=t,this.oa(),this.h("areaBackground",i,t))}),s.defineProperty(N,{background:"background"},function(){return this.Gb},function(t){var i=this.Gb;i!==t&&(t instanceof yt&&t.freeze(),this.Gb=t,this.oa(),this.h("background",i,t))});function Oa(t,i){t.M=i?t.M|512:t.M&-513}function Jh(t){return(t.M&1024)!==0}function zy(t,i){t.M=i?t.M|1024:t.M&-1025}function eu(t,i){t.M=i?t.M|2048:t.M&-2049}function ds(t,i){t.M=i?t.M|4096:t.M&-4097}function gs(t){return(t.M&8192)!==0}function ie(t,i){t.M=i?t.M|8192:t.M&-8193}function Qe(t){return(t.M&16384)!==0}function nh(t,i){t.M=i?t.M|16384:t.M&-16385}s.u(N,{W:"part"},function(){if(this.yj())return this;if(this.Zm!==null)return this.Zm;var t;for(t=this.R;t;){if(t instanceof L)return this.Zm=t;t=t.R}return null}),s.u(N,{R:"panel"},function(){return this.ej}),N.prototype.om=function(t){this.ej=t},s.u(N,{layer:"layer"},function(){var t=this.W;return t!==null?t.layer:null},{configurable:!0}),s.u(N,{g:"diagram"},function(){var t=this.W;return t!==null?t.g:null},{configurable:!0}),s.defineProperty(N,{position:"position"},function(){return this.ab},function(t){var i=t.x,n=t.y,e=this.ab,o=e.x,r=e.y;(o===i||isNaN(o)&&isNaN(i))&&(r===n||isNaN(r)&&isNaN(n))?this.HB():(t=t.S(),this.GB(t,e)&&this.h("position",e,t))}),N.prototype.HB=function(){},N.prototype.GB=function(t){return this.ab=t,gf(this),this.Ri(),!0},N.prototype.Ay=function(t,i){this.ab.m(t,i),this.Ri()},s.u(N,{U:"actualBounds"},function(){return this.pc}),s.defineProperty(N,{scale:"scale"},function(){return this.rb},function(t){var i=this.rb;i!==t&&(0>=t&&s.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.rb=t,this.Ri(),this.H(),this.h("scale",i,t))}),s.defineProperty(N,{angle:"angle"},function(){return this.mg},function(t){var i=this.mg;i!==t&&(t%=360,0>t&&(t+=360),i!==t&&(this.mg=t,Ig(this),this.H(),this.Ri(),this.h("angle",i,t)))}),s.defineProperty(N,{Da:"desiredSize"},function(){return this.Ue},function(t){var i=t.width,n=t.height,e=this.Ue,o=e.width,r=e.height;(o===i||isNaN(o)&&isNaN(i))&&(r===n||isNaN(r)&&isNaN(n))||(this.Ue=t=t.S(),this.H(),this instanceof Y&&this.fe(),this.h("desiredSize",e,t),Jh(this)&&(t=this.W,t!==null&&(ih(this,t,"width"),ih(this,t,"height"))))}),s.defineProperty(N,{width:"width"},function(){return this.Ue.width},function(t){var i=this.Ue.width;i===t||isNaN(i)&&isNaN(t)||(i=this.Ue,this.Ue=t=new lt(t,this.Ue.height).freeze(),this.H(),this instanceof Y&&this.fe(),this.h("desiredSize",i,t),Jh(this)&&(t=this.W,t!==null&&ih(this,t,"width")))}),s.defineProperty(N,{height:"height"},function(){return this.Ue.height},function(t){var i=this.Ue.height;i===t||isNaN(i)&&isNaN(t)||(i=this.Ue,this.Ue=t=new lt(this.Ue.width,t).freeze(),this.H(),this instanceof Y&&this.fe(),this.h("desiredSize",i,t),Jh(this)&&(t=this.W,t!==null&&ih(this,t,"height")))}),s.defineProperty(N,{si:"minSize"},function(){return this.Zh},function(t){var i=this.Zh;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Zh=t,this.H(),this.h("minSize",i,t))}),s.defineProperty(N,{Hf:"maxSize"},function(){return this.Yh},function(t){var i=this.Yh;i.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Yh=t,this.H(),this.h("maxSize",i,t))}),s.u(N,{za:"measuredBounds"},function(){return this.ud}),s.u(N,{Ja:"naturalBounds"},function(){return this.Nc},{configurable:!0}),s.defineProperty(N,{margin:"margin"},function(){return this.Sm},function(t){typeof t=="number"&&(t=new xt(t));var i=this.Sm;i.L(t)||(this.Sm=t=t.S(),this.H(),this.h("margin",i,t))}),s.u(N,{transform:null},function(){return this.M&2048&&Ga(this),this.jd}),s.u(N,{rh:null},function(){return this.M&4096&&Ga(this),this.Xk}),s.defineProperty(N,{alignment:"alignment"},function(){return this.me},function(t){var i=this.me;i.L(t)||(t.Ud()&&!t.ge()&&s.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.me=t=t.S(),gf(this),this.h("alignment",i,t))}),s.defineProperty(N,{column:"column"},function(){return this.gr},function(t){t=Math.round(t);var i=this.gr;i!==t&&(0>t&&s.Fa(t,">= 0",N,"column"),this.gr=t,this.H(),this.h("column",i,t))}),s.defineProperty(N,{BH:"columnSpan"},function(){return this.Fi},function(t){t=Math.round(t);var i=this.Fi;i!==t&&(1>t&&s.Fa(t,">= 1",N,"columnSpan"),this.Fi=t,this.H(),this.h("columnSpan",i,t))}),s.defineProperty(N,{Wb:"row"},function(){return this.ht},function(t){t=Math.round(t);var i=this.ht;i!==t&&(0>t&&s.Fa(t,">= 0",N,"row"),this.ht=t,this.H(),this.h("row",i,t))}),s.defineProperty(N,{rowSpan:"rowSpan"},function(){return this.gj},function(t){t=Math.round(t);var i=this.gj;i!==t&&(1>t&&s.Fa(t,">= 1",N,"rowSpan"),this.gj=t,this.H(),this.h("rowSpan",i,t))}),s.defineProperty(N,{By:"spanAllocation"},function(){return this.xt},function(t){var i=this.xt;i!==t&&(t!==null&&s.j(t,"function",N,"spanAllocation"),this.xt=t,this.H(),this.h("spanAllocation",i,t))}),s.defineProperty(N,{qh:"alignmentFocus"},function(){return this.xm},function(t){var i=this.xm;i.L(t)||(!t.Ud()||t.ge()||t.L(Ni)&&this instanceof I||s.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.xm=t=t.S(),this.H(),this.h("alignmentFocus",i,t))}),s.defineProperty(N,{le:"portId"},function(){return this.Vs},function(t){var i=this.Vs;if(i!==t){var n=this.W;n===null||n instanceof I||(s.k("Cannot set portID on a Link: "+t),n=null),i!==null&&n!==null&&fc(n,this),this.Vs=t,t!==null&&n!==null&&(n.Qk=!0,S1(n,this)),this.h("portId",i,t)}});function Jr(t){var i=t.W;if(i instanceof I&&(t.le!==null||t===i.port)){var n=i.g;n===null||n.ja.lb||P1(i,t)}}function Ig(t){var i=t.g;i===null||i.ja.lb||(t instanceof A?t instanceof I?t.ag():xf(t,t,function(n){Jr(n)}):Jr(t))}s.defineProperty(N,{Nb:"toSpot"},function(){return this.Y!==null?this.Y.zk:Ni},function(t){this.Qd();var i=this.Y.zk;i.L(t)||(t=t.S(),this.Y.zk=t,this.h("toSpot",i,t),Jr(this))}),s.defineProperty(N,{um:"toEndSegmentLength"},function(){return this.Y!==null?this.Y.xk:10},function(t){this.Qd();var i=this.Y.xk;i!==t&&(0>t&&s.Fa(t,">= 0",N,"toEndSegmentLength"),this.Y.xk=t,this.h("toEndSegmentLength",i,t),Jr(this))}),s.defineProperty(N,{ev:"toEndSegmentDirection"},function(){return this.Y!==null?this.Y.wk:au},function(t){this.Qd();var i=this.Y.wk;i!==t&&(s.Yt("GraphObject.toEndSegmentDirection","2.0"),this.Y.wk=t,this.h("toEndSegmentDirection",i,t),Jr(this))}),s.defineProperty(N,{fv:"toShortLength"},function(){return this.Y!==null?this.Y.yk:0},function(t){this.Qd();var i=this.Y.yk;i!==t&&(this.Y.yk=t,this.h("toShortLength",i,t),Jr(this))}),s.defineProperty(N,{EG:"toLinkable"},function(){return this.Y!==null?this.Y.Et:null},function(t){this.Qd();var i=this.Y.Et;i!==t&&(this.Y.Et=t,this.h("toLinkable",i,t))}),s.defineProperty(N,{VJ:"toMaxLinks"},function(){return this.Y!==null?this.Y.Ft:1/0},function(t){this.Qd();var i=this.Y.Ft;i!==t&&(0>t&&s.Fa(t,">= 0",N,"toMaxLinks"),this.Y.Ft=t,this.h("toMaxLinks",i,t))}),s.defineProperty(N,{Mb:"fromSpot"},function(){return this.Y!==null?this.Y.$j:Ni},function(t){this.Qd();var i=this.Y.$j;i.L(t)||(t=t.S(),this.Y.$j=t,this.h("fromSpot",i,t),Jr(this))}),s.defineProperty(N,{am:"fromEndSegmentLength"},function(){return this.Y!==null?this.Y.Yj:10},function(t){this.Qd();var i=this.Y.Yj;i!==t&&(0>t&&s.Fa(t,">= 0",N,"fromEndSegmentLength"),this.Y.Yj=t,this.h("fromEndSegmentLength",i,t),Jr(this))}),s.defineProperty(N,{lu:"fromEndSegmentDirection"},function(){return this.Y!==null?this.Y.Xj:au},function(t){this.Qd();var i=this.Y.Xj;i!==t&&(s.Yt("GraphObject.fromEndSegmentDirection","2.0"),this.Y.Xj=t,this.h("fromEndSegmentDirection",i,t),Jr(this))}),s.defineProperty(N,{mu:"fromShortLength"},function(){return this.Y!==null?this.Y.Zj:0},function(t){this.Qd();var i=this.Y.Zj;i!==t&&(this.Y.Zj=t,this.h("fromShortLength",i,t),Jr(this))}),s.defineProperty(N,{hF:"fromLinkable"},function(){return this.Y!==null?this.Y.Jr:null},function(t){this.Qd();var i=this.Y.Jr;i!==t&&(this.Y.Jr=t,this.h("fromLinkable",i,t))}),s.defineProperty(N,{GA:"fromMaxLinks"},function(){return this.Y!==null?this.Y.Kr:1/0},function(t){this.Qd();var i=this.Y.Kr;i!==t&&(0>t&&s.Fa(t,">= 0",N,"fromMaxLinks"),this.Y.Kr=t,this.h("fromMaxLinks",i,t))}),s.defineProperty(N,{cursor:"cursor"},function(){return this.pr},function(t){var i=this.pr;i!==t&&(s.j(t,"string",N,"cursor"),this.pr=t,this.h("cursor",i,t))}),s.defineProperty(N,{click:"click"},function(){return this.ia!==null?this.ia.Ei:null},function(t){te(this);var i=this.ia.Ei;i!==t&&(t!==null&&s.j(t,"function",N,"click"),this.ia.Ei=t,this.h("click",i,t))}),s.defineProperty(N,{Zt:"doubleClick"},function(){return this.ia!==null?this.ia.Mi:null},function(t){te(this);var i=this.ia.Mi;i!==t&&(t!==null&&s.j(t,"function",N,"doubleClick"),this.ia.Mi=t,this.h("doubleClick",i,t))}),s.defineProperty(N,{sA:"contextClick"},function(){return this.ia!==null?this.ia.Gi:null},function(t){te(this);var i=this.ia.Gi;i!==t&&(t!==null&&s.j(t,"function",N,"contextClick"),this.ia.Gi=t,this.h("contextClick",i,t))}),s.defineProperty(N,{Ju:"mouseEnter"},function(){return this.ia!==null?this.ia.Bs:null},function(t){te(this);var i=this.ia.Bs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseEnter"),this.ia.Bs=t,this.h("mouseEnter",i,t))}),s.defineProperty(N,{Ku:"mouseLeave"},function(){return this.ia!==null?this.ia.Cs:null},function(t){te(this);var i=this.ia.Cs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseLeave"),this.ia.Cs=t,this.h("mouseLeave",i,t))}),s.defineProperty(N,{kB:"mouseOver"},function(){return this.ia!==null?this.ia.aj:null},function(t){te(this);var i=this.ia.aj;i!==t&&(t!==null&&s.j(t,"function",N,"mouseOver"),this.ia.aj=t,this.h("mouseOver",i,t))}),s.defineProperty(N,{jB:"mouseHover"},function(){return this.ia!==null?this.ia.$i:null},function(t){te(this);var i=this.ia.$i;i!==t&&(t!==null&&s.j(t,"function",N,"mouseHover"),this.ia.$i=t,this.h("mouseHover",i,t))}),s.defineProperty(N,{iB:"mouseHold"},function(){return this.ia!==null?this.ia.Zi:null},function(t){te(this);var i=this.ia.Zi;i!==t&&(t!==null&&s.j(t,"function",N,"mouseHold"),this.ia.Zi=t,this.h("mouseHold",i,t))}),s.defineProperty(N,{bJ:"mouseDragEnter"},function(){return this.ia!==null?this.ia.zs:null},function(t){te(this);var i=this.ia.zs;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDragEnter"),this.ia.zs=t,this.h("mouseDragEnter",i,t))}),s.defineProperty(N,{cJ:"mouseDragLeave"},function(){return this.ia!==null?this.ia.As:null},function(t){te(this);var i=this.ia.As;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDragLeave"),this.ia.As=t,this.h("mouseDragLeave",i,t))}),s.defineProperty(N,{hB:"mouseDrop"},function(){return this.ia!==null?this.ia.Yi:null},function(t){te(this);var i=this.ia.Yi;i!==t&&(t!==null&&s.j(t,"function",N,"mouseDrop"),this.ia.Yi=t,this.h("mouseDrop",i,t))}),s.defineProperty(N,{uE:"actionDown"},function(){return this.ia!==null?this.ia.Pq:null},function(t){te(this);var i=this.ia.Pq;i!==t&&(t!==null&&s.j(t,"function",N,"actionDown"),this.ia.Pq=t,this.h("actionDown",i,t))}),s.defineProperty(N,{vE:"actionMove"},function(){return this.ia!==null?this.ia.Qq:null},function(t){te(this);var i=this.ia.Qq;i!==t&&(t!==null&&s.j(t,"function",N,"actionMove"),this.ia.Qq=t,this.h("actionMove",i,t))}),s.defineProperty(N,{wE:"actionUp"},function(){return this.ia!==null?this.ia.Rq:null},function(t){te(this);var i=this.ia.Rq;i!==t&&(t!==null&&s.j(t,"function",N,"actionUp"),this.ia.Rq=t,this.h("actionUp",i,t))}),s.defineProperty(N,{tE:"actionCancel"},function(){return this.ia!==null?this.ia.Oq:null},function(t){te(this);var i=this.ia.Oq;i!==t&&(t!==null&&s.j(t,"function",N,"actionCancel"),this.ia.Oq=t,this.h("actionCancel",i,t))}),s.defineProperty(N,{QB:"toolTip"},function(){return this.ia!==null?this.ia.jj:null},function(t){te(this);var i=this.ia.jj;i!==t&&(this.ia.jj=t,this.h("toolTip",i,t))}),s.defineProperty(N,{contextMenu:"contextMenu"},function(){return this.ia!==null?this.ia.Hi:null},function(t){te(this);var i=this.ia.Hi;i!==t&&(this.ia.Hi=t,this.h("contextMenu",i,t))}),N.prototype.bind=N.prototype.bind=function(t){t.Gg=this;var i=this.$l();i!==null&&Kg(i)&&s.k("Cannot add a Binding to a template that has already been copied: "+t),this.Ac===null&&(this.Ac=new E(Pt)),this.Ac.add(t)},N.prototype.findTemplateBinder=N.prototype.$l=function(){for(var t=this instanceof A?this:this.R;t!==null;){if(t.jl!==null)return t;t=t.R}return null},N.prototype.setProperties=function(t){s.$u(this,t)};var po;N.make=po=function(t,i){var n=arguments,e=null,o=null;if(typeof t=="function")o=t;else if(typeof t=="string"){var r=Va.ka(t);typeof r=="function"?(n=s.Vl(arguments),e=r(n),s.Pa(e)||s.k('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):o=he[t]}if(e===null&&(o!=null&&o.constructor||s.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),e=new o),r=1,e instanceof x&&1<n.length){var h=e,o=n[1];(typeof o=="string"||o instanceof HTMLDivElement)&&(Dy(h,o),r++)}for(;r<n.length;r++)o=n[r],o===void 0?s.k("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+e):Bg(e,o);return e};function Bg(t,i){if(typeof i=="string")if(t instanceof ot)t.text=i;else if(t instanceof Y)t.Fb=i;else if(t instanceof oi)t.source=i;else if(t instanceof A){var n=Rr(A,i);n!==null?t.type=n:s.k("Unknown Panel type as an argument to GraphObject.make: "+i)}else t instanceof yt?(n=Rr(yt,i),n!==null?t.type=n:s.k("Unknown Brush type as an argument to GraphObject.make: "+i)):t instanceof et?(n=Rr(et,i),n!==null?t.type=n:s.k("Unknown Geometry type as an argument to GraphObject.make: "+i)):t instanceof mt?(n=Rr(mt,i),n!==null?t.type=n:s.k("Unknown PathSegment type as an argument to GraphObject.make: "+i)):s.k("Unable to use a string as an argument to GraphObject.make: "+i);else if(i instanceof N)n=i,t instanceof A||s.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(n);else if(i instanceof Nt){var e=i,n=t,o;e.xe&&n.getRowDefinition?o=n.getRowDefinition(e.index):!e.xe&&n.getColumnDefinition?o=n.getColumnDefinition(e.index):s.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),o.Sp(e)}else if(i instanceof Wn)typeof t.ic=="function"?t.ic(i):s.Lj(t,i);else if(i instanceof Pt)t instanceof N||t instanceof Nt?t.bind(i):s.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(i instanceof Pi)t instanceof et?t.fc.add(i):s.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(i instanceof mt)t instanceof Pi?t.yb.add(i):s.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(i instanceof wt)t instanceof x||t instanceof q?t.Ub=i:s.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(i))for(n=0;n<i.length;n++)Bg(t,i[n]);else if(typeof i=="object"&&i!==null)if(t instanceof yt){o=new Bn;for(n in i)e=parseFloat(n),isNaN(e)?o[n]=i[n]:t.addColorStop(e,i[n]);s.$u(t,o)}else if(t instanceof Nt){i.row!==void 0?(o=i.row,(o==null||o===1/0||isNaN(o)||0>o)&&s.k("Must specify non-negative integer row for RowColumnDefinition "+i+", not: "+o),t.xe=!0,t.index=o):i.column!==void 0&&(o=i.column,(o==null||o===1/0||isNaN(o)||0>o)&&s.k("Must specify non-negative integer column for RowColumnDefinition "+i+", not: "+o),t.xe=!1,t.index=o),o=new Bn;for(n in i)n!=="row"&&n!=="column"&&(o[n]=i[n]);s.$u(t,o)}else s.$u(t,i);else s.k('Unknown initializer "'+i+'" for object being constructed by GraphObject.make: '+t)}var Va=new tt("string","function");N.getBuilders=function(){var t=new tt("string","function"),i;for(i in Va)if(i!==i.toLowerCase()){var n=Va.ka(i);typeof n=="function"&&t.add(i,n)}return t.freeze(),t};var Yr;N.defineBuilder=Yr=function(t,i){s.j(t,"string",N,"defineBuilder:name"),s.j(i,"function",N,"defineBuilder:func");var n=t.toLowerCase();t!==""&&n!=="none"&&t!==n||s.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Va.add(t,i)};var Ha;N.takeBuilderArgument=Ha=function(t,i,n){n===void 0&&(n=null);var e=t[1];if(typeof n=="function"?n(e):typeof e=="string")return t.splice(1,1),e;if(i===void 0)throw Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return i},Yr("Button",function(){var t=new yt(Jo);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var i=new yt(Jo);return i.addColorStop(0,"white"),i.addColorStop(1,"dodgerblue"),t=po(A,vr,{Kx:!0,YE:function(n,e){var o=n.Cd("ButtonBorder");o!==null&&(o.fill=e?n._buttonFillNormal:n._buttonFillDisabled)},_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:i,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},po(Y,{name:"ButtonBorder",Fb:"Rectangle",A:new P(0,0,2.761423749153968,2.761423749153968),B:new P(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.Ju=function(n,e){if(e.vu()){var o=e.Cd("ButtonBorder");if(o instanceof Y){var r=e._buttonFillOver;e._buttonFillNormal=o.fill,o.fill=r,r=e._buttonStrokeOver,e._buttonStrokeNormal=o.stroke,o.stroke=r}}},t.Ku=function(n,e){if(e.vu()){var o=e.Cd("ButtonBorder");o instanceof Y&&(o.fill=e._buttonFillNormal,o.stroke=e._buttonStrokeNormal)}},t}),Yr("TreeExpanderButton",function(){var t=po("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},po(Y,{name:"ButtonIcon",Fb:"MinusLine",Da:Wu},new Pt("figure","isTreeExpanded",function(i,n){var e=n.R;return i?e._treeExpandedFigure:e._treeCollapsedFigure}).by()),{visible:!1},new Pt("visible","isTreeLeaf",function(i){return!i}).by());return t.click=function(i,n){var e=n.W;if(e instanceof vt&&(e=e.Ze),e instanceof I){var o=e.g;if(o!==null){if(o=o.pb,e.wc){if(!o.canCollapseTree(e))return}else if(!o.canExpandTree(e))return;i.vc=!0,e.wc?o.collapseTree(e):o.expandTree(e)}}},t}),Yr("SubGraphExpanderButton",function(){var t=po("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},po(Y,{name:"ButtonIcon",Fb:"MinusLine",Da:Wu},new Pt("figure","isSubGraphExpanded",function(i,n){var e=n.R;return i?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).by()));return t.click=function(i,n){var e=n.W;if(e instanceof vt&&(e=e.Ze),e instanceof q){var o=e.g;if(o!==null){if(o=o.pb,e.$c){if(!o.canCollapseSubGraph(e))return}else if(!o.canExpandSubGraph(e))return;i.vc=!0,e.$c?o.collapseSubGraph(e):o.expandSubGraph(e)}}},t}),Yr("ToolTip",function(){var t=new vt(vr),i=new Y;return i.name="Border",i.fill="#FFFFE0",i.stroke="#CCCCCC",t.add(i),t}),Yr("ContextMenu",function(){return new vt(Gy)}),Yr("ContextMenuButton",function(){var t=po("Button");t.stretch=Zi;var i=t.Cd("ButtonBorder");return i instanceof Y&&(i.Fb="Rectangle",i.A=new P(0,0,2,3),i.B=new P(1,1,-2,-2)),t}),Yr("PanelExpanderButton",function(t){var i=Ha(t,"COLLAPSIBLE"),n=po("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},po(Y,"TriangleUp",{name:"ButtonIcon",Da:new lt(6,4)},new Pt("figure","visible",function(e){return e?n._buttonExpandedFigure:n._buttonCollapsedFigure}).by(i)));return t=n.Cd("ButtonBorder"),t instanceof Y&&(t.stroke=null,t.fill="transparent"),n.click=function(e,o){var r=o.g;if(r!==null&&!r.ib){var h=o.$l();h===null&&(h=o.W),h!==null&&(h=h.Cd(i),h!==null&&(r.Ib("Collapse/Expand Panel"),h.visible=!h.visible,r.Yc("Collapse/Expand Panel")))}},n}),Yr("CheckBoxButton",function(t){var i=Ha(t);return t=po("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},po(Y,{name:"ButtonIcon",cI:"M0 4 L3 9 9 0",mb:2,stretch:ii,HA:Li,visible:!1},i!==""?new Pt("visible",i).RI():[])),t.click=function(n,e){var o=n.g;if(!(o===null||o.ib||i!==""&&o.$.ib)){n.vc=!0;var r=e.Cd("ButtonIcon");o.Ib("checkbox"),r.visible=!r.visible,typeof e._doClick=="function"&&e._doClick(n,e),o.Yc("checkbox")}},t}),Yr("CheckBox",function(t){t=Ha(t),t=po("CheckBoxButton",t,{name:"Button",margin:new xt(0,1,0,0)});var i=po(A,"Horizontal",t,{Kx:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillDisabled:t._buttonFillDisabled,Ju:t.Ju,Ku:t.Ku,click:t.click,_buttonClick:t.click});return t.Ju=null,t.Ku=null,t.click=null,i});function Ry(){this.Gr=this.Hi=this.jj=this.Oq=this.Rq=this.Qq=this.Pq=this.Yi=this.As=this.zs=this.Zi=this.$i=this.aj=this.Cs=this.Bs=this.Gi=this.Mi=this.Ei=null}Ry.prototype.copy=function(){var t=new Ry;return t.Ei=this.Ei,t.Mi=this.Mi,t.Gi=this.Gi,t.Bs=this.Bs,t.Cs=this.Cs,t.aj=this.aj,t.$i=this.$i,t.Zi=this.Zi,t.zs=this.zs,t.As=this.As,t.Yi=this.Yi,t.Pq=this.Pq,t.Qq=this.Qq,t.Rq=this.Rq,t.Oq=this.Oq,t.jj=this.jj,t.Hi=this.Hi,t.Gr=this.Gr,t};function A(t){N.call(this),t===void 0?this.na=Ka:(s.ob(t,A,A,"type"),this.na=t),this.xa=new E(N),this.lf=Zu,this.na===Yh&&(this.Jn=!0),this.tr=an,this.Ki=Ao,this.na===qr&&Eg(this),this.Hp=Li,this.Tr=yx,this.Ur=Js,this.Qr=0,this.Pr=100,this.Sr=10,this.Rr=0,this.jl=this.Zd=this.ak=this.Fm=this.Hm=null,this.gs=NaN,this.xg=this.hk=null,this.Xo="category",this.wg=null,this.lj=new O(NaN,NaN,NaN,NaN),this.vk=this.it=this.Il=null,this.Oj=""}s.La(A,N),s.ni(A),s.ga("Panel",A);function Eg(t){t.Tj=Zu,t.Qh=1,t.Ji=null,t.nl=null,t.Ph=1,t.Oh=null,t.ml=null,t.Xc=[],t.Vc=[],t.bn=Zh,t.Cm=Zh,t.kj=0,t.Ui=0}A.prototype.cloneProtected=function(t){if(N.prototype.cloneProtected.call(this,t),t.na=this.na,t.lf=this.lf.S(),t.tr=this.tr.S(),t.Ki=this.Ki,t.na===qr){t.Tj=this.Tj.S(),t.Qh=this.Qh,t.Ji=this.Ji,t.nl=this.nl,t.Ph=this.Ph,t.Oh=this.Oh,t.ml=this.ml;var i=[];if(0<this.Xc.length){for(var n=this.Xc,e=n.length,o=0;o<e;o++)if(n[o]!==void 0){var r=n[o].copy();r.om(t),i[o]=r}}if(t.Xc=i,i=[],0<this.Vc.length)for(n=this.Vc,e=n.length,o=0;o<e;o++)n[o]!==void 0&&(r=n[o].copy(),r.om(t),i[o]=r);t.Vc=i,t.bn=this.bn,t.Cm=this.Cm,t.kj=this.kj,t.Ui=this.Ui}t.Hp=this.Hp,t.Tr=this.Tr.S(),t.Ur=this.Ur.S(),t.Qr=this.Qr,t.Pr=this.Pr,t.Sr=this.Sr,t.Rr=this.Rr,t.Hm=this.Hm,t.ak=this.ak,t.Zd=this.Zd,t.jl=this.jl,t.gs=this.gs,t.hk=this.hk,t.xg=this.xg,t.Xo=this.Xo,t.lj.assign(this.lj),t.Oj=this.Oj,this.it!==null&&(t.it=this.it)},A.prototype.pi=function(t){N.prototype.pi.call(this,t),t.xa=this.xa;for(var i=t.xa.n,n=i.length,e=0;e<n;e++)i[e].ej=t;t.Il=null},A.prototype.copy=function(){var t=N.prototype.copy.call(this);if(t!==null){for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e].copy(),r=t;o.om(r),o.Zm=null;var h=r.xa,l=h.count;if(h.Rd(l,o),h=r.W,h!==null){h.Um=null,o.le!==null&&h instanceof I&&(h.Qk=!0);var u=r.g;u!==null&&u.ja.lb||h.bd(Ei,"elements",r,null,o,null,l)}}return t}return null},A.prototype.ic=function(t){t.Je===A?this.type=t:N.prototype.ic.call(this,t)},A.prototype.toString=function(){return"Panel("+this.type+")#"+s.Pd(this)};var Ka;A.Position=Ka=s.p(A,"Position",0),A.Horizontal=s.p(A,"Horizontal",1);var Gy;A.Vertical=Gy=s.p(A,"Vertical",2);var eh;A.Spot=eh=s.p(A,"Spot",3);var vr;A.Auto=vr=s.p(A,"Auto",4);var qr;A.Table=qr=s.p(A,"Table",5),A.Viewbox=s.p(A,"Viewbox",6);var Ze;A.TableRow=Ze=s.p(A,"TableRow",7);var yo;A.TableColumn=yo=s.p(A,"TableColumn",8);var dr;A.Link=dr=s.p(A,"Link",9);var Yh;A.Grid=Yh=s.p(A,"Grid",10);var qh;A.Graduated=qh=s.p(A,"Graduated",11),s.defineProperty(A,{type:"type"},function(){return this.na},function(t){var i=this.na;i!==t&&(i!==Ze&&i!==yo||s.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.na=t,this.na===Yh?this.Jn=!0:this.na===qr&&Eg(this),this.H(),this.h("type",i,t))}),s.u(A,{elements:"elements"},function(){return this.xa.i}),s.u(A,{Ja:"naturalBounds"},function(){return this.Nc}),s.defineProperty(A,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?(0>t&&s.Fa(t,">= 0",A,"padding"),t=new xt(t)):(s.G(t,xt,A,"padding"),0>t.left&&s.Fa(t.left,">= 0",A,"padding:value.left"),0>t.right&&s.Fa(t.right,">= 0",A,"padding:value.right"),0>t.top&&s.Fa(t.top,">= 0",A,"padding:value.top"),0>t.bottom&&s.Fa(t.bottom,">= 0",A,"padding:value.bottom"));var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.H(),this.h("padding",i,t))}),s.defineProperty(A,{Zl:"defaultAlignment"},function(){return this.tr},function(t){var i=this.tr;i.L(t)||(this.tr=t=t.S(),this.H(),this.h("defaultAlignment",i,t))}),s.defineProperty(A,{ae:"defaultStretch"},function(){return this.Ki},function(t){var i=this.Ki;i!==t&&(s.ob(t,N,A,"defaultStretch"),this.Ki=t,this.H(),this.h("defaultStretch",i,t))}),s.defineProperty(A,{XK:"defaultSeparatorPadding"},function(){return this.Tj===void 0?Zu:this.Tj},function(t){if(this.Tj!==void 0){typeof t=="number"&&(t=new xt(t));var i=this.Tj;i.L(t)||(this.Tj=t=t.S(),this.H(),this.h("defaultSeparatorPadding",i,t))}}),s.defineProperty(A,{VK:"defaultRowSeparatorStroke"},function(){return this.Ji===void 0?null:this.Ji},function(t){var i=this.Ji;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Ji=t,this.oa(),this.h("defaultRowSeparatorStroke",i,t))}),s.defineProperty(A,{WK:"defaultRowSeparatorStrokeWidth"},function(){return this.Qh===void 0?1:this.Qh},function(t){if(this.Qh!==void 0){var i=this.Qh;i!==t&&isFinite(t)&&0<=t&&(this.Qh=t,this.H(),this.h("defaultRowSeparatorStrokeWidth",i,t))}}),s.defineProperty(A,{UK:"defaultRowSeparatorDashArray"},function(){return this.nl===void 0?null:this.nl},function(t){if(this.nl!==void 0){var i=this.nl;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",A,"defaultRowSeparatorDashArray:value"),t!==null){for(var n=t.length,e=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||s.k("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(e===0){if(i===null)return;t=null}}this.nl=t,this.oa(),this.h("defaultRowSeparatorDashArray",i,t)}}}),s.defineProperty(A,{PK:"defaultColumnSeparatorStroke"},function(){return this.Oh===void 0?null:this.Oh},function(t){if(this.Oh!==void 0){var i=this.Oh;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Oh=t,this.oa(),this.h("defaultColumnSeparatorStroke",i,t))}}),s.defineProperty(A,{QK:"defaultColumnSeparatorStrokeWidth"},function(){return this.Ph===void 0?1:this.Ph},function(t){if(this.Ph!==void 0){var i=this.Ph;i!==t&&isFinite(t)&&0<=t&&(this.Ph=t,this.H(),this.h("defaultColumnSeparatorStrokeWidth",i,t))}}),s.defineProperty(A,{OK:"defaultColumnSeparatorDashArray"},function(){return this.ml===void 0?null:this.ml},function(t){if(this.ml!==void 0){var i=this.ml;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",A,"defaultColumnSeparatorDashArray:value"),t!==null){for(var n=t.length,e=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||s.k("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(e===0){if(i===null)return;t=null}}this.ml=t,this.oa(),this.h("defaultColumnSeparatorDashArray",i,t)}}}),s.defineProperty(A,{cM:"viewboxStretch"},function(){return this.Hp},function(t){var i=this.Hp;i!==t&&(s.ob(t,N,A,"viewboxStretch"),this.Hp=t,this.H(),this.h("viewboxStretch",i,t))}),s.defineProperty(A,{Jx:"gridCellSize"},function(){return this.Tr},function(t){var i=this.Tr;if(!i.L(t)){s.G(t,lt,A,"gridCellSize"),t.I()&&t.width!==0&&t.height!==0||s.k("Invalid Panel.gridCellSize: "+t),this.Tr=t.S();var n=this.g;n!==null&&this===n.Gn&&Kr(n),this.oa(),this.h("gridCellSize",i,t)}}),s.defineProperty(A,{rF:"gridOrigin"},function(){return this.Ur},function(t){var i=this.Ur;if(!i.L(t)){s.G(t,D,A,"gridOrigin"),t.I()||s.k("Invalid Panel.gridOrigin: "+t),this.Ur=t.S();var n=this.g;n!==null&&this===n.Gn&&Kr(n),this.oa(),this.h("gridOrigin",i,t)}}),s.defineProperty(A,{Pk:"graduatedMin"},function(){return this.Qr},function(t){s.Ad(t,A,"graduatedMin");var i=this.Qr;i!==t&&(this.Qr=t,this.H(),this.h("graduatedMin",i,t),Jh(this)&&(t=this.W,t!==null&&ih(this,t,"graduatedRange")))}),s.defineProperty(A,{KA:"graduatedMax"},function(){return this.Pr},function(t){s.Ad(t,A,"graduatedMax");var i=this.Pr;i!==t&&(this.Pr=t,this.H(),this.h("graduatedMax",i,t),Jh(this)&&(t=this.W,t!==null&&ih(this,t,"graduatedRange")))}),s.u(A,{ou:"graduatedRange"},function(){return this.KA-this.Pk}),s.defineProperty(A,{LA:"graduatedTickUnit"},function(){return this.Sr},function(t){s.Ad(t,A,"graduatedTickUnit");var i=this.Sr;i!==t&&0<t&&(this.Sr=t,this.H(),this.h("graduatedTickUnit",i,t))}),s.defineProperty(A,{qF:"graduatedTickBase"},function(){return this.Rr},function(t){s.Ad(t,A,"graduatedTickBase");var i=this.Rr;i!==t&&(this.Rr=t,this.H(),this.h("graduatedTickBase",i,t))}),B=A.prototype,B.Ks=function(t){N.prototype.Ks.call(this,t);for(var i=this.xa.n,n=i.length,e=0;e<n;e++)i[e].Ks(t)},B.Ik=function(t,i){if(this.na===Yh){var n=this.vj()*i.scale;0>=n&&(n=1);var o=this.Jx,e=o.width,o=o.height,h=this.Ja,r=h.width,h=h.height,l=Math.ceil(r/e),u=Math.ceil(h/o),f=this.rF;t.save(),t.beginPath(),t.rect(0,0,r,h),t.clip();for(var a=[],p=this.xa.n,y=p.length,c=0;c<y;c++){var v=p[c],d=[];if(a.push(d),v.visible)for(var v=Oy(v.Fb),g=c+1;g<y;g++){var m=p[g];m.visible&&Oy(m.Fb)===v&&(m=m.interval,2<=m&&d.push(m))}}for(p=this.xa.n,y=p.length,c=0;c<y;c++){var w=p[c];if(w.visible&&(d=w.interval,!(2>e*d*n))){if(v=w.opacity,g=1,v!==1){if(v===0)continue;g=t.globalAlpha,t.globalAlpha=g*v}var m=a[c],M=!1,S=!0,F=w.AG;if(F!==null&&(M=!0,S=t.zx(F,w.Af)),w.Fb==="LineV"&&w.stroke!==null){t.lineWidth=w.mb,Un(this,t,w.stroke,!1,!1),t.beginPath();for(var C=Math.floor(-f.x/e),G=C;G<=C+l;G++){var H=G*e+f.x;0<=H&&H<=r&&Ja(G,d,m)&&(M&&!S?nu(t,H,0,H,h,F,w.Af):(t.moveTo(H,0),t.lineTo(H,h)))}t.stroke()}else if(w.Fb==="LineH"&&w.stroke!==null){for(t.lineWidth=w.mb,Un(this,t,w.stroke,!1,!1),t.beginPath(),G=C=Math.floor(-f.y/o);G<=C+u;G++)H=G*o+f.y,0<=H&&H<=h&&Ja(G,d,m)&&(M&&!S?nu(t,0,H,r,H,F,w.Af):(t.moveTo(0,H),t.lineTo(r,H)));t.stroke()}else if(w.Fb==="BarV"&&w.fill!==null)for(Un(this,t,w.fill,!0,!1),w=w.width,isNaN(w)&&(w=e),G=C=Math.floor(-f.x/e);G<=C+l;G++)H=G*e+f.x,0<=H&&H<=r&&Ja(G,d,m)&&t.fillRect(H,0,w,h);else if(w.Fb==="BarH"&&w.fill!==null)for(Un(this,t,w.fill,!0,!1),w=w.height,isNaN(w)&&(w=o),G=C=Math.floor(-f.y/o);G<=C+u;G++)H=G*o+f.y,0<=H&&H<=h&&Ja(G,d,m)&&t.fillRect(0,H,r,w);M&&t.wx(),v!==1&&(t.globalAlpha=g)}}t.restore(),t.Ke(!1)}else if(this.na===qh){for(n=i.Jm,i.Jm=!0,o=this.Ja,e=o.width,o=o.height,t.save(),t.beginPath(),t.rect(-1,-1,e+1,o+1),t.clip(),e=this.Bd(),e.ve(t,i),o=this.vj()*i.scale,0>=o&&(o=1),r=e.U,h=this.xa.n,l=this.Hm,u=h.length,f=0;f<u;f++)if(c=h[f],a=l[f],p=a.length,c.visible&&c!==e&&a.length!==0){if(c instanceof Y){if(!(2>this.LA*c.interval*e.of.hu/this.ou*o))for(d=c.za,v=c.mb*c.scale,g=c.qh,g.Ud()&&(g=lr),y=0;y<p;y++)m=c,M=a[y][0],C=r,G=a[y][1],w=d,S=v,F=g,H=m.jd,H.reset(),H.translate(M.x+C.x,M.y+C.y),H.rotate(G+m.angle,0,0),H.translate(-w.width*F.x+F.offsetX+S/2,-w.height*F.y+F.offsetY+S/2),H.scale(m.scale,m.scale),eu(m,!1),m.Xk.set(m.jd),m.Ho=m.scale,ds(m,!1),c.ve(t,i),c.jd.reset()}else if(c instanceof ot)for(this.vk===null&&(this.vk=new ot),d=this.vk,zg(c,d),y=0;y<p;y++)M=a[y],3<M.length&&(g=M[6],d.Ld=M[2],d.mg=M[3],d.pe=M[4],d.zf=M[5],d.Nc=M[8],d.jc(g.x,g.y,g.width,g.height),c=d,v=r,m=M[7],M=M[8],C=c.jd,C.reset(),C.translate(g.x+v.x,g.y+v.y),C.translate(-m.x,-m.y),Ey(c,C,M.x,M.y,M.width,M.height),eu(c,!1),c.Xk.set(c.jd),c.Ho=c.scale,ds(c,!1),d.ve(t,i))}i.Jm=n,t.restore(),t.Ke(!0)}else{for(this.na===qr&&(t.lineCap="butt",Ua(this,t,!0,this.Xc,!0),Ua(this,t,!1,this.Vc,!0),Rg(this,t,!0,this.Xc),Rg(this,t,!1,this.Vc),Ua(this,t,!0,this.Xc,!1),Ua(this,t,!1,this.Vc,!1)),(n=this.tu)&&t.save(),e=this.Bd(),o=this.xa.n,r=o.length,h=0;h<r;h++)l=o[h],n&&l===e&&(t.Qp=!0),l.ve(t,i),n&&l===e&&(t.Qp=!1);n&&(t.restore(),t.Ke(!0))}};function zg(t,i){i.M=t.M|6144,i.Dc=t.Dc,i.Gb=t.Gb,i.cc=t.cc,i.Ue=t.Ue.S(),i.Zh=t.Zh.S(),i.Yh=t.Yh.S(),i.Wi=t.Wi.copy(),i.rb=t.rb,i.mg=t.mg,i.Fg=t.Fg,i.Sm=t.Sm.S(),i.me=t.me.S(),i.xm=t.xm.S(),i.cn=t.cn,i.dn=t.dn.S(),i.en=t.en,t.og!==null&&(i.og=t.og.copy()),i.jn=t.jn,t instanceof ot&&(i.Ld=t.Ld,i.tc=t.tc,i.qg=t.qg,i.Jl=t.Jl,i.pg=t.pg,i.Nl=t.Nl,i.Lm=t.Lm,i.gk=t.gk,i.ek=t.ek,i.cj=t.cj,i.nj=t.nj,i.zf.Wj=null,i.fi=t.fi,i.gi=t.gi,i.ih=t.ih,i.$o=t.$o,i.ug=t.ug,i.tg=t.tg,i.sg=t.sg,i.Gm=t.Gm)}function Rg(t,i,n,e){for(var o=e.length,r=t.U,h=!0,l=0;l<o;l++){var u=e[l];if(u!==void 0){if(h)h=!1;else if(u.bb!==0){if(n){if(u.position>r.height)continue}else if(u.position>r.width)continue;var f=u.Hq;isNaN(f)&&(f=n?t.Qh:t.Ph);var a=u.Gq;if(a===null&&(a=n?t.Ji:t.Oh),f!==0&&a!==null){Un(t,i,a,!1,!1);var a=!1,p=!0,y=u.HJ;y===null&&(y=n?t.nl:t.ml),y!==null&&(a=!0,p=i.zx(y,0)),i.beginPath();var c=u.position+f;n?c>r.height&&(f-=c-r.height):c>r.width&&(f-=c-r.width),u=u.position+f/2,i.lineWidth=f,c=t.padding,n?(u+=c.top,f=c.left,c=r.width-c.right,a&&!p?nu(i,f,u,c,u,y,0):(i.moveTo(f,u),i.lineTo(c,u))):(u+=c.left,f=c.top,c=r.height-c.bottom,a&&!p?nu(i,u,f,u,c,y,0):(i.moveTo(u,f),i.lineTo(u,c))),i.stroke(),a&&i.wx()}}}}}function Ua(t,i,n,e,o){for(var r=e.length,h=t.U,l=0;l<r;l++){var u=e[l];if(u!==void 0&&u.background!==null&&u.xA!==o&&u.bb!==0){var f=n?h.height:h.width;if(!(u.position>f)){var a=u.af(),p=u.Hq;isNaN(p)&&(p=n?t.Qh:t.Ph);var y=u.Gq;y===null&&(y=n?t.Ji:t.Oh),y===null&&(p=0),a-=p,p=u.position+p,a+=u.bb,p+a>f&&(a=f-p),0>=a||(f=t.padding,Un(t,i,u.background,!0,!1),n?i.fillRect(f.left,p+f.top,h.width-(f.left+f.right),a):i.fillRect(p+f.left,f.top,a,h.height-(f.top+f.bottom)))}}}}function Ja(t,i,n){if(t%i!==0)return!1;i=n.length;for(var e=0;e<i;e++)if(t%n[e]===0)return!1;return!0}function Oy(t){return t==="LineV"||t==="BarV"}B.En=function(t,i,n,e,o){var r=this.Yg(),h=this.transform,l=1/(h.m11*h.m22-h.m12*h.m21),u=h.m22*l,f=-h.m12*l,a=-h.m21*l,p=h.m11*l,y=l*(h.m21*h.dy-h.m22*h.dx),c=l*(h.m12*h.dx-h.m11*h.dy);if(this.pn!==null)return h=this.U,fr(h.left,h.top,h.right,h.bottom,t,i,n,e,o);if(this.background!==null)r=t*u+i*a+y,l=t*f+i*p+c,t=n*u+e*a+y,u=n*f+e*p+c,o.m(0,0),n=this.Ja,n=fr(0,0,n.width,n.height,r,l,t,u,o),o.transform(h);else{r||(u=1,a=f=0,p=1,c=y=0),l=t*u+i*a+y,t=t*f+i*p+c,u=n*u+e*a+y,e=n*f+e*p+c,o.m(u,e),f=(u-l)*(u-l)+(e-t)*(e-t),n=!1,p=this.xa.n,c=p.length,a=s.K(),y=null,i=1/0;var v=null;this.tu&&(v=s.K(),y=this.Bd(),(n=y.En(l,t,u,e,v))&&(i=(l-v.x)*(l-v.x)+(t-v.y)*(t-v.y)));for(var d=0;d<c;d++){var g=p[d];g.visible&&g!==y&&g.En(l,t,u,e,a)&&(n=!0,g=(l-a.x)*(l-a.x)+(t-a.y)*(t-a.y),g<f&&(f=g,o.set(a)))}this.tu&&(i>f&&o.set(v),s.v(v)),s.v(a),r&&o.transform(h)}return n},B.H=function(t){N.prototype.H.call(this,t),t=null,(this.na===vr||this.na===dr)&&(t=this.Bd());for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e];if((o===t||o.ff)&&o.H(!0),!o.Da.I()){var r=Io(o,!1);(o instanceof nn||o instanceof A||o instanceof ot||r!==ei)&&o.H(!0)}}},B.gq=function(){if(gs(this)===!1){ie(this,!0),nh(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].gq()}},B.Ri=function(){if(!(this.M&2048)){eu(this,!0),ds(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].RA()}},B.RA=function(){ds(this,!0);for(var t=this.xa.n,i=t.length,n=0;n<i;n++)t[n].RA()},B.Qn=function(t,i,n,e){var o=this.lj;o.width=0,o.height=0;var r=this.Da,h=this.si;n===void 0&&(n=h.width,e=h.height),n=Math.max(n,h.width),e=Math.max(e,h.height);var l=this.Hf;isNaN(r.width)||(t=Math.min(r.width,l.width)),isNaN(r.height)||(i=Math.min(r.height,l.height)),t=Math.max(n,t),i=Math.max(e,i);var u=this.padding;t=Math.max(t-u.left-u.right,0),i=Math.max(i-u.top-u.bottom,0);var f=this.xa.n;if(f.length!==0){var a=this.na.Sb;switch(a){case"Position":var p=t,y=i,c=n,v=e,d=f.length;o.x=0,o.y=0,o.width=0,o.height=0;for(var g=gr(this),m=0;m<d;m++){var w=f[m];if(w.visible||w===g){var M=w.margin,S=M.right+M.left,F=M.top+M.bottom;Gt(w,p,y,c,v);var C=w.za,G=Math.max(C.width+S,0),H=Math.max(C.height+F,0),U=w.position.x,X=w.position.y;if(isFinite(U)||(U=0),isFinite(X)||(X=0),w instanceof Y){var _=w;if(_.CF)var Mt=_.mb/2,U=U-Mt,X=X-Mt}fn(o,U,X,G,H)}}break;case"Vertical":for(var Dt=t,J=n,ht=f.length,Yt=s.Za(),Bt=gr(this),Xt=0;Xt<ht;Xt++){var Ct=f[Xt];if(Ct.visible||Ct===Bt){var dh=Io(Ct,!1);if(dh!==ei&&dh!==tn)Yt.push(Ct);else{var Be=Ct.margin,de=Be.right+Be.left,Pr=Be.top+Be.bottom;Gt(Ct,Dt,1/0,J,0);var dn=Ct.za,be=Math.max(dn.width+de,0),Ns=Math.max(dn.height+Pr,0);o.width=Math.max(o.width,be),o.height+=Ns}}}var ai=Yt.length;if(ai!==0){for(this.Da.width?Dt=Math.min(this.Da.width,this.Hf.width):o.width!==0&&(Dt=Math.min(o.width,this.Hf.width)),Xt=0;Xt<ai;Xt++)Ct=Yt[Xt],(Ct.visible||Ct===Bt)&&(Be=Ct.margin,de=Be.right+Be.left,Pr=Be.top+Be.bottom,Gt(Ct,Dt,1/0,J,0),dn=Ct.za,be=Math.max(dn.width+de,0),Ns=Math.max(dn.height+Pr,0),o.width=Math.max(o.width,be),o.height+=Ns);s.ra(Yt)}break;case"Horizontal":for(var ni=i,ft=e,at=f.length,yi=s.Za(),qt=gr(this),Kt=0;Kt<at;Kt++){var Ri=f[Kt];if(Ri.visible||Ri===qt){var Cs=Io(Ri,!1);if(Cs!==ei&&Cs!==Zi)yi.push(Ri);else{var Dn=Ri.margin,to=Dn.right+Dn.left,_o=Dn.top+Dn.bottom;Gt(Ri,1/0,ni,0,ft);var is=Ri.za,ge=Math.max(is.width+to,0),ol=Math.max(is.height+_o,0);o.width+=ge,o.height=Math.max(o.height,ol)}}}var Ai=yi.length;if(Ai!==0){for(this.Da.height?ni=Math.min(this.Da.height,this.Hf.height):o.height!==0&&(ni=Math.min(o.height,this.Hf.height)),Kt=0;Kt<Ai;Kt++)Ri=yi[Kt],(Ri.visible||Ri===qt)&&(Dn=Ri.margin,to=Dn.right+Dn.left,_o=Dn.top+Dn.bottom,Gt(Ri,1/0,ni,0,ft),is=Ri.za,ge=Math.max(is.width+to,0),ol=Math.max(is.height+_o,0),o.width+=ge,o.height=Math.max(o.height,ol));s.ra(yi)}break;case"Spot":t:{var en=t,Jn=i,gh=n,Wi=e,Gi=f.length,gn=this.Bd(),hi=gn.margin,Pn=0,ns=0,mh=hi.right+hi.left,js=hi.top+hi.bottom;Gt(gn,en,Jn,gh,Wi);for(var Ut=gn.za,Fn=Ut.width,Ki=Ut.height,xi=Math.max(Fn+mh,0),ne=Math.max(Ki+js,0),mo=this.tu,li=s.lg(-hi.left,-hi.top,xi,ne),me=!0,ri=gr(this),ui=0;ui<Gi;ui++){var wi=f[ui];if(wi!==gn&&(wi.visible||wi===ri)){hi=wi.margin,Pn=hi.right+hi.left,ns=hi.top+hi.bottom,Gt(wi,en,Jn,0,0);var Ut=wi.za,xi=Math.max(Ut.width+Pn,0),ne=Math.max(Ut.height+ns,0),pi=wi.alignment;pi.ge()&&(pi=this.Zl),pi.Zc()||(pi=kt);var Ii=wi.qh;Ii.ge()&&(Ii=kt);var Ee=null;wi instanceof A&&wi.Oj!==""&&(wi.jc(0,0,Ut.width,Ut.height),Ee=wi.Cd(wi.Oj),Ee===wi&&(Ee=null));var es,Tr;if(Ee!==null){for(var Ci=Ee.Ja,Ln=Ee.margin,xe=s.wb(Ii.x*Ci.width+Ii.offsetX-Ln.left,Ii.y*Ci.height+Ii.offsetY-Ln.top);Ee!==wi;)Ee.transform.nb(xe),Ee=Ee.R;es=pi.x*Fn+pi.offsetX-xe.x,Tr=pi.y*Ki+pi.offsetY-xe.y,s.v(xe)}else es=pi.x*Fn+pi.offsetX-(Ii.x*Ut.width-Ii.offsetX)-hi.left,Tr=pi.y*Ki+pi.offsetY-(Ii.y*Ut.height-Ii.offsetY)-hi.top;me?(me=!1,o.x=es,o.y=Tr,o.width=xi,o.height=ne):fn(o,es,Tr,xi,ne)}}me?o.assign(li):mo?o.wF(li.x,li.y,li.width,li.height):fn(o,li.x,li.y,li.width,li.height),s.Bb(li);var xh=gn.stretch;switch(xh===Ao&&(xh=Io(gn,!1)),xh){case ei:break t;case ii:if(!isFinite(en)&&!isFinite(Jn))break t;break;case Zi:if(!isFinite(en))break t;break;case tn:if(!isFinite(Jn))break t}for(Ut=gn.za,Fn=Ut.width,Ki=Ut.height,xi=Math.max(Fn+mh,0),ne=Math.max(Ki+js,0),hi=gn.margin,li=s.lg(-hi.left,-hi.top,xi,ne),ui=0;ui<Gi;ui++)wi=f[ui],wi===gn||!wi.visible&&wi!==ri||(hi=wi.margin,Pn=hi.right+hi.left,ns=hi.top+hi.bottom,Ut=wi.za,xi=Math.max(Ut.width+Pn,0),ne=Math.max(Ut.height+ns,0),pi=wi.alignment,pi.ge()&&(pi=this.Zl),pi.Zc()||(pi=kt),Ii=wi.qh,Ii.ge()&&(Ii=kt),me?(me=!1,o.x=pi.x*Fn+pi.offsetX-(Ii.x*Ut.width-Ii.offsetX)-hi.left,o.y=pi.y*Ki+pi.offsetY-(Ii.y*Ut.height-Ii.offsetY)-hi.top,o.width=xi,o.height=ne):fn(o,pi.x*Fn+pi.offsetX-(Ii.x*Ut.width-Ii.offsetX)-hi.left,pi.y*Ki+pi.offsetY-(Ii.y*Ut.height-Ii.offsetY)-hi.top,xi,ne));me?o.assign(li):mo?o.wF(li.x,li.y,li.width,li.height):fn(o,li.x,li.y,li.width,li.height),s.Bb(li)}break;case"Auto":var ci=t,_t=i,on=n,os=e,wh=f.length,Mi=this.Bd(),xo=Mi.margin,Ds=ci,Bo=_t,rl=xo.right+xo.left,ee=xo.top+xo.bottom;Gt(Mi,ci,_t,on,os);var vi=Mi.za,Yn=0,rn=null;Mi instanceof Y&&(rn=Mi,Yn=rn.mb*rn.scale);var oe=Math.max(vi.width+rl,0),ji=Math.max(vi.height+ee,0),Ti=Hy(Mi),qn=Ti.x*oe+Ti.offsetX,Eo=Ti.y*ji+Ti.offsetY,we=Ky(Mi),Sr=we.x*oe+we.offsetX,kr=we.y*ji+we.offsetY;isFinite(ci)&&(Ds=Math.max(Math.abs(qn-Sr)-Yn,0)),isFinite(_t)&&(Bo=Math.max(Math.abs(Eo-kr)-Yn,0));var Qn=s.tm();Qn.m(0,0);for(var Mh=gr(this),Su=0;Su<wh;Su++){var Ph=f[Su];if(Ph!==Mi&&(Ph.visible||Ph===Mh)){var xo=Ph.margin,qf=xo.right+xo.left,di=xo.top+xo.bottom;Gt(Ph,Ds,Bo,0,0),vi=Ph.za,oe=Math.max(vi.width+qf,0),ji=Math.max(vi.height+di,0),Qn.m(Math.max(oe,Qn.width),Math.max(ji,Qn.height))}}if(wh===1)o.width=oe,o.height=ji,s.Lk(Qn);else{var Ti=Hy(Mi),we=Ky(Mi),io=0,re=0;we.x!==Ti.x&&we.y!==Ti.y&&(io=Qn.width/Math.abs(we.x-Ti.x),re=Qn.height/Math.abs(we.y-Ti.y)),s.Lk(Qn),Yn=0,rn!==null&&(Yn=rn.mb*rn.scale,qy(rn)===Li&&(io=re=Math.max(io,re)));var io=io+(Math.abs(Ti.offsetX)+Math.abs(we.offsetX)+Yn),re=re+(Math.abs(Ti.offsetY)+Math.abs(we.offsetY)+Yn),zo=Mi.stretch;switch(zo===Ao&&(zo=Io(Mi,!1)),zo){case ei:os=on=0;break;case ii:isFinite(ci)&&(io=ci),isFinite(_t)&&(re=_t);break;case Zi:isFinite(ci)&&(io=ci),os=0;break;case tn:on=0,isFinite(_t)&&(re=_t)}Mi.gq(),Gt(Mi,io,re,on,os),o.width=Mi.za.width+rl,o.height=Mi.za.height+ee}break;case"Table":for(var sl=t,hl=i,ku=n,Nu=e,si=f.length,Th=s.Za(),ll=s.Za(),nt=0;nt<si;nt++){var b=f[nt],An=b instanceof A?b:null;if(An===null||An.type!==Ze&&An.type!==yo||!b.visible)Th.push(b);else{ll.push(An);for(var rs=An.xa.n,Fs=rs.length,Si=0;Si<Fs;Si++){var Ls=rs[Si];An.type===Ze?Ls.Wb=b.Wb:An.type===yo&&(Ls.column=b.column),Th.push(Ls)}}}si=Th.length,si===0&&(this.ee(0),this.de(0));for(var Oi=[],nt=0;nt<si;nt++)b=Th[nt],ie(b,!0),nh(b,!0),Oi[b.Wb]||(Oi[b.Wb]=[]),Oi[b.Wb][b.column]||(Oi[b.Wb][b.column]=[]),Oi[b.Wb][b.column].push(b);s.ra(Th);for(var ul=s.Za(),Nr=s.Za(),Sh=s.Za(),wo={count:0},ze={count:0},Me=sl,Re=hl,Mo=this.Xc,si=Mo.length,nt=0;nt<si;nt++){var Z=Mo[nt];Z!==void 0&&(Z.bb=0)}for(Mo=this.Vc,si=Mo.length,nt=0;nt<si;nt++)Z=Mo[nt],Z!==void 0&&(Z.bb=0);for(var fl=Oi.length,In=0,nt=0;nt<fl;nt++)Oi[nt]&&(In=Math.max(In,Oi[nt].length));for(var Cu=Math.min(this.kj,fl-1),al=Math.min(this.Ui,In-1),sn=0,fl=Oi.length,kh=gr(this),nt=0;nt<fl;nt++)if(Oi[nt]){for(var In=Oi[nt].length,bt=this.ee(nt),Si=bt.bb=0;Si<In;Si++)if(Oi[nt][Si]){var fi=this.de(Si);ul[Si]===void 0&&(fi.bb=0,ul[Si]=!0);for(var Yp=Oi[nt][Si],hv=Yp.length,Po=0;Po<hv;Po++)if(b=Yp[Po],b.visible||b===kh){var Qf=1<b.gj||1<b.Fi;Qf&&(nt<Cu||Si<al||Nr.push(b));var hn=b.margin,ss=hn.right+hn.left,Cr=hn.top+hn.bottom,ln=mf(b,bt,fi,!1),As=b.Da,jr=!isNaN(As.height),Zf=!isNaN(As.width)&&jr;if(Qf||ln===ei||Zf||nt<Cu||Si<al||(wo[Si]!==void 0||ln!==ii&&ln!==Zi||(wo[Si]=-1,wo.count++),ze[nt]!==void 0||ln!==ii&&ln!==tn||(ze[nt]=-1,ze.count++),Sh.push(b)),Gt(b,1/0,1/0,0,0),!(nt<Cu||Si<al)){var Dr=b.za,bo=Math.max(Dr.width+ss,0),tr=Math.max(Dr.height+Cr,0);if(b.gj===1&&(ln===ei||ln===Zi)){var Z=this.ee(nt),hs=Z.af(),sn=Math.max(tr-Z.bb,0);sn+hs>Re&&(sn=Math.max(Re-hs,0));var Zn=Z.bb===0;Z.bb+=sn,Re=Math.max(Re-(sn+(Zn?hs:0)),0)}b.Fi!==1||ln!==ei&&ln!==tn||(Z=this.de(Si),hs=Z.af(),sn=Math.max(bo-Z.bb,0),sn+hs>Me&&(sn=Math.max(Me-hs,0)),Zn=Z.bb===0,Z.bb+=sn,Me=Math.max(Me-(sn+(Zn?hs:0)),0)),Qf&&b.gq()}}}}s.ra(ul);for(var no=0,Pe=0,si=this.Rp,nt=0;nt<si;nt++){var mn=this.Vc[nt];mn!==void 0&&(no+=mn.Ra,mn.Ra!==0&&(no+=mn.af()))}for(si=this.Dq,nt=0;nt<si;nt++){var pl=this.Xc[nt];pl!==void 0&&(Pe+=pl.Ra,pl.Ra!==0&&(Pe+=pl.af()))}for(var Me=Math.max(sl-no,0),ju=Re=Math.max(hl-Pe,0),Du=Me,si=Sh.length,nt=0;nt<si;nt++){var b=Sh[nt],bt=this.ee(b.Wb),fi=this.de(b.column),qp=b.za,hn=b.margin,ss=hn.right+hn.left,Cr=hn.top+hn.bottom;wo[b.column]=fi.bb===0&&wo[b.column]!==void 0?Math.max(qp.width+ss,wo[b.column]):null,ze[b.Wb]=bt.bb===0&&ze[b.Wb]!==void 0?Math.max(qp.height+Cr,ze[b.Wb]):null}var Is=0,Bs=0,Fr;for(Fr in ze)Fr!=="count"&&(Is+=ze[Fr]);for(Fr in wo)Fr!=="count"&&(Bs+=wo[Fr]);for(var Di=s.tm(),nt=0;nt<si;nt++)if(b=Sh[nt],b.visible||b===kh){var bt=this.ee(b.Wb),fi=this.de(b.column),To=0;isFinite(fi.width)?To=fi.width:(To=isFinite(Me)&&wo[b.column]!==null?Bs===0?fi.bb+Me:wo[b.column]/Bs*Du:wo[b.column]!==null?Me:fi.bb||Me,To=Math.max(0,To-fi.af()));var Ge=0;switch(isFinite(bt.height)?Ge=bt.height:(Ge=isFinite(Re)&&ze[b.Wb]!==null?Is===0?bt.bb+Re:ze[b.Wb]/Is*ju:ze[b.Wb]!==null?Re:bt.bb||Re,Ge=Math.max(0,Ge-bt.af())),Di.m(Math.max(fi.Dh,Math.min(To,fi.ke)),Math.max(bt.Dh,Math.min(Ge,bt.ke))),ln=mf(b,bt,fi,!1),ln){case Zi:Di.height=Math.max(Di.height,bt.bb+Re);break;case tn:Di.width=Math.max(Di.width,fi.bb+Me)}hn=b.margin,ss=hn.right+hn.left,Cr=hn.top+hn.bottom,b.gq(),Gt(b,Di.width,Di.height,fi.Dh,bt.Dh),Dr=b.za,bo=Math.max(Dr.width+ss,0),tr=Math.max(Dr.height+Cr,0),isFinite(Me)&&(bo=Math.min(bo,Di.width)),isFinite(Re)&&(tr=Math.min(tr,Di.height));var Tn=0,Tn=bt.bb;bt.bb=Math.max(bt.bb,tr),sn=bt.bb-Tn,Re=Math.max(Re-sn,0),Tn=fi.bb,fi.bb=Math.max(fi.bb,bo),sn=fi.bb-Tn,Me=Math.max(Me-sn,0)}s.ra(Sh);var Xn=s.tm(),si=Nr.length;if(si!==0){for(var Te=s.Za(),ir=s.Za(),nt=0;nt<fl;nt++)if(Oi[nt])for(In=Oi[nt].length,bt=this.ee(nt),Te[nt]=bt.bb,Si=0;Si<In;Si++)Oi[nt][Si]&&(fi=this.de(Si),ir[Si]=fi.bb)}for(nt=0;nt<si;nt++)if(b=Nr[nt],b.visible||b===kh){switch(bt=this.ee(b.Wb),fi=this.de(b.column),Di.m(Math.max(fi.Dh,Math.min(sl,fi.ke)),Math.max(bt.Dh,Math.min(hl,bt.ke))),ln=mf(b,bt,fi,!1),ln){case ii:ir[fi.index]!==0&&(Di.width=Math.min(Di.width,ir[fi.index])),Te[bt.index]!==0&&(Di.height=Math.min(Di.height,Te[bt.index]));break;case Zi:ir[fi.index]!==0&&(Di.width=Math.min(Di.width,ir[fi.index]));break;case tn:Te[bt.index]!==0&&(Di.height=Math.min(Di.height,Te[bt.index]))}isFinite(fi.width)&&(Di.width=fi.width),isFinite(bt.height)&&(Di.height=bt.height),Xn.m(0,0);for(var ti=1;ti<b.gj&&!(b.Wb+ti>=this.Dq);ti++)Z=this.ee(b.Wb+ti),sn=ln===ii||ln===tn?Math.max(Z.Dh,Te[b.Wb+ti]===0?Z.ke:Math.min(Te[b.Wb+ti],Z.ke)):Math.max(Z.Dh,isNaN(Z.mf)?Z.ke:Math.min(Z.mf,Z.ke)),Xn.height+=sn;for(ti=1;ti<b.Fi&&!(b.column+ti>=this.Rp);ti++)Z=this.de(b.column+ti),sn=ln===ii||ln===Zi?Math.max(Z.Dh,ir[b.column+ti]===0?Z.ke:Math.min(ir[b.column+ti],Z.ke)):Math.max(Z.Dh,isNaN(Z.mf)?Z.ke:Math.min(Z.mf,Z.ke)),Xn.width+=sn;Di.width+=Xn.width,Di.height+=Xn.height,hn=b.margin,ss=hn.right+hn.left,Cr=hn.top+hn.bottom,Gt(b,Di.width,Di.height,ku,Nu);for(var Dr=b.za,bo=Math.max(Dr.width+ss,0),tr=Math.max(Dr.height+Cr,0),Lr=0,ti=0;ti<b.gj&&!(b.Wb+ti>=this.Dq);ti++)Z=this.ee(b.Wb+ti),Lr+=Z.total||0;if(Lr<tr){var So=tr-Lr,Es=tr-Lr;if(b.By!==null)for(var nr=b.By,ti=0;ti<b.gj&&!(0>=So)&&!(b.Wb+ti>=this.Dq);ti++){var Z=this.ee(b.Wb+ti),Ui=Z.Ra||0,yl=nr(b,Z,Es);Z.bb=Math.min(Z.ke,Ui+yl),Z.Ra!==Ui&&(So-=Z.Ra-Ui)}for(;0<So&&(Ui=Z.Ra||0,isNaN(Z.height)&&Z.ke>Ui&&(Z.bb=Math.min(Z.ke,Ui+So),Z.Ra!==Ui&&(So-=Z.Ra-Ui)),Z.index!==0);)Z=this.ee(Z.index-1)}for(var Nh=0,ti=0;ti<b.Fi&&!(b.column+ti>=this.Rp);ti++)Z=this.de(b.column+ti),Nh+=Z.total||0;if(Nh<bo){if(So=bo-Nh,Es=bo-Nh,b.By!==null)for(nr=b.By,ti=0;ti<b.Fi&&!(0>=So)&&!(b.column+ti>=this.Rp);ti++)Z=this.de(b.column+ti),Ui=Z.Ra||0,yl=nr(b,Z,Es),Z.bb=Math.min(Z.ke,Ui+yl),Z.Ra!==Ui&&(So-=Z.Ra-Ui);for(;0<So&&(Ui=Z.Ra||0,isNaN(Z.width)&&Z.ke>Ui&&(Z.bb=Math.min(Z.ke,Ui+So),Z.Ra!==Ui&&(So-=Z.Ra-Ui)),Z.index!==0);)Z=this.de(Z.index-1)}}s.ra(Nr),s.Lk(Xn),s.Lk(Di),Te!==void 0&&s.ra(Te),ir!==void 0&&s.ra(ir);for(var Ar=0,jh=0,ln=Io(this,!0),cl=this.Da,Xf=this.Hf,vl=Pe=no=0,Ch=0,si=this.Rp,nt=0;nt<si;nt++)this.Vc[nt]!==void 0&&(Z=this.de(nt),isFinite(Z.width)?(vl+=Z.width,vl+=Z.af()):Ya(Z)===Qh?(vl+=Z.Ra,vl+=Z.af()):Z.Ra!==0&&(no+=Z.Ra,no+=Z.af()));var Ar=isFinite(cl.width)?Math.min(cl.width,Xf.width):ln!==ei&&isFinite(sl)?sl:no,Ar=Math.max(Ar,this.si.width),Ar=Math.max(Ar-vl,0),Ro=Math.max(Ar/no,1);for(isFinite(Ro)||(Ro=1),nt=0;nt<si;nt++)this.Vc[nt]!==void 0&&(Z=this.de(nt),isFinite(Z.width)||Ya(Z)===Qh||(Z.bb=Z.Ra*Ro),Z.position=o.width,Z.Ra!==0&&(o.width+=Z.Ra,o.width+=Z.af()));for(si=this.Dq,nt=0;nt<si;nt++)this.Xc[nt]!==void 0&&(Z=this.ee(nt),isFinite(Z.height)?(Ch+=Z.height,Ch+=Z.af()):Ya(Z)===Qh?(Ch+=Z.Ra,Ch+=Z.af()):Z.Ra!==0&&(Pe+=Z.Ra,Z.Ra!==0&&(Pe+=Z.af())));var jh=isFinite(cl.height)?Math.min(cl.height,Xf.height):ln!==ei&&isFinite(hl)?hl:Pe,jh=Math.max(jh,this.si.height),jh=Math.max(jh-Ch,0),Dh=Math.max(jh/Pe,1);for(isFinite(Dh)||(Dh=1),nt=0;nt<si;nt++)this.Xc[nt]!==void 0&&(Z=this.ee(nt),isFinite(Z.height)||Ya(Z)===Qh||(Z.bb=Z.Ra*Dh),Z.position=o.height,Z.Ra!==0&&(o.height+=Z.Ra,Z.Ra!==0&&(o.height+=Z.af())));for(si=ll.length,nt=0;nt<si;nt++){var se=ll[nt];se.type===Ze?(To=o.width,Z=this.ee(se.Wb),Ge=Z.bb):(Z=this.de(se.column),To=Z.bb,Ge=o.height),se.ud.m(0,0,To,Ge),ie(se,!1),Oi[se.Wb]||(Oi[se.Wb]=[]),Oi[se.Wb][se.column]||(Oi[se.Wb][se.column]=[]),Oi[se.Wb][se.column].push(se)}s.ra(ll),this.it=Oi;break;case"Viewbox":var Fu=t,Qp=i,wm=n,Mm=e;1<f.length&&s.k("Viewbox Panel cannot contain more than one GraphObject.");var Ir=f[0];Ir.rb=1,Ir.gq(),Gt(Ir,1/0,1/0,wm,Mm);var Wf=Ir.za,Zp=Ir.margin,Pm=Zp.right+Zp.left,Tm=Zp.top+Zp.bottom;if(isFinite(Fu)||isFinite(Qp)){var bx=Ir.scale,Xp=Wf.width,Wp=Wf.height,Sm=Math.max(Fu-Pm,0),km=Math.max(Qp-Tm,0),$f=1;this.Hp===Li?Xp!==0&&Wp!==0&&($f=Math.min(Sm/Xp,km/Wp)):Xp!==0&&Wp!==0&&($f=Math.max(Sm/Xp,km/Wp)),$f===0&&($f=1e-4),Ir.rb*=$f,bx!==Ir.scale&&(ie(Ir,!0),Gt(Ir,1/0,1/0,wm,Mm))}Wf=Ir.za,o.width=isFinite(Fu)?Fu:Math.max(Wf.width+Pm,0),o.height=isFinite(Qp)?Qp:Math.max(Wf.height+Tm,0);break;case"Link":var Nm=f.length;if(this instanceof vt||this instanceof k){var dl=null;if(this instanceof k&&(dl=this),this instanceof vt&&(dl=this.Ze),dl instanceof k){var _f=dl;if(Nm===0){var $p=this.Ja;Or($p,0,0);var ko=this.za;ko.m(0,0,0,0)}else{var _p=this instanceof vt?null:dl.path,zs=dl.$n,er=this.lj;er.assign(zs),er.x=0,er.y=0;var Fh=_f.points,gl=dl.qa;this.Hu(!1);var Cm=zs.width,jm=zs.height;this.Xi.m(zs.x,zs.y),this.$g===null&&(this.$g=new E(O)),this.$g.clear(),_p!==null&&(Qg(_p,Cm,jm,this),ko=_p.za,er.Zg(ko),this.$g.add(ko));for(var Rs=s.Wg(),bf=s.K(),Gs=s.K(),lv=0;lv<Nm;lv++){var Vi=f[lv];if(Vi!==_p)if(Vi.ff&&Vi instanceof Y)Qg(Vi,Cm,jm,this),ko=Vi.za,er.Zg(ko),this.$g.add(ko);else if(2>gl)Gt(Vi,1/0,1/0),ko=Vi.za,er.Zg(ko),this.$g.add(ko);else{var Se=Vi.Qe,Dm=Vi.zB,uv=Vi.qh;uv.Ud()&&(uv=kt);var ls=Vi.Eq,tw=Vi.AB,bp=0,t0=0,i0=0;if(Se<-gl||Se>=gl){var Fm=_f.SF,Br=_f.RF;ls!==ce&&(i0=_f.computeAngle(Vi,ls,Br),Vi.mg=i0),bp=Fm.x-zs.x,t0=Fm.y-zs.y}else{var Oe,or;if(0<=Se)Oe=Fh.fa(Se),or=Se<gl-1?Fh.fa(Se+1):Oe;else{var ml=gl+Se;Oe=Fh.fa(ml),or=0<ml?Fh.fa(ml-1):Oe}if(Oe.Qc(or)){var xl,wl;0<=Se?(xl=0<Se?Fh.fa(Se-1):Oe,wl=Se<gl-2?Fh.fa(Se+2):or):(xl=ml<gl-1?Fh.fa(ml+1):Oe,wl=1<ml?Fh.fa(ml-2):or);var Lm=xl.Cf(Oe),Am=or.Cf(wl),Br=Lm>Am+10?0<=Se?xl.Qb(Oe):Oe.Qb(xl):Am>Lm+10?0<=Se?or.Qb(wl):wl.Qb(or):0<=Se?xl.Qb(wl):wl.Qb(xl)}else Br=0<=Se?Oe.Qb(or):or.Qb(Oe);ls!==ce&&(i0=_f.computeAngle(Vi,ls,Br),Vi.mg=i0),bp=Oe.x+(or.x-Oe.x)*Dm-zs.x,t0=Oe.y+(or.y-Oe.y)*Dm-zs.y}Gt(Vi,1/0,1/0);var ko=Vi.za,$p=Vi.Ja,ta=0;Vi instanceof Y&&(ta=Vi.mb);var Ml=$p.width+ta,Lu=$p.height+ta;Rs.reset(),Rs.translate(-ko.x,-ko.y),Rs.scale(Vi.scale,Vi.scale),Rs.rotate(ls===ce?Vi.angle:Br,Ml/2,Lu/2),ls!==kf&&ls!==Cf||Rs.rotate(90,Ml/2,Lu/2),ls!==Nf&&ls!==jf||Rs.rotate(-90,Ml/2,Lu/2),ls===lp&&(45<Br&&135>Br||225<Br&&315>Br)&&Rs.rotate(-Br,Ml/2,Lu/2);var Au=new O(0,0,Ml,Lu);bf.ao(Au,uv),Rs.nb(bf);var iw=-bf.x+ta/2*Vi.scale,nw=-bf.y+ta/2*Vi.scale;Gs.assign(tw),isNaN(Gs.x)&&(Gs.x=0<=Se?Ml/2+3:-(Ml/2+3)),isNaN(Gs.y)&&(Gs.y=-(Lu/2+3)),Gs.rotate(Br),bp+=Gs.x,t0+=Gs.y,Au.set(ko),Au.x=bp+iw,Au.y=t0+nw,this.$g.add(Au),er.Zg(Au)}}if(this instanceof k)for(var Im=this.Ff;Im.next();)Gt(Im.value,1/0,1/0);this.lj=er;var fv=this.Xi;fv.m(fv.x+er.x,fv.y+er.y),Or(o,er.width||0,er.height||0),s.bf(Rs),s.v(bf),s.v(Gs)}}}break;case"Grid":break;case"Graduated":var ew=t,ow=i,rw=n,sw=e,Os=this.Bd();this.Fm=[];var Iu=Os.margin,hw=Iu.right+Iu.left,lw=Iu.top+Iu.bottom;Gt(Os,ew,ow,rw,sw);var Bm=Os.za,uw=Bm.height,fw=Math.max(Bm.width+hw,0),aw=Math.max(uw+lw,0),Em=new O(-Iu.left,-Iu.top,fw,aw);this.Fm.push(Em),o.assign(Em);for(var ia=Os.of,zm=Os.mb,av=ia.Hx,Bu=ia.gu,Pl=ia.hu,pw=av.length,pv=0,yv=0,Eu=s.Za(),cv=0;cv<pw;cv++){for(var vv=av[cv],Rm=[],yv=pv=0,yw=vv.length,na=0;na<yw;na+=2){var Gm=vv[na],Om=vv[na+1];if(na!==0){var eo=180*Math.atan2(Om-yv,Gm-pv)/Math.PI;0>eo&&(eo+=360),Rm.push(eo)}pv=Gm,yv=Om}Eu.push(Rm)}var Vm;if(this.ak===null){for(var Hm=[],dv=this.xa.n,Km=dv.length,gv=0;gv<Km;gv++){var ea=dv[gv],Um=[];if(Hm.push(Um),ea.visible)for(var cw=ea.interval,mv=0;mv<Km;mv++){var oa=dv[mv];if(oa.visible&&ea!==oa&&!(ea instanceof Y&&!(oa instanceof Y)||ea instanceof ot&&!(oa instanceof ot))){var Jm=oa.interval;Jm>cw&&Um.push(Jm)}}}this.ak=Hm}Vm=this.ak;var Ym=this.xa.n,vw=Ym.length,Lh=0,qm=0,Qm=Pl;this.Hm=[];for(var n0=[],e0=0;e0<vw;e0++){var Ah=Ym[e0],n0=[];if(Ah.visible&&Ah!==Os){var Zm=Ah.interval,Xm=this.LA;if(!(2>Xm*Zm*Pl/this.ou)){var Go=this.qF,Wm=Vm[e0],ra=Bu[0][0],Er=0,ke=0,qm=Pl*Ah.pF-1e-4,Qm=Pl*Ah.nF+1e-4,zu=Xm*Zm;if(Go<this.Pk)var Tl=(this.Pk-Go)/zu,Tl=Tl%1===0?Tl:Math.floor(Tl+1),Go=Go+Tl*zu;else Go>this.Pk+zu&&(Tl=Math.floor((Go-this.Pk)/zu),Go-=Tl*zu);for(;Go<=this.KA;){var xv;t:{for(var dw=Wm.length,wv=0;wv<dw;wv++)if(St((Go-this.qF)%(Wm[wv]*this.LA),0)){xv=!1;break t}xv=!0}if(xv&&(Lh=(Go-this.Pk)*Pl/this.ou,Lh>Pl&&(Lh=Pl),qm<=Lh&&Lh<=Qm)){for(var eo=Eu[Er][ke],Ru=Bu[Er][ke];Er<Bu.length;){for(;Lh>ra&&ke<Bu[Er].length-1;)ke++,eo=Eu[Er][ke],Ru=Bu[Er][ke],ra+=Ru;if(Lh<=ra)break;Er++,ke=0,eo=Eu[Er][ke],Ru=Bu[Er][ke],ra+=Ru}var Ve=av[Er],$m=Ve[2*ke],_m=Ve[2*ke+1],o0=(Lh-(ra-Ru))/Ru,Mv=new D($m+(Ve[2*ke+2]-$m)*o0+zm/2-ia.eb.x,_m+(Ve[2*ke+3]-_m)*o0+zm/2-ia.eb.y);Mv.scale(Os.scale,Os.scale);var Vs=eo,Gu=Eu[Er];if(1e-4>o0?0<ke?Vs=Gu[ke-1]:St(Ve[0],Ve[Ve.length-2])&&St(Ve[1],Ve[Ve.length-1])&&(Vs=Gu[Gu.length-1]):.9999<o0&&(ke+1<Gu.length?Vs=Gu[ke+1]:St(Ve[0],Ve[Ve.length-2])&&St(Ve[1],Ve[Ve.length-1])&&(Vs=Gu[0])),eo!==Vs&&(180<Math.abs(eo-Vs)&&(eo<Vs?eo+=360:Vs+=360),eo=(eo+Vs)/2%360),Ah instanceof ot){var Ih="";Ah.oF!==null?(Ih=Ah.oF(Go),Ih=Ih!=null?Ih.toString():""):Ih=(+Go.toFixed(2)).toString(),Ih!==""&&n0.push([Mv,eo,Ih])}else n0.push([Mv,eo])}Go+=zu}}}this.Hm.push(n0)}s.ra(Eu);for(var gw=this.Hm,mw=f.length,r0=0;r0<mw;r0++){var Sl=f[r0],Pv=gw[r0];if(Sl.visible&&Sl!==Os&&Pv.length!==0){if(Sl instanceof Y){var Bh=Sl,bm=Pv,xw=o,Tv=Bh.qh;Tv.Ud()&&(Tv=lr);var ww=Bh.angle;Bh.mg=0,Gt(Bh,1/0,1/0),Bh.mg=ww;var tx=Bh.za,Sv=tx.width,kv=tx.height,ix=s.lg(0,0,Sv,kv),oo=s.K();oo.ao(ix,Tv),s.Bb(ix);for(var s0=-oo.x,h0=-oo.y,kl=new O,Mw=bm.length,l0=0;l0<Mw;l0++)for(var Nv=bm[l0],nx=Nv[0].x,ex=Nv[0].y,ox=Nv[1],u0=0;4>u0;u0++){switch(u0){case 0:oo.m(s0,h0);break;case 1:oo.m(s0+Sv,h0);break;case 2:oo.m(s0,h0+kv);break;case 3:oo.m(s0+Sv,h0+kv)}oo.rotate(ox+Bh.angle),oo.offset(nx,ex),l0===0&&u0===0?kl.m(oo.x,oo.y,0,0):kl.yi(oo),oo.offset(-nx,-ex),oo.rotate(-ox-Bh.angle)}s.v(oo),this.Fm.push(kl),fn(xw,kl.x,kl.y,kl.width,kl.height)}else if(Sl instanceof ot){var f0=Sl,rx=Pv,Pw=o;this.vk===null&&(this.vk=new ot);var zr=this.vk;zg(f0,zr);var Cv=f0.qh;Cv.Ud()&&(Cv=lr);for(var Eh=f0.Eq,Tw=f0.AB,Nl=null,a0=0,p0=0,Hs=0,jv=0,Sw=rx.length,y0=0;y0<Sw;y0++){var us=rx[y0],a0=us[0].x,p0=us[0].y,Hs=us[1];Eh!==ce&&(jv=k.computeAngle(Eh,Hs),zr.mg=jv),zr.text=us[2],Gt(zr,1/0,1/0);var zh=zr.za,Ou=zr.Ja,Vu=Ou.width,Hu=Ou.height,Ks=s.Wg();Ks.reset(),Ks.translate(-zh.x,-zh.y),Ks.scale(zr.scale,zr.scale),Ks.rotate(Eh===ce?zr.angle:Hs,Vu/2,Hu/2),Eh!==kf&&Eh!==Cf||Ks.rotate(90,Vu/2,Hu/2),Eh!==Nf&&Eh!==jf||Ks.rotate(-90,Vu/2,Hu/2),Eh===lp&&(45<Hs&&135>Hs||225<Hs&&315>Hs)&&Ks.rotate(-Hs,Vu/2,Hu/2);var sx=s.lg(0,0,Vu,Hu),sa=s.K();sa.ao(sx,Cv),Ks.nb(sa);var kw=-sa.x,Nw=-sa.y,Us=s.K();Us.assign(Tw),isNaN(Us.x)&&(Us.x=Vu/2+3),isNaN(Us.y)&&(Us.y=-(Hu/2+3)),Us.rotate(Hs);var a0=a0+(Us.x+kw),p0=p0+(Us.y+Nw),Dv=new O(a0,p0,zh.width,zh.height),Cw=new O(zh.x,zh.y,zh.width,zh.height),jw=new O(Ou.x,Ou.y,Ou.width,Ou.height),hx=new sh;hx.Sp(zr.zf),us.push(jv),us.push(zr.pe),us.push(hx),us.push(Dv),us.push(Cw),us.push(jw),y0===0?Nl=Dv.copy():Nl.Zg(Dv),s.v(Us),s.v(sa),s.Bb(sx),s.bf(Ks)}this.Fm.push(Nl),fn(Pw,Nl.x,Nl.y,Nl.width,Nl.height)}ie(Sl,!1)}}break;case"TableRow":case"TableColumn":s.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:s.k("Unknown panel type: "+a)}}var rr=o.width,sr=o.height,c0=this.padding,Dw=c0.top+c0.bottom,rr=rr+(c0.left+c0.right),sr=sr+Dw;isFinite(r.width)&&(rr=r.width),isFinite(r.height)&&(sr=r.height),rr=Math.min(l.width,rr),sr=Math.min(l.height,sr),rr=Math.max(h.width,rr),sr=Math.max(h.height,sr),rr=Math.max(n,rr),sr=Math.max(e,sr),o.width=rr,o.height=sr,Or(this.Nc,rr,sr),qo(this,0,0,rr,sr)},A.prototype.findMainElement=A.prototype.Bd=function(){if(this.Il===null){var t=this.xa.n,i=t.length;if(i===0)return null;for(var n=0;n<i;n++){var e=t[n];if(e.ff===!0)return this.Il=e}this.Il=t[0]}return this.Il};function gr(t){return t.W!==null?t.W.cg:null}A.prototype.pj=function(t,i,n,e){var o=this.lj,r=this.xa.n,h=s.lg(0,0,0,0);if(r.length===0){var l=this.U;l.x=t,l.y=i,l.width=n,l.height=e}else{if(!this.Da.I()){var u=Io(this,!0),f=this.ud,a=f.width,p=f.height,y=this.margin,c=y.left+y.right,v=y.top+y.bottom;switch(a===n&&p===e&&(u=ei),u){case ei:(a>n||p>e)&&(this.H(),Gt(this,a>n?n:a,p>e?e:p));break;case ii:this.H(!0),Gt(this,n+c,e+v,0,0);break;case Zi:this.H(!0),Gt(this,n+c,p+v,0,0);break;case tn:this.H(!0),Gt(this,a+c,e+v,0,0)}}l=this.U,l.x=t,l.y=i,l.width=n,l.height=e;var d=this.na.Sb;switch(d){case"Position":for(var g=r.length,m=o.x-this.padding.left,w=o.y-this.padding.top,M=0;M<g;M++){var S=r[M],F=S.za,C=S.margin,G=S.position.x,H=S.position.y;if(h.x=isNaN(G)?-m:G-m,h.y=isNaN(H)?-w:H-w,S instanceof Y){var U=S;if(U.CF){var X=U.mb/2;h.x-=X,h.y-=X}}h.x+=C.left,h.y+=C.top,h.width=F.width,h.height=F.height,S.visible&&S.jc(h.x,h.y,h.width,h.height)}break;case"Vertical":for(var _=r.length,Mt=this.padding.left,Dt=this.IF,J=Dt?o.height:this.padding.top,ht=0;ht<_;ht++){var Yt=Mt,Bt=r[ht];if(Bt.visible){var Xt=Bt.za,Ct=Bt.margin,dh=Ct.left+Ct.right,Be=Mt+this.padding.right,de=Xt.width,Pr=Io(Bt,!1);(isNaN(Bt.Da.width)&&Pr===ii||Pr===Zi)&&(de=Math.max(o.width-dh-Be,0));var dn=de+dh+Be,be=Bt.alignment;be.ge()&&(be=this.Zl),be.Zc()||(be=kt),Dt&&(J-=Xt.height+Ct.bottom+Ct.top),Bt.jc(Yt+be.offsetX+Ct.left+(o.width*be.x-dn*be.x),J+be.offsetY+Ct.top,de,Xt.height),Dt||(J+=Xt.height+Ct.bottom+Ct.top)}}break;case"Horizontal":for(var Ns=r.length,ai=this.padding.top,ni=this.IF,ft=ni?o.width:this.padding.left,at=0;at<Ns;at++){var yi=ai,qt=r[at];if(qt.visible){var Kt=qt.za,Ri=qt.margin,Cs=Ri.top+Ri.bottom,Dn=ai+this.padding.bottom,to=Kt.height,_o=Io(qt,!1);(isNaN(qt.Da.height)&&_o===ii||_o===tn)&&(to=Math.max(o.height-Cs-Dn,0));var is=to+Cs+Dn,ge=qt.alignment;ge.ge()&&(ge=this.Zl),ge.Zc()||(ge=kt),ni&&(ft-=Kt.width+Ri.left+Ri.right),qt.jc(ft+ge.offsetX+Ri.left,yi+ge.offsetY+Ri.top+(o.height*ge.y-is*ge.y),Kt.width,to),ni||(ft+=Kt.width+Ri.left+Ri.right)}}break;case"Spot":var ol=r.length,Ai=this.Bd(),en=Ai.za,Jn=en.width,gh=en.height,Wi=this.padding,Gi=Wi.left,gn=Wi.top;h.x=Gi-o.x,h.y=gn-o.y,Ai.jc(h.x,h.y,Jn,gh);for(var hi=0;hi<ol;hi++){var Pn=r[hi];if(Pn!==Ai){var ns=Pn.za,mh=ns.width,js=ns.height,Ut=Pn.alignment;Ut.ge()&&(Ut=this.Zl),Ut.Zc()||(Ut=kt);var Fn=Pn.qh;Fn.ge()&&(Fn=kt);var Ki=null;if(Pn instanceof A&&Pn.Oj!==""&&(Ki=Pn.Cd(Pn.Oj),Ki===Pn&&(Ki=null)),Ki!==null){for(var xi=Ki.Ja,ne=s.wb(Fn.x*xi.width+Fn.offsetX,Fn.y*xi.height+Fn.offsetY);Ki!==Pn;)Ki.transform.nb(ne),Ki=Ki.R;h.x=Ut.x*Jn+Ut.offsetX-ne.x,h.y=Ut.y*gh+Ut.offsetY-ne.y,s.v(ne)}else h.x=Ut.x*Jn+Ut.offsetX-(Fn.x*mh-Fn.offsetX),h.y=Ut.y*gh+Ut.offsetY-(Fn.y*js-Fn.offsetY);h.x-=o.x,h.y-=o.y,Pn.visible&&Pn.jc(Gi+h.x,gn+h.y,mh,js)}}break;case"Auto":var mo=r.length,li=this.Bd(),me=li.za,ri=s.vf();ri.m(0,0,1,1);var ui=li.margin,wi=ui.left,pi=ui.top,Ii=this.padding,Ee=Ii.left,es=Ii.top;h.x=wi,h.y=pi,h.width=me.width,h.height=me.height,li.jc(Ee+h.x,es+h.y,h.width,h.height);var Tr=Hy(li),Ci=Ky(li),Ln=0+Tr.y*me.height+Tr.offsetY,xe=0+Ci.x*me.width+Ci.offsetX,xh=0+Ci.y*me.height+Ci.offsetY;ri.x=0+Tr.x*me.width+Tr.offsetX,ri.y=Ln,fn(ri,xe,xh,0,0),ri.x+=wi+Ee,ri.y+=pi+es;for(var ci=0;ci<mo;ci++){var _t=r[ci];if(_t!==li){var on=_t.za,ui=_t.margin,os=Math.max(on.width+ui.right+ui.left,0),wh=Math.max(on.height+ui.top+ui.bottom,0),Mi=_t.alignment;Mi.ge()&&(Mi=this.Zl),Mi.Zc()||(Mi=kt),h.x=ri.width*Mi.x+Mi.offsetX-os*Mi.x+ui.left+ri.x,h.y=ri.height*Mi.y+Mi.offsetY-wh*Mi.y+ui.top+ri.y,h.width=ri.width,h.height=ri.height,_t.visible&&(hr(ri.x,ri.y,ri.width,ri.height,h.x,h.y,on.width,on.height)?_t.jc(h.x,h.y,on.width,on.height):_t.jc(h.x,h.y,on.width,on.height,new O(ri.x,ri.y,ri.width,ri.height)))}}s.Bb(ri);break;case"Table":for(var xo=r.length,Ds=this.padding,Bo=Ds.left,rl=Ds.top,ee=this.it,vi=0,Yn=0,rn=ee.length,oe=0,ji=0;ji<rn;ji++)ee[ji]&&(oe=Math.max(oe,ee[ji].length));for(var Ti=Math.min(this.kj,rn-1);Ti!==rn&&(this.Xc[Ti]===void 0||this.Xc[Ti].Ra===0);)Ti++;for(var Ti=Math.min(Ti,rn-1),qn=-this.Xc[Ti].ab,Eo=Math.min(this.Ui,oe-1);Eo!==oe&&(this.Vc[Eo]===void 0||this.Vc[Eo].Ra===0);)Eo++;for(var Eo=Math.min(Eo,oe-1),we=-this.Vc[Eo].ab,Sr=s.tm(),ji=0;ji<rn;ji++)if(ee[ji]){var oe=ee[ji].length,kr=this.ee(ji),Yn=kr.ab+qn+rl;kr.Ra!==0&&(Yn+=kr.ME());for(var Qn=0;Qn<oe;Qn++)if(ee[ji][Qn]){var Mh=this.de(Qn),vi=Mh.ab+we+Bo;Mh.Ra!==0&&(vi+=Mh.ME());for(var Su=ee[ji][Qn],Ph=Su.length,qf=0;qf<Ph;qf++){var di=Su[qf],io=di.za,re=di instanceof A?di:null;if(re===null||re.type!==Ze&&re.type!==yo){Sr.m(0,0);for(var zo=1;zo<di.rowSpan&&!(ji+zo>=this.Dq);zo++){var sl=this.ee(ji+zo);Sr.height+=sl.total}for(zo=1;zo<di.BH&&!(Qn+zo>=this.Rp);zo++){var hl=this.de(Qn+zo);Sr.width+=hl.total}var ku=Mh.Ra+Sr.width,Nu=kr.Ra+Sr.height;h.x=vi,h.y=Yn,h.width=ku,h.height=Nu;var Th=vi,ll=Yn,nt=ku,b=Nu;vi+ku>o.width&&(nt=Math.max(o.width-vi,0)),Yn+Nu>o.height&&(b=Math.max(o.height-Yn,0));var An=di.alignment,rs=0,Fs=0,Si=0,Ls=0;if(An.ge()){An=this.Zl,An.Zc()||(An=kt);var rs=An.x,Fs=An.y,Si=An.offsetX,Ls=An.offsetY,Oi=Mh.alignment,ul=kr.alignment;Oi.Zc()&&(rs=Oi.x,Si=Oi.offsetX),ul.Zc()&&(Fs=ul.y,Ls=ul.offsetY)}else rs=An.x,Fs=An.y,Si=An.offsetX,Ls=An.offsetY;(isNaN(rs)||isNaN(Fs))&&(Fs=rs=.5,Ls=Si=0);var Mo=io.width,Z=io.height,Nr=di.margin,Sh=Nr.left+Nr.right,wo=Nr.top+Nr.bottom,ze=mf(di,kr,Mh,!1);!isNaN(di.Da.width)||ze!==ii&&ze!==Zi||(Mo=Math.max(ku-Sh,0)),!isNaN(di.Da.height)||ze!==ii&&ze!==tn||(Z=Math.max(Nu-wo,0));var Me=di.Hf,Re=di.si,Mo=Math.min(Me.width,Mo),Z=Math.min(Me.height,Z),Mo=Math.max(Re.width,Mo),Z=Math.max(Re.height,Z),fl=Z+wo;h.x+=h.width*rs-(Mo+Sh)*rs+Si+Nr.left,h.y+=h.height*Fs-fl*Fs+Ls+Nr.top,di.visible&&(hr(Th,ll,nt,b,h.x,h.y,io.width,io.height)?di.jc(h.x,h.y,Mo,Z):di.jc(h.x,h.y,Mo,Z,new O(Th,ll,nt,b)))}else{di.Ri(),di.pc.Qa();var In=di.pc,Cu=s.lg(In.x,In.y,In.width,In.height);if(In.x=re.type===Ze?Bo:vi,In.y=re.type===yo?rl:Yn,In.width=io.width,In.height=io.height,di.pc.freeze(),nh(di,!1),!d0(Cu,In)){var al=di.W;al!==null&&(al.Rk(),di.Ks(al))}s.Bb(Cu)}}}}for(s.Lk(Sr),ji=0;ji<xo;ji++)di=r[ji],re=di instanceof A?di:null,re===null||re.type!==Ze&&re.type!==yo||(In=di.pc,di.Nc.Qa(),di.Nc.m(0,0,In.width,In.height),di.Nc.freeze());break;case"Viewbox":var sn=r[0],kh=sn.za,bt=sn.margin,fi=bt.top+bt.bottom,Yp=Math.max(kh.width+(bt.right+bt.left),0),hv=Math.max(kh.height+fi,0),Po=sn.alignment;Po.ge()&&(Po=this.Zl),Po.Zc()||(Po=kt),h.x=o.width*Po.x-Yp*Po.x+Po.offsetX,h.y=o.height*Po.y-hv*Po.y+Po.offsetY,h.width=kh.width,h.height=kh.height,sn.jc(h.x,h.y,h.width,h.height);break;case"Link":var Qf=r.length;if(this instanceof vt||this instanceof k){var hn=null;this instanceof k&&(hn=this),this instanceof vt&&(hn=this.Ze);var ss=hn,Cr=this instanceof vt?null:ss.path;if(this.$g!==null){var ln=this.$g.n,As=0;if(Cr!==null&&As<this.$g.count){var jr=ln[As];As++,Cr.jc(jr.x-this.lj.x,jr.y-this.lj.y,jr.width,jr.height)}for(var Zf=0;Zf<Qf;Zf++){var Dr=r[Zf];Dr!==Cr&&As<this.$g.count&&(jr=ln[As],As++,Dr.jc(jr.x-this.lj.x,jr.y-this.lj.y,jr.width,jr.height))}}var bo=ss.points,tr=bo.count;if(2<=tr&&this instanceof k)for(var hs=this.Ff;hs.next();){var Zn=hs.value,no=tr,Pe=bo,mn=Zn.Qe,pl=Zn.zB,ju=Zn.qh,Du=Zn.Eq,qp=Zn.AB,Is=0,Bs=0,Fr=0;if(mn<-no||mn>=no){var Di=this.SF,To=this.RF;Du!==ce&&(Fr=this.computeAngle(Zn,Du,To),Zn.angle=Fr),Is=Di.x,Bs=Di.y}else{var Tn=void 0,Xn=void 0;if(0<=mn)Tn=Pe.n[mn],Xn=mn<no-1?Pe.n[mn+1]:Tn;else var Ge=no+mn,Tn=Pe.n[Ge],Xn=0<Ge?Pe.n[Ge-1]:Tn;if(Tn.Qc(Xn)){var si=void 0,Te=void 0;0<=mn?(si=0<mn?Pe.n[mn-1]:Tn,Te=mn<no-2?Pe.n[mn+2]:Xn):(si=Ge<no-1?Pe.n[Ge+1]:Tn,Te=1<Ge?Pe.n[Ge-2]:Xn);var ir=si.Cf(Tn),ti=Xn.Cf(Te),To=ir>ti+10?0<=mn?si.Qb(Tn):Tn.Qb(si):ti>ir+10?0<=mn?Xn.Qb(Te):Te.Qb(Xn):0<=mn?si.Qb(Te):Te.Qb(si)}else To=0<=mn?Tn.Qb(Xn):Xn.Qb(Tn);Du!==ce&&(Fr=this.computeAngle(Zn,Du,To),Zn.angle=Fr),Is=Tn.x+(Xn.x-Tn.x)*pl,Bs=Tn.y+(Xn.y-Tn.y)*pl}if(ju.L(Ni))Zn.location=new D(Is,Bs);else{ju.Ud()&&(ju=kt);var Lr=s.Wg();Lr.reset(),Lr.scale(Zn.scale,Zn.scale),Lr.rotate(Zn.angle,0,0);var So=Zn.Ja,Es=s.lg(0,0,So.width,So.height),nr=s.K();nr.ao(Es,ju),Lr.nb(nr);var yl=-nr.x,Nh=-nr.y,Ui=qp.copy();isNaN(Ui.x)&&(Ui.x=0<=mn?nr.x+3:-(nr.x+3)),isNaN(Ui.y)&&(Ui.y=-(nr.y+3)),Ui.rotate(To),Is+=Ui.x,Bs+=Ui.y,Lr.JG(Es);var yl=yl+Es.x,Nh=Nh+Es.y,cl=s.wb(Is+yl,Bs+Nh);Zn.move(cl),s.v(cl),s.v(nr),s.Bb(Es),s.bf(Lr)}}this.Hu(!1)}break;case"Grid":break;case"Graduated":if(this.Fm!==null){var Xf=this.Bd(),vl=this.Hm,Ch=this.Fm,Ar=0,Ro=Ch[Ar];Ar++,Xf.jc(Ro.x-o.x,Ro.y-o.y,Ro.width,Ro.height);for(var jh=r.length,Dh=0;Dh<jh;Dh++){var se=r[Dh],Fu=vl[Dh];se.visible&&se!==Xf&&Fu.length!==0&&(Ro=Ch[Ar],Ar++,se.jc(Ro.x-o.x,Ro.y-o.y,Ro.width,Ro.height))}this.Fm=null}break;case"TableRow":case"TableColumn":s.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:s.k("Unknown panel type: "+d)}s.Bb(h)}},A.prototype.Ek=function(t){var i=this.Ja,n=gr(this);if(hr(0,0,i.width,i.height,t.x,t.y)){for(var i=this.xa.n,e=i.length,o=s.wb(0,0);e--;){var r=i[e];if((r.visible||r===n)&&(un(o.set(t),r.transform),r.Ia(o)))return s.v(o),!0}return s.v(o),!(this.Gb===null&&this.cc===null)}return!1},A.prototype.Dx=function(t){if(this.to===t)return this;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e].Dx(t);if(o!==null)return o}return null};function xf(t,i,n){if(n(t,i),i instanceof A){i=i.xa.n;for(var e=i.length,o=0;o<e;o++)xf(t,i[o],n)}}function oh(t,i){Gg(t,t,i)}function Gg(t,i,n){n(i),i=i.xa.n;for(var e=i.length,o=0;o<e;o++){var r=i[o];r instanceof A&&Gg(t,r,n)}}A.prototype.walkVisualTree=A.prototype.bK=function(t){Og(this,this,t)};function Og(t,i,n){if(n(i),i instanceof A){i=i.xa.n;for(var e=i.length,o=0;o<e;o++)Og(t,i[o],n)}}A.prototype.findInVisualTree=A.prototype.bu=function(t){return Vg(this,this,t)};function Vg(t,i,n){if(n(i))return i;if(i instanceof A){i=i.xa.n;for(var e=i.length,o=0;o<e;o++){var r=Vg(t,i[o],n);if(r!==null)return r}}return null}A.prototype.findObject=A.prototype.Cd=function(t){if(this.name===t)return this;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e];if(o.name===t)return o;if(o instanceof A){if(o.hk===null&&o.xg===null){if(o=o.Cd(t),o!==null)return o}else if(wf(o)&&(o=o.xa.first(),o!==null&&(o=o.Cd(t),o!==null)))return o}}return null};function Hg(t){t=t.xa.n;for(var i=t.length,n=0,e=0;e<i;e++){var o=t[e];if(o instanceof A)n=Math.max(n,Hg(o));else if(o instanceof Y){t:{if(!o.Sf!==null)switch(o.Ko){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":o=0;break t}o=o.ji/2*o.kn*o.vj()}n=Math.max(n,o)}}return n}B=A.prototype,B.Yg=function(){return!(this.type===Ze||this.type===yo)},B.Pe=function(t,i,n){if(this.Ug===!1||(i===void 0&&(i=null),n===void 0&&(n=null),Qe(this)))return null;var e=this.Ja,o=1/this.vj(),r=this.Yg(),h=r?t:un(s.wb(t.x,t.y),this.transform),l=this.g,u=10,f=5;if(l!==null&&(u=l.nu("extraTouchArea"),f=u/2),hr(-(f*o),-(f*o),e.width+u*o,e.height+u*o,h.x,h.y)){if(!this.Jn){var o=this.xa.n,a=o.length,l=s.K(),f=(u=this.tu)?this.Bd():null;if(u&&(f.Yg()?un(l.set(t),f.transform):l.set(t),!f.Ia(l)))return s.v(l),r||s.v(h),null;for(var p=gr(this);a--;){var y=o[a];if((y.visible||y===p)&&(y.Yg()?un(l.set(t),y.transform):l.set(t),!u||y!==f)){var c=null;if(y instanceof A?c=y.Pe(l,i,n):y.Ug===!0&&y.Ia(l)&&(c=y),c!==null&&(i!==null&&(c=i(c)),c!==null&&(n===null||n(c))))return s.v(l),r||s.v(h),c}}s.v(l)}return this.background===null&&this.pn===null?(r||s.v(h),null):(t=hr(0,0,e.width,e.height,h.x,h.y)?this:null,r||s.v(h),t)}return r||s.v(h),null},B.du=function(t,i,n,e){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null),e instanceof E||e instanceof R||(e=new E(N));var l=this.Ja,o=this.Yg(),r=o?t:un(s.wb(t.x,t.y),this.transform),h=this.type===Ze||this.type===yo,l=hr(0,0,l.width,l.height,r.x,r.y);if(h||l){if(!this.Jn){for(var h=this.xa.n,u=h.length,f=s.K(),a=gr(this);u--;){var p=h[u];if(p.visible||p===a){p.Yg()?un(f.set(t),p.transform):f.set(t);var y=p,p=p instanceof A?p:null;(p!==null?p.du(f,i,n,e):y.Ia(f))&&y.Ug!==!1&&(i!==null&&(y=i(y)),y===null||n!==null&&!n(y)||e.add(y))}}s.v(f)}return o||s.v(r),l&&(this.background!==null||this.pn!==null)}return o||s.v(r),!1},B.Jk=function(t,i,n,e,o,r){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var h=r;if(r===void 0&&(h=s.Wg(),h.reset()),h.multiply(this.transform),this.un(t,h))return Vy(this,i,n,o),r===void 0&&s.bf(h),!0;if(this.$f(t,h)){if(!this.Jn)for(var l=gr(this),u=this.xa.n,f=u.length;f--;){var a=u[f];if(a.visible||a===l){var p=a.U,y=this.Ja;p.x>y.width||p.y>y.height||0>p.x+p.width||0>p.y+p.height||(p=a,a=a instanceof A?a:null,y=s.Wg(),y.set(h),(a!==null?a.Jk(t,i,n,e,o,y):Lg(p,t,e,y))&&(i!==null&&(p=i(p)),p===null||n!==null&&!n(p)||o.add(p)),s.bf(y))}}return r===void 0&&s.bf(h),e}return r===void 0&&s.bf(h),!1};function Vy(t,i,n,e){for(var o=t.xa.n,r=o.length;r--;){var h=o[r];if(h.visible){var l=h.U,u=t.Ja;l.x>u.width||l.y>u.height||0>l.x+l.width||0>l.y+l.height||(h instanceof A&&Vy(h,i,n,e),i!==null&&(h=i(h)),h===null||n!==null&&!n(h)||e.add(h))}}}B.An=function(t,i,n,e,o,r){if(this.Ug===!1)return!1;n===void 0&&(n=null),e===void 0&&(e=null);var p=this.Ja,h=this.Yg(),l=h?t:un(s.wb(t.x,t.y),this.transform),u=h?i:un(s.wb(i.x,i.y),this.transform),f=l.Cf(u),a=0<l.x&&l.x<p.width&&0<l.y&&l.y<p.height||xn(l.x,l.y,0,0,0,p.height)<=f||xn(l.x,l.y,0,p.height,p.width,p.height)<=f||xn(l.x,l.y,p.width,p.height,p.width,0)<=f||xn(l.x,l.y,p.width,0,0,0)<=f,p=l.Xf(0,0)<=f&&l.Xf(0,p.height)<=f&&l.Xf(p.width,0)<=f&&l.Xf(p.width,p.height)<=f;if(h||(s.v(l),s.v(u)),a){if(!this.Jn){for(var l=s.K(),u=s.K(),f=gr(this),y=this.xa.n,c=y.length;c--;){var v=y[c];if(v.visible||v===f){var d=v.U,g=this.Ja;(!h||!(d.x>g.width||d.y>g.height||0>d.x+d.width||0>d.y+d.height))&&(v.Yg()?(d=v.transform,un(l.set(t),d),un(u.set(i),d)):(l.set(t),u.set(i)),d=v,v=v instanceof A?v:null,(v!==null?v.An(l,u,n,e,o,r):d.eF(l,u,o))&&(n!==null&&(d=n(d)),d===null||e!==null&&!e(d)||r.add(d)))}}s.v(l),s.v(u)}return o?a:p}return!1};function Hy(t){var i=null;return t instanceof Y&&(i=t.A,i===an&&(i=null),t=t.of,t!==null&&i===null&&(i=t.A)),i===null&&(i=gi),i}function Ky(t){var i=null;return t instanceof Y&&(i=t.B,i===an&&(i=null),t=t.of,t!==null&&i===null&&(i=t.B)),i===null&&(i=$i),i}A.prototype.add=A.prototype.add=function(t){s.G(t,N,A,"add:element"),this.Rd(this.xa.count,t)},A.prototype.elt=A.prototype.fa=function(t){return this.xa.fa(t)},A.prototype.insertAt=A.prototype.Rd=function(t,i){i instanceof L&&s.k("Cannot add a Part to a Panel: "+i+"; use a Panel instead"),(this===i||this.hm(i))&&(this===i&&s.k("Cannot make a Panel contain itself: "+this.toString()),s.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));var n=i.R;if(n!==null&&n!==this&&s.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==Yh||i instanceof Y||s.k("Can only add Shapes to a Grid Panel, not: "+i),this.na!==qh||i instanceof Y||i instanceof ot||s.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+i),i.om(this),i.Zm=null,this.mq!==null){var o=i.data;o!==null&&typeof o=="object"&&(this.wg===null&&(this.wg=new tt(Object,A)),this.wg.add(o,i))}var e=this.xa,o=-1;if(n===this){for(var r=-1,h=this.xa.n,l=h.length,u=0;u<l;u++)if(h[u]===i){r=u;break}if(r!==-1){if(r===t||r+1>=e.count&&t>=e.count)return;e.cd(r),o=r}else s.k("element "+i.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>e.count)&&(t=e.count),e.Rd(t,i),(t===0||i.ff)&&(this.Il=null),gs(this)||this.H(),i.H(!1),i.le!==null?this.Qk=!0:i instanceof A&&i.Qk===!0&&(this.Qk=!0),this.ak=null,n=this.W,n!==null&&(n.Um=null,n.lk=NaN,this.Qk&&n instanceof I&&(n.Qk=!0),n.Qk&&n instanceof I&&(n.Ie=null),e=this.g,e!==null&&e.ja.lb||(o!==-1&&n.bd(zi,"elements",this,i,null,o,null),n.bd(Ei,"elements",this,null,i,null,t),this.vu()||Jy(this,i,!1)))},s.defineProperty(A,{Qk:null},function(){return(this.M&8388608)!==0},function(t){(this.M&8388608)!==0!==t&&(this.M^=8388608)});function Uy(t,i){t.M=i?t.M|16777216:t.M&-16777217}A.prototype.remove=A.prototype.remove=function(t){s.G(t,N,A,"remove:element");for(var i=this.xa.n,n=i.length,e=-1,o=0;o<n;o++)if(i[o]===t){e=o;break}e!==-1&&this.rf(e,!0)},A.prototype.removeAt=A.prototype.cd=function(t){0<=t&&this.rf(t,!0)},A.prototype.rf=function(t,i){var n=this.xa,e=n.fa(t);if(e.Zm=null,e.om(null),this.wg!==null){var o=e.data;typeof o=="object"&&this.wg.remove(o)}n.cd(t),ie(this,!1),this.H(),this.Il===e&&(this.Il=null),this.ak=null;var r=this.W;r!==null&&(r.Um=null,r.lk=NaN,r.Sd(),r instanceof I&&(e instanceof A?xf(e,e,function(h,l){fc(r,l,i)}):fc(r,e,i)),n=this.g,n!==null&&n.ja.lb||r.bd(zi,"elements",this,e,null,t,null))},s.u(A,{Dq:"rowCount"},function(){return this.Xc===void 0?0:this.Xc.length}),A.prototype.getRowDefinition=A.prototype.ee=function(t){0>t&&s.Fa(t,">= 0",A,"getRowDefinition:idx"),t=Math.round(t);var i=this.Xc;if(i[t]===void 0){var n=new Nt;n.om(this),n.xe=!0,n.index=t,i[t]=n}return i[t]},A.prototype.removeRowDefinition=A.prototype.fG=function(t){0>t&&s.Fa(t,">= 0",A,"removeRowDefinition:idx"),t=Math.round(t);var i=this.Xc;this.bd(zi,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.H()},s.u(A,{Rp:"columnCount"},function(){return this.Vc===void 0?0:this.Vc.length}),A.prototype.getColumnDefinition=A.prototype.de=function(t){0>t&&s.Fa(t,">= 0",A,"getColumnDefinition:idx"),t=Math.round(t);var i=this.Vc;if(i[t]===void 0){var n=new Nt;n.om(this),n.xe=!1,n.index=t,i[t]=n}return i[t]},A.prototype.removeColumnDefinition=A.prototype.dG=function(t){0>t&&s.Fa(t,">= 0",A,"removeColumnDefinition:idx"),t=Math.round(t);var i=this.Vc;this.bd(zi,"coldefs",this,i[t],null,t,null),i[t]&&delete i[t],this.H()},s.defineProperty(A,{BJ:"rowSizing"},function(){return this.bn===void 0?Zh:this.bn},function(t){if(this.bn!==void 0){var i=this.bn;i!==t&&(t!==Zh&&t!==Qh&&s.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.bn=t,this.H(),this.h("rowSizing",i,t))}}),s.defineProperty(A,{AH:"columnSizing"},function(){return this.Cm===void 0?Zh:this.Cm},function(t){if(this.Cm!==void 0){var i=this.Cm;i!==t&&(t!==Zh&&t!==Qh&&s.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Cm=t,this.H(),this.h("columnSizing",i,t))}}),s.defineProperty(A,{$L:"topIndex"},function(){return this.kj===void 0?0:this.kj},function(t){if(this.kj!==void 0){var i=this.kj;i!==t&&((!isFinite(t)||0>t)&&s.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.kj=t,this.H(),this.h("topIndex",i,t))}}),s.defineProperty(A,{oL:"leftIndex"},function(){return this.Ui===void 0?0:this.Ui},function(t){if(this.Ui!==void 0){var i=this.Ui;i!==t&&((!isFinite(t)||0>t)&&s.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Ui=t,this.H(),this.h("leftIndex",i,t))}}),A.prototype.findRowForLocalY=function(t){if(0>t||this.type!==qr)return-1;for(var i=0,n=this.Xc,e=n.length,o=this.kj;o<e;o++){var r=n[o];if(r!==void 0&&(i+=r.total,t<i))break}return o},A.prototype.findColumnForLocalX=function(t){if(0>t||this.type!==qr)return-1;for(var i=0,n=this.Vc,e=n.length,o=this.Ui;o<e;o++){var r=n[o];if(r!==void 0&&(i+=r.total,t<i))break}return o},A.prototype.graduatedPointForValue=function(t,i){if(i===void 0&&(i=new D(NaN,NaN)),this.type!==qh)return i.m(NaN,NaN),i;t=Math.min(Math.max(t,this.Pk),this.KA);var n=(t-this.Pk)/this.ou,e=this.Bd();return e.of.hI(n,i),e.transform.nb(i)},A.prototype.graduatedValueForPoint=function(t){if(this.type!==qh)return NaN;var i=this.Bd(),n=i.of;return i.transform.xh(t),n.dI(t)*this.ou+this.Pk},s.defineProperty(A,{data:"data"},function(){return this.Zd},function(t){var i=this.Zd;if(i!==t){var n=this instanceof L&&!(this instanceof vt);n&&s.j(t,"object",A,"data"),Xe(this),this.Zd=t;var e=this.g;e!==null&&(n?this instanceof k?(i!==null&&e.Sj.remove(i),t!==null&&e.Sj.add(t,this)):this instanceof L&&(i!==null&&e.Ii.remove(i),t!==null&&e.Ii.add(t,this)):(n=this.R,n!==null&&n.wg!==null&&(i!==null&&n.wg.remove(i),t!==null&&n.wg.add(t,this)))),this.h("data",i,t),e!==null&&e.ja.lb||t!==null&&this.Jb()}}),s.defineProperty(A,{Bu:"itemIndex"},function(){return this.gs},function(t){var i=this.gs;i!==t&&(this.gs=t,this.h("itemIndex",i,t))});function Kg(t){return t=t.jl,t!==null&&t.P}function Xe(t){var i=t.jl;if(i===null)t.data!==null&&s.k("Template cannot have .data be non-null: "+t),t.jl=i=new E(Pt);else if(i.P)return;var n=new E(N);Uy(t,!1),xf(t,t,function(f,a){var p=a.Ac;if(p!==null)for(zy(a,!1),p=p.i;p.next();){var y=p.value;y.mode===da&&zy(a,!0);var c=y.Kq;c!==null&&(c==="/"&&Uy(f,!0),c=rd(y,f,a),c!==null&&(n.add(c),c.tp===null&&(c.tp=new E(Pt)),c.tp.add(y))),i.add(y)}if(a instanceof A&&a.type===qr){if(0<a.Xc.length)for(p=a.Xc,y=p.length,c=0;c<y;c++){var v=p[c];if(v!==void 0&&v.Ac!==null)for(var d=v.Ac.i;d.next();){var g=d.value;g.Gg=v,g.Bt=2,g.Cp=v.index,i.add(g)}}if(0<a.Vc.length){for(p=a.Vc,y=p.length,c=0;c<y;c++)if(v=p[c],v!==void 0&&v.Ac!==null)for(d=v.Ac.i;d.next();)g=d.value,g.Gg=v,g.Bt=1,g.Cp=v.index,i.add(g)}}});for(var e=n.i;e.next();){var o=e.value;if(o.tp!==null){zy(o,!0);for(var r=o.tp.i;r.next();){var h=r.value;o.Ac===null&&(o.Ac=new E(Pt)),o.Ac.add(h)}}o.tp=null}for(e=i.i;e.next();)if(o=e.value,r=o.Gg,r!==null){o.Gg=null;var l=o.Cy,u=l.indexOf(".");0<u&&r instanceof A&&(h=l.substring(0,u),l=l.substr(u+1),u=r.Cd(h),u!==null?(r=u,o.Cy=l):s.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+o.toString())),r instanceof Nt?(o.sm=s.Pd(r.R),r.R.to=o.sm):(o.sm=s.Pd(r),r.to=o.sm)}i.freeze(),t instanceof L&&t.he()&&t.Ne()}A.prototype.copyTemplate=function(){var t=this.copy();return t.bK(function(i){i instanceof A&&(i.jl=null,i.Zd=null);var n=i.Ac;n!==null&&(i.Ac=null,n.each(function(e){i.bind(e.copy())}))}),t},A.prototype.updateTargetBindings=A.prototype.Jb=function(t){var i=this.jl;if(i!==null)for(t===void 0&&(t=""),i=i.i;i.next();){var n=i.value,e=n.xG;if((t===""||e===""||e===t)&&(e=n.Cy,n.GH!==null||e!=="")){var e=this.data,o=n.Kq;if(o!==null)e=o===""?this:o==="/"?this:o==="."?this:o===".."?this:this.Cd(o);else{var r=this.g;r!==null&&n.Px&&(e=r.$.Tk)}if(e!==null){var r=this,h=n.sm;if(h!==-1){if(r=this.Dx(h),r===null)continue}else n.Gg!==null&&(r=n.Gg);if(o==="/"?e=r.W:o==="."?e=r:o===".."&&(e=r.R),o=n.Bt,o!==0){if(!(r instanceof A))continue;h=r,o===1?r=h.de(n.Cp):o===2&&(r=h.ee(n.Cp))}r!==void 0&&n.MG(r,e)}}}},s.defineProperty(A,{mq:"itemArray"},function(){return this.hk},function(t){var i=this.hk;if(i!==t){var n=this.g;n!==null&&i!==null&&dy(n,this),this.hk=t,n!==null&&t!==null&&vy(n,this),this.h("itemArray",i,t),n!==null&&n.ja.lb||this.tB()}});function wf(t){return!!(t.type===eh||t.type===vr||t.type===dr||t.type===qr&&0<t.xa.length&&(t=t.xa.fa(0),t.ff&&t instanceof A&&(t.type===Ze||t.type===yo)))}A.prototype.rebuildItemElements=A.prototype.tB=function(){var t=0;for(wf(this)&&(t=1);this.xa.length>t;)this.rf(this.xa.length-1,!1);if(t=this.mq,t!==null)for(var i=s.cb(t),n=0;n<i;n++)Ug(this,s.Ba(t,n),n)},A.prototype.findItemPanelForData=A.prototype.YH=function(t){return t==null||this.wg===null?null:(s.j(t,"object",A,"findItemPanelForData"),this.wg.ka(t))};function Ug(t,i,n){if(!(i==null||0>n)){var e;e=Ix(t,i);var o=t.GI,r=null;o!==null&&(r=o.ka(e)),r===null&&(Yg||(Yg=!0,s.trace('No item template Panel found for category "'+e+'" on '+t),s.trace("  Using default item template."),e=new A,o=new ot,o.bind(new Pt("text","",qe)),e.add(o),qg=e),r=qg),e=r,e!==null&&(Xe(e),e=e.copy(),e.M&16777216&&(o=t.$l(),o!==null&&Uy(o,!0)),typeof i=="object"&&(t.wg===null&&(t.wg=new tt(Object,A)),t.wg.add(i,e)),o=n,wf(t)&&o++,t.Rd(o,e),e.Zd=i,Jg(t,o,n),e.Zd=null,e.data=i)}}function Jg(t,i,n){for(t=t.xa;i<t.length;){var e=t.fa(i);if(e instanceof A){var o=i,r=n;e.type===Ze?e.Wb=o:e.type===yo&&(e.column=o),e.Bu=r}i++,n++}}s.defineProperty(A,{mL:"itemTemplate"},function(){return this.xg===null?null:this.xg.ka("")},function(t){if(this.xg===null){if(t===null)return;this.xg=new tt("string",A)}var i=this.xg.ka("");i!==t&&(s.G(t,A,A,"itemTemplate"),(t instanceof L||t.ff)&&s.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.xg.add("",t),this.h("itemTemplate",i,t),t=this.g,t!==null&&t.ja.lb||this.tB())}),s.defineProperty(A,{GI:"itemTemplateMap"},function(){return this.xg},function(t){var i=this.xg;if(i!==t){s.G(t,tt,A,"itemTemplateMap");for(var n=t.i;n.next();){var e=n.value;(e instanceof L||e.ff)&&s.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+e)}this.xg=t,this.h("itemTemplateMap",i,t),t=this.g,t!==null&&t.ja.lb||this.tB()}}),s.defineProperty(A,{lL:"itemCategoryProperty"},function(){return this.Xo},function(t){var i=this.Xo;i!==t&&(typeof t!="string"&&typeof t!="function"&&s.Fd(t,"string or function",A,"itemCategoryProperty"),this.Xo=t,this.h("itemCategoryProperty",i,t))});function Ix(t,i){if(i===null)return"";var n=t.Xo,e="";if(typeof n=="function")e=n(i);else if(typeof n=="string"&&typeof i=="object"){if(n==="")return"";e=s.vb(i,n)}else return"";return e===void 0?"":typeof e=="string"?e:(s.k("Panel.getCategoryForItemData found a non-string category for "+i+": "+e),"")}var Yg=!1,qg=null;s.defineProperty(A,{Jn:"isAtomic"},function(){return(this.M&1048576)!==0},function(t){var i=(this.M&1048576)!==0;i!==t&&(s.j(t,"boolean",A,"isAtomic"),this.M^=1048576,this.h("isAtomic",i,t))}),s.defineProperty(A,{tu:"isClipping"},function(){return(this.M&2097152)!==0},function(t){var i=(this.M&2097152)!==0;i!==t&&(s.j(t,"boolean",A,"isClipping"),this.M^=2097152,this.H(),this.h("isClipping",i,t))}),s.defineProperty(A,{IF:"isOpposite"},function(){return(this.M&33554432)!==0},function(t){var i=(this.M&33554432)!==0;i!==t&&(s.j(t,"boolean",A,"isOpposite"),this.M^=33554432,this.H(),this.h("isOpposite",i,t))}),s.defineProperty(A,{isEnabled:"isEnabled"},function(){return(this.M&4194304)!==0},function(t){var i=(this.M&4194304)!==0;if(i!==t){s.j(t,"boolean",A,"isEnabled");var n=this.R===null||this.R.vu();this.M^=4194304,this.h("isEnabled",i,t),i=this.g,i!==null&&i.ja.lb||n&&Jy(this,this,t)}});function Jy(t,i,n){var e=i.YE;if(e!==null&&e(i,n),i instanceof A){i=i.xa.n;for(var e=i.length,o=0;o<e;o++){var r=i[o];n&&r instanceof A&&!r.isEnabled||Jy(t,r,n)}}}s.defineProperty(A,{hK:"alignmentFocusName"},function(){return this.Oj},function(t){var i=this.Oj;i!==t&&(this.Oj=t,this.H(),this.h("alignmentFocusName",i,t))});function Nt(){s.oc(this),this.ej=null,this.dw=!0,this.Bc=0,this.mf=NaN,this.nk=0,this.mk=1/0,this.me=an,this.ab=this.Ra=0,this.Ac=null,this.ut=Yy,this.Fg=Ao,this.pt=this.sk=null,this.qt=NaN,this.Gb=this.ai=null,this.or=!1}s.ga("RowColumnDefinition",Nt),Nt.prototype.copy=function(){var t=new Nt;return t.dw=this.dw,t.Bc=this.Bc,t.mf=this.mf,t.nk=this.nk,t.mk=this.mk,t.me=this.me,t.Ra=this.Ra,t.ab=this.ab,t.Fg=this.Fg,t.ut=this.ut,t.sk=this.sk===null?null:this.sk.S(),t.pt=this.pt,t.qt=this.qt,t.ai=null,this.ai!==null&&(t.ai=s.Vl(this.ai)),t.Gb=this.Gb,t.or=this.or,t.Ac=this.Ac,t},Nt.prototype.Sp=function(t){s.G(t,Nt,Nt,"copyFrom:pd"),t.xe?this.height=t.height:this.width=t.width,this.Dh=t.Dh,this.ke=t.ke,this.alignment=t.alignment,this.stretch=t.stretch,this.cv=t.cv,this.sk=t.sk===null?null:t.sk.S(),this.Gq=t.Gq,this.Hq=t.Hq,this.ai=null,t.ai&&(this.ai=s.Vl(t.ai)),this.background=t.background,this.xA=t.xA,this.Ac=t.Ac},Nt.prototype.ic=function(t){t.Je===Nt?this.cv=t:s.Lj(this,t)},Nt.prototype.toString=function(){return"RowColumnDefinition "+(this.xe?"(Row ":"(Column ")+this.index+") #"+s.Pd(this)};var Yy;Nt.Default=Yy=s.p(Nt,"Default",0);var Qh;Nt.None=Qh=s.p(Nt,"None",1);var Zh;Nt.ProportionalExtra=Zh=s.p(Nt,"ProportionalExtra",2),Nt.prototype.om=function(t){this.ej=t},Nt.prototype.computeEffectiveSpacingTop=Nt.prototype.ME=function(){var t=0,i=this.ej,n=0,e=this.xe;if(i!==null)for(var o=e?i.Xc.length:i.Vc.length,r=0;r<o;r++){var h=e?i.Xc[r]:i.Vc[r];if(h!==void 0){n=h.index;break}}if(this.index!==n&&(n=this.Gq,n===null&&i!==null&&(n=this.xe?i.Ji:i.Oh),n!==null&&(t=this.Hq,isNaN(t)&&(t=i!==null?this.xe?i.Qh:i.Ph:0))),n=this.rG,n===null)if(i!==null)n=i.Tj;else return t;return t+(this.xe?n.top:n.left)},Nt.prototype.computeEffectiveSpacing=Nt.prototype.af=function(){var t=0,i=this.ej,n=0,e=this.xe;if(i!==null)for(var o=e?i.Xc.length:i.Vc.length,r=0;r<o;r++){var h=e?i.Xc[r]:i.Vc[r];if(h!==void 0){n=h.index;break}}if(this.index!==n&&(n=this.Gq,n===null&&i!==null&&(n=e?i.Ji:i.Oh),n!==null&&(t=this.Hq,isNaN(t)&&(t=i!==null?e?i.Qh:i.Ph:0))),e=this.rG,e===null)if(i!==null)e=i.Tj;else return t;return t+(this.xe?e.top+e.bottom:e.left+e.right)},Nt.prototype.hd=function(t,i,n,e,o){var r=this.ej;if(r!==null&&(r.bd(Jt,t,this,i,n,e,o),this.Ac!==null&&(i=r.g,i!==null&&!i.Re&&(r=r.$l(),r!==null&&(i=r.data,i!==null)))))for(n=this.Ac.i;n.next();)n.value.Ey(this,i,t,r)},s.u(Nt,{R:"panel"},function(){return this.ej}),s.defineProperty(Nt,{xe:"isRow"},function(){return this.dw},function(t){this.dw=t}),s.defineProperty(Nt,{index:"index"},function(){return this.Bc},function(t){this.Bc=t}),s.defineProperty(Nt,{height:"height"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"height"),this.mf=t,this.bb=this.Ra,this.R!==null&&this.R.H(),this.hd("height",i,t))}),s.defineProperty(Nt,{width:"width"},function(){return this.mf},function(t){var i=this.mf;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"width"),this.mf=t,this.bb=this.Ra,this.R!==null&&this.R.H(),this.hd("width",i,t))}),s.defineProperty(Nt,{Dh:"minimum"},function(){return this.nk},function(t){var i=this.nk;i!==t&&((0>t||!isFinite(t))&&s.Fa(t,">= 0",Nt,"minimum"),this.nk=t,this.bb=this.Ra,this.R!==null&&this.R.H(),this.hd("minimum",i,t))}),s.defineProperty(Nt,{ke:"maximum"},function(){return this.mk},function(t){var i=this.mk;i!==t&&(0>t&&s.Fa(t,">= 0",Nt,"maximum"),this.mk=t,this.bb=this.Ra,this.R!==null&&this.R.H(),this.hd("maximum",i,t))}),s.defineProperty(Nt,{alignment:"alignment"},function(){return this.me},function(t){var i=this.me;i.L(t)||(this.me=t.S(),this.R!==null&&this.R.H(),this.hd("alignment",i,t))}),s.defineProperty(Nt,{stretch:"stretch"},function(){return this.Fg},function(t){var i=this.Fg;i!==t&&(this.Fg=t,this.R!==null&&this.R.H(),this.hd("stretch",i,t))}),s.defineProperty(Nt,{rG:"separatorPadding"},function(){return this.sk},function(t){typeof t=="number"&&(t=new xt(t));var i=this.sk;t!==null&&i!==null&&i.L(t)||(t!==null&&(t=t.S()),this.sk=t,this.R!==null&&this.R.H(),this.hd("separatorPadding",i,t))}),s.defineProperty(Nt,{Gq:"separatorStroke"},function(){return this.pt},function(t){var i=this.pt;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.pt=t,this.R!==null&&this.R.H(),this.hd("separatorStroke",i,t))}),s.defineProperty(Nt,{Hq:"separatorStrokeWidth"},function(){return this.qt},function(t){var i=this.qt;i!==t&&(this.qt=t,this.R!==null&&this.R.H(),this.hd("separatorStrokeWidth",i,t))}),s.defineProperty(Nt,{HJ:"separatorDashArray"},function(){return this.ai},function(t){var i=this.ai;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",Nt,"separatorDashArray:value"),t!==null){for(var n=t.length,e=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||s.k("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(e===0){if(i===null)return;t=null}}this.ai=t,this.R!==null&&this.R.oa(),this.hd("separatorDashArray",i,t)}}),s.defineProperty(Nt,{background:"background"},function(){return this.Gb},function(t){var i=this.Gb;i!==t&&(t===null||typeof t=="string"||t instanceof yt)&&(t instanceof yt&&t.freeze(),this.Gb=t,this.R!==null&&this.R.oa(),this.hd("background",i,t))}),s.defineProperty(Nt,{xA:"coversSeparators"},function(){return this.or},function(t){var i=this.or;i!==t&&(s.j(t,"boolean",Nt,"coversSeparators"),this.or=t,this.R!==null&&this.R.oa(),this.hd("coversSeparators",i,t))}),s.defineProperty(Nt,{cv:"sizing"},function(){return this.ut},function(t){var i=this.ut;i!==t&&(this.ut=t,this.R!==null&&this.R.H(),this.hd("sizing",i,t))});function Ya(t){if(t.cv===Yy){var i=t.ej;return t.xe?i.BJ:i.AH}return t.cv}s.defineProperty(Nt,{bb:"actual"},function(){return this.Ra},function(t){this.Ra=isNaN(this.mf)?Math.max(Math.min(this.mk,t),this.nk):Math.max(Math.min(this.mk,this.mf),this.nk)}),s.defineProperty(Nt,{total:"total"},function(){return this.Ra+this.af()},function(t){this.Ra=isNaN(this.mf)?Math.max(Math.min(this.mk,t),this.nk):Math.max(Math.min(this.mk,this.mf),this.nk),this.Ra=Math.max(0,this.Ra-this.af())}),s.defineProperty(Nt,{position:"position"},function(){return this.ab},function(t){this.ab=t}),Nt.prototype.bind=Nt.prototype.bind=function(t){t.Gg=this;var i=this.R;if(i!==null){var n=i.$l();n!==null&&Kg(n)&&s.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+i)}this.Ac===null&&(this.Ac=new E(Pt)),this.Ac.add(t)};function Y(){N.call(this),this.Sf=this.Sa=null,this.Ko="None",this.Mr=Ao,this.tc=this.Hd="black",this.ji=1,this.xp="butt",this.zp="miter",this.kn=10,this.yp=null,this.Af=0,this.ii=this.hi=an,this.Ss=this.Rs=NaN,this.Xr=!1,this.Us=null,this.Mo=this.Ep="None",this.ug=1,this.tg=0,this.sg=1}s.La(Y,N),s.ga("Shape",Y),Y.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.Sa=this.Sa,t.Ko=this.Ko,t.Mr=this.Mr,t.Sf=this.Sf,t.Hd=this.Hd,t.tc=this.tc,t.ji=this.ji,t.xp=this.xp,t.zp=this.zp,t.kn=this.kn,this.yp!==null&&(t.yp=s.Vl(this.yp)),t.Af=this.Af,t.hi=this.hi.S(),t.ii=this.ii.S(),t.Rs=this.Rs,t.Ss=this.Ss,t.Xr=this.Xr,t.Us=this.Us,t.Ep=this.Ep,t.Mo=this.Mo,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg},Y.prototype.ic=function(t){t===ei||t===Li||t===yf||t===Ao?this.HA=t:N.prototype.ic.call(this,t)},Y.prototype.toString=function(){return"Shape("+(this.Fb!=="None"?this.Fb:this.Lq!=="None"?this.Lq:this.FA)+")#"+s.Pd(this)};function ou(t,i,n,e){var o=n.length;if(!(4>o)){for(var h=e.za,r=Math.max(1,h.width),h=h.height,l=n[0],u=n[1],f=0,a=0,p=0,y=0,c=0,v=0,d=y=0,g=s.Za(),m=2;m<o;m+=2)f=n[m],a=n[m+1],p=f-l,y=a-u,p===0&&(p=.001),c=y/p,v=Math.atan2(y,p),y=Math.sqrt(p*p+y*y),g.push([p,v,c,y]),d+=y,l=f,u=a;l=n[0],u=n[1],p=e.za.width,e instanceof Y&&(p-=e.mb),1>p&&(p=1);for(var o=n=p,f=r/2,a=f!==0,m=0,y=g[m],p=y[0],v=y[1],c=y[2],y=y[3],w=0;.1<=d;){if(w===0&&(a?(o=n,o-=f,d-=f,a=!1):o=n,o===0&&(o=1)),o>d){s.ra(g);return}o>y?(w=o-y,o=y):w=0;var M=Math.sqrt(o*o/(1+c*c));if(0>p&&(M=-M),l+=M,u+=c*M,t.translate(l,u),t.rotate(v),t.translate(-(r/2),-(h/2)),w===0&&e.Ik(t,i),t.translate(r/2,h/2),t.rotate(-v),t.translate(-l,-u),d-=o,y-=o,w!==0){if(m++,m===g.length){s.ra(g);return}y=g[m],p=y[0],v=y[1],c=y[2],y=y[3],o=w}}s.ra(g)}}Y.prototype.Ik=function(t,i){if(this.tc!==null||this.Hd!==null){this.Hd!==null&&Un(this,t,this.Hd,!0,!1),this.tc!==null&&Un(this,t,this.tc,!1,!1);var n=this.ji;if(n===0){var r=this.W;r instanceof vt&&r.type===dr&&r.kd==="Selection"&&r.ub instanceof Y&&r.Ze.Bd()===r.ub&&(n=r.ub.mb)}t.lineWidth=n,t.lineJoin=this.zp,t.lineCap=this.xp,t.miterLimit=this.kn;var e=!1;this.W&&i.Ok("drawShadows")&&(e=this.W.jm);var o=!0;this.tc!==null&&this.Hd===null&&(o=!1);var r=!1,h=!0,l=this.AG;l!==null&&(r=!0,h=t.zx(l,this.Af));var u=this.Sa;if(u!==null){if(u.na===Yi)t.beginPath(),r&&!h?nu(t,u.Ec,u.Oc,u.Ab,u.Hb,l,this.Af):(t.moveTo(u.Ec,u.Oc),t.lineTo(u.Ab,u.Hb)),this.Hd!==null&&t.Lg(this.Hd),n!==0&&this.tc!==null&&t.Kj();else if(u.na===so){var y=u.Ec,c=u.Oc,f=u.Ab,a=u.Hb,u=Math.min(y,f),p=Math.min(c,a),y=Math.abs(f-y),c=Math.abs(a-c);if(this.Hd!==null&&(t.beginPath(),t.rect(u,p,y,c),t.Lg(this.Hd)),this.tc!==null){var v=f=0,d=0;o&&e&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),r&&!h?(h=s.Za(),h.push(u),h.push(p),h.push(u+y),h.push(p),h.push(u+y),h.push(p+c),h.push(u),h.push(p+c),h.push(u),h.push(p),t.beginPath(),Mf(t,h,l,this.Af),t.Kj(),s.ra(h)):n!==0&&(t.beginPath(),t.rect(u,p,y,c),t.Kj()),o&&e&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d)}}else if(u.na===Vo)y=u.Ec,c=u.Oc,f=u.Ab,a=u.Hb,u=Math.abs(f-y)/2,p=Math.abs(a-c)/2,y=Math.min(y,f)+u,c=Math.min(c,a)+p,t.beginPath(),t.moveTo(y,c-p),t.bezierCurveTo(y+rt*u,c-p,y+u,c-rt*p,y+u,c),t.bezierCurveTo(y+u,c+rt*p,y+rt*u,c+p,y,c+p),t.bezierCurveTo(y-rt*u,c+p,y-u,c+rt*p,y-u,c),t.bezierCurveTo(y-u,c-rt*p,y-rt*u,c-p,y,c-p),t.closePath(),this.Hd!==null&&t.Lg(this.Hd),r&&!h&&(h=s.Za(),Vn(y,c-p,y+rt*u,c-p,y+u,c-rt*p,y+u,c,.5,h),Vn(y+u,c,y+u,c+rt*p,y+rt*u,c+p,y,c+p,.5,h),Vn(y,c+p,y-rt*u,c+p,y-u,c+rt*p,y-u,c,.5,h),Vn(y-u,c,y-u,c-rt*p,y-rt*u,c-p,y,c-p,.5,h),t.beginPath(),Mf(t,h,l,this.Af),s.ra(h)),n!==0&&this.tc!==null&&(o&&e?(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Kj(),t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d):t.Kj());else if(u.na===He){for(p=u.Vj,c=p.length,a=0;a<c;a++){y=p.n[a],t.beginPath(),t.moveTo(y.ha,y.da);for(var f=y.yb.n,v=f.length,g=null,d=0;d<v;d++){var m=f[d];switch(m.na){case Ke:t.moveTo(m.C,m.D);break;case ue:t.lineTo(m.C,m.D);break;case ho:t.bezierCurveTo(m.Jd,m.Ye,m.oh,m.Dg,m.Ab,m.Hb);break;case lo:t.quadraticCurveTo(m.Jd,m.Ye,m.Ab,m.Hb);break;case qi:if(m.radiusX===m.radiusY){var w=g!==null?g.C:y.ha,M=g!==null?g.D:y.da,g=Math.PI/180;t.arc(m.Jd,m.Ye,m.radiusX,m.Ae*g,(m.Ae+m.uf)*g,0>m.uf,w,M)}else{if(g=Ho(m,y),w=g.length,w===0){t.lineTo(m.la,m.sa);break}for(M=0;M<w;M++){var S=g[M];M===0&&t.lineTo(S[0],S[1]),t.bezierCurveTo(S[2],S[3],S[4],S[5],S[6],S[7])}}break;case Ue:if(M=w=0,g!==null&&g.type===qi){if(g=Ho(g,y),S=g.length,S===0){t.lineTo(m.la,m.sa);break}g=g[S-1]||null,g!==null&&(w=g[6],M=g[7])}else w=g!==null?g.C:y.ha,M=g!==null?g.D:y.da;if(g=as(m,y,w,M),w=g.length,w===0){t.lineTo(m.la,m.sa);break}for(M=0;M<w;M++)S=g[M],t.bezierCurveTo(S[2],S[3],S[4],S[5],S[6],S[7]);break;default:s.k("Segment not of valid type: "+m.na)}m.Sh&&t.closePath(),g=m}e?(d=v=f=0,y.Vo?(y.Km===!0&&this.Hd!==null?(t.Lg(this.Hd),o=!0):o=!1,n!==0&&this.tc!==null&&(o&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),r&&!h||t.Kj(),o&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d))):(o&&(f=t.shadowOffsetX,v=t.shadowOffsetY,d=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),y.Km===!0&&this.Hd!==null&&t.Lg(this.Hd),n!==0&&this.tc!==null&&(r&&!h||t.Kj()),o&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=d))):(y.Km===!0&&this.Hd!==null&&t.Lg(this.Hd),n===0||this.tc===null||r&&!h||t.Kj())}if(r&&!h)for(n=o,o=u.Vj,h=o.length,u=0;u<h;u++){for(p=o.n[u],t.beginPath(),c=s.Za(),c.push(p.ha),c.push(p.da),a=p.ha,y=p.da,f=a,v=y,d=p.yb.n,m=d.length,w=0;w<m;w++){switch(M=d[w],M.na){case Ke:Mf(t,c,l,this.Af),c.length=0,c.push(M.C),c.push(M.D),a=M.C,y=M.D,f=a,v=y;break;case ue:c.push(M.C),c.push(M.D),a=M.C,y=M.D;break;case ho:Vn(a,y,M.Jd,M.Ye,M.oh,M.Dg,M.Ab,M.Hb,.5,c),a=M.C,y=M.D;break;case lo:El(a,y,M.Jd,M.Ye,M.Ab,M.Hb,.5,c),a=M.C,y=M.D;break;case qi:if(g=Ho(M,p),S=g.length,S===0){c.push(M.la),c.push(M.sa),a=M.la,y=M.sa;break}for(var F=0;F<S;F++){var C=g[F];Vn(a,y,C[2],C[3],C[4],C[5],C[6],C[7],.5,c),a=C[6],y=C[7]}break;case Ue:if(g=as(M,p,a,y),S=g.length,S===0){c.push(M.la),c.push(M.sa),a=M.la,y=M.sa;break}for(F=0;F<S;F++)C=g[F],Vn(a,y,C[2],C[3],C[4],C[5],C[6],C[7],.5,c),a=C[6],y=C[7];break;default:s.k("Segment not of valid type: "+M.na)}M.Sh&&(c.push(f),c.push(v),Mf(t,c,l,this.Af))}Mf(t,c,l,this.Af),s.ra(c),this.tc!==null&&(a=c=p=0,n&&e&&(p=t.shadowOffsetX,c=t.shadowOffsetY,a=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Kj(),n&&e&&(t.shadowOffsetX=p,t.shadowOffsetY=c,t.shadowBlur=a))}}if(r&&t.wx(),this.hy!==null){if(r=this.hy,Gt(r,1/0,1/0),l=r.za,r.jc(0,0,l.width,l.height),n=this.of,t.save(),t.beginPath(),l=s.Za(),n.type===Yi)l.push(n.ha),l.push(n.da),l.push(n.C),l.push(n.D),ou(t,i,l,r);else if(n.type===He)for(h=n.fc.i;h.next();){for(u=h.value,l.length=0,l.push(u.ha),l.push(u.da),o=u.ha,p=u.da,c=o,a=p,y=u.yb.n,f=y.length,v=0;v<f;v++){switch(d=y[v],d.na){case Ke:ou(t,i,l,r),l.length=0,l.push(d.C),l.push(d.D),o=d.C,p=d.D,c=o,a=p;break;case ue:l.push(d.C),l.push(d.D),o=d.C,p=d.D;break;case ho:Vn(o,p,d.Jd,d.Ye,d.oh,d.Dg,d.Ab,d.Hb,.5,l),o=d.C,p=d.D;break;case lo:El(o,p,d.Jd,d.Ye,d.Ab,d.Hb,.5,l),o=d.C,p=d.D;break;case qi:if(n=Ho(d,u),e=n.length,e===0){l.push(d.la),l.push(d.sa),o=d.la,p=d.sa;break}for(m=0;m<e;m++)w=n[m],Vn(o,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),o=w[6],p=w[7];break;case Ue:if(n=as(d,u,o,p),e=n.length,e===0){l.push(d.la),l.push(d.sa),o=d.la,p=d.sa;break}for(m=0;m<e;m++)w=n[m],Vn(o,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),o=w[6],p=w[7];break;default:s.k("Segment not of valid type: "+d.na)}d.Sh&&(l.push(c),l.push(a),ou(t,i,l,r))}ou(t,i,l,r)}else if(n.type===so)l.push(n.ha),l.push(n.da),l.push(n.C),l.push(n.da),l.push(n.C),l.push(n.D),l.push(n.ha),l.push(n.D),l.push(n.ha),l.push(n.da),ou(t,i,l,r);else if(n.type===Vo){if(h=new Pi,h.ha=n.C,h.da=(n.da+n.D)/2,o=new mt(qi),o.Ae=0,o.uf=360,o.la=(n.ha+n.C)/2,o.sa=(n.da+n.D)/2,o.radiusX=Math.abs(n.ha-n.C)/2,o.radiusY=Math.abs(n.da-n.D)/2,h.add(o),n=Ho(o,h),e=n.length,e===0)l.push(o.la),l.push(o.sa);else for(o=h.ha,p=h.da,m=0;m<e;m++)w=n[m],Vn(o,p,w[2],w[3],w[4],w[5],w[6],w[7],.5,l),o=w[6],p=w[7];ou(t,i,l,r)}s.ra(l),t.restore(),t.Ke(!1)}}}};function Mf(t,i,n,e){var o=i.length;if(!(4>o)){var r=.001,h=n.length,l=i[0],u=i[1];if(o===4)nu(t,l,u,i[2],i[3],n,e);else{t.moveTo(l,u);for(var f=r=0,a=0,p=0,y=0,c=p=0,v=s.Za(),d=2;d<o;d+=2)r=i[d],f=i[d+1],a=r-l,p=f-u,a===0&&(a=.001),y=p/a,p=Math.sqrt(a*a+p*p),v.push([a,y,p]),c+=p,l=r,u=f;l=i[0],u=i[1],i=0;for(var o=!0,r=n[i%h],f=e!==0,d=0,p=v[d],a=p[0],y=p[1],p=p[2],g=0;.1<=c;){g===0&&(r=n[i%h],i++,f&&(e%=r,r-=e,f=!1)),r>c&&(r=c),r>p?(g=r-p,r=p):g=0;var m=Math.sqrt(r*r/(1+y*y));if(0>a&&(m=-m),l+=m,u+=y*m,o?t.lineTo(l,u):t.moveTo(l,u),c-=r,p-=r,g!==0){if(d++,d===v.length){s.ra(v);return}p=v[d],a=p[0],y=p[1],p=p[2],r=g}else o=!o}s.ra(v)}}}Y.prototype.getDocumentPoint=Y.prototype.Ya=function(t,i){if(i===void 0&&(i=new D),t instanceof P){t.Ud()&&s.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.Ja,e=this.mb;i.m(t.x*(n.width+e)-e/2+n.x+t.offsetX,t.y*(n.height+e)-e/2+n.y+t.offsetY)}else i.set(t);return this.rh.nb(i),i},Y.prototype.Ek=function(t,i){var n=this.of;if(n===null||this.fill===null&&this.stroke===null)return!1;var e=n.eb,o=this.mb/2;n.type!==Yi||i||(o+=2);var r=s.vf();if(r.assign(e),r.Zf(o+2,o+2),!r.Ia(t))return s.Bb(r),!1;if(e=o+1e-4,n.type===Yi)return this.stroke===null||(e=(n.C-n.ha)*(t.x-n.ha)+(n.D-n.da)*(t.y-n.da),0>(n.ha-n.C)*(t.x-n.C)+(n.da-n.D)*(t.y-n.D)||0>e)?!1:(s.Bb(r),wn(n.ha,n.da,n.C,n.D,o,t.x,t.y));if(n.type===so){var h=n.ha,l=n.da,u=n.C,n=n.D;if(r.x=Math.min(h,u),r.y=Math.min(l,n),r.width=Math.abs(u-h),r.height=Math.abs(n-l),this.fill===null){if(r.Zf(-e,-e),r.Ia(t))return s.Bb(r),!1;r.Zf(e,e)}return this.stroke!==null&&r.Zf(o,o),e=r.Ia(t),s.Bb(r),e}if(n.type===Vo){var h=n.ha,l=n.da,u=n.C,n=n.D,o=Math.min(h,u),f=Math.min(l,n),h=Math.abs(u-h)/2,l=Math.abs(n-l)/2,o=t.x-(o+h),f=t.y-(f+l);if(this.fill===null){if(h-=e,l-=e,0>=h||0>=l||1>=o*o/(h*h)+f*f/(l*l))return s.Bb(r),!1;h+=e,l+=e}return this.stroke!==null&&(h+=e,l+=e),s.Bb(r),0>=h||0>=l?!1:1>=o*o/(h*h)+f*f/(l*l)}return n.type===He?(s.Bb(r),this.fill===null?Wv(n,t.x,t.y,o):n.Ia(t,o,1<this.mb,i)):(s.k("Unknown Geometry type: "+n.type),!1)},Y.prototype.Qn=function(t,i,n,e){var o=this.Da,r=this.ji;t=Math.max(t,0),i=Math.max(i,0);var h;if(this.Sf!==null)h=this.of.eb;else{var l=this.Fb,u=I0[l];if(u===void 0){var f=co[l];typeof f=="string"&&(f=co[f]),typeof f=="function"?(u=f(null,100,100),I0[l]=u):s.k("Unsupported Figure: "+l)}h=u.eb}var l=h.width,u=h.height,f=h.width,a=h.height;switch(Io(this,!0)){case ei:e=n=0;break;case ii:f=Math.max(t-r,0),a=Math.max(i-r,0);break;case Zi:f=Math.max(t-r,0),e=0;break;case tn:n=0,a=Math.max(i-r,0)}switch(isFinite(o.width)&&(f=o.width),isFinite(o.height)&&(a=o.height),o=this.Hf,h=this.si,n=Math.max(n-r,h.width),e=Math.max(e-r,h.height),f=Math.min(o.width,f),a=Math.min(o.height,a),f=isFinite(f)?Math.max(n,f):Math.max(l,n),a=isFinite(a)?Math.max(e,a):Math.max(u,e),n=qy(this),n){case ei:break;case ii:l=f,u=a;break;case Li:n=Math.min(f/l,a/u),isFinite(n)||(n=1),l*=n,u*=n;break;default:s.k(n+" is not a valid geometryStretch.")}this.Sf!==null?(l=Math.max(l,.01),u=Math.max(u,.01),h=this.Sf!==null?this.Sf:this.Sa,o=l,e=u,n=h.copy(),h=h.eb,o/=h.width,e/=h.height,isFinite(o)||(o=1),isFinite(e)||(e=1),o===1&&e===1||n.scale(o,e),this.Sa=n):this.Sa!==null&&St(this.Sa.Uo,t-r)&&St(this.Sa.So,i-r)||(this.Sa=Y.makeGeometry(this,l,u)),h=this.Sa.eb,t===1/0||i===1/0?qo(this,h.x-r/2,h.y-r/2,t===0&&l===0?0:h.width+r,i===0&&u===0?0:h.height+r):qo(this,-(r/2),-(r/2),f+r,a+r)};function Qg(t,i,n,e){if(gs(t)!==!1){t.ud.Qa();var o=t.ji;o===0&&e instanceof vt&&e.ub instanceof Y&&(o=e.ub.mb),o*=t.rb,e instanceof k&&e.Sa!==null?(i=e.Sa.eb,qo(t,i.x-o/2,i.y-o/2,i.width+o,i.height+o)):e instanceof vt&&e.Ze.Sa!==null?(i=e.Ze.Sa.eb,qo(t,i.x-o/2,i.y-o/2,i.width+o,i.height+o)):qo(t,-(o/2),-(o/2),i+o,n+o),t.ud.freeze(),t.ud.I()||s.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.ud.toString()),ie(t,!1)}}function qy(t){var i=t.HA;return t.Sf!==null?i===Ao?ii:i:i===Ao?I0[t.Fb].ae:i}Y.prototype.pj=function(t,i,n,e){Ra(this,t,i,n,e)},Y.prototype.getNearestIntersectionPoint=Y.prototype.lF=function(t,i,n){return this.En(t.x,t.y,i.x,i.y,n)},Y.prototype.En=function(t,i,n,e,o){var l=this.transform,u=1/(l.m11*l.m22-l.m12*l.m21),f=l.m22*u,a=-l.m12*u,p=-l.m21*u,r=l.m11*u,y=u*(l.m21*l.dy-l.m22*l.dx),h=u*(l.m12*l.dx-l.m11*l.dy),l=t*f+i*p+y,u=t*a+i*r+h,f=n*f+e*p+y,a=n*a+e*r+h,p=this.mb/2,y=this.Sa;if(y===null&&(Gt(this,1/0,1/0),y=this.Sa),h=y.eb,r=!1,y.type===Yi)if(1.5>=this.mb)r=ur(y.Ec,y.Oc,y.Ab,y.Hb,l,u,f,a,o);else{var c=0,v=0;if(y.Ec===y.Ab?(c=p,v=0):(i=(y.Hb-y.Oc)/(y.Ab-y.Ec),v=p/Math.sqrt(1+i*i),c=v*i),e=s.Za(),i=new D,ur(y.Ec+c,y.Oc+v,y.Ab+c,y.Hb+v,l,u,f,a,i)&&e.push(i),i=new D,ur(y.Ec-c,y.Oc-v,y.Ab-c,y.Hb-v,l,u,f,a,i)&&e.push(i),i=new D,ur(y.Ec+c,y.Oc+v,y.Ec-c,y.Oc-v,l,u,f,a,i)&&e.push(i),i=new D,ur(y.Ab+c,y.Hb+v,y.Ab-c,y.Hb-v,l,u,f,a,i)&&e.push(i),i=e.length,i===0)return s.ra(e),!1;for(r=!0,v=1/0,c=0;c<i;c++){var f=e[c],d=(f.x-l)*(f.x-l)+(f.y-u)*(f.y-u);d<v&&(v=d,o.x=f.x,o.y=f.y)}s.ra(e)}else if(y.type===so)i=h.x-p,r=fr(i,h.y-p,h.x+h.width+p,h.y+h.height+p,l,u,f,a,o);else if(y.type===Vo)t:if(i=h.copy().Zf(p,p),i.width===0)r=ur(i.x,i.y,i.x,i.y+i.height,l,u,f,a,o);else if(i.height===0)r=ur(i.x,i.y,i.x+i.width,i.y,l,u,f,a,o);else{t=i.width/2;var g=i.height/2;if(e=i.x+t,i=i.y+g,n=9999,l!==f&&(n=(u-a)/(l-f)),9999>Math.abs(n)){if(r=u-i-n*(l-e),0>t*t*n*n+g*g-r*r){o.x=NaN,o.y=NaN,r=!1;break t}p=Math.sqrt(t*t*n*n+g*g-r*r),f=(-(t*t*n*r)+t*g*p)/(g*g+t*t*n*n)+e,t=(-(t*t*n*r)-t*g*p)/(g*g+t*t*n*n)+e,a=n*(f-e)+r+i,i=n*(t-e)+r+i,e=Math.abs((l-f)*(l-f))+Math.abs((u-a)*(u-a)),u=Math.abs((l-t)*(l-t))+Math.abs((u-i)*(u-i)),e<u?(o.x=f,o.y=a):(o.x=t,o.y=i)}else{if(f=g*g,a=l-e,f-=f/(t*t)*a*a,0>f){o.x=NaN,o.y=NaN,r=!1;break t}p=Math.sqrt(f),a=i+p,i-=p,e=Math.abs(a-u),u=Math.abs(i-u),e<u?(o.x=l,o.y=a):(o.x=l,o.y=i)}r=!0}else if(y.type===He){var m=0,w=0,M=d=0,h=s.K(),c=f-l,v=a-u,v=c*c+v*v;for(o.x=f,o.y=a,c=0;c<y.fc.count;c++)for(var S=y.fc.n[c],F=S.yb,m=S.ha,w=S.da,C=m,G=w,H=0;H<F.count;H++){var U=F.n[H],X=U.type,d=U.C,M=U.D,_=!1;switch(X){case Ke:C=d,G=M;break;case ue:_=Qa(m,w,d,M,l,u,f,a,h);break;case ho:var _=U.xc,X=U.Sc,Mt=U.Eh,Dt=U.Fh,_=$u(m,w,_,X,Mt,Dt,d,M,l,u,f,a,.5,h);break;case lo:_=(m+2*U.xc)/3,X=(w+2*U.Sc)/3,Mt=(2*U.xc+d)/3,Dt=(2*U.xc+d)/3,_=$u(m,w,_,X,Mt,Dt,d,M,l,u,f,a,.5,h);break;case qi:case Ue:if(X=U.type===qi?Ho(U,S):as(U,S,m,w),Mt=X.length,Mt===0){_=Qa(m,w,U.la,U.sa,l,u,f,a,h);break}for(M=0;M<Mt;M++)g=X[M],M===0&&Qa(m,w,g[0],g[1],l,u,f,a,h)&&(d=qa(l,u,h,v,o),d<v&&(v=d,r=!0)),$u(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],l,u,f,a,.5,h)&&(d=qa(l,u,h,v,o),d<v&&(v=d,r=!0));d=g[6],M=g[7];break;default:s.k("Unknown Segment type: "+X)}m=d,w=M,_&&(d=qa(l,u,h,v,o),d<v&&(v=d,r=!0)),U.Lx&&(d=C,M=G,Qa(m,w,d,M,l,u,f,a,h)&&(d=qa(l,u,h,v,o),d<v&&(v=d,r=!0)))}l=n-t,u=e-i,i=Math.sqrt(l*l+u*u),i!==0&&(l/=i,u/=i),o.x-=l*p,o.y-=u*p,s.v(h)}else s.k("Unknown Geometry type: "+y.type);return r?(this.transform.nb(o),!0):!1};function qa(t,i,n,e,o){return t=n.x-t,i=n.y-i,i=t*t+i*i,i<e?(o.x=n.x,o.y=n.y,i):e}function Qa(t,i,n,e,o,r,h,l,u){var f=!1,a=(o-h)*(i-e)-(r-l)*(t-n);return a===0?!1:(u.x=((o*l-r*h)*(t-n)-(o-h)*(t*e-i*n))/a,u.y=((o*l-r*h)*(i-e)-(r-l)*(t*e-i*n))/a,(t>n?t-n:n-t)<(i>e?i-e:e-i)?(o=i<e?i:e,t=i<e?e:i,(u.y>o||St(u.y,o))&&(u.y<t||St(u.y,t))&&(f=!0)):(o=t<n?t:n,t=t<n?n:t,(u.x>o||St(u.x,o))&&(u.x<t||St(u.x,t))&&(f=!0)),f)}Y.prototype.containedInRect=Y.prototype.un=function(t,i){if(i===void 0)return t.Fk(this.U);var n=this.Sa;n===null&&(Gt(this,1/0,1/0),n=this.Sa);var n=n.eb,e=this.mb/2,o=!1,r=s.K();return r.m(n.x-e,n.y-e),t.Ia(i.nb(r))&&(r.m(n.x-e,n.bottom+e),t.Ia(i.nb(r))&&(r.m(n.right+e,n.bottom+e),t.Ia(i.nb(r))&&(r.m(n.right+e,n.y-e),t.Ia(i.nb(r))&&(o=!0)))),s.v(r),o},Y.prototype.intersectsRect=Y.prototype.$f=function(t,i){if(this.un(t,i)||i===void 0&&(i=this.transform,t.Fk(this.U)))return!0;var n=s.Wg();n.set(i),n.TA();var e=t.left,o=t.right,r=t.top,h=t.bottom,l=s.K();if(l.m(e,r),n.nb(l),this.Ek(l,!0)||(l.m(o,r),n.nb(l),this.Ek(l,!0))||(l.m(e,h),n.nb(l),this.Ek(l,!0))||(l.m(o,h),n.nb(l),this.Ek(l,!0)))return s.v(l),!0;var u=s.K(),f=s.K();n.set(i),n.UF(this.transform),n.TA(),u.x=o,u.y=r,u.transform(n),l.x=e,l.y=r,l.transform(n);var a=!1;return rh(this,l,u,f)?a=!0:(l.x=o,l.y=h,l.transform(n),rh(this,l,u,f)?a=!0:(u.x=e,u.y=h,u.transform(n),rh(this,l,u,f)?a=!0:(l.x=e,l.y=r,l.transform(n),rh(this,l,u,f)&&(a=!0)))),s.v(l),s.bf(n),s.v(u),s.v(f),a};function rh(t,i,n,e){if(!t.lF(i,n,e))return!1;t=i.x,i=i.y;var o=n.x;n=n.y;var r=e.x;if(e=e.y,t===o){var h=0;return t=0,i<n?(h=i,t=n):(h=n,t=i),e>=h&&e<=t}return t<o?(h=t,t=o):h=o,r>=h&&r<=t}Y.prototype.eF=function(t,i,n){function e(d,g){for(var m=d.length,w=0;w<m;w+=2)if(g.Xf(d[w],d[w+1])>o)return!0;return!1}if(n&&this.fill!==null&&this.Ek(t,!0))return!0;var o=t.Cf(i);i=o,1.5<this.mb&&(o=this.mb/2+Math.sqrt(o),o*=o);var r=this.Sa;if(r===null&&(Gt(this,1/0,1/0),r=this.Sa,r===null))return!1;if(!n){var f=r.eb,h=f.x,l=f.y,u=f.x+f.width,f=f.y+f.height;if(Gr(t.x,t.y,h,l)<=o&&Gr(t.x,t.y,u,l)<=o&&Gr(t.x,t.y,h,f)<=o&&Gr(t.x,t.y,u,f)<=o)return!0}if(h=r.Ec,l=r.Oc,u=r.Ab,f=r.Hb,r.type===Yi){if(n=xn(t.x,t.y,h,l,u,f),r=(h-u)*(t.x-u)+(l-f)*(t.y-f),n<=(0<=(u-h)*(t.x-h)+(f-l)*(t.y-l)&&0<=r?o:i))return!0}else{if(r.type===so)return i=!1,n&&(i=xn(t.x,t.y,h,l,h,f)<=o||xn(t.x,t.y,h,l,u,l)<=o||xn(t.x,t.y,u,l,u,f)<=o||xn(t.x,t.y,h,f,u,f)<=o),i;if(r.type===Vo){i=t.x-(h+u)/2;var r=t.y-(l+f)/2,a=Math.abs(u-h)/2,p=Math.abs(f-l)/2;if(a===0||p===0)return n=xn(t.x,t.y,h,l,u,f),n<=o;if(n){if(t=gx(a,p,i,r),t*t<=o)return!0}else return!(Gr(i,r,-a,0)>=o||Gr(i,r,0,-p)>=o||Gr(i,r,0,p)>=o||Gr(i,r,a,0)>=o)}else if(r.type===He){if(f=r.eb,h=f.x,l=f.y,u=f.x+f.width,f=f.y+f.height,t.x>u&&t.x<h&&t.y>f&&t.y<l&&xn(t.x,t.y,h,l,h,f)>o&&xn(t.x,t.y,h,l,u,l)>o&&xn(t.x,t.y,u,f,h,f)>o&&xn(t.x,t.y,u,f,u,l)>o)return!1;if(i=Math.sqrt(o),n){if(this.fill===null?Wv(r,t.x,t.y,i):r.Ia(t,i,!0))return!0}else{for(n=r.fc,i=0;i<n.count;i++){if(h=n.n[i],a=h.ha,p=h.da,t.Xf(a,p)>o)return!1;for(l=h.yb.n,u=l.length,f=0;f<u;f++){var y=l[f];switch(y.type){case Ke:case ue:if(a=y.C,p=y.D,t.Xf(a,p)>o)return!1;break;case ho:if(r=s.Za(),Vn(a,p,y.xc,y.Sc,y.Eh,y.Fh,y.C,y.D,.8,r),a=e(r,t),s.ra(r),a||(a=y.C,p=y.D,t.Xf(a,p)>o))return!1;break;case lo:if(r=s.Za(),El(a,p,y.xc,y.Sc,y.C,y.D,.8,r),a=e(r,t),s.ra(r),a||(a=y.C,p=y.D,t.Xf(a,p)>o))return!1;break;case qi:case Ue:var c=y.type===qi?Ho(y,h):as(y,h,a,p),v=c.length;if(v===0){if(a=y.la,p=y.sa,t.Xf(a,p)>o)return!1;break}for(y=null,r=s.Za(),i=0;i<v;i++)if(y=c[i],r.length=0,Vn(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.8,r),e(r,t))return s.ra(r),!1;s.ra(r),y!==null&&(a=y[6],p=y[7]);break;default:s.k("Unknown Segment type: "+y.type)}}}return!0}}}return!1},s.defineProperty(Y,{of:"geometry"},function(){return this.Sa!==null?this.Sa:this.Sf},function(t){var i=this.Sa;if(i!==t){this.Sf=t!==null?this.Sa=t.freeze():this.Sa=null;var n=this.W;n!==null&&(n.lk=NaN),this.H(),this.h("geometry",i,t),Jh(this)&&(t=this.W,t!==null&&ih(this,t,"geometryString"))}}),s.defineProperty(Y,{cI:"geometryString"},function(){return this.of===null?"":this.of.toString()},function(t){t=zl(t);var i=t.normalize();this.of=t,this.position=t=s.wb(-i.x,-i.y),s.v(t)}),s.defineProperty(Y,{CF:"isGeometryPositioned"},function(){return this.Xr},function(t){var i=this.Xr;i!==t&&(this.Xr=t,this.H(),this.h("isGeometryPositioned",i,t))}),Y.prototype.fe=function(){this.Sa=null},s.defineProperty(Y,{fill:"fill"},function(){return this.Hd},function(t){var i=this.Hd;i!==t&&(t instanceof yt&&t.freeze(),this.Hd=t,this.oa(),this.h("fill",i,t))}),s.defineProperty(Y,{stroke:"stroke"},function(){return this.tc},function(t){var i=this.tc;i!==t&&(t instanceof yt&&t.freeze(),this.tc=t,this.oa(),this.h("stroke",i,t))}),s.defineProperty(Y,{mb:"strokeWidth"},function(){return this.ji},function(t){var i=this.ji;if(i!==t)if(0<=t){this.ji=t,this.H();var n=this.W;n!==null&&(n.lk=NaN),this.h("strokeWidth",i,t)}else s.Fa(t,"value >= 0",Y,"strokeWidth:value")}),s.defineProperty(Y,{TL:"strokeCap"},function(){return this.xp},function(t){var i=this.xp;i!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?s.Fa(t,'"butt", "round", or "square"',Y,"strokeCap"):(this.xp=t,this.oa(),this.h("strokeCap",i,t)))}),s.defineProperty(Y,{VL:"strokeJoin"},function(){return this.zp},function(t){var i=this.zp;i!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?s.Fa(t,'"miter", "bevel", or "round"',Y,"strokeJoin"):(this.zp=t,this.oa(),this.h("strokeJoin",i,t)))}),s.defineProperty(Y,{WL:"strokeMiterLimit"},function(){return this.kn},function(t){var i=this.kn;if(i!==t)if(1<=t){this.kn=t,this.oa();var n=this.W;n!==null&&(n.lk=NaN),this.h("strokeMiterLimit",i,t)}else s.Fa(t,"value >= 1",Y,"strokeWidth:value")}),s.defineProperty(Y,{AG:"strokeDashArray"},function(){return this.yp},function(t){var i=this.yp;if(i!==t){if(t===null||Array.isArray(t)||s.Fd(t,"Array",Y,"strokeDashArray:value"),t!==null){for(var n=t.length,e=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||s.k("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(e===0){if(i===null)return;t=null}}this.yp=t,this.oa(),this.h("strokeDashArray",i,t)}}),s.defineProperty(Y,{UL:"strokeDashOffset"},function(){return this.Af},function(t){var i=this.Af;i!==t&&0<=t&&(this.Af=t,this.oa(),this.h("strokeDashOffset",i,t))}),s.defineProperty(Y,{Fb:"figure"},function(){return this.Ko},function(t){var i=this.Ko;if(i!==t){var n=co[t];typeof n=="function"?n=t:(n=co[t.toLowerCase()])||s.k("Unknown Shape.figure: "+t),i!==n&&(t=this.W,t!==null&&(t.lk=NaN),this.Ko=n,this.Sf=null,this.fe(),this.H(),this.h("figure",i,n))}}),s.defineProperty(Y,{Lq:"toArrow"},function(){return this.Ep},function(t){var i=this.Ep;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){var n=u1(t);n===null?s.k("Unknown Shape.toArrow: "+t):i!==n&&(this.Ep=n,this.Sf=null,this.fe(),this.H(),Zg(this),this.h("toArrow",i,n))}}),s.defineProperty(Y,{FA:"fromArrow"},function(){return this.Mo},function(t){var i=this.Mo;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){var n=u1(t);n===null?s.k("Unknown Shape.fromArrow: "+t):i!==n&&(this.Mo=n,this.Sf=null,this.fe(),this.H(),Zg(this),this.h("fromArrow",i,n))}});function Zg(t){var i=t.g;i!==null&&i.ja.lb||(t.Eq=hp,t.Ep!=="None"?(t.Qe=-1,t.qh=On):t.Mo!=="None"&&(t.Qe=0,t.qh=new P(1-On.x,On.y)))}s.defineProperty(Y,{A:"spot1"},function(){return this.hi},function(t){s.G(t,P,Y,"spot1");var i=this.hi;i.L(t)||(this.hi=t=t.S(),this.H(),this.h("spot1",i,t))}),s.defineProperty(Y,{B:"spot2"},function(){return this.ii},function(t){s.G(t,P,Y,"spot2");var i=this.ii;i.L(t)||(this.ii=t=t.S(),this.H(),this.h("spot2",i,t))}),s.defineProperty(Y,{Jc:"parameter1"},function(){return this.Rs},function(t){var i=this.Rs;i!==t&&(this.Rs=t,this.fe(),this.H(),this.h("parameter1",i,t))}),s.defineProperty(Y,{Qu:"parameter2"},function(){return this.Ss},function(t){var i=this.Ss;i!==t&&(this.Ss=t,this.fe(),this.H(),this.h("parameter2",i,t))}),s.u(Y,{Ja:"naturalBounds"},function(){if(this.Sa!==null)return this.Nc.assign(this.Sa.eb),this.Nc;var t=this.Da;return new O(0,0,t.width,t.height)}),s.defineProperty(Y,{hy:"pathPattern"},function(){return this.Us},function(t){var i=this.Us;i!==t&&(this.Us=t,this.oa(),this.h("pathPattern",i,t))}),s.defineProperty(Y,{KL:"pathObject"},function(){return this.hy},function(t){this.hy=t}),s.defineProperty(Y,{HA:"geometryStretch"},function(){return this.Mr},function(t){var i=this.Mr;i!==t&&(s.ob(t,N,Y,"geometryStretch"),this.Mr=t,this.h("geometryStretch",i,t))}),s.defineProperty(Y,{interval:"interval"},function(){return this.ug},function(t){var i=this.ug;if(t=Math.floor(t),i!==t&&0<=t){this.ug=t;var n=this.g;n!==null&&this.R===n.Gn&&Kr(n),this.H(),n=this.R,n!==null&&n.type===qh&&(n.ak=null),this.h("interval",i,t)}}),s.defineProperty(Y,{pF:"graduatedStart"},function(){return this.tg},function(t){var i=this.tg;i!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.H(),this.h("graduatedStart",i,t))}),s.defineProperty(Y,{nF:"graduatedEnd"},function(){return this.sg},function(t){var i=this.sg;i!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.H(),this.h("graduatedEnd",i,t))}),Y.makeGeometry=function(t,i,n){var e=null;if(t.Lq!=="None")e=No[t.Lq];else if(t.FA!=="None")e=No[t.FA];else{var o=co[t.Fb];typeof o=="string"&&(o=co[o]),o===void 0&&s.k("Unknown Shape.figure: "+t.Fb),e=o(t,i,n),e.Uo=i,e.So=n}return e===null&&(o=co.Rectangle,typeof o=="function"&&(e=o(t,i,n))),e},Y.getFigureGenerators=function(){var t=new tt,i;for(i in co)i!==i.toLowerCase()&&t.add(i,co[i]);return t.freeze(),t},Y.defineFigureGenerator=function(t,i){s.j(t,"string",Y,"defineFigureGenerator:name"),typeof i=="string"?i!==""&&co[i]||s.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+i):s.j(i,"function",Y,"defineFigureGenerator:func");var n=t.toLowerCase();t!==""&&n!=="none"&&t!==n||s.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),co[t]=i,co[n]=t},Y.getArrowheadGeometries=function(){var t=new tt("string",et),i;for(i in ba)if(No[i]===void 0){var n=zl(ba[i],!1);No[i]=n,n=i.toLowerCase(),n!==i&&(No[n]=i)}for(i in No)i!==i.toLowerCase()&&(n=No[i],n instanceof et&&t.add(i,n));return t.freeze(),t},Y.defineArrowheadGeometry=function(t,i){s.j(t,"string",Y,"defineArrowheadGeometry:name");var n=null;typeof i=="string"?(s.j(i,"string",Y,"defineArrowheadGeometry:pathstr"),n=zl(i,!1)):(s.G(i,et,Y,"defineArrowheadGeometry:pathstr"),n=i);var e=t.toLowerCase();t!==""&&e!=="none"&&t!==e||s.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),No[t]=n,No[e]=t};function ot(){N.call(this),this.Ld="",this.tc="black",this.qg="13px sans-serif",this.Jl="start",this.pg=ei,this.Nl=g0,this.Lm=!0,this.ek=this.gk=!1,this.cj=t1,this.nj=_g,this.nw=this.pe=0,this.Fz=this.Gz=null,this.zf=new sh,this.Fr=!1,this.We=this.er=this.Ct=this.Kl=this.Dt=null,this.gi=this.fi=0,this.ih=1/0,this.$o=0,this.ug=1,this.tg=0,this.sg=1,this.Gm=null}s.La(ot,N),s.ga("TextBlock",ot);var Xg=/[ \u200b\u00ad]/;ot.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.Ld=this.Ld,t.tc=this.tc,t.qg=this.qg,t.Jl=this.Jl,t.pg=this.pg,t.Nl=this.Nl,t.Lm=this.Lm,t.gk=this.gk,t.ek=this.ek,t.cj=this.cj,t.nj=this.nj,t.pe=this.pe,t.nw=this.nw,t.Gz=this.Gz,t.Fz=this.Fz,t.zf.Sp(this.zf),t.Fr=this.Fr,t.Dt=this.Dt,t.Kl=this.Kl,t.Ct=this.Ct,t.er=this.er,t.We=this.We,t.fi=this.fi,t.gi=this.gi,t.ih=this.ih,t.$o=this.$o,t.ug=this.ug,t.tg=this.tg,t.sg=this.sg,t.Gm=this.Gm},ot.prototype.ic=function(t){t.Je===ot?this.OG=t:N.prototype.ic.call(this,t)},ot.prototype.toString=function(){return 22<this.Ld.length?'TextBlock("'+this.Ld.substring(0,20)+'"...)':'TextBlock("'+this.Ld+'")'};var Qy=new Bn,Wg=0,Za=new Bn,Zy=0,Pf="...",ru="",Fe=new Oo(null).Gk;ot.getEllipsis=function(){return Pf},ot.setEllipsis=function(t){Pf=t,Za=new Bn,Zy=0};var Xy;ot.None=Xy=s.p(ot,"None",0);var $g;ot.WrapFit=$g=s.p(ot,"WrapFit",1);var _g;ot.WrapDesiredSize=_g=s.p(ot,"WrapDesiredSize",2);var bg;ot.WrapBreakAll=bg=s.p(ot,"WrapBreakAll",3);var t1;ot.OverflowClip=t1=s.p(ot,"OverflowClip",0);var Xa;ot.OverflowEllipsis=Xa=s.p(ot,"OverflowEllipsis",1),ot.prototype.H=function(){N.prototype.H.call(this),this.Fz=this.Gz=null},s.defineProperty(ot,{font:"font"},function(){return this.qg},function(t){var i=this.qg;i!==t&&(this.qg=t,this.zf.Wj=null,this.H(),this.h("font",i,t))}),ot.isValidFont=function(t){var i=Fe.font;if(t===i||t==="10px sans-serif")return!0;Fe.font="10px sans-serif";var n;Fe.font=t;var e=Fe.font;return e!=="10px sans-serif"?(Fe.font=i,!0):(Fe.font="19px serif",n=Fe.font,Fe.font=t,e=Fe.font,Fe.font=i,e!==n)},s.defineProperty(ot,{text:"text"},function(){return this.Ld},function(t){var i=this.Ld;t=t!=null?t.toString():"",i!==t&&(this.Ld=t,this.H(),this.h("text",i,t))}),s.defineProperty(ot,{textAlign:"textAlign"},function(){return this.Jl},function(t){var i=this.Jl;i!==t&&(t==="start"||t==="end"||t==="left"||t==="right"||t==="center"?(this.Jl=t,this.oa(),this.h("textAlign",i,t)):s.Fa(t,'"start", "end", "left", "right", or "center"',ot,"textAlign"))}),s.defineProperty(ot,{iu:"flip"},function(){return this.pg},function(t){var i=this.pg;i!==t&&(s.ob(t,N,ot,"flip"),this.pg=t,this.oa(),this.h("flip",i,t))}),s.defineProperty(ot,{bM:"verticalAlignment"},function(){return this.Nl},function(t){var i=this.Nl;i.L(t)||(t.Ud()&&s.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+t),this.Nl=t=t.S(),gf(this),this.h("verticalAlignment",i,t))}),s.u(ot,{Ja:"naturalBounds"},function(){if(!this.Nc.I()){var t=Wy(this,this.Ld,this.zf,999999).width,i=n1(this,t,this.zf),n=this.Da;isNaN(n.width)||(t=n.width),isNaN(n.height)||(i=n.height),Or(this.Nc,t,i)}return this.Nc}),s.defineProperty(ot,{Ox:"isMultiline"},function(){return this.Lm},function(t){var i=this.Lm;i!==t&&(this.Lm=t,this.H(),this.h("isMultiline",i,t))}),s.defineProperty(ot,{kL:"isUnderline"},function(){return this.gk},function(t){var i=this.gk;i!==t&&(this.gk=t,this.oa(),this.h("isUnderline",i,t))}),s.defineProperty(ot,{jL:"isStrikethrough"},function(){return this.ek},function(t){var i=this.ek;i!==t&&(this.ek=t,this.oa(),this.h("isStrikethrough",i,t))}),s.defineProperty(ot,{OG:"wrap"},function(){return this.nj},function(t){var i=this.nj;i!==t&&(this.nj=t,this.H(),this.h("wrap",i,t))}),s.defineProperty(ot,{overflow:"overflow"},function(){return this.cj},function(t){var i=this.cj;i!==t&&(this.cj=t,this.H(),this.h("overflow",i,t))}),s.defineProperty(ot,{stroke:"stroke"},function(){return this.tc},function(t){var i=this.tc;i!==t&&(t instanceof yt&&t.freeze(),this.tc=t,this.oa(),this.h("stroke",i,t))}),s.u(ot,{Vx:"lineCount"},function(){return this.pe}),s.defineProperty(ot,{BA:"editable"},function(){return this.Fr},function(t){var i=this.Fr;i!==t&&(this.Fr=t,this.h("editable",i,t))}),s.defineProperty(ot,{DG:"textEditor"},function(){return this.Dt},function(t){var i=this.Dt;i!==t&&(this.Dt=t,this.h("textEditor",i,t))}),s.defineProperty(ot,{CA:"errorFunction"},function(){return this.We},function(t){var i=this.We;i!==t&&(t!==null&&s.j(t,"function",ot,"errorFunction"),this.We=t,this.h("errorFunction",i,t))}),s.defineProperty(ot,{interval:"interval"},function(){return this.ug},function(t){var i=this.ug;if(t=Math.floor(t),i!==t&&0<=t){this.ug=t,this.H();var n=this.R;n!==null&&n.type===qh&&(n.ak=null),this.h("interval",i,t)}}),s.defineProperty(ot,{pF:"graduatedStart"},function(){return this.tg},function(t){var i=this.tg;i!==t&&(0>t?t=0:1<t&&(t=1),this.tg=t,this.H(),this.h("graduatedStart",i,t))}),s.defineProperty(ot,{nF:"graduatedEnd"},function(){return this.sg},function(t){var i=this.sg;i!==t&&(0>t?t=0:1<t&&(t=1),this.sg=t,this.H(),this.h("graduatedEnd",i,t))}),s.defineProperty(ot,{oF:"graduatedFunction"},function(){return this.Gm},function(t){var i=this.Gm;i!==t&&(t!==null&&s.j(t,"function",ot,"graduatedFunction"),this.Gm=t,this.H(),this.h("graduatedFunction",i,t))}),ot.prototype.Ik=function(t,i){if(this.tc!==null&&this.Ld.length!==0&&this.qg!==null){var n=this.Ja.width,e=this.Ja.height,o=Wa(this),r=t.textAlign=this.Jl,l=i.as;r==="start"&&(r=l?"right":"left"),r==="end"&&(r=l?"left":"right"),Un(this,t,this.tc,!0,!1),(this.gk||this.ek)&&Un(this,t,this.tc,!1,!1);var h=0,l=!1,u=s.wb(0,0);this.rh.nb(u);var a=s.wb(0,o);this.rh.nb(a);var f=u.Cf(a);switch(s.v(u),s.v(a),u=i.scale,8>f*u*u&&(l=!0),i.hf!==t&&(l=!1),i.Ok("textGreeking")===!1&&(l=!1),f=this.fi,u=this.gi,this.iu){case vf:t.translate(n,0),t.scale(-1,1);break;case cf:t.translate(0,e),t.scale(1,-1);break;case df:t.translate(n,e),t.scale(-1,-1)}var a=this.pe,p=(f+o+u)*a;e>p&&(h=this.Nl,h=h.y*e-h.y*p+h.offsetY);for(var p=this.zf,y=0;y<a;y++){var c=p.xf[y],d=p.Te[y];c>n&&(c=n);var h=h+f,v=d,d=t,g=h,m=n,w=o,M=r,S=0;l?(M==="left"?S=0:M==="right"?S=m-c:M==="center"&&(S=(m-c)/2),d.fillRect(0+S,g+.25*w,c,1)):(M==="left"?S=0:M==="right"?S=m:M==="center"&&(S=m/2),d.fillText(v,0+S,g+w-.25*w),v=w/20|0,v===0&&(v=1),M==="right"?S-=c:M==="center"&&(S-=c/2),this.gk&&(d.beginPath(),d.lineWidth=v,d.moveTo(0+S,g+w-.2*w),d.lineTo(0+S+c,g+w-.2*w),d.stroke()),this.ek&&(d.beginPath(),d.lineWidth=v,g=g+w-w/2.2|0,v%2!==0&&(g+=.5),d.moveTo(0+S,g),d.lineTo(0+S+c,g),d.stroke())),h+=o+u}switch(this.iu){case vf:t.scale(-1,1),t.translate(-n,0);break;case cf:t.scale(1,-1),t.translate(0,-e);break;case df:t.scale(-1,-1),t.translate(-n,-e)}}},ot.prototype.Qn=function(t,i,n,e){this.$o=t;var o=this.zf;o.reset();var r=0,h=0;if(isNaN(this.Da.width)){if(r=this.Ld.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.length===0)r=0;else if(this.Ox){for(var l=h=0,u=!1;!u;){var f=r.indexOf(`
`,l);f===-1&&(f=r.length,u=!0),l=We(r.substr(l,f-l).replace(/^\s+|\s+$/g,""),this.qg),l>h&&(h=l),l=f+1}r=h}else h=r.indexOf(`
`,0),0<=h&&(r=r.substr(0,h)),r=l=We(r,this.qg);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.Da.width;if(this.R!==null&&(r=Math.min(r,this.R.Hf.width)),h=n1(this,r,o),f=h=isNaN(this.Da.height)?Math.min(h,i/this.scale):this.Da.height,o.Ge!==0&&o.Te.length!==1&&this.cj===Xa&&(i=this.qg,u=this.cj===Xa?i1(i):0,l=this.fi+this.gi,l=Math.max(0,Wa(this)+l),f=Math.min(this.TI-1,Math.max(Math.floor(f/l+.01)-1,0)),!(f+1>=o.Te.length))){for(l=o.Te[f],u=Math.max(1,t-u);We(l,i)>u&&1<l.length;)l=l.substr(0,l.length-1);l+=Pf,i=We(l,i),o.Te[f]=l,o.Te=o.Te.slice(0,f+1),o.xf[f]=i,o.xf=o.xf.slice(0,f+1),o.mj=o.Te.length,o.Ge=Math.max(o.Ge,i),this.pe=o.mj}(this.OG===$g||isNaN(this.Da.width))&&(r=isNaN(t)?o.Ge:Math.min(t,o.Ge),isNaN(this.Da.width)&&(r=Math.max(8,r))),r=Math.max(n,r),h=Math.max(e,h),Or(this.Nc,r,h),qo(this,0,0,r,h)},ot.prototype.pj=function(t,i,n,e){Ra(this,t,i,n,e)};function Wy(t,i,n,e){i=i.replace(/^\s+|\s+$/g,"");var o=0,h=0,u=0,r=t.qg,h=t.fi+t.gi,l=Math.max(0,Wa(t)+h),u=t.cj===Xa?i1(r):0;if(t.pe>=t.ih)return new lt(0,l);if(t.nj===Xy){if(n.mj=1,h=We(i,r),u===0||h<=e)return n.Ge=Math.max(n.Ge,h),n.xf.push(n.Ge),n.Te.push(i),new lt(h,l);var f=su(t,i);i=i.substr(f.length);for(var a=su(t,i),h=We(f+a,r);0<a.length&&h<=e;)f+=a,i=i.substr(a.length),a=su(t,i),h=We((f+a).replace(/^\s+|\s+$/g,""),r);for(f+=a.replace(/^\s+|\s+$/g,""),e=Math.max(1,e-u);We(f,r)>e&&1<f.length;)f=f.substr(0,f.length-1);return f+=Pf,u=We(f,r),n.xf.push(u),n.Ge=u,n.Te.push(f),new lt(u,l)}var p=0;for(i.length===0&&(p=1,n.xf.push(0),n.Te.push(i));0<i.length;){for(f=su(t,i),i=i.substr(f.length);We(f,r)>e;){for(a=1,h=We(f.substr(0,a),r),u=0;h<=e;)a++,u=h,h=We(f.substr(0,a),r);if(a===1?(n.xf[t.pe+p]=h,o=Math.max(o,h)):(n.xf[t.pe+p]=u,o=Math.max(o,u)),a--,1>a&&(a=1),n.Te[t.pe+p]=f.substr(0,a),p++,f=f.substr(a),t.pe+p>t.ih)break}for(a=su(t,i),h=We(f+a,r);0<a.length&&h<=e;)f+=a,i=i.substr(a.length),a=su(t,i),h=We((f+a).replace(/^\s+|\s+$/g,""),r);if(f=f.replace(/^\s+|\s+$/g,""),f!==""&&(f[f.length-1]==="­"&&(f=f.substring(0,f.length-1)+"‐"),a.length===0?(n.xf.push(h),o=Math.max(o,h)):(u=We(f,r),n.xf.push(u),o=Math.max(o,u)),n.Te.push(f),p++,t.pe+p>t.ih))break}return n.mj=Math.min(t.ih,p),n.Ge=Math.max(n.Ge,o),new lt(n.Ge,l*n.mj)}function su(t,i){if(t.nj===bg)return i.substr(0,1);for(var n=i.length,e=0;e<n&&!Xg.test(i.charAt(e));)e++;for(;e<n&&Xg.test(i.charAt(e));)e++;return e>=n?i:i.substr(0,e)}function We(t,i){return ru!==i&&(ru=Fe.font=i),Fe.measureText(t).width}function Wa(t){if(t.zf.Wj!==null)return t.zf.Wj;var i=t.qg;ru!==i&&(ru=Fe.font=i);var n=0;return Qy[i]!==void 0&&5e3>Wg?n=Qy[i]:(n=1.3*Fe.measureText("M").width,Qy[i]=n,Wg++),t.zf.Wj=n}function i1(t){ru!==t&&(ru=Fe.font=t);var i=0;return Za[t]!==void 0&&5e3>Zy?i=Za[t]:(i=Fe.measureText(Pf).width,Za[t]=i,Zy++),i}function n1(t,i,n){var e=t.Ld.replace(/\r\n/g,`
`).replace(/\r/g,`
`),o=t.fi+t.gi,o=Math.max(0,Wa(t)+o);if(e.length===0)return n.Ge=0,t.pe=1,o;if(!t.Ox){var r=e.indexOf(`
`,0);0<=r&&(e=e.substr(0,r))}for(var r=0,h=t.pe=0,l=-1,u=!1;!u;)l=e.indexOf(`
`,h),l===-1&&(l=e.length,u=!0),h<=l&&(h=e.substr(h,l-h),t.nj!==Xy?(n.mj=0,h=Wy(t,h,n,i),r+=h.height,t.pe+=n.mj):(Wy(t,h,n,i),r+=o,t.pe++),t.pe===t.ih&&(u=!0)),h=l+1;return t.nw=r}s.defineProperty(ot,{OB:"textValidation"},function(){return this.Kl},function(t){var i=this.Kl;i!==t&&(t!==null&&s.j(t,"function",ot,"textValidation"),this.Kl=t,this.h("textValidation",i,t))}),s.defineProperty(ot,{CG:"textEdited"},function(){return this.Ct},function(t){var i=this.Ct;i!==t&&(t!==null&&s.j(t,"function",ot,"textEdited"),this.Ct=t,this.h("textEdited",i,t))}),s.defineProperty(ot,{QL:"spacingAbove"},function(){return this.fi},function(t){var i=this.fi;i!==t&&(this.fi=t,this.h("spacingAbove",i,t))}),s.defineProperty(ot,{RL:"spacingBelow"},function(){return this.gi},function(t){var i=this.gi;i!==t&&(this.gi=t,this.h("spacingBelow",i,t))}),s.defineProperty(ot,{TI:"maxLines"},function(){return this.ih},function(t){var i=this.ih;i!==t&&(t=Math.floor(t),0>=t&&s.Fa(t,"> 0",ot,"maxLines"),this.ih=t,this.h("maxLines",i,t),this.H())}),s.u(ot,{wL:"metrics"},function(){return this.zf}),s.defineProperty(ot,{HK:"choices"},function(){return this.er},function(t){var i=this.er;i!==t&&(t===null||Array.isArray(t)||s.Fd(t,"Array",ot,"choices:value"),this.er=t,this.h("choices",i,t))});function sh(){this.Ge=this.mj=0,this.xf=[],this.Te=[],this.Wj=null}sh.prototype.reset=function(){this.Ge=this.mj=0,this.Wj=null,this.xf=[],this.Te=[]},sh.prototype.Sp=function(t){this.mj=t.mj,this.Wj=t.Wj,this.Ge=t.Ge,this.xf=s.Vl(t.xf),this.Te=s.Vl(t.Te)},s.u(sh,{DK:"arrSize"},function(){return this.xf}),s.u(sh,{EK:"arrText"},function(){return this.Te}),s.u(sh,{vL:"maxLineWidth"},function(){return this.Ge}),s.u(sh,{dL:"fontHeight"},function(){return this.Wj});function oi(){N.call(this),this.Ve=null,this.wt="",this.tk=dx,this.Po=ii,this.ki=this.We=null,this.Oo=kt,this.pg=ei,this.Ap=null,this.Bz=!1,this.Pv=!0,this.lw=!1,this.rp=null}s.La(oi,N),s.ga("Picture",oi),oi.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.element=this.Ve,t.wt=this.wt,t.tk=this.tk.S(),t.Po=this.Po,t.pg=this.pg,t.We=this.We,t.ki=this.ki,t.Oo=this.Oo.S(),t.Pv=this.Pv,t.rp=this.rp},oi.prototype.ic=function(t){t===ei||t===Li||t===yf?this.sI=t:N.prototype.ic.call(this,t)},oi.prototype.toString=function(){return"Picture("+this.source+")#"+s.Pd(this)};var hu=new Bn,$a=0,$y=[];function e1(){var t=$y;if(t.length===0)for(var i=Q.document.getElementsByTagName("canvas"),n=i.length,e=0;e<n;e++){var o=i[e];o.parentElement&&o.parentElement.aa&&t.push(o.parentElement.aa)}return t}var _y;oi.clearCache=_y=function(t){t===void 0&&(t=""),s.j(t,"string",oi,"clearCache:url"),t!==""?hu[t]&&(delete hu[t],$a--):(hu=new Bn,$a=0)},s.defineProperty(oi,{element:"element"},function(){return this.Ve},function(t){var i=this.Ve;if(i!==t){if(t===null||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||s.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.Bz=t instanceof HTMLCanvasElement,this.Ve=t,t!==null)if(t instanceof HTMLCanvasElement||t.complete===!0)t.No instanceof Event&&this.We!==null&&this.We(this,t.No),t.Zr===!0&&this.ki!==null&&this.ki(this,t.Qz),t.Zr=!0,this.Da.I()||(ie(this,!1),this.H());else{var n=this;t.cD||(t.addEventListener("load",function(e){o1(t,e),n.Da.I()||(ie(n,!1),n.H())}),t.addEventListener("error",function(e){r1(t,e)}),t.cD=!0)}this.h("element",i,t),this.oa()}}),s.defineProperty(oi,{source:"source"},function(){return this.wt},function(t){var i=this.wt;if(i!==t){s.j(t,"string",oi,"source"),this.wt=t;var n=hu,e=this.g;if(n[t]!==void 0)var o=n[t].Lp[0].source;else{30<$a&&(_y(),n=hu);var o=s.createElement("img"),r=this;o.addEventListener("load",function(u){o1(o,u),r.Da.I()||(ie(r,!1),r.H())}),o.addEventListener("error",function(u){r1(o,u)}),o.cD=!0;var h=this.rp;h!==null&&(o.crossOrigin=h(this)),o.src=t,n[t]=new Bx(o),$a++}e!==null&&my(e,this),this.element=o,e!==null&&gy(e,this),this.H(),this.oa(),this.h("source",i,t)}});function o1(t,i){t.Zr=!0,t.No=!1;for(var n=null,e=e1(),o=e.length,r=0;r<o;r++){var h=e[r],l=h.kp.ka(t.src);if(l!==null)for(var u=l.length,f=0;f<u;f++)n=l[f],h.Mz.add(n),h.ye(),t.Qz===null&&(t.Qz=i,n.ki!==null&&n.ki(n,i))}}function r1(t,i){t.No=i;for(var n=null,e=e1(),o=e.length,r=0;r<o;r++)if(n=e[r].kp.ka(t.src),n!==null){for(var h=n.length,l=s.Za(),u=0;u<h;u++)l.push(n[u]);for(u=0;u<h;u++)n=l[u],n.We!==null&&n.We(n,i);s.ra(l)}}s.defineProperty(oi,{PL:"sourceCrossOrigin"},function(){return this.rp},function(t){if(this.rp!==t&&(t!==null&&s.j(t,"function",oi,"sourceCrossOrigin"),this.rp=t,this.element!==null)){var i=this.element.src;t===null&&typeof i=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=i}}),s.defineProperty(oi,{Jj:"sourceRect"},function(){return this.tk},function(t){var i=this.tk;i.L(t)||(s.G(t,O,oi,"sourceRect"),this.tk=t=t.S(),this.oa(),this.h("sourceRect",i,t))}),s.defineProperty(oi,{sI:"imageStretch"},function(){return this.Po},function(t){var i=this.Po;i!==t&&(s.ob(t,N,oi,"imageStretch"),this.Po=t,this.oa(),this.h("imageStretch",i,t))}),s.defineProperty(oi,{iu:"flip"},function(){return this.pg},function(t){var i=this.pg;i!==t&&(s.ob(t,N,oi,"flip"),this.pg=t,this.oa(),this.h("flip",i,t))}),s.defineProperty(oi,{fL:"imageAlignment"},function(){return this.Oo},function(t){s.G(t,P,oi,"imageAlignment");var i=this.Oo;i.L(t)||(this.Oo=t=t.S(),this.H(),this.h("imageAlignment",i,t))}),s.defineProperty(oi,{CA:"errorFunction"},function(){return this.We},function(t){var i=this.We;i!==t&&(t!==null&&s.j(t,"function",oi,"errorFunction"),this.We=t,this.h("errorFunction",i,t))}),s.defineProperty(oi,{ZL:"successFunction"},function(){return this.ki},function(t){var i=this.ki;i!==t&&(t!==null&&s.j(t,"function",oi,"successFunction"),this.ki=t,this.h("successFunction",i,t))}),oi.prototype.Ik=function(t,i){var n=this.Ve;if(n!==null){var e=n.src;if(e!==null&&e!==""||s.k('Element has no source ("src") attribute: '+n),!(n.No instanceof Event)&&n.Zr!==!1){var e=this.Ja,o=0,r=0,l=this.Bz,h=l?+n.width:n.naturalWidth,l=l?+n.height:n.naturalHeight;if(h===void 0&&n.videoWidth&&(h=n.videoWidth),l===void 0&&n.videoHeight&&(l=n.videoHeight),h=h||e.width,l=l||e.height,h!==0&&l!==0){var u=h,f=l;this.Jj.I()&&(o=this.tk.x,r=this.tk.y,h=this.tk.width,l=this.tk.height);var a=h,p=l,d=this.Po,y=this.Oo;switch(d){case ei:if(this.Jj.I())break;a>=e.width&&(o=o+y.offsetX+(a*y.x-e.width*y.x)),p>=e.height&&(r=r+y.offsetY+(p*y.y-e.height*y.y)),h=Math.min(e.width,a),l=Math.min(e.height,p);break;case ii:a=e.width,p=e.height;break;case Li:case yf:var v=0;d===Li?(v=Math.min(e.height/p,e.width/a),a*=v,p*=v):d===yf&&(v=Math.max(e.height/p,e.width/a),a*=v,p*=v,a>=e.width&&(o=(o+y.offsetX+(a*y.x-e.width*y.x)/a)*h),p>=e.height&&(r=(r+y.offsetY+(p*y.y-e.height*y.y)/p)*l),h*=1/(a/e.width),l*=1/(p/e.height),a=e.width,p=e.height)}var d=this.vj()*i.scale,c=h*l/(a*d*p*d),v=hu[this.source],d=null;if(n.Zr&&v!==void 0&&16<c){2>v.Lp.length&&(s1(v,4,u,f),s1(v,16,u,f));for(var u=v.Lp,f=u.length,d=u[0],g=0;g<f&&u[g].xq*u[g].xq<c;g++)d=u[g]}if(!i.Cr){if(this.Ap===null)if(this.Ve===null)this.Ap=!1;else{u=new Oo(null).Gk,u.drawImage(this.Ve,0,0);try{u.getImageData(0,0,1,1).data[3]&&(this.Ap=!1),this.Ap=!1}catch{this.Ap=!0}}if(this.Ap)return}switch(u=0,a<e.width&&(u=y.offsetX+(e.width*y.x-a*y.x)),f=0,p<e.height&&(f=y.offsetY+(e.height*y.y-p*y.y)),this.iu){case vf:t.translate(Math.min(e.width,a),0),t.scale(-1,1);break;case cf:t.translate(0,Math.min(e.height,p)),t.scale(1,-1);break;case df:t.translate(Math.min(e.width,a),Math.min(e.height,p)),t.scale(-1,-1)}if(i.Ok("pictureRatioOptimization")&&!i.Jm&&v!==void 0&&d!==null&&d.xq!==1){t.save(),v=d.xq;try{t.drawImage(d.source,o/v,r/v,Math.min(d.source.width,h/v),Math.min(d.source.height,l/v),u,f,Math.min(e.width,a),Math.min(e.height,p))}catch{this.Pv=!1}t.restore()}else try{t.drawImage(n,o,r,h,l,u,f,Math.min(e.width,a),Math.min(e.height,p))}catch{this.Pv=!1}switch(this.iu){case vf:t.scale(-1,1),t.translate(-Math.min(e.width,a),0);break;case cf:t.scale(1,-1),t.translate(0,-Math.min(e.height,p));break;case df:t.scale(-1,-1),t.translate(-Math.min(e.width,a),-Math.min(e.height,p))}}}}},s.u(oi,{Ja:"naturalBounds"},function(){return this.Nc}),oi.prototype.Qn=function(t,i,n,e){var o=this.Da,r=Io(this,!0),h=this.Ve,l=this.Bz;(l||!this.lw&&h&&h.complete)&&(this.lw=!0),h===null&&(isFinite(o.width)||(t=0),isFinite(o.height)||(i=0)),isFinite(o.width)||r===ii||r===Zi?(isFinite(t)||(t=this.Jj.I()?this.Jj.width:l?+h.width:h.naturalWidth),n=0):h!==null&&this.lw!==!1&&(t=this.Jj.I()?this.Jj.width:l?+h.width:h.naturalWidth),isFinite(o.height)||r===ii||r===tn?(isFinite(i)||(i=this.Jj.I()?this.Jj.height:l?+h.height:h.naturalHeight),e=0):h!==null&&this.lw!==!1&&(i=this.Jj.I()?this.Jj.height:l?+h.height:h.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height),o=this.Hf,r=this.si,n=Math.max(n,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(n,t),i=Math.max(e,i),h===null||h.complete||(isFinite(t)||(t=0),isFinite(i)||(i=0)),Or(this.Nc,t,i),qo(this,0,0,t,i)},oi.prototype.pj=function(t,i,n,e){Ra(this,t,i,n,e)};function Bx(t){this.Lp=[new h1(t,1)]}function s1(t,i,n,e){var o=new Oo(null),r=o.Gk,h=1/i;o.width=n/i,o.height=e/i,i=new h1(o.Od,i),n=t.Lp[t.Lp.length-1],r.setTransform(h*n.xq,0,0,h*n.xq,0,0),r.drawImage(n.source,0,0),t.Lp.push(i)}function h1(t,i){this.source=t,this.xq=i}function l1(){this.o=new et,this.Yb=null}B=l1.prototype,B.reset=function(){this.o=new et,this.Yb=null};function j(t,i,n,e,o,r){t.o===null&&s.k("StreamGeometryContext has been closed"),o!==void 0&&o===!0?(t.Yb===null&&s.k("Need to call beginFigure first"),e=new mt(Ke),e.C=i,e.D=n,t.Yb.yb.add(e)):(t.Yb=new Pi,t.Yb.ha=i,t.Yb.da=n,t.Yb.wu=e,t.o.fc.add(t.Yb)),r!==void 0&&(t.Yb.Vo=r)}function W(t){t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var i=t.Yb.yb.length;0<i&&t.Yb.yb.fa(i-1).close()}function Ex(t){t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first"),0<t.Yb.yb.length&&(t.Yb.wu=!0)}B.fb=function(t){this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first"),this.Yb.jm=t},B.moveTo=function(t,i,n){n===void 0&&(n=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var e=new mt(Ke);e.C=t,e.D=i,n&&e.close(),this.Yb.yb.add(e)},B.lineTo=function(t,i,n){n===void 0&&(n=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var e=new mt(ue);e.C=t,e.D=i,n&&e.close(),this.Yb.yb.add(e)};function T(t,i,n,e,o,r,h,l){l===void 0&&(l=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var u=new mt(ho);u.xc=i,u.Sc=n,u.Eh=e,u.Fh=o,u.C=r,u.D=h,l&&u.close(),t.Yb.yb.add(u)}function _a(t,i,n,e,o){var r;r===void 0&&(r=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first");var h=new mt(lo);h.xc=i,h.Sc=n,h.C=e,h.D=o,r&&h.close(),t.Yb.yb.add(h)}B.arcTo=function(t,i,n,e,o,r,h){r===void 0&&(r=0),h===void 0&&(h=!1),this.o===null&&s.k("StreamGeometryContext has been closed"),this.Yb===null&&s.k("Need to call beginFigure first");var l=new mt(qi);l.Ae=t,l.uf=i,l.la=n,l.sa=e,l.radiusX=o,l.radiusY=r!==0?r:o,h&&l.close(),this.Yb.yb.add(l)};function zx(t,i,n,e,o,r,h,l){var u;u===void 0&&(u=!1),t.o===null&&s.k("StreamGeometryContext has been closed"),t.Yb===null&&s.k("Need to call beginFigure first"),i=new mt(Ue,h,l,i,n,e,o,r),u&&i.close(),t.Yb.yb.add(i)}function lu(t){t=Xh(t);var i=s.Za();i[0]=t[0];for(var n=1,e=1;e<t.length;)i[n]=t[e],i[n+1]=t[e],i[n+2]=t[e+1],e+=2,n+=3;return s.ra(t),i}function Xh(t){var i=hh(t),n=s.Za(),e=Math.floor(i.length/2),o=i.length-1;t=t%2===0?2:1;for(var r=0;r<o;r++){var h=i[r],l=i[r+1],u=i[(e+r-1)%o],f=i[(e+r+t)%o];n[2*r]=h,n[2*r+1]=Qs(h.x,h.y,u.x,u.y,l.x,l.y,f.x,f.y,new D)}return n[n.length]=n[0],s.ra(i),n}function hh(t){for(var i=s.Za(),n=1.5*Math.PI,e=0,o=0;o<t;o++)e=2*Math.PI/t*o+n,i[o]=new D(.5+.5*Math.cos(e),.5+.5*Math.sin(e));return i.push(i[0]),i}var co={None:"Rectangle",Rectangle:function(t,i,n){return t=new et,t.type=so,t.ha=0,t.da=0,t.C=i,t.D=n,t},Square:function(t,i,n){return t=new et,t.ae=Li,t.type=so,t.ha=0,t.da=0,t.C=Math.min(i,n),t.D=Math.min(i,n),t},Ellipse:function(t,i,n){return t=new et,t.type=Vo,t.ha=0,t.da=0,t.C=i,t.D=n,t.A=Hv,t.B=Kv,t},Circle:function(t,i,n){return t=new et,t.ae=Li,t.type=Vo,t.ha=0,t.da=0,t.C=Math.min(i,n),t.D=Math.min(i,n),t.A=Hv,t.B=Kv,t},Connector:"Ellipse",TriangleRight:function(t,i,n){t=new et;var e=new Pi,o=new mt;return o.C=i,o.D=.5*n,e.yb.add(o),i=new mt,i.C=0,i.D=n,e.yb.add(i.close()),t.fc.add(e),t.A=new P(0,.25),t.B=new P(.5,.75),t},TriangleDown:function(t,i,n){t=new et;var e=new Pi,o=new mt;return o.C=i,o.D=0,e.yb.add(o),o=new mt,o.C=.5*i,o.D=n,e.yb.add(o.close()),t.fc.add(e),t.A=new P(.25,0),t.B=new P(.75,.5),t},TriangleLeft:function(t,i,n){t=new et;var e=new Pi;e.ha=i,e.da=n;var o=new mt;return o.C=0,o.D=.5*n,e.yb.add(o),n=new mt,n.C=i,n.D=0,e.yb.add(n.close()),t.fc.add(e),t.A=new P(.5,.25),t.B=new P(1,.75),t},TriangleUp:function(t,i,n){t=new et;var e=new Pi;e.ha=i,e.da=n;var o=new mt;return o.C=0,o.D=n,e.yb.add(o),n=new mt,n.C=.5*i,n.D=0,e.yb.add(n.close()),t.fc.add(e),t.A=new P(.25,.5),t.B=new P(.75,1),t},Line1:function(t,i,n){return t=new et,t.type=Yi,t.ha=0,t.da=0,t.C=i,t.D=n,t},Line2:function(t,i,n){return t=new et,t.type=Yi,t.ha=i,t.da=0,t.C=0,t.D=n,t},MinusLine:"LineH",LineH:function(t,i,n){return t=new et,t.type=Yi,t.ha=0,t.da=n/2,t.C=i,t.D=n/2,t},LineV:function(t,i,n){return t=new et,t.type=Yi,t.ha=i/2,t.da=0,t.C=i/2,t.D=n,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,i,n){return t=s.s(),j(t,0,0,!1),T(t,rt*i,0,1*i,(1-rt)*n,i,n),i=t.o,s.q(t),i},Curve2:function(t,i,n){return t=s.s(),j(t,0,0,!1),T(t,0,rt*n,(1-rt)*i,n,i,n),i=t.o,s.q(t),i},Curve3:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),T(t,1*i,rt*n,rt*i,1*n,0,1*n),i=t.o,s.q(t),i},Curve4:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),T(t,(1-rt)*i,0,0,(1-rt)*n,0,1*n),i=t.o,s.q(t),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,i,n){return t=s.s(),j(t,.5*i,0*n,!0),t.lineTo(0*i,1*n),t.lineTo(1*i,1*n,!0),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,1),s.q(t),i},Decision:"Diamond",Diamond:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(0,.5*n),t.lineTo(.5*i,1*n),t.lineTo(1*i,.5*n,!0),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.75),s.q(t),i},Pentagon:function(t,i,n){var e=hh(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;5>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.2,.22),i.B=new P(.8,.9),s.q(t),i},DataTransmission:"Hexagon",Hexagon:function(t,i,n){var e=hh(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;6>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.07,.25),i.B=new P(.93,.75),s.q(t),i},Heptagon:function(t,i,n){var e=hh(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;7>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.2,.15),i.B=new P(.8,.85),s.q(t),i},Octagon:function(t,i,n){var e=hh(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;8>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.15,.15),i.B=new P(.85,.85),s.q(t),i},Nonagon:function(t,i,n){var e=hh(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;9>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.13),i.B=new P(.82,.82),s.q(t),i},Decagon:function(t,i,n){var e=hh(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.16,.16),i.B=new P(.84,.84),s.q(t),i},Dodecagon:function(t,i,n){var e=hh(12);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.16,.16),i.B=new P(.84,.84),s.q(t),i},FivePointedStar:function(t,i,n){var e=Xh(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.312,.383),i.B=new P(.693,.765),s.q(t),i},SixPointedStar:function(t,i,n){var e=Xh(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.251),i.B=new P(.833,.755),s.q(t),i},SevenPointedStar:function(t,i,n){var e=Xh(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;14>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.363,.361),i.B=new P(.641,.709),s.q(t),i},EightPointedStar:function(t,i,n){var e=Xh(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;16>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.252,.255),i.B=new P(.75,.75),s.q(t),i},NinePointedStar:function(t,i,n){var e=Xh(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;18>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.355,.361),i.B=new P(.645,.651),s.q(t),i},TenPointedStar:function(t,i,n){var e=Xh(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;20>o;o++)t.lineTo(e[o].x*i,e[o].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.281,.261),i.B=new P(.723,.748),s.q(t),i},FivePointedBurst:function(t,i,n){var e=lu(5);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.312,.383),i.B=new P(.693,.765),s.q(t),i},SixPointedBurst:function(t,i,n){var e=lu(6);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.17,.251),i.B=new P(.833,.755),s.q(t),i},SevenPointedBurst:function(t,i,n){var e=lu(7);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.363,.361),i.B=new P(.641,.709),s.q(t),i},EightPointedBurst:function(t,i,n){var e=lu(8);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.252,.255),i.B=new P(.75,.75),s.q(t),i},NinePointedBurst:function(t,i,n){var e=lu(9);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.355,.361),i.B=new P(.645,.651),s.q(t),i},TenPointedBurst:function(t,i,n){var e=lu(10);t=s.s(),j(t,e[0].x*i,e[0].y*n,!0);for(var o=1;o<e.length;o+=3)T(t,e[o].x*i,e[o].y*n,e[o+1].x*i,e[o+1].y*n,e[o+2].x*i,e[o+2].y*n);return s.ra(e),W(t),i=t.o,i.A=new P(.281,.261),i.B=new P(.723,.748),s.q(t),i},Cloud:function(t,i,n){return t=s.s(),j(t,.08034461*i,.1944299*n,!0),T(t,-.09239631*i,.07836421*n,.1406031*i,-.0542823*n,.2008615*i,.05349299*n),T(t,.2450511*i,-.00697547*n,.3776197*i,-.01112067*n,.4338609*i,.074219*n),T(t,.4539471*i,0,.6066018*i,-.02526587*n,.6558228*i,.07004196*n),T(t,.6914277*i,-.01904177*n,.8921095*i,-.01220843*n,.8921095*i,.08370865*n),T(t,1.036446*i,.04105738*n,1.020377*i,.3022052*n,.9147671*i,.3194596*n),T(t,1.04448*i,.360238*n,.992256*i,.5219009*n,.9082935*i,.562044*n),T(t,1.032337*i,.5771781*n,1.018411*i,.8120651*n,.9212406*i,.8217117*n),T(t,1.028411*i,.9571472*n,.8556702*i,1.052487*n,.7592566*i,.9156953*n),T(t,.7431877*i,1.009325*n,.5624123*i,1.021761*n,.5101666*i,.9310455*n),T(t,.4820677*i,1.031761*n,.3030112*i,1.002796*n,.2609328*i,.9344623*n),T(t,.2329994*i,1.01518*n,.03213784*i,1.01518*n,.08034461*i,.870098*n),T(t,-.02812061*i,.9032597*n,-.01205169*i,.6835638*n,.06829292*i,.6545475*n),T(t,-.01812061*i,.6089503*n,-.00606892*i,.4555777*n,.06427569*i,.4265613*n),T(t,-.01606892*i,.3892545*n,-.01205169*i,.1944299*n,.08034461*i,.1944299*n),W(t),i=t.o,i.A=new P(.1,.1),i.B=new P(.9,.9),s.q(t),i},Gate:"Crescent",Crescent:function(t,i,n){return t=s.s(),j(t,0,0,!0),T(t,1*i,0,1*i,1*n,0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.511,.19),i.B=new P(.776,.76),s.q(t),i},FramedRectangle:function(t,i,n){var e=s.s(),o=t?t.Jc:NaN;return t=t?t.Qu:NaN,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n,!0),j(e,o*i,t*n,!1,!0),e.lineTo(o*i,(1-t)*n),e.lineTo((1-o)*i,(1-t)*n),e.lineTo((1-o)*i,t*n,!0),i=e.o,i.A=new P(o,t),i.B=new P(1-o,1-t),s.q(e),i},Delay:"HalfEllipse",HalfEllipse:function(t,i,n){return t=s.s(),j(t,0,0,!0),T(t,rt*i,0,1*i,(.5-rt/2)*n,1*i,.5*n),T(t,1*i,(.5+rt/2)*n,rt*i,1*n,0,1*n),W(t),i=t.o,i.A=new P(0,.2),i.B=new P(.75,.8),s.q(t),i},Heart:function(t,i,n){return t=s.s(),j(t,.5*i,1*n,!0),T(t,.1*i,.8*n,0,.5*n,0*i,.3*n),T(t,0*i,0,.45*i,0,.5*i,.3*n),T(t,.55*i,0,1*i,0,1*i,.3*n),T(t,i,.5*n,.9*i,.8*n,.5*i,1*n),W(t),i=t.o,i.A=new P(.15,.29),i.B=new P(.86,.68),s.q(t),i},Spade:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(.51*i,.01*n),T(t,.6*i,.2*n,i,.25*n,i,.5*n),T(t,i,.8*n,.6*i,.8*n,.55*i,.7*n),T(t,.5*i,.75*n,.55*i,.95*n,.75*i,n),t.lineTo(.25*i,n),T(t,.45*i,.95*n,.5*i,.75*n,.45*i,.7*n),T(t,.4*i,.8*n,0,.8*n,0,.5*n),T(t,0,.25*n,.4*i,.2*n,.49*i,.01*n),W(t),i=t.o,i.A=new P(.19,.26),i.B=new P(.8,.68),s.q(t),i},Club:function(t,i,n){t=s.s(),j(t,.4*i,.6*n,!0),T(t,.5*i,.75*n,.45*i,.95*n,.15*i,1*n),t.lineTo(.85*i,n),T(t,.55*i,.95*n,.5*i,.75*n,.6*i,.6*n);var e=.2,o=.3,r=0,h=4*(Math.SQRT2-1)/3*e;return T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o+.05)*i,(.5-h+r-.02)*n,.65*i,.36771243*n),e=.2,o=0,r=-.3,h=4*(Math.SQRT2-1)/3*e,T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,.35*i,.36771243*n),e=.2,o=-.3,r=0,h=4*(Math.SQRT2-1)/3*e,T(t,(.5+e+o-.05)*i,(.5-h+r-.02)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,.4*i,.6*n),W(t),i=t.o,i.A=new P(.06,.39),i.B=new P(.93,.58),s.q(t),i},Ring:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,i,.5*n,!0),T(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),T(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),T(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),T(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,j(t,.5*i,.1*n,!0,!0),T(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),T(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),T(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),T(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=Li,s.q(t),i},YinYang:function(t,i,n){var e=.5;t=s.s(),e=.5,j(t,.5*i,0,!0),t.arcTo(270,180,.5*i,.5*i,.5*i),T(t,1*i,e*n,0,e*n,e*i,0,!0);var e=.1,o=.25;return j(t,(.5+e)*i,o*n,!0,!0),t.arcTo(0,-360,.5*i,n*o,e*i),W(t),j(t,.5*i,0,!1),t.arcTo(270,-180,.5*i,.5*i,.5*i),t.fb(!1),o=.75,j(t,(.5+e)*i,o*n,!0),t.arcTo(0,360,.5*i,n*o,e*i),W(t),i=t.o,i.ae=Li,s.q(t),i},Peace:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;j(t,i,.5*n,!0),T(t,i,(.5-e)*n,(.5+e)*i,0,.5*i,0),T(t,(.5-e)*i,0,0,(.5-e)*n,0,.5*n),T(t,0,(.5+e)*n,(.5-e)*i,n,.5*i,n),T(t,(.5+e)*i,n,i,(.5+e)*n,i,.5*n),e=4*(Math.SQRT2-1)/3*.4,j(t,.5*i,.1*n,!0,!0),T(t,(.5+e)*i,.1*n,.9*i,(.5-e)*n,.9*i,.5*n),T(t,.9*i,(.5+e)*n,(.5+e)*i,.9*n,.5*i,.9*n),T(t,(.5-e)*i,.9*n,.1*i,(.5+e)*n,.1*i,.5*n),T(t,.1*i,(.5-e)*n,(.5-e)*i,.1*n,.5*i,.1*n);var e=.07,o=0,r=-.707*.11,h=4*(Math.SQRT2-1)/3*e;return j(t,(.5+e+o)*i,(.5+r)*n,!0),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),e=.07,o=-.707*.11,r=.707*.11,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+o)*i,(.5+r)*n,!0),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),e=.07,o=.707*.11,r=.707*.11,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+o)*i,(.5+r)*n,!0),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=Li,s.q(t),i},NotAllowed:function(t,i,n){var o=.5*rt,e=.5;t=s.s(),j(t,.5*i,(.5-e)*n,!0),T(t,(.5-o)*i,(.5-e)*n,(.5-e)*i,(.5-o)*n,(.5-e)*i,.5*n),T(t,(.5-e)*i,(.5+o)*n,(.5-o)*i,(.5+e)*n,.5*i,(.5+e)*n),T(t,(.5+o)*i,(.5+e)*n,(.5+e)*i,(.5+o)*n,(.5+e)*i,.5*n),T(t,(.5+e)*i,(.5-o)*n,(.5+o)*i,(.5-e)*n,.5*i,(.5-e)*n);var e=.4,o=.4*rt,r=s.K(),h=s.K(),l=s.K(),u=s.K();Vr(.5,.5-e,.5+o,.5-e,.5+e,.5-o,.5+e,.5,.42,r,h,l,u,u);var f=s.K(),a=s.K(),p=s.K();Vr(.5,.5-e,.5+o,.5-e,.5+e,.5-o,.5+e,.5,.58,u,u,p,f,a);var y=s.K(),c=s.K(),v=s.K();Vr(.5,.5+e,.5-o,.5+e,.5-e,.5+o,.5-e,.5,.42,y,c,v,u,u);var d=s.K(),g=s.K(),m=s.K();return Vr(.5,.5+e,.5-o,.5+e,.5-e,.5+o,.5-e,.5,.58,u,u,m,d,g),j(t,m.x*i,m.y*n,!0,!0),T(t,d.x*i,d.y*n,g.x*i,g.y*n,(.5-e)*i,.5*n),T(t,(.5-e)*i,(.5-o)*n,(.5-o)*i,(.5-e)*n,.5*i,(.5-e)*n),T(t,r.x*i,r.y*n,h.x*i,h.y*n,l.x*i,l.y*n),t.lineTo(m.x*i,m.y*n),W(t),j(t,v.x*i,v.y*n,!0,!0),t.lineTo(p.x*i,p.y*n),T(t,f.x*i,f.y*n,a.x*i,a.y*n,(.5+e)*i,.5*n),T(t,(.5+e)*i,(.5+o)*n,(.5+o)*i,(.5+e)*n,.5*i,(.5+e)*n),T(t,y.x*i,y.y*n,c.x*i,c.y*n,v.x*i,v.y*n),W(t),s.v(r),s.v(h),s.v(l),s.v(u),s.v(f),s.v(a),s.v(p),s.v(y),s.v(c),s.v(v),s.v(d),s.v(g),s.v(m),i=t.o,s.q(t),i.ae=Li,i},Fragile:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.25*i,0),t.lineTo(.2*i,.15*n),t.lineTo(.3*i,.25*n),t.lineTo(.29*i,.33*n),t.lineTo(.35*i,.25*n),t.lineTo(.3*i,.15*n),t.lineTo(.4*i,0),t.lineTo(1*i,0),T(t,1*i,.25*n,.75*i,.5*n,.55*i,.5*n),t.lineTo(.55*i,.9*n),t.lineTo(.7*i,.9*n),t.lineTo(.7*i,1*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.9*n),t.lineTo(.45*i,.9*n),t.lineTo(.45*i,.5*n),T(t,.25*i,.5*n,0,.25*n,0,0),W(t),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.4),s.q(t),i},HourGlass:function(t,i,n){return t=s.s(),j(t,.65*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.35*i,.5*n),t.lineTo(0,0),t.lineTo(1*i,0),W(t),i=t.o,s.q(t),i},Lightning:function(t,i,n){return t=s.s(),j(t,0*i,.55*n,!0),t.lineTo(.75*i,0),t.lineTo(.25*i,.45*n),t.lineTo(.9*i,.48*n),t.lineTo(.4*i,1*n),t.lineTo(.65*i,.55*n),W(t),i=t.o,s.q(t),i},Parallelogram1:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},Input:"Output",Output:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(.1*i,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),W(t),i=t.o,i.A=new P(.1,0),i.B=new P(.9,1),s.q(t),i},Parallelogram2:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,t*i,0,!0),e.lineTo(1*i,0),e.lineTo((1-t)*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},ThickCross:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,(.5-t/2)*i,0,!0),e.lineTo((.5+t/2)*i,0),e.lineTo((.5+t/2)*i,(.5-t/2)*n),e.lineTo(1*i,(.5-t/2)*n),e.lineTo(1*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,(.5+t/2)*n),e.lineTo((.5+t/2)*i,1*n),e.lineTo((.5-t/2)*i,1*n),e.lineTo((.5-t/2)*i,(.5+t/2)*n),e.lineTo(0,(.5+t/2)*n),e.lineTo(0,(.5-t/2)*n),e.lineTo((.5-t/2)*i,(.5-t/2)*n),W(e),i=e.o,i.A=new P(.5-t/2,.5-t/2),i.B=new P(.5+t/2,.5+t/2),s.q(e),i},ThickX:function(t,i,n){t=.25/Math.SQRT2;var e=s.s();return j(e,.3*i,0,!0),e.lineTo(.5*i,.2*n),e.lineTo(.7*i,0),e.lineTo(1*i,.3*n),e.lineTo(.8*i,.5*n),e.lineTo(1*i,.7*n),e.lineTo(.7*i,1*n),e.lineTo(.5*i,.8*n),e.lineTo(.3*i,1*n),e.lineTo(0,.7*n),e.lineTo(.2*i,.5*n),e.lineTo(0,.3*n),W(e),i=e.o,i.A=new P(.5-t,.5-t),i.B=new P(.5+t,.5+t),s.q(e),i},ThinCross:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.1),t=s.s(),j(t,(.5-e/2)*i,0,!0),t.lineTo((.5+e/2)*i,0),t.lineTo((.5+e/2)*i,(.5-e/2)*n),t.lineTo(1*i,(.5-e/2)*n),t.lineTo(1*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,(.5+e/2)*n),t.lineTo((.5+e/2)*i,1*n),t.lineTo((.5-e/2)*i,1*n),t.lineTo((.5-e/2)*i,(.5+e/2)*n),t.lineTo(0,(.5+e/2)*n),t.lineTo(0,(.5-e/2)*n),t.lineTo((.5-e/2)*i,(.5-e/2)*n),W(t),i=t.o,s.q(t),i},ThinX:function(t,i,n){return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.5*i,.4*n),t.lineTo(.9*i,0),t.lineTo(1*i,.1*n),t.lineTo(.6*i,.5*n),t.lineTo(1*i,.9*n),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.6*n),t.lineTo(.1*i,1*n),t.lineTo(0,.9*n),t.lineTo(.4*i,.5*n),t.lineTo(0,.1*n),W(t),i=t.o,s.q(t),i},RightTriangle:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.5),i.B=new P(.5,1),s.q(t),i},RoundedIBeam:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),T(t,.5*i,.25*n,.5*i,.75*n,1*i,1*n),t.lineTo(0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,s.q(t),i},RoundedRectangle:function(t,i,n){var e=t?t.Jc:NaN;isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=e*rt;var o=s.s();return j(o,e,0,!0),o.lineTo(i-e,0),T(o,i-t,0,i,t,i,e),o.lineTo(i,n-e),T(o,i,n-t,i-t,n,i-e,n),o.lineTo(e,n),T(o,t,n,0,n-t,0,n-e),o.lineTo(0,e),T(o,0,t,t,0,e,0),W(o),i=o.o,1<t?(i.A=new P(0,0,t,t),i.B=new P(1,1,-t,-t)):(i.A=gi,i.B=$i),s.q(o),i},Border:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=5),e=Math.min(e,i/3),e=Math.min(e,n/3),t=s.s(),j(t,e,0,!0),t.lineTo(i-e,0),T(t,i-0,0,i,0,i,e),t.lineTo(i,n-e),T(t,i,n-0,i-0,n,i-e,n),t.lineTo(e,n),T(t,0,n,0,n-0,0,n-e),t.lineTo(0,e),T(t,0,0,0,0,e,0),W(t),i=t.o,i.A=gi,i.B=$i,s.q(t),i},SquareIBeam:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,e*n),t.lineTo((.5+e/2)*i,e*n),t.lineTo((.5+e/2)*i,(1-e)*n),t.lineTo(1*i,(1-e)*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,(1-e)*n),t.lineTo((.5-e/2)*i,(1-e)*n),t.lineTo((.5-e/2)*i,e*n),t.lineTo(0,e*n),W(t),i=t.o,s.q(t),i},Trapezoid:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.2);var e=s.s();return j(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},ManualLoop:"ManualOperation",ManualOperation:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=0),t=s.s(),j(t,e,0,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),W(t),i=t.o,i.A=new P(.1,0),i.B=new P(.9,1),s.q(t),i},GenderMale:function(t,i,n){t=s.s();var e=.4*rt,o=.4,r=s.K(),h=s.K(),l=s.K(),u=s.K();j(t,(.5-o)*i,.5*n,!0),T(t,(.5-o)*i,(.5-e)*n,(.5-e)*i,(.5-o)*n,.5*i,(.5-o)*n),Vr(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.44,l,u,h,r,r),T(t,l.x*i,l.y*n,u.x*i,u.y*n,h.x*i,h.y*n);var f=s.wb(h.x,h.y);Vr(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.56,r,r,h,l,u);var a=s.wb(h.x,h.y);return t.lineTo((.1*f.x+.855)*i,.1*f.y*n),t.lineTo(.85*i,.1*f.y*n),t.lineTo(.85*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.15*n),t.lineTo((.1*a.x+.9)*i,.15*n),t.lineTo((.1*a.x+.9)*i,(.1*a.y+.05*.9)*n),t.lineTo(a.x*i,a.y*n),T(t,l.x*i,l.y*n,u.x*i,u.y*n,(.5+o)*i,.5*n),T(t,(.5+o)*i,(.5+e)*n,(.5+e)*i,(.5+o)*n,.5*i,(.5+o)*n),T(t,(.5-e)*i,(.5+o)*n,(.5-o)*i,(.5+e)*n,(.5-o)*i,.5*n),o=.35,e=.35*rt,j(t,.5*i,(.5-o)*n,!0,!0),T(t,(.5-e)*i,(.5-o)*n,(.5-o)*i,(.5-e)*n,(.5-o)*i,.5*n),T(t,(.5-o)*i,(.5+e)*n,(.5-e)*i,(.5+o)*n,.5*i,(.5+o)*n),T(t,(.5+e)*i,(.5+o)*n,(.5+o)*i,(.5+e)*n,(.5+o)*i,.5*n),T(t,(.5+o)*i,(.5-e)*n,(.5+e)*i,(.5-o)*n,.5*i,(.5-o)*n),j(t,(.5-o)*i,.5*n,!0),s.v(r),s.v(h),s.v(l),s.v(u),s.v(f),s.v(a),i=t.o,i.A=new P(.202,.257),i.B=new P(.692,.839),i.ae=Li,s.q(t),i},GenderFemale:function(t,i,n){t=s.s();var e=.375,o=0,r=-.125,h=4*(Math.SQRT2-1)/3*e;return j(t,(.525+o)*i,(.5+e+r)*n,!0),T(t,(.5+h+o)*i,(.5+e+r)*n,(.5+e+o)*i,(.5+h+r)*n,(.5+e+o)*i,(.5+r)*n),T(t,(.5+e+o)*i,(.5-h+r)*n,(.5+h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5-h+o)*i,(.5-e+r)*n,(.5-e+o)*i,(.5-h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5+h+r)*n,(.5-h+o)*i,(.5+e+r)*n,(.475+o)*i,(.5+e+r)*n),t.lineTo(.475*i,.85*n),t.lineTo(.425*i,.85*n),t.lineTo(.425*i,.9*n),t.lineTo(.475*i,.9*n),t.lineTo(.475*i,1*n),t.lineTo(.525*i,1*n),t.lineTo(.525*i,.9*n),t.lineTo(.575*i,.9*n),t.lineTo(.575*i,.85*n),t.lineTo(.525*i,.85*n),W(t),e=.325,o=0,r=-.125,h=4*(Math.SQRT2-1)/3*e,j(t,(.5+e+o)*i,(.5+r)*n,!0,!0),T(t,(.5+e+o)*i,(.5+h+r)*n,(.5+h+o)*i,(.5+e+r)*n,(.5+o)*i,(.5+e+r)*n),T(t,(.5-h+o)*i,(.5+e+r)*n,(.5-e+o)*i,(.5+h+r)*n,(.5-e+o)*i,(.5+r)*n),T(t,(.5-e+o)*i,(.5-h+r)*n,(.5-h+o)*i,(.5-e+r)*n,(.5+o)*i,(.5-e+r)*n),T(t,(.5+h+o)*i,(.5-e+r)*n,(.5+e+o)*i,(.5-h+r)*n,(.5+e+o)*i,(.5+r)*n),j(t,(.525+o)*i,(.5+e+r)*n,!0),i=t.o,i.A=new P(.232,.136),i.B=new P(.782,.611),i.ae=Li,s.q(t),i},PlusLine:function(t,i,n){return t=s.s(),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},XLine:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(1*i,0),t.moveTo(0,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},AsteriskLine:function(t,i,n){t=s.s();var e=.2/Math.SQRT2;return j(t,e*i,(1-e)*n,!1),t.lineTo((1-e)*i,e*n),t.moveTo(e*i,e*n),t.lineTo((1-e)*i,(1-e)*n),t.moveTo(0*i,.5*n),t.lineTo(1*i,.5*n),t.moveTo(.5*i,0*n),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},CircleLine:function(t,i,n){var e=.5*rt;return t=s.s(),j(t,1*i,.5*n,!1),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.A=new P(.146,.146),i.B=new P(.853,.853),i.ae=Li,s.q(t),i},Pie:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*n,!0),T(t,.7*i,0*n,.5*i,0*n,.5*i,0*n),T(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),T(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.5*i,1*n),T(t,(.5+e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},PiePiece:function(t,i,n){var e=rt/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return t=s.s(),j(t,i,n,!0),T(t,i,(1-e)*n,(o+e)*i,(r+e)*n,o*i,r*n),t.lineTo(0,n),W(t),i=t.o,s.q(t),i},StopSign:function(t,i,n){t=1/(Math.SQRT2+2);var e=s.s();return j(e,t*i,0,!0),e.lineTo((1-t)*i,0),e.lineTo(1*i,t*n),e.lineTo(1*i,(1-t)*n),e.lineTo((1-t)*i,1*n),e.lineTo(t*i,1*n),e.lineTo(0,(1-t)*n),e.lineTo(0,t*n),W(e),i=e.o,i.A=new P(t/2,t/2),i.B=new P(1-t/2,1-t/2),s.q(e),i},LogicImplies:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),i=t.o,i.A=gi,i.B=new P(.8,.5),s.q(t),i},LogicIff:function(t,i,n){var e=t?t.Jc:NaN;return isNaN(e)&&(e=.2),t=s.s(),j(t,(1-e)*i,0*n,!1),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,n),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(e*i,0),t.lineTo(0,.5*n),t.lineTo(e*i,n),i=t.o,i.A=new P(.2,0),i.B=new P(.8,.5),s.q(t),i},LogicNot:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},LogicAnd:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(.5*i,0),t.lineTo(1*i,1*n),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,1),s.q(t),i},LogicOr:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),i=t.o,i.A=new P(.219,0),i.B=new P(.78,.409),s.q(t),i},LogicXor:function(t,i,n){t=s.s(),j(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n);var e=.5*rt;return T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.ae=Li,s.q(t),i},LogicTruth:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),i=t.o,s.q(t),i},LogicFalsity:function(t,i,n){return t=s.s(),j(t,0,1*n,!1),t.lineTo(1*i,1*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),i=t.o,s.q(t),i},LogicThereExists:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.lineTo(1*i,.5*n),t.lineTo(0,.5*n),t.moveTo(1*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),i=t.o,s.q(t),i},LogicForAll:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(.5*i,1*n),t.lineTo(1*i,0),t.moveTo(.25*i,.5*n),t.lineTo(.75*i,.5*n),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.5),s.q(t),i},LogicIsDefinedAs:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(i,0),t.moveTo(0,.5*n),t.lineTo(i,.5*n),t.moveTo(0,n),t.lineTo(i,n),i=t.o,i.A=new P(.01,.01),i.B=new P(.99,.49),s.q(t),i},LogicIntersect:function(t,i,n){var e=.5*rt;return t=s.s(),j(t,0,1*n,!1),t.lineTo(0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),t.lineTo(1*i,1*n),i=t.o,i.A=new P(0,.5),i.B=$i,s.q(t),i},LogicUnion:function(t,i,n){var e=.5*rt;return t=s.s(),j(t,1*i,0,!1),t.lineTo(1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),t.lineTo(0,0),i=t.o,i.A=gi,i.B=new P(1,.5),s.q(t),i},Arrow:function(t,i,n){var e=t?t.Jc:NaN,o=t?t.Qu:NaN;return isNaN(e)&&(e=.3),isNaN(o)&&(o=.3),t=s.s(),j(t,0,(.5-o/2)*n,!0),t.lineTo((1-e)*i,(.5-o/2)*n),t.lineTo((1-e)*i,0),t.lineTo(1*i,.5*n),t.lineTo((1-e)*i,1*n),t.lineTo((1-e)*i,(.5+o/2)*n),t.lineTo(0,(.5+o/2)*n),W(t),i=t.o,i.A=new P(0,.5-o/2),e=Qs(0,.5+o/2,1,.5+o/2,1-e,1,1,.5,s.K()),i.B=new P(e.x,e.y),s.v(e),s.q(t),i},ISOProcess:"Chevron",Chevron:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},DoubleArrow:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.3*i,.214*n),t.lineTo(.3*i,0),t.lineTo(1*i,.5*n),t.lineTo(.3*i,1*n),t.lineTo(.3*i,.786*n),t.lineTo(0,1*n),W(t),j(t,.3*i,.214*n,!1),t.lineTo(.3*i,.786*n),t.fb(!1),i=t.o,s.q(t),i},DoubleEndArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.3*i,.7*n),t.lineTo(.3*i,1*n),t.lineTo(0,.5*n),t.lineTo(.3*i,0),t.lineTo(.3*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,n=Qs(0,.5,.3,0,0,.3,.3,.3,s.K()),i.A=new P(n.x,n.y),n=Qs(.7,1,1,.5,.7,.7,1,.7,n),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},IBeamArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(.2*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.2*i,0),t.lineTo(.2*i,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,i.A=new P(0,.3),n=Qs(.7,1,1,.5,.7,.7,1,.7,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},Pointer:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(.2*i,.5*n),t.lineTo(0,0),W(t),i=t.o,i.A=new P(.2,.35),n=Qs(.2,.65,1,.65,0,1,1,.5,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},RoundedPointer:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),T(t,.5*i,.75*n,.5*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.4,.35),n=Qs(.2,.65,1,.65,0,1,1,.5,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},SplitEndArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(.7*i,.7*n),t.lineTo(0,.7*n),t.lineTo(.2*i,.5*n),t.lineTo(0,.3*n),t.lineTo(.7*i,.3*n),t.lineTo(.7*i,0),W(t),i=t.o,i.A=new P(.2,.3),n=Qs(.7,1,1,.5,.7,.7,1,.7,s.K()),i.B=new P(n.x,n.y),s.v(n),s.q(t),i},MessageToUser:"SquareArrow",SquareArrow:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(.7*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.7*i,0),W(t),i=t.o,i.A=gi,i.B=new P(.7,1),s.q(t),i},Cone1:function(t,i,n){var e=.5*rt,o=.1*rt;return t=s.s(),j(t,0,.9*n,!0),t.lineTo(.5*i,0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+o)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+o)*n,0,.9*n),W(t),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.97),s.q(t),i},Cone2:function(t,i,n){return t=s.s(),j(t,0,.9*n,!0),T(t,(1-.85/.9)*i,1*n,.85/.9*i,1*n,1*i,.9*n),t.lineTo(.5*i,0),t.lineTo(0,.9*n),W(t),j(t,0,.9*n,!1),T(t,(1-.85/.9)*i,.8*n,.85/.9*i,.8*n,1*i,.9*n),t.fb(!1),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.82),s.q(t),i},Cube1:function(t,i,n){return t=s.s(),j(t,.5*i,1*n,!0),t.lineTo(1*i,.85*n),t.lineTo(1*i,.15*n),t.lineTo(.5*i,0*n),t.lineTo(0*i,.15*n),t.lineTo(0*i,.85*n),W(t),j(t,.5*i,1*n,!1),t.lineTo(.5*i,.3*n),t.lineTo(0,.15*n),t.moveTo(.5*i,.3*n),t.lineTo(1*i,.15*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(.5,.85),s.q(t),i},Cube2:function(t,i,n){return t=s.s(),j(t,0,.3*n,!0),t.lineTo(0*i,1*n),t.lineTo(.7*i,n),t.lineTo(1*i,.7*n),t.lineTo(1*i,0*n),t.lineTo(.3*i,0*n),W(t),j(t,0,.3*n,!1),t.lineTo(.7*i,.3*n),t.lineTo(1*i,0*n),t.moveTo(.7*i,.3*n),t.lineTo(.7*i,1*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(.7,1),s.q(t),i},MagneticData:"Cylinder1",Cylinder1:function(t,i,n){var e=.5*rt,o=.1*rt;return t=s.s(),j(t,0,.1*n,!0),T(t,0,(.1-o)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-o)*n,1*i,.1*n),t.lineTo(i,.9*n),T(t,1*i,(.9+o)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+o)*n,0,.9*n),t.lineTo(0,.1*n),j(t,0,.1*n,!1),T(t,0,(.1+o)*n,(.5-e)*i,.2*n,.5*i,.2*n),T(t,(.5+e)*i,.2*n,1*i,(.1+o)*n,1*i,.1*n),t.fb(!1),i=t.o,i.A=new P(0,.2),i.B=new P(1,.9),s.q(t),i},Cylinder2:function(t,i,n){var e=.5*rt,o=.1*rt;return t=s.s(),j(t,0,.9*n,!0),t.lineTo(0,.1*n),T(t,0,(.1-o)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-o)*n,1*i,.1*n),t.lineTo(1*i,.9*n),T(t,1*i,(.9+o)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+o)*n,0,.9*n),j(t,0,.9*n,!1),T(t,0,(.9-o)*n,(.5-e)*i,.8*n,.5*i,.8*n),T(t,(.5+e)*i,.8*n,1*i,(.9-o)*n,1*i,.9*n),t.fb(!1),i=t.o,i.A=new P(0,.1),i.B=new P(1,.8),s.q(t),i},Cylinder3:function(t,i,n){var e=.1*rt,o=.5*rt;return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.9*i,0),T(t,(.9+e)*i,0,1*i,(.5-o)*n,1*i,.5*n),T(t,1*i,(.5+o)*n,(.9+e)*i,1*n,.9*i,1*n),t.lineTo(.1*i,1*n),T(t,(.1-e)*i,1*n,0,(.5+o)*n,0,.5*n),T(t,0,(.5-o)*n,(.1-e)*i,0,.1*i,0),j(t,.1*i,0,!1),T(t,(.1+e)*i,0,.2*i,(.5-o)*n,.2*i,.5*n),T(t,.2*i,(.5+o)*n,(.1+e)*i,1*n,.1*i,1*n),t.fb(!1),i=t.o,i.A=new P(.2,0),i.B=new P(.9,1),s.q(t),i},DirectData:"Cylinder4",Cylinder4:function(t,i,n){var e=.1*rt,o=.5*rt;return t=s.s(),j(t,.9*i,0,!0),T(t,(.9+e)*i,0,1*i,(.5-o)*n,1*i,.5*n),T(t,1*i,(.5+o)*n,(.9+e)*i,1*n,.9*i,1*n),t.lineTo(.1*i,1*n),T(t,(.1-e)*i,1*n,0,(.5+o)*n,0,.5*n),T(t,0,(.5-o)*n,(.1-e)*i,0,.1*i,0),t.lineTo(.9*i,0),j(t,.9*i,0,!1),T(t,(.9-e)*i,0,.8*i,(.5-o)*n,.8*i,.5*n),T(t,.8*i,(.5+o)*n,(.9-e)*i,1*n,.9*i,1*n),t.fb(!1),i=t.o,i.A=new P(.1,0),i.B=new P(.8,1),s.q(t),i},Prism1:function(t,i,n){return t=s.s(),j(t,.25*i,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(i,.5*n),t.lineTo(.5*i,n),t.lineTo(0,n),W(t),j(t,.25*i,.25*n,!1),t.lineTo(.5*i,n),t.fb(!1),i=t.o,i.A=new P(.408,.172),i.B=new P(.833,.662),s.q(t),i},Prism2:function(t,i,n){return t=s.s(),j(t,0,.25*n,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),W(t),j(t,0,n,!1),t.lineTo(.25*i,.5*n),t.lineTo(i,.25*n),t.moveTo(0,.25*n),t.lineTo(.25*i,.5*n),t.fb(!1),i=t.o,i.A=new P(.25,.5),i.B=new P(.75,.75),s.q(t),i},Pyramid1:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(i,.75*n),t.lineTo(.5*i,1*n),t.lineTo(0,.75*n),W(t),j(t,.5*i,0,!1),t.lineTo(.5*i,1*n),t.fb(!1),i=t.o,i.A=new P(.25,.367),i.B=new P(.75,.875),s.q(t),i},Pyramid2:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(i,.85*n),t.lineTo(.5*i,1*n),t.lineTo(0,.85*n),W(t),j(t,.5*i,0,!1),t.lineTo(.5*i,.7*n),t.lineTo(0,.85*n),t.moveTo(.5*i,.7*n),t.lineTo(1*i,.85*n),t.fb(!1),i=t.o,i.A=new P(.25,.367),i.B=new P(.75,.875),s.q(t),i},Actor:function(t,i,n){var e=.2*rt,o=.1*rt,r=.5,h=.1;return t=s.s(),j(t,r*i,(h+.1)*n,!0),T(t,(r-e)*i,(h+.1)*n,(r-.2)*i,(h+o)*n,(r-.2)*i,h*n),T(t,(r-.2)*i,(h-o)*n,(r-e)*i,(h-.1)*n,r*i,(h-.1)*n),T(t,(r+e)*i,(h-.1)*n,(r+.2)*i,(h-o)*n,(r+.2)*i,h*n),T(t,(r+.2)*i,(h+o)*n,(r+e)*i,(h+.1)*n,r*i,(h+.1)*n),e=.05,o=rt*e,j(t,.5*i,.2*n,!0),t.lineTo(.95*i,.2*n),r=.95,h=.25,T(t,(r+o)*i,(h-e)*n,(r+e)*i,(h-o)*n,(r+e)*i,h*n),t.lineTo(1*i,.6*n),t.lineTo(.85*i,.6*n),t.lineTo(.85*i,.35*n),e=.025,o=rt*e,r=.825,h=.35,T(t,(r+e)*i,(h-o)*n,(r+o)*i,(h-e)*n,r*i,(h-e)*n),T(t,(r-o)*i,(h-e)*n,(r-e)*i,(h-o)*n,(r-e)*i,h*n),t.lineTo(.8*i,1*n),t.lineTo(.55*i,1*n),t.lineTo(.55*i,.7*n),e=.05,o=rt*e,r=.5,h=.7,T(t,(r+e)*i,(h-o)*n,(r+o)*i,(h-e)*n,r*i,(h-e)*n),T(t,(r-o)*i,(h-e)*n,(r-e)*i,(h-o)*n,(r-e)*i,h*n),t.lineTo(.45*i,1*n),t.lineTo(.2*i,1*n),t.lineTo(.2*i,.35*n),e=.025,o=rt*e,r=.175,h=.35,T(t,(r+e)*i,(h-o)*n,(r+o)*i,(h-e)*n,r*i,(h-e)*n),T(t,(r-o)*i,(h-e)*n,(r-e)*i,(h-o)*n,(r-e)*i,h*n),t.lineTo(.15*i,.6*n),t.lineTo(0*i,.6*n),t.lineTo(0*i,.25*n),e=.05,o=rt*e,r=.05,h=.25,T(t,(r-e)*i,(h-o)*n,(r-o)*i,(h-e)*n,r*i,(h-e)*n),t.lineTo(.5*i,.2*n),i=t.o,i.A=new P(.2,.2),i.B=new P(.8,.65),s.q(t),i},Card:function(t,i,n){return t=s.s(),j(t,1*i,0*n,!0),t.lineTo(1*i,1*n),t.lineTo(0*i,1*n),t.lineTo(0*i,.2*n),t.lineTo(.2*i,0*n),W(t),i=t.o,i.A=new P(0,.2),i.B=$i,s.q(t),i},Collate:function(t,i,n){return t=s.s(),j(t,.5*i,.5*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),j(t,.5*i,.5*n,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(.5*i,.5*n),i=t.o,i.A=new P(.25,0),i.B=new P(.75,.25),s.q(t),i},CreateRequest:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.moveTo(0,(1-t)*n),e.lineTo(1*i,(1-t)*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},Database:function(t,i,n){t=s.s();var e=.5*rt,o=.1*rt;return j(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+o)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+o)*n,0,.9*n),t.lineTo(0,.1*n),T(t,0,(.1-o)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-o)*n,1*i,.1*n),j(t,1*i,.1*n,!1),T(t,1*i,(.1+o)*n,(.5+e)*i,.2*n,.5*i,.2*n),T(t,(.5-e)*i,.2*n,0,(.1+o)*n,0,.1*n),t.moveTo(1*i,.2*n),T(t,1*i,(.2+o)*n,(.5+e)*i,.3*n,.5*i,.3*n),T(t,(.5-e)*i,.3*n,0,(.2+o)*n,0,.2*n),t.moveTo(1*i,.3*n),T(t,1*i,(.3+o)*n,(.5+e)*i,.4*n,.5*i,.4*n),T(t,(.5-e)*i,.4*n,0,(.3+o)*n,0,.3*n),t.fb(!1),i=t.o,i.A=new P(0,.4),i.B=new P(1,.9),s.q(t),i},StoredData:"DataStorage",DataStorage:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),T(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(0,1*n),T(t,.25*i,.9*n,.25*i,.1*n,0,0),W(t),i=t.o,i.A=new P(.226,0),i.B=new P(.81,1),s.q(t),i},DiskStorage:function(t,i,n){t=s.s();var e=.5*rt,o=.1*rt;return j(t,1*i,.1*n,!0),t.lineTo(1*i,.9*n),T(t,1*i,(.9+o)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.9+o)*n,0,.9*n),t.lineTo(0,.1*n),T(t,0,(.1-o)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.1-o)*n,1*i,.1*n),j(t,1*i,.1*n,!1),T(t,1*i,(.1+o)*n,(.5+e)*i,.2*n,.5*i,.2*n),T(t,(.5-e)*i,.2*n,0,(.1+o)*n,0,.1*n),t.moveTo(1*i,.2*n),T(t,1*i,(.2+o)*n,(.5+e)*i,.3*n,.5*i,.3*n),T(t,(.5-e)*i,.3*n,0,(.2+o)*n,0,.2*n),t.fb(!1),i=t.o,i.A=new P(0,.3),i.B=new P(1,.9),s.q(t),i},Display:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),t.lineTo(.75*i,0),T(t,1*i,0,1*i,1*n,.75*i,1*n),t.lineTo(.25*i,1*n),t.lineTo(0,.5*n),W(t),i=t.o,i.A=new P(.25,0),i.B=new P(.75,1),s.q(t),i},DividedEvent:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)?t=.2:.15>t&&(t=.15);var e=s.s(),o=.2*rt;return j(e,0,.2*n,!0),T(e,0,(.2-o)*n,(.2-o)*i,0,.2*i,0),e.lineTo(.8*i,0),T(e,(.8+o)*i,0,1*i,(.2-o)*n,1*i,.2*n),e.lineTo(1*i,.8*n),T(e,1*i,(.8+o)*n,(.8+o)*i,1*n,.8*i,1*n),e.lineTo(.2*i,1*n),T(e,(.2-o)*i,1*n,0,(.8+o)*n,0,.8*n),e.lineTo(0,.2*n),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},DividedProcess:function(t,i,n){t=t?t.Jc:NaN,(isNaN(t)||.1>t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,0,t*n,!1),e.lineTo(1*i,t*n),e.fb(!1),i=e.o,i.A=new P(0,t),i.B=$i,s.q(e),i},Document:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),i=t.o,i.A=gi,i.B=new P(1,.6),s.q(t),i},ExternalOrganization:function(t,i,n){t=t?t.Jc:NaN,(isNaN(t)||.2>t)&&(t=.2);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,t*i,0,!1),e.lineTo(0,t*n),e.moveTo(1*i,t*n),e.lineTo((1-t)*i,0),e.moveTo(0,(1-t)*n),e.lineTo(t*i,1*n),e.moveTo((1-t)*i,1*n),e.lineTo(1*i,(1-t)*n),e.fb(!1),i=e.o,i.A=new P(t/2,t/2),i.B=new P(1-t/2,1-t/2),s.q(e),i},ExternalProcess:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),W(t),j(t,.1*i,.4*n,!1),t.lineTo(.1*i,.6*n),t.moveTo(.9*i,.6*n),t.lineTo(.9*i,.4*n),t.moveTo(.6*i,.1*n),t.lineTo(.4*i,.1*n),t.moveTo(.4*i,.9*n),t.lineTo(.6*i,.9*n),t.fb(!1),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.75),s.q(t),i},File:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),W(t),j(t,.75*i,0,!1),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.25*n),t.fb(!1),i=t.o,i.A=new P(0,.25),i.B=$i,s.q(t),i},Interrupt:function(t,i,n){return t=s.s(),j(t,1*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,1*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,0),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},InternalStorage:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.1);var o=s.s();return j(o,0,0,!0),o.lineTo(1*i,0),o.lineTo(1*i,1*n),o.lineTo(0,1*n),W(o),j(o,e*i,0,!1),o.lineTo(e*i,1*n),o.moveTo(0,t*n),o.lineTo(1*i,t*n),o.fb(!1),i=o.o,i.A=new P(e,t),i.B=$i,s.q(o),i},Junction:function(t,i,n){t=s.s();var e=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,r=.5*rt;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+r)*n,(.5+r)*i,1*n,.5*i,1*n),T(t,(.5-r)*i,1*n,0,(.5+r)*n,0,.5*n),T(t,0,(.5-r)*n,(.5-r)*i,0,.5*i,0),T(t,(.5+r)*i,0,1*i,(.5-r)*n,1*i,.5*n),j(t,(o+e)*i,(o+e)*n,!1),t.lineTo(o*i,o*n),t.moveTo(o*i,(o+e)*n),t.lineTo((o+e)*i,o*n),t.fb(!1),i=t.o,i.ae=Li,s.q(t),i},LinedDocument:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,0),t.lineTo(1*i,0),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),j(t,.1*i,0,!1),t.lineTo(.1*i,.75*n),t.fb(!1),i=t.o,i.A=new P(.1,0),i.B=new P(1,.6),s.q(t),i},LoopLimit:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(0,.25*n),t.lineTo(.25*i,0),t.lineTo(.75*i,0),t.lineTo(1*i,.25*n),t.lineTo(1*i,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=$i,s.q(t),i},SequentialData:"MagneticTape",MagneticTape:function(t,i,n){t=s.s();var e=.5*rt;return j(t,.5*i,1*n,!0),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,.9*n,.6*i,.9*n),t.lineTo(1*i,.9*n),t.lineTo(1*i,1*n),t.lineTo(.5*i,1*n),i=t.o,i.A=new P(.15,.15),i.B=new P(.85,.8),s.q(t),i},ManualInput:function(t,i,n){return t=s.s(),j(t,1*i,0,!0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.25*n),W(t),i=t.o,i.A=new P(0,.25),i.B=$i,s.q(t),i},MessageFromUser:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.7);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(t*i,.5*n),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=gi,i.B=new P(t,1),s.q(e),i},MicroformProcessing:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.25);var e=s.s();return j(e,0,0,!0),e.lineTo(.5*i,t*n),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.5*i,(1-t)*n),e.lineTo(0,1*n),W(e),i=e.o,i.A=new P(0,t),i.B=new P(1,1-t),s.q(e),i},MicroformRecording:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,.25*n),t.lineTo(1*i,.15*n),t.lineTo(1*i,.85*n),t.lineTo(.75*i,.75*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=new P(1,.75),s.q(t),i},MultiDocument:function(t,i,n){return n/=.8,t=s.s(),j(t,i,0,!0),t.lineTo(i,.5*n),T(t,.96*i,.47*n,.93*i,.45*n,.9*i,.44*n),t.lineTo(.9*i,.6*n),T(t,.86*i,.57*n,.83*i,.55*n,.8*i,.54*n),t.lineTo(.8*i,.7*n),T(t,.4*i,.4*n,.4*i,1*n,0,.7*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),t.lineTo(.1*i,.1*n),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),W(t),j(t,.1*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.54*n),t.moveTo(.2*i,.1*n),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.44*n),t.fb(!1),i=t.o,i.A=new P(0,.25),i.B=new P(.8,.77),s.q(t),i},MultiProcess:function(t,i,n){return t=s.s(),j(t,.1*i,.1*n,!0),t.lineTo(.2*i,.1*n),t.lineTo(.2*i,0),t.lineTo(1*i,0),t.lineTo(1*i,.8*n),t.lineTo(.9*i,.8*n),t.lineTo(.9*i,.9*n),t.lineTo(.8*i,.9*n),t.lineTo(.8*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.2*n),t.lineTo(.1*i,.2*n),W(t),j(t,.2*i,.1*n,!1),t.lineTo(.9*i,.1*n),t.lineTo(.9*i,.8*n),t.moveTo(.1*i,.2*n),t.lineTo(.8*i,.2*n),t.lineTo(.8*i,.9*n),t.fb(!1),i=t.o,i.A=new P(0,.2),i.B=new P(.8,1),s.q(t),i},OfflineStorage:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=1-t,o=s.s();return j(o,0,0,!0),o.lineTo(1*i,0),o.lineTo(.5*i,1*n),W(o),j(o,.5*t*i,t*n,!1),o.lineTo((1-.5*t)*i,t*n),o.fb(!1),i=o.o,i.A=new P(e/4+.5*t,t),i.B=new P(3*e/4+.5*t,t+.5*e),s.q(o),i},OffPageConnector:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(.75*i,0),t.lineTo(1*i,.5*n),t.lineTo(.75*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=gi,i.B=new P(.75,1),s.q(t),i},Or:function(t,i,n){t=s.s();var e=.5*rt;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(0,.5*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,0),t.fb(!1),i=t.o,i.ae=Li,s.q(t),i},PaperTape:function(t,i,n){return n/=.8,t=s.s(),j(t,0,.7*n,!0),t.lineTo(0,.3*n),T(t,.5*i,.6*n,.5*i,0,1*i,.3*n),t.lineTo(1*i,.7*n),T(t,.5*i,.4*n,.5*i,1*n,0,.7*n),W(t),i=t.o,i.A=new P(0,.49),i.B=new P(1,.75),s.q(t),i},PrimitiveFromCall:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=s.s();return j(o,0,0,!0),o.lineTo(1*i,0),o.lineTo((1-t)*i,.5*n),o.lineTo(1*i,1*n),o.lineTo(0,1*n),W(o),i=o.o,i.A=new P(e,0),i.B=new P(1-t,1),s.q(o),i},PrimitiveToCall:function(t,i,n){var e=t?t.Jc:NaN;t=t?t.Qu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=s.s();return j(o,0,0,!0),o.lineTo((1-t)*i,0),o.lineTo(1*i,.5*n),o.lineTo((1-t)*i,1*n),o.lineTo(0,1*n),W(o),i=o.o,i.A=new P(e,0),i.B=new P(1-t,1),s.q(o),i},Subroutine:"Procedure",Procedure:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,(1-t)*i,0,!1),e.lineTo((1-t)*i,1*n),e.moveTo(t*i,0),e.lineTo(t*i,1*n),e.fb(!1),i=e.o,i.A=new P(t,0),i.B=new P(1-t,1),s.q(e),i},Process:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(0,1*n),W(e),j(e,t*i,0,!1),e.lineTo(t*i,1*n),e.fb(!1),i=e.o,i.A=new P(t,0),i.B=$i,s.q(e),i},Sort:function(t,i,n){return t=s.s(),j(t,.5*i,0,!0),t.lineTo(1*i,.5*n),t.lineTo(.5*i,1*n),t.lineTo(0,.5*n),W(t),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.fb(!1),i=t.o,i.A=new P(.25,.25),i.B=new P(.75,.5),s.q(t),i},Start:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),j(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),j(t,.25*i,0,!1),t.lineTo(.25*i,1*n),t.moveTo(.75*i,0),t.lineTo(.75*i,1*n),t.fb(!1),i=t.o,i.A=new P(.25,0),i.B=new P(.75,1),s.q(t),i},Terminator:function(t,i,n){return t=s.s(),j(t,.25*i,0,!0),t.arcTo(270,180,.75*i,.5*n,.25*i,.5*n),t.arcTo(90,180,.25*i,.5*n,.25*i,.5*n),i=t.o,i.A=new P(.23,0),i.B=new P(.77,1),s.q(t),i},TransmittalTape:function(t,i,n){t=t?t.Jc:NaN,isNaN(t)&&(t=.1);var e=s.s();return j(e,0,0,!0),e.lineTo(1*i,0),e.lineTo(1*i,1*n),e.lineTo(.75*i,(1-t)*n),e.lineTo(0,(1-t)*n),W(e),i=e.o,i.A=gi,i.B=new P(1,1-t),s.q(e),i},AndGate:function(t,i,n){t=s.s();var e=.5*rt;return j(t,0,0,!0),t.lineTo(.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=gi,i.B=new P(.55,1),s.q(t),i},Buffer:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),W(t),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},Clock:function(t,i,n){t=s.s();var e=.5*rt;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,1*i,.5*n,!1),t.lineTo(1*i,.5*n),j(t,.8*i,.75*n,!1),t.lineTo(.8*i,.25*n),t.lineTo(.6*i,.25*n),t.lineTo(.6*i,.75*n),t.lineTo(.4*i,.75*n),t.lineTo(.4*i,.25*n),t.lineTo(.2*i,.25*n),t.lineTo(.2*i,.75*n),t.fb(!1),i=t.o,i.ae=Li,s.q(t),i},Ground:function(t,i,n){return t=s.s(),j(t,.5*i,0,!1),t.lineTo(.5*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.3*i,.8*n),t.lineTo(.7*i,.8*n),t.moveTo(.4*i,1*n),t.lineTo(.6*i,1*n),i=t.o,s.q(t),i},Inverter:function(t,i,n){t=s.s();var e=.1*rt;return j(t,.8*i,.5*n,!0),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.8*i,.5*n),j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.9+e)*i,.6*n,.9*i,.6*n),T(t,(.9-e)*i,.6*n,.8*i,(.5+e)*n,.8*i,.5*n),T(t,.8*i,(.5-e)*n,(.9-e)*i,.4*n,.9*i,.4*n),T(t,(.9+e)*i,.4*n,1*i,(.5-e)*n,1*i,.5*n),i=t.o,i.A=new P(0,.25),i.B=new P(.4,.75),s.q(t),i},NandGate:function(t,i,n){t=s.s();var e=.5*rt,o=.4*rt,r=.1*rt;return j(t,.8*i,.5*n,!0),T(t,.8*i,(.5+o)*n,(.4+e)*i,1*n,.4*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(.4*i,0),T(t,(.4+e)*i,0,.8*i,(.5-o)*n,.8*i,.5*n),j(t,1*i,.5*n,!0),T(t,1*i,(.5+r)*n,(.9+r)*i,.6*n,.9*i,.6*n),T(t,(.9-r)*i,.6*n,.8*i,(.5+r)*n,.8*i,.5*n),T(t,.8*i,(.5-r)*n,(.9-r)*i,.4*n,.9*i,.4*n),T(t,(.9+r)*i,.4*n,1*i,(.5-r)*n,1*i,.5*n),i=t.o,i.A=new P(0,.05),i.B=new P(.55,.95),s.q(t),i},NorGate:function(t,i,n){t=s.s();var e=.5,o=rt*e,r=0,h=.5;return j(t,.8*i,.5*n,!0),T(t,.7*i,(h+o)*n,(r+o)*i,(h+e)*n,0,1*n),T(t,.25*i,.75*n,.25*i,.25*n,0,0),T(t,(r+o)*i,(h-e)*n,.7*i,(h-o)*n,.8*i,.5*n),e=.1,o=.1*rt,r=.9,h=.5,j(t,(r-e)*i,h*n,!0),T(t,(r-e)*i,(h-o)*n,(r-o)*i,(h-e)*n,r*i,(h-e)*n),T(t,(r+o)*i,(h-e)*n,(r+e)*i,(h-o)*n,(r+e)*i,h*n),T(t,(r+e)*i,(h+o)*n,(r+o)*i,(h+e)*n,r*i,(h+e)*n),T(t,(r-o)*i,(h+e)*n,(r-e)*i,(h+o)*n,(r-e)*i,h*n),i=t.o,i.A=new P(.2,.25),i.B=new P(.6,.75),s.q(t),i},OrGate:function(t,i,n){t=s.s();var e=.5*rt;return j(t,0,0,!0),T(t,(0+e+e)*i,0*n,.8*i,(.5-e)*n,1*i,.5*n),T(t,.8*i,(.5+e)*n,(0+e+e)*i,1*n,0,1*n),T(t,.25*i,.75*n,.25*i,.25*n,0,0),W(t),i=t.o,i.A=new P(.2,.25),i.B=new P(.75,.75),s.q(t),i},XnorGate:function(t,i,n){t=s.s();var e=.5,o=rt*e,r=.2,h=.5;return j(t,.1*i,0,!1),T(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),j(t,.8*i,.5*n,!0),T(t,.7*i,(h+o)*n,(r+o)*i,(h+e)*n,.2*i,1*n),T(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),T(t,(r+o)*i,(h-e)*n,.7*i,(h-o)*n,.8*i,.5*n),e=.1,o=.1*rt,r=.9,h=.5,j(t,(r-e)*i,h*n,!0),T(t,(r-e)*i,(h-o)*n,(r-o)*i,(h-e)*n,r*i,(h-e)*n),T(t,(r+o)*i,(h-e)*n,(r+e)*i,(h-o)*n,(r+e)*i,h*n),T(t,(r+e)*i,(h+o)*n,(r+o)*i,(h+e)*n,r*i,(h+e)*n),T(t,(r-o)*i,(h+e)*n,(r-e)*i,(h+o)*n,(r-e)*i,h*n),i=t.o,i.A=new P(.4,.25),i.B=new P(.65,.75),s.q(t),i},XorGate:function(t,i,n){t=s.s();var e=.5*rt;return j(t,.1*i,0,!1),T(t,.35*i,.25*n,.35*i,.75*n,.1*i,1*n),j(t,.2*i,0,!0),T(t,(.2+e)*i,0*n,.9*i,(.5-e)*n,1*i,.5*n),T(t,.9*i,(.5+e)*n,(.2+e)*i,1*n,.2*i,1*n),T(t,.45*i,.75*n,.45*i,.25*n,.2*i,0),W(t),i=t.o,i.A=new P(.4,.25),i.B=new P(.8,.75),s.q(t),i},Capacitor:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},Resistor:function(t,i,n){return t=s.s(),j(t,0,.5*n,!1),t.lineTo(.1*i,0),t.lineTo(.2*i,1*n),t.lineTo(.3*i,0),t.lineTo(.4*i,1*n),t.lineTo(.5*i,0),t.lineTo(.6*i,1*n),t.lineTo(.7*i,.5*n),i=t.o,s.q(t),i},Inductor:function(t,i,n){t=s.s();var e=.1*rt,o=.1;return j(t,(o-.5*e)*i,n,!1),T(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.3,T(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),T(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.5,T(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),T(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.7,T(t,(o+.1)*i,0,(o+e)*i,n,o*i,n),T(t,(o-e)*i,n,(o-.1)*i,0,(o+.1)*i,0),o=.9,T(t,(o+.1)*i,0,(o+e)*i,n,(o+.5*e)*i,n),i=t.o,s.q(t),i},ACvoltageSource:function(t,i,n){t=s.s();var e=.5*rt;return j(t,0*i,.5*n,!1),T(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),T(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n),t.moveTo(.1*i,.5*n),T(t,.5*i,0*n,.5*i,1*n,.9*i,.5*n),i=t.o,i.ae=Li,s.q(t),i},DCvoltageSource:function(t,i,n){return t=s.s(),j(t,0,.75*n,!1),t.lineTo(0,.25*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},Diode:function(t,i,n){return t=s.s(),j(t,1*i,0,!1),t.lineTo(1*i,.5*n),t.lineTo(0,1*n),t.lineTo(0,0),t.lineTo(1*i,.5*n),t.lineTo(1*i,1*n),i=t.o,i.A=new P(0,.25),i.B=new P(.5,.75),s.q(t),i},Wifi:function(t,i,n){var l=i,u=n;i*=.38,n*=.6,t=s.s();var e=.8*rt,o=.8,r=0,h=.5,l=(l-i)/2,u=(u-n)/2;return j(t,r*i+l,(h+o)*n+u,!0),T(t,(r-e)*i+l,(h+o)*n+u,(r-o)*i+l,(h+e)*n+u,(r-o)*i+l,h*n+u),T(t,(r-o)*i+l,(h-e)*n+u,(r-e)*i+l,(h-o)*n+u,r*i+l,(h-o)*n+u),T(t,r*i+l,(h-o)*n+u,(r-o+.5*e)*i+l,(h-e)*n+u,(r-o+.5*e)*i+l,h*n+u),T(t,(r-o+.5*e)*i+l,(h+e)*n+u,r*i+l,(h+o)*n+u,r*i+l,(h+o)*n+u),W(t),e=.4*rt,o=.4,r=.2,h=.5,j(t,r*i+l,(h+o)*n+u,!0),T(t,(r-e)*i+l,(h+o)*n+u,(r-o)*i+l,(h+e)*n+u,(r-o)*i+l,h*n+u),T(t,(r-o)*i+l,(h-e)*n+u,(r-e)*i+l,(h-o)*n+u,r*i+l,(h-o)*n+u),T(t,r*i+l,(h-o)*n+u,(r-o+.5*e)*i+l,(h-e)*n+u,(r-o+.5*e)*i+l,h*n+u),T(t,(r-o+.5*e)*i+l,(h+e)*n+u,r*i+l,(h+o)*n+u,r*i+l,(h+o)*n+u),W(t),e=.2*rt,o=.2,h=r=.5,j(t,(r-o)*i+l,h*n+u,!0),T(t,(r-o)*i+l,(h-e)*n+u,(r-e)*i+l,(h-o)*n+u,r*i+l,(h-o)*n+u),T(t,(r+e)*i+l,(h-o)*n+u,(r+o)*i+l,(h-e)*n+u,(r+o)*i+l,h*n+u),T(t,(r+o)*i+l,(h+e)*n+u,(r+e)*i+l,(h+o)*n+u,r*i+l,(h+o)*n+u),T(t,(r-e)*i+l,(h+o)*n+u,(r-o)*i+l,(h+e)*n+u,(r-o)*i+l,h*n+u),e=.4*rt,o=.4,r=.8,h=.5,j(t,r*i+l,(h-o)*n+u,!0),T(t,(r+e)*i+l,(h-o)*n+u,(r+o)*i+l,(h-e)*n+u,(r+o)*i+l,h*n+u),T(t,(r+o)*i+l,(h+e)*n+u,(r+e)*i+l,(h+o)*n+u,r*i+l,(h+o)*n+u),T(t,r*i+l,(h+o)*n+u,(r+o-.5*e)*i+l,(h+e)*n+u,(r+o-.5*e)*i+l,h*n+u),T(t,(r+o-.5*e)*i+l,(h-e)*n+u,r*i+l,(h-o)*n+u,r*i+l,(h-o)*n+u),W(t),e=.8*rt,o=.8,r=1,h=.5,j(t,r*i+l,(h-o)*n+u,!0),T(t,(r+e)*i+l,(h-o)*n+u,(r+o)*i+l,(h-e)*n+u,(r+o)*i+l,h*n+u),T(t,(r+o)*i+l,(h+e)*n+u,(r+e)*i+l,(h+o)*n+u,r*i+l,(h+o)*n+u),T(t,r*i+l,(h+o)*n+u,(r+o-.5*e)*i+l,(h+e)*n+u,(r+o-.5*e)*i+l,h*n+u),T(t,(r+o-.5*e)*i+l,(h-e)*n+u,r*i+l,(h-o)*n+u,r*i+l,(h-o)*n+u),W(t),i=t.o,s.q(t),i},Email:function(t,i,n){return t=s.s(),j(t,0,0,!0),t.lineTo(1*i,0),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,0),W(t),j(t,0,0,!1),t.lineTo(.5*i,.6*n),t.lineTo(1*i,0),t.moveTo(0,1*n),t.lineTo(.45*i,.54*n),t.moveTo(1*i,1*n),t.lineTo(.55*i,.54*n),t.fb(!1),i=t.o,s.q(t),i},Ethernet:function(t,i,n){return t=s.s(),j(t,.35*i,0,!0),t.lineTo(.65*i,0),t.lineTo(.65*i,.4*n),t.lineTo(.35*i,.4*n),t.lineTo(.35*i,0),W(t),j(t,.1*i,1*n,!0,!0),t.lineTo(.4*i,1*n),t.lineTo(.4*i,.6*n),t.lineTo(.1*i,.6*n),t.lineTo(.1*i,1*n),W(t),j(t,.6*i,1*n,!0,!0),t.lineTo(.9*i,1*n),t.lineTo(.9*i,.6*n),t.lineTo(.6*i,.6*n),t.lineTo(.6*i,1*n),W(t),j(t,0,.5*n,!1),t.lineTo(1*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.5*i,.4*n),t.moveTo(.75*i,.5*n),t.lineTo(.75*i,.6*n),t.moveTo(.25*i,.5*n),t.lineTo(.25*i,.6*n),t.fb(!1),i=t.o,s.q(t),i},Power:function(t,i,n){t=s.s();var e=.4*rt,o=.4,r=s.K(),h=s.K(),l=s.K(),u=s.K();Vr(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.5,r,r,h,l,u);var f=s.wb(h.x,h.y);return j(t,h.x*i,h.y*n,!0),T(t,l.x*i,l.y*n,u.x*i,u.y*n,(.5+o)*i,.5*n),T(t,(.5+o)*i,(.5+e)*n,(.5+e)*i,(.5+o)*n,.5*i,(.5+o)*n),T(t,(.5-e)*i,(.5+o)*n,(.5-o)*i,(.5+e)*n,(.5-o)*i,.5*n),Vr(.5-o,.5,.5-o,.5-e,.5-e,.5-o,.5,.5-o,.5,l,u,h,r,r),T(t,l.x*i,l.y*n,u.x*i,u.y*n,h.x*i,h.y*n),e=.3*rt,o=.3,Vr(.5-o,.5,.5-o,.5-e,.5-e,.5-o,.5,.5-o,.5,l,u,h,r,r),t.lineTo(h.x*i,h.y*n),T(t,u.x*i,u.y*n,l.x*i,l.y*n,(.5-o)*i,.5*n),T(t,(.5-o)*i,(.5+e)*n,(.5-e)*i,(.5+o)*n,.5*i,(.5+o)*n),T(t,(.5+e)*i,(.5+o)*n,(.5+o)*i,(.5+e)*n,(.5+o)*i,.5*n),Vr(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.5,r,r,h,l,u),T(t,u.x*i,u.y*n,l.x*i,l.y*n,h.x*i,h.y*n),W(t),j(t,.45*i,0,!0),t.lineTo(.45*i,.5*n),t.lineTo(.55*i,.5*n),t.lineTo(.55*i,0),W(t),s.v(r),s.v(h),s.v(l),s.v(u),s.v(f),i=t.o,i.A=new P(.25,.55),i.B=new P(.75,.8),s.q(t),i},Fallout:function(t,i,n){t=s.s();var e=.5*rt;j(t,0*i,.5*n,!0),T(t,0*i,(.5-e)*n,(.5-e)*i,0*n,.5*i,0*n),T(t,(.5+e)*i,0*n,1*i,(.5-e)*n,1*i,.5*n),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0*i,(.5+e)*n,0*i,.5*n);var o=e=0;return j(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),e=.4,o=0,W(t),j(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),e=.2,o=-.3,W(t),j(t,(.3+e)*i,(.8+o)*n,!0,!0),t.lineTo((.5+e)*i,(.5+o)*n),t.lineTo((.1+e)*i,(.5+o)*n),t.lineTo((.3+e)*i,(.8+o)*n),W(t),i=t.o,i.ae=Li,s.q(t),i},IrritationHazard:function(t,i,n){return t=s.s(),j(t,.2*i,0*n,!0),t.lineTo(.5*i,.3*n),t.lineTo(.8*i,0*n),t.lineTo(1*i,.2*n),t.lineTo(.7*i,.5*n),t.lineTo(1*i,.8*n),t.lineTo(.8*i,1*n),t.lineTo(.5*i,.7*n),t.lineTo(.2*i,1*n),t.lineTo(0*i,.8*n),t.lineTo(.3*i,.5*n),t.lineTo(0*i,.2*n),W(t),i=t.o,i.A=new P(.3,.3),i.B=new P(.7,.7),s.q(t),i},ElectricalHazard:function(t,i,n){return t=s.s(),j(t,.37*i,0*n,!0),t.lineTo(.5*i,.11*n),t.lineTo(.77*i,.04*n),t.lineTo(.33*i,.49*n),t.lineTo(1*i,.37*n),t.lineTo(.63*i,.86*n),t.lineTo(.77*i,.91*n),t.lineTo(.34*i,1*n),t.lineTo(.34*i,.78*n),t.lineTo(.44*i,.8*n),t.lineTo(.65*i,.56*n),t.lineTo(0*i,.68*n),W(t),i=t.o,s.q(t),i},FireHazard:function(t,i,n){return t=s.s(),j(t,.1*i,1*n,!0),T(t,-.25*i,.63*n,.45*i,.44*n,.29*i,0*n),T(t,.48*i,.17*n,.54*i,.35*n,.51*i,.42*n),T(t,.59*i,.29*n,.58*i,.28*n,.59*i,.18*n),T(t,.8*i,.34*n,.88*i,.43*n,.75*i,.6*n),T(t,.87*i,.48*n,.88*i,.43*n,.88*i,.31*n),T(t,1.17*i,.76*n,.82*i,.8*n,.9*i,1*n),W(t),i=t.o,i.A=new P(.05,.645),i.B=new P(.884,.908),s.q(t),i},BpmnActivityLoop:function(t,i,n){t=s.s();var e=4*(Math.SQRT2-1)/3*.5;return j(t,.65*i,1*n,!1),T(t,(1-e+0)*i,1*n,1*i,(.5+e+0)*n,1*i,.5*n),T(t,1*i,(.5-e+0)*n,(.5+e+0)*i,0*n,.5*i,0*n),T(t,(.5-e+0)*i,0*n,0*i,(.5-e+0)*n,0*i,.5*n),T(t,0*i,(.5+e+0)*n,(.5-e+0)*i,1*n,.35*i,.98*n),t.moveTo(.25*i,.8*n),t.lineTo(.35*i,1*n),t.lineTo(.1*i,1*n),i=t.o,s.q(t),i},BpmnActivityParallel:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(0,1*n),t.moveTo(.5*i,0),t.lineTo(.5*i,1*n),t.moveTo(1*i,0),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},BpmnActivitySequential:function(t,i,n){return t=s.s(),j(t,0,0,!1),t.lineTo(1*i,0),t.moveTo(0,.5*n),t.lineTo(1*i,.5*n),t.moveTo(0,1*n),t.lineTo(1*i,1*n),i=t.o,s.q(t),i},BpmnActivityAdHoc:function(t,i,n){return t=s.s(),j(t,0,0,!1),j(t,1*i,1*n,!1),j(t,0,.5*n,!1),T(t,.2*i,.35*n,.3*i,.35*n,.5*i,.5*n),T(t,.7*i,.65*n,.8*i,.65*n,1*i,.5*n),i=t.o,s.q(t),i},BpmnActivityCompensation:function(t,i,n){return t=s.s(),j(t,0,.5*n,!0),t.lineTo(.5*i,0),t.lineTo(.5*i,.5*n),t.lineTo(1*i,1*n),t.lineTo(1*i,0),t.lineTo(.5*i,.5*n),t.lineTo(.5*i,1*n),W(t),i=t.o,s.q(t),i},BpmnTaskMessage:function(t,i,n){return t=s.s(),j(t,0,.2*n,!0),t.lineTo(1*i,.2*n),t.lineTo(1*i,.8*n),t.lineTo(0,.8*n),t.lineTo(0,.8*n),W(t),j(t,0,.2*n,!1),t.lineTo(.5*i,.5*n),t.lineTo(1*i,.2*n),t.fb(!1),i=t.o,s.q(t),i},BpmnTaskScript:function(t,i,n){return t=s.s(),j(t,.7*i,1*n,!0),t.lineTo(.3*i,1*n),T(t,.6*i,.5*n,0,.5*n,.3*i,0),t.lineTo(.7*i,0),T(t,.4*i,.5*n,1*i,.5*n,.7*i,1*n),W(t),j(t,.45*i,.73*n,!1),t.lineTo(.7*i,.73*n),t.moveTo(.38*i,.5*n),t.lineTo(.63*i,.5*n),t.moveTo(.31*i,.27*n),t.lineTo(.56*i,.27*n),t.fb(!1),i=t.o,s.q(t),i},BpmnTaskUser:function(t,i,n){t=s.s(),j(t,0,0,!1),j(t,.335*i,(1-.555)*n,!0),t.lineTo(.335*i,.595*n),t.lineTo(.665*i,.595*n),t.lineTo(.665*i,(1-.555)*n),T(t,.88*i,.46*n,.98*i,.54*n,1*i,.68*n),t.lineTo(1*i,1*n),t.lineTo(0,1*n),t.lineTo(0,.68*n),T(t,.02*i,.54*n,.12*i,.46*n,.335*i,(1-.555)*n),t.lineTo(.365*i,.405*n);var e=.5-.285,o=Math.PI/4,r=4*(1-Math.cos(o))/(3*Math.sin(o)),o=r*e,r=r*e;return T(t,(.5-(o+e)/2)*i,(e+(e+r)/2)*n,(.5-e)*i,(e+r)*n,(.5-e)*i,e*n),T(t,(.5-e)*i,(e-r)*n,(.5-o)*i,(e-e)*n,.5*i,(e-e)*n),T(t,(.5+o)*i,(e-e)*n,(.5+e)*i,(e-r)*n,(.5+e)*i,e*n),T(t,(.5+e)*i,(e+r)*n,(.5+(o+e)/2)*i,(e+(e+r)/2)*n,.635*i,.405*n),t.lineTo(.635*i,.405*n),t.lineTo(.665*i,(1-.555)*n),t.lineTo(.665*i,.595*n),t.lineTo(.335*i,.595*n),j(t,.2*i,1*n,!1),t.lineTo(.2*i,.8*n),j(t,.8*i,1*n,!1),t.lineTo(.8*i,.8*n),i=t.o,s.q(t),i},BpmnEventConditional:function(t,i,n){return t=s.s(),j(t,.1*i,0,!0),t.lineTo(.9*i,0),t.lineTo(.9*i,1*n),t.lineTo(.1*i,1*n),W(t),j(t,.2*i,.2*n,!1),t.lineTo(.8*i,.2*n),t.moveTo(.2*i,.4*n),t.lineTo(.8*i,.4*n),t.moveTo(.2*i,.6*n),t.lineTo(.8*i,.6*n),t.moveTo(.2*i,.8*n),t.lineTo(.8*i,.8*n),t.fb(!1),i=t.o,s.q(t),i},BpmnEventError:function(t,i,n){return t=s.s(),j(t,0,1*n,!0),t.lineTo(.33*i,0),t.lineTo(.66*i,.5*n),t.lineTo(1*i,0),t.lineTo(.66*i,1*n),t.lineTo(.33*i,.5*n),W(t),i=t.o,s.q(t),i},BpmnEventEscalation:function(t,i,n){return t=s.s(),j(t,0,0,!1),j(t,1*i,1*n,!1),j(t,.1*i,1*n,!0),t.lineTo(.5*i,0),t.lineTo(.9*i,1*n),t.lineTo(.5*i,.5*n),W(t),i=t.o,s.q(t),i},BpmnEventTimer:function(t,i,n){t=s.s();var e=.5*rt;return j(t,1*i,.5*n,!0),T(t,1*i,(.5+e)*n,(.5+e)*i,1*n,.5*i,1*n),T(t,(.5-e)*i,1*n,0,(.5+e)*n,0,.5*n),T(t,0,(.5-e)*n,(.5-e)*i,0,.5*i,0),T(t,(.5+e)*i,0,1*i,(.5-e)*n,1*i,.5*n),j(t,.5*i,0,!1),t.lineTo(.5*i,.15*n),t.moveTo(.5*i,1*n),t.lineTo(.5*i,.85*n),t.moveTo(0,.5*n),t.lineTo(.15*i,.5*n),t.moveTo(1*i,.5*n),t.lineTo(.85*i,.5*n),t.moveTo(.5*i,.5*n),t.lineTo(.58*i,.1*n),t.moveTo(.5*i,.5*n),t.lineTo(.78*i,.54*n),t.fb(!1),i=t.o,i.ae=Li,s.q(t),i}},by;for(by in co)co[by.toLowerCase()]=by;var ba={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function u1(t){var i=No[t];if(i===void 0){var n=t.toLowerCase();if(n==="none")return"None";if(i=No[n],i===void 0){var e=null,o;for(o in ba)if(o.toLowerCase()===n){e=o;break}if(e!==null)return t=zl(ba[e],!1),No[e]=t,n!==e&&(No[n]=e),e}}return typeof i=="string"?i:i instanceof et?t:null}function L(t){A.call(this,t),this.Q=2408959,this.zl=this.Ci="",this.dt=this.at=this.mt=this.js=null,this.ot="",this.Ai=this.Vr=this.nt=this.fn=null,this.ct="",this.np=null,this.bt=Vv,this.et="",this.op=null,this.Ld="",this.iw=this.hr=this.kl=null,this.Xi=new D(NaN,NaN).freeze(),this.os="",this.Cl=null,this.ps=gi,this.xs=ax,this.qs=px,this.Br=null,this.ks=f1,this.hn=fx,this.gn="gray",this.Eg=4,this.uD=-1,this.Mt=NaN,this.UG=new O,this.Um=null,this.lk=NaN}s.La(L,A),s.ga("Part",L),L.prototype.cloneProtected=function(t){A.prototype.cloneProtected.call(this,t),t.Q=this.Q&-4097|49152,t.Ci=this.Ci,t.zl=this.zl,t.js=this.js,t.mt=this.mt,t.at=this.at,t.dt=this.dt,t.ot=this.ot,t.nt=this.nt,t.Vr=this.Vr,t.Ai=null,t.ct=this.ct,t.bt=this.bt.S(),t.et=this.et,t.Ld=this.Ld,t.hr=this.hr,t.Xi.assign(this.Xi),t.os=this.os,t.ps=this.ps.S(),t.xs=this.xs.S(),t.qs=this.qs.S(),t.Br=this.Br,t.ks=this.ks,t.hn=this.hn.S(),t.gn=this.gn,t.Eg=this.Eg,t.Mt=this.Mt},L.prototype.pi=function(t){A.prototype.pi.call(this,t),t.Rk(),t.fn=null,t.np=null,t.op=null,t.Cl=null,t.Um=null},L.prototype.toString=function(){var t=s.pf(Object.getPrototypeOf(this))+"#"+s.Pd(this);return this.data!==null&&(t+="("+qe(this.data)+")"),t},L.LayoutNone=0;var uu;L.LayoutAdded=uu=1;var fu;L.LayoutRemoved=fu=2,L.LayoutShown=4,L.LayoutHidden=8,L.LayoutNodeSized=16;var tc;L.LayoutGroupLayout=tc=32,L.LayoutNodeReplaced=64;var f1;L.LayoutStandard=f1=uu|fu|28|tc|64,L.LayoutAll=16777215,L.prototype.Zn=function(t,i,n,e,o,r,h){var l=this.g;l!==null&&(t===Ei&&i==="elements"?o instanceof A?oh(o,function(u){vy(l,u),sg(l,u)}):o instanceof oi&&gy(l,o):t===zi&&i==="elements"&&(o instanceof A?oh(o,function(u){dy(l,u),hg(l,u)}):o instanceof oi&&my(l,o)),l.bd(t,i,n,e,o,r,h))},L.prototype.updateTargetBindings=L.prototype.Jb=function(t){if(A.prototype.Jb.call(this,t),this.data!==null){t=this.xa.n;for(var i=t.length,n=0;n<i;n++){var e=t[n];e instanceof A&&oh(e,function(o){o.data!==null&&o.Jb()})}}},L.prototype.updateRelationshipsFromData=function(){var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;n instanceof K&&(t=n.Dn(t),i=i.ZH(t),i===null||i instanceof q)&&(this.Ca=i)}}},s.u(L,{key:"key"},function(){var t=this.g;return t===null?void 0:t.$.qb(this.data)},{configurable:!0}),s.u(L,{ex:"adornments"},function(){return this.Ai===null?ro:this.Ai.MF}),L.prototype.findAdornment=L.prototype.Yp=function(t){var i=this.Ai;return i===null?null:i.ka(t)},L.prototype.addAdornment=L.prototype.Ol=function(t,i){if(i!==null){var n=null,e=this.Ai;if(e!==null&&(n=e.ka(t)),n!==i){if(n!==null){var o=n.g;o!==null&&o.remove(n)}e===null&&(this.Ai=e=new tt("string",vt)),i.Ci!==t&&(i.kd=t),e.add(t,i),n=this.g,n!==null&&(n.add(i),i.data=this.data)}}},L.prototype.removeAdornment=L.prototype.Ij=function(t){var i=this.Ai;if(i!==null){var n=i.ka(t);if(n!==null){var e=n.g;e!==null&&e.remove(n)}i.remove(t),i.count===0&&(this.Ai=null)}},L.prototype.clearAdornments=L.prototype.Ut=function(){var t=this.Ai;if(t!==null){for(var i=s.Za(),t=t.i;t.next();)i.push(t.key);for(var t=i.length,n=0;n<t;n++)this.Ij(i[n]);s.ra(i)}},L.prototype.updateAdornments=function(){var t=this.g;if(t!==null){t:{if(this.jb&&this.EJ){var i=this.Fq;if(i!==null&&this.U.I()&&this.isVisible()&&i.Cj()&&i.U.I()){var n=this.Yp("Selection");if(n===null){if(n=this.FJ,n===null&&(n=this instanceof k?t.OI:this instanceof q?t.mI:t.hJ),!(n instanceof vt))break t;Xe(n),n=n.copy(),n!==null&&(this instanceof k&&this.Fq===this.path&&(n.type=dr),n.ub=i)}if(n!==null){var e=n.placeholder;if(e!==null){var o=i.vj(),r=0;i instanceof Y&&(r=i.mb);var h=s.tm();h.m((i.Ja.width+r)*o,(i.Ja.height+r)*o),e.Da=h,s.Lk(h)}n.angle=i.bm(),n.type!==dr&&(e=s.K(),n.location=i.Ya(gi,e),s.v(e)),this.Ol("Selection",n);break t}}}this.Ij("Selection")}for(Rx(this,t),t=this.ex;t.next();)i=t.value,i.Jb(),i.H()}};function Rx(t,i){i.Va.gf.each(function(n){n.isEnabled&&n.updateAdornments(t)}),i.Va.updateAdornments(t)}s.u(L,{layer:"layer"},function(){return this.iw}),s.u(L,{g:"diagram"},function(){var t=this.iw;return t!==null?t.g:null}),s.defineProperty(L,{bg:"layerName"},function(){return this.zl},function(t){var i=this.zl;if(i!==t){s.j(t,"string",L,"layerName");var n=this.g;if((n===null||n.cu(t)!==null&&!n.Sq)&&(this.zl=t,n!==null&&n.Gc(),this.h("layerName",i,t),i=this.layer,i!==null&&i.name!==t&&(n=i.g,n!==null&&(t=n.cu(t),t!==null&&t!==i)))){var e=i.rf(-1,this,!0);if(0<=e&&n.bd(zi,"parts",i,this,null,e,!0),e=t.eq(99999999,this,!0),i.visible!==t.visible&&this.Dd(t.visible),0<=e&&n.bd(Ei,"parts",t,null,this,!0,e),e=this.Tx,e!==null){var o=n.Ua;n.Ua=!0,e(this,i,t),n.Ua=o}}}}),s.defineProperty(L,{Tx:"layerChanged"},function(){return this.js},function(t){var i=this.js;i!==t&&(t!==null&&s.j(t,"function",L,"layerChanged"),this.js=t,this.h("layerChanged",i,t))}),s.defineProperty(L,{mo:"zOrder"},function(){return this.Mt},function(t){var i=this.Mt;if(i!==t){s.j(t,"number",L,"zOrder"),this.Mt=t;var n=this.layer;n!==null&&Sa(n,-1,this),this.h("zOrder",i,t),t=this.g,t!==null&&t.oa()}}),L.prototype.invalidateAdornments=L.prototype.Sd=function(){var t=this.g;t!==null&&(cs(t),!(this.Q&16384)&&(nc(this,!0),t.ye()))};function tp(t){if(ms(t)===!1){var i=t.g;i!==null&&(i.vg.add(t),i.ye()),ec(t,!0),t.Ri()}}function a1(t){if(t.Q|=2097152,ms(t)!==!1){var i=t.position,n=t.location;n.I()&&i.I()||y1(t,i,n);var n=t.pc,e=n.copy();n.Qa(),n.x=i.x,n.y=i.y,n.freeze(),t.ey(e,n),ec(t,!1)}}s.u(L,{cg:"locationObject"},function(){if(this.Cl===null){var t=this.cB;t!==""?(t=this.Cd(t),this.Cl=t!==null?t:this):this.Cl=this instanceof vt?this.type!==dr&&this.placeholder!==null?this.placeholder:this:this}return this.Cl.visible?this.Cl:this}),s.defineProperty(L,{$I:"minLocation"},function(){return this.xs},function(t){var i=this.xs;i.L(t)||(this.xs=t=t.S(),this.h("minLocation",i,t))}),s.defineProperty(L,{UI:"maxLocation"},function(){return this.qs},function(t){var i=this.qs;i.L(t)||(this.qs=t=t.S(),this.h("maxLocation",i,t))}),s.defineProperty(L,{cB:"locationObjectName"},function(){return this.os},function(t){var i=this.os;i!==t&&(this.os=t,this.Cl=null,this.H(),this.h("locationObjectName",i,t))}),s.defineProperty(L,{Gf:"locationSpot"},function(){return this.ps},function(t){var i=this.ps;i.L(t)||(this.ps=t=t.S(),this.H(),this.h("locationSpot",i,t))}),L.prototype.move=function(t){this.position=t},L.prototype.moveTo=L.prototype.moveTo=function(t,i){var n=s.wb(t,i);this.move(n),s.v(n)},L.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return t!==null&&!t.visible?!1:(t=this.g,t!==null&&(t=t.Ka,t.df&&(t=t.Wm.ka(this),t!==null&&t.ny))?!0:(t=this.Ca,!!(t===null||t.$c&&t.isVisible())))},L.prototype.Dd=function(t){var i=this.g;t?(this.J(4),this.Sd(),i!==null&&i.vg.add(this)):(this.J(8),this.Ut()),this.Rk(),i!==null&&(i.Gc(),i.oa())},L.prototype.findObject=L.prototype.Cd=function(t){if(this.name===t)return this;var i=this.Um;if(i===null&&(this.Um=i=new Bn),i[t]!==void 0)return i[t];for(var n=this.xa.n,e=n.length,o=0;o<e;o++){var r=n[o];if(r.name===t)return i[t]=r;if(r instanceof A){if(r.hk===null&&r.xg===null){if(r=r.Cd(t),r!==null)return i[t]=r}else if(wf(r)&&(r=r.xa.first(),r!==null&&r.name===t))return i[t]=r}}return i[t]=null};function lh(t,i,n,e){e===void 0&&(e=new D),n=n.Ud()?kt:n;var o=i.Ja;if(e.m(o.width*n.x+n.offsetX,o.height*n.y+n.offsetY),i===null||i===t)return e;for(i.transform.nb(e),i=i.R;i!==null&&i!==t;)i.transform.nb(e),i=i.R;return t.Wi.nb(e),e.offset(-t.ud.x,-t.ud.y),e}L.prototype.ensureBounds=L.prototype.Ne=function(){gs(this)===!0&&(this instanceof q&&this.hc.each(function(t){t.Ne()}),Gt(this,1/0,1/0)),this.jc()};function Wh(t,i){var n=t.UG,e;isNaN(t.lk)&&(t.lk=Hg(t)),e=t.lk;var o=2*e;if(!t.jm)return n.m(i.x-1-e,i.y-1-e,i.width+2+o,i.height+2+o),n;e=i.x;var o=i.y,l=i.width,u=i.height,r=t.shadowBlur,h=t.KJ,l=l+r,u=u+r;return e-=r/2,o-=r/2,0<h.x?l+=h.x:(e+=h.x,l-=h.x),0<h.y?u+=h.y:(o+=h.y,u-=h.y),n.m(e-1,o-1,l+2,u+2),n}L.prototype.jc=function(){if(this.Ri(),Qe(this)===!1)a1(this);else{var t=this.pc,i=s.vf();i.assign(t),t.Qa();var n=mr(this);this.pj(0,0,this.ud.width,this.ud.height);var e=this.position;y1(this,e,this.location),t.x=e.x,t.y=e.y,t.freeze(),this.ey(i,t),nh(this,!1),i.L(t)?this.If(n):!this.he()||$(i.width,t.width)&&$(i.height,t.height)||0<=this.uD&&this.J(16),s.Bb(i),ec(this,!1)}},L.prototype.ey=function(t,i){var n=this.g;if(n!==null){var e=!1;if(n.ck===!1&&t.I()){var o=s.vf();o.assign(n.Nd),o.BG(n.padding),t.x>o.x&&t.y>o.y&&t.right<o.right&&t.bottom<o.bottom&&i.x>o.x&&i.y>o.y&&i.right<o.right&&i.bottom<o.bottom&&(e=!0),s.Bb(o)}!(this.Q&65536)&&t.L(i)||d1(this,e,n),n.oa(),d0(t,i)||(this instanceof I&&!n.ja.lb&&this.ag(),this.Rk())}},s.defineProperty(L,{location:"location"},function(){return this.Xi},function(t){var i=t.x,n=t.y,e=this.Xi,o=e.x,r=e.y;(o===i||isNaN(o)&&isNaN(i))&&(r===n||isNaN(r)&&isNaN(n))||(t=t.S(),i=t,this instanceof k?i=!1:(this.Xi=i,this.Q|=2097152,Qe(this)===!1&&(tp(this),n=this.ab,n.I()&&(o=n.copy(),n.m(n.x+(i.x-e.x),n.y+(i.y-e.y)),p1(this,this.g,n,o),this.h("position",o,n))),i=!0),i&&this.h("location",e,t))}),B=L.prototype,B.GB=function(t,i){if(this instanceof k||!t.I())return!1;var n=this.g;if(n!==null&&(p1(this,n,t,i),n.ja.lb===!0))return!0;if(this.ab=t,this.Q&=-2097153,n=this.Xi,n.I()){var e=n.copy();n.m(n.x+(t.x-i.x),n.y+(t.y-i.y)),this.h("location",e,n)}return ms(this)===!1&&Qe(this)===!1&&(tp(this),a1(this)),!0};function p1(t,i,n,e){i===null||t instanceof vt||(i=i.Ka,i.sc&&$s(i,t,"position",e.copy(),n.copy(),!1))}B.Ay=function(t,i){var n=this.Xi,e=this.ab;ms(this)||Qe(this)?n.m(NaN,NaN):n.m(n.x+t-e.x,n.y+i-e.y),e.m(t,i),tp(this)},B.HB=function(){this.Q&=-2097153,tp(this)};function y1(t,i,n){var e=s.K(),o=t.Gf,r=t.cg;o.Ud()&&s.k("determineOffset: Part's locationSpot must be real: "+o.toString());var h=r.Ja,l=r instanceof Y?r.mb:0;if(e.bv(0,0,h.width+l,h.height+l,o),r!==t)for(e.offset(-l/2,-l/2),r.transform.nb(e),o=r.R;o!==null&&o!==t;)o.transform.nb(e),o=o.R;t.Wi.nb(e),e.offset(-t.ud.x,-t.ud.y),o=t.g,r=n.I(),h=i.I(),r&&h?t.Q&2097152?c1(t,i,n,o,e):v1(t,i,n,o,e):r?c1(t,i,n,o,e):h&&v1(t,i,n,o,e),t.Q|=2097152,s.v(e),t.Ri()}function c1(t,i,n,e,o){var r=i.x,h=i.y;i.m(n.x-o.x,n.y-o.y),e!==null&&(n=e.Ka,(o=n.dk)||!n.sc||t instanceof vt||$s(n,t,"position",new D(r,h),i,!1),o||i.x===r&&i.y===h||(n=e.gb,e.gb=!0,t.h("position",new D(r,h),i),e.gb=n))}function v1(t,i,n,e,o){var r=n.copy();n.m(i.x+o.x,i.y+o.y),n.L(r)||e===null||(i=e.gb,e.gb=!0,t.h("location",r,n),e.gb=i)}function d1(t,i,n){oc(t,!1),t instanceof I&&n.SA(t),t.layer.Hc||i||n.Gc(),i=t.pc;var e=n.sb;e.I()?mr(t)?(Iv(i,e)||t.If(!1),t.updateAdornments()):i.$f(e)?(t.If(!0),t.updateAdornments()):t.Sd():n.vl=!0}B.im=function(){return!0};function Tf(t,i){var n=t.pc;if(n.width!==0&&n.height!==0&&!isNaN(n.x)&&!isNaN(n.y)&&t.isVisible()){var e=t.transform;t.cc!==null&&(Un(t,i,t.cc,!0,!0),i.fillRect(n.x,n.y,n.width,n.height)),t.cc===null&&t.Gb===null&&(Un(t,i,"rgba(0,0,0,0.4)",!0,!1),i.fillRect(n.x,n.y,n.width,n.height)),t.Gb!==null&&(e.yu()||i.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),n=t.Ja,Un(t,i,t.Gb,!0,!1),i.fillRect(0,0,n.width,n.height),e.yu()||(n=1/(e.m11*e.m22-e.m12*e.m21),i.transform(e.m22*n,-e.m12*n,-e.m21*n,e.m11*n,n*(e.m21*e.dy-e.m22*e.dx),n*(e.m12*e.dx-e.m11*e.dy))))}}B.he=function(){return!0},B.yj=function(){return!0},s.defineProperty(L,{kd:"category"},function(){return this.Ci},function(t){var i=this.Ci;if(i!==t){s.j(t,"string",L,"category");var n=this.g,e=this.data,o=null;if(n!==null&&e!==null&&!(this instanceof vt)){var r=n.$.ja;r.isEnabled&&!r.lb&&(o=this.clone(),o.xa.Pc(this.xa))}this.Ci=t,this.h("category",i,t),n===null||e===null||this instanceof vt?this instanceof vt&&(o=this.Ze,o!==null&&(t=o.Ai,t!==null&&t.remove(i),o.Ol(this.kd,this))):(r=n.$,r.ja.lb||(this instanceof k?(r instanceof K?r.sG(e,t):r instanceof Lt&&r.IJ(e,t),n=Aa(n,t),n!==null&&(Xe(n),n=n.copy(),n!==null&&ic(this,n,i,t))):(r!==null&&r.xy(e,t),n=ag(n,e,t),n!==null&&(Xe(n),n=n.copy(),n===null||n instanceof k||(n.location=this.location,ic(this,n,i,t)))),o!==null&&(i=this.clone(),i.xa.Pc(this.xa),this.h("self",o,i))))}}),s.defineProperty(L,{self:"self"},function(){return this},function(t){ic(this,t,this.kd,t.kd)});var g1=!1;function ic(t,i,n,e){i.constructor===t.constructor||g1||(g1=!0,s.trace('Should not change the class of the Part when changing category from "'+n+'" to "'+e+'"'),s.trace("  Old class: "+s.pf(t)+", new class: "+s.pf(i)+", part: "+t.toString())),t.Ut();var o=t.data;n=t.bg;var r=t.jb,h=t.Og,u=!0,f=!0,a=!1;if(t instanceof I)var l=t,u=l.Bj,f=l.wc,a=l.Mq;i.pi(t),i.cloneProtected(t),t.Ci=e,t.H(),t.oa(),i=t.g,e=!0,i!==null&&(e=i.gb,i.gb=!0),t.Zd=o,o!==null&&t.Jb(),i!==null&&(i.gb=e),o=t.bg,o!==n&&(t.zl=n,t.bg=o),t instanceof I&&(l=t,l.Bj=u,l.wc=f,l.Mq=a,l.he()&&l.J(64)),t.jb=r,t.Og=h}L.prototype.canCopy=function(){if(!this.LH)return!1;var t=this.layer;return t===null?!0:t.Ck?(t=t.g,t===null?!0:!!t.Ck):!1},L.prototype.canDelete=function(){if(!this.PH)return!1;var t=this.layer;return t===null?!0:t.nn?(t=t.g,t===null?!0:!!t.nn):!1},L.prototype.canEdit=function(){if(!this.QJ)return!1;var t=this.layer;return t===null?!0:t.jx?(t=t.g,t===null?!0:!!t.jx):!1},L.prototype.canGroup=function(){if(!this.nI)return!1;var t=this.layer;return t===null?!0:t.gx?(t=t.g,t===null?!0:!!t.gx):!1},L.prototype.canMove=function(){if(!this.eJ)return!1;var t=this.layer;return t===null?!0:t.Rl?(t=t.g,t===null?!0:!!t.Rl):!1},L.prototype.canReshape=function(){if(!this.sJ)return!1;var t=this.layer;return t===null?!0:t.hx?(t=t.g,t===null?!0:!!t.hx):!1},L.prototype.canResize=function(){if(!this.tJ)return!1;var t=this.layer;return t===null?!0:t.Tt?(t=t.g,t===null?!0:!!t.Tt):!1},L.prototype.canRotate=function(){if(!this.wJ)return!1;var t=this.layer;return t===null?!0:t.ix?(t=t.g,t===null?!0:!!t.ix):!1},L.prototype.canSelect=function(){if(!this.nm)return!1;var t=this.layer;return t===null?!0:t.Bf?(t=t.g,t===null?!0:!!t.Bf):!1},s.defineProperty(L,{LH:"copyable"},function(){return(this.Q&1)!==0},function(t){var i=(this.Q&1)!==0;i!==t&&(this.Q^=1,this.h("copyable",i,t))}),s.defineProperty(L,{PH:"deletable"},function(){return(this.Q&2)!==0},function(t){var i=(this.Q&2)!==0;i!==t&&(this.Q^=2,this.h("deletable",i,t))}),s.defineProperty(L,{QJ:"textEditable"},function(){return(this.Q&4)!==0},function(t){var i=(this.Q&4)!==0;i!==t&&(this.Q^=4,this.h("textEditable",i,t),this.Sd())}),s.defineProperty(L,{nI:"groupable"},function(){return(this.Q&8)!==0},function(t){var i=(this.Q&8)!==0;i!==t&&(this.Q^=8,this.h("groupable",i,t))}),s.defineProperty(L,{eJ:"movable"},function(){return(this.Q&16)!==0},function(t){var i=(this.Q&16)!==0;i!==t&&(this.Q^=16,this.h("movable",i,t))}),s.defineProperty(L,{EJ:"selectionAdorned"},function(){return(this.Q&32)!==0},function(t){var i=(this.Q&32)!==0;i!==t&&(this.Q^=32,this.h("selectionAdorned",i,t),this.Sd())}),s.defineProperty(L,{XA:"isInDocumentBounds"},function(){return(this.Q&64)!==0},function(t){var i=(this.Q&64)!==0;if(i!==t){this.Q^=64;var n=this.g;n!==null&&n.Gc(),this.h("isInDocumentBounds",i,t)}}),s.defineProperty(L,{HF:"isLayoutPositioned"},function(){return(this.Q&128)!==0},function(t){var i=(this.Q&128)!==0;i!==t&&(this.Q^=128,this.h("isLayoutPositioned",i,t),this.J(t?4:8))}),s.defineProperty(L,{nm:"selectable"},function(){return(this.Q&256)!==0},function(t){var i=(this.Q&256)!==0;i!==t&&(this.Q^=256,this.h("selectable",i,t),this.Sd())}),s.defineProperty(L,{sJ:"reshapable"},function(){return(this.Q&512)!==0},function(t){var i=(this.Q&512)!==0;i!==t&&(this.Q^=512,this.h("reshapable",i,t),this.Sd())}),s.defineProperty(L,{tJ:"resizable"},function(){return(this.Q&1024)!==0},function(t){var i=(this.Q&1024)!==0;i!==t&&(this.Q^=1024,this.h("resizable",i,t),this.Sd())}),s.defineProperty(L,{wJ:"rotatable"},function(){return(this.Q&2048)!==0},function(t){var i=(this.Q&2048)!==0;i!==t&&(this.Q^=2048,this.h("rotatable",i,t),this.Sd())}),s.defineProperty(L,{jb:"isSelected"},function(){return(this.Q&4096)!==0},function(t){var i=(this.Q&4096)!==0;if(i!==t){var n=this.g;if(!t||this.canSelect()&&!(n!==null&&n.selection.count>=n.VI)){this.Q^=4096;var e=!1;if(n!==null){e=n.gb,n.gb=!0;var o=n.selection;o.Qa(),t?o.add(this):o.remove(this),o.freeze()}this.h("isSelected",i,t),this.Sd(),t=this.GJ,t!==null&&t(this),n!==null&&(n.ye(),n.gb=e)}}}),s.defineProperty(L,{Og:"isHighlighted"},function(){return(this.Q&524288)!==0},function(t){var i=(this.Q&524288)!==0;if(i!==t){this.Q^=524288;var n=this.g;n!==null&&(n=n.em,n.Qa(),t?n.add(this):n.remove(this),n.freeze()),this.h("isHighlighted",i,t),this.oa(),t=this.qI,t!==null&&t(this)}}),s.defineProperty(L,{jm:"isShadowed"},function(){return(this.Q&8192)!==0},function(t){var i=(this.Q&8192)!==0;i!==t&&(this.Q^=8192,this.h("isShadowed",i,t),this.oa())});function nc(t,i){t.Q=i?t.Q|16384:t.Q&-16385}function ms(t){return(t.Q&32768)!==0}function ec(t,i){t.Q=i?t.Q|32768:t.Q&-32769}function oc(t,i){t.Q=i?t.Q|65536:t.Q&-65537}function mr(t){return(t.Q&131072)!==0}L.prototype.If=function(t){this.Q=t?this.Q|131072:this.Q&-131073};function ip(t,i){t.Q=i?t.Q|1048576:t.Q&-1048577}s.defineProperty(L,{zF:"isAnimated"},function(){return(this.Q&262144)!==0},function(t){var i=(this.Q&262144)!==0;i!==t&&(this.Q^=262144,this.h("isAnimated",i,t))}),s.defineProperty(L,{qI:"highlightedChanged"},function(){return this.Vr},function(t){var i=this.Vr;i!==t&&(t!==null&&s.j(t,"function",L,"highlightedChanged"),this.Vr=t,this.h("highlightedChanged",i,t))}),s.defineProperty(L,{BB:"selectionObjectName"},function(){return this.ot},function(t){var i=this.ot;i!==t&&(this.ot=t,this.fn=null,this.h("selectionObjectName",i,t))}),s.defineProperty(L,{FJ:"selectionAdornmentTemplate"},function(){return this.mt},function(t){var i=this.mt;i!==t&&(this.mt=t,this.h("selectionAdornmentTemplate",i,t))}),s.u(L,{Fq:"selectionObject"},function(){if(this.fn===null){var t=this.BB;t!==null&&t!==""?(t=this.Cd(t),this.fn=t!==null?t:this):this instanceof k?(t=this.path,this.fn=t!==null?t:this):this.fn=this}return this.fn}),s.defineProperty(L,{GJ:"selectionChanged"},function(){return this.nt},function(t){var i=this.nt;i!==t&&(t!==null&&s.j(t,"function",L,"selectionChanged"),this.nt=t,this.h("selectionChanged",i,t))}),s.defineProperty(L,{iG:"resizeAdornmentTemplate"},function(){return this.at},function(t){var i=this.at;i!==t&&(this.at=t,this.h("resizeAdornmentTemplate",i,t))}),s.defineProperty(L,{kG:"resizeObjectName"},function(){return this.ct},function(t){var i=this.ct;i!==t&&(this.ct=t,this.np=null,this.h("resizeObjectName",i,t))}),s.u(L,{jG:"resizeObject"},function(){if(this.np===null){var t=this.kG;t!==null&&t!==""?(t=this.Cd(t),this.np=t!==null?t:this):this.np=this}return this.np}),s.defineProperty(L,{uJ:"resizeCellSize"},function(){return this.bt},function(t){var i=this.bt;i.L(t)||(this.bt=t=t.S(),this.h("resizeCellSize",i,t))}),s.defineProperty(L,{xJ:"rotateAdornmentTemplate"},function(){return this.dt},function(t){var i=this.dt;i!==t&&(this.dt=t,this.h("rotateAdornmentTemplate",i,t))}),s.defineProperty(L,{yJ:"rotateObjectName"},function(){return this.et},function(t){var i=this.et;i!==t&&(this.et=t,this.op=null,this.h("rotateObjectName",i,t))}),s.u(L,{xB:"rotateObject"},function(){if(this.op===null){var t=this.yJ;t!==null&&t!==""?(t=this.Cd(t),this.op=t!==null?t:this):this.op=this}return this.op}),s.defineProperty(L,{text:"text"},function(){return this.Ld},function(t){var i=this.Ld;i!==t&&(this.Ld=t,this.h("text",i,t))}),s.defineProperty(L,{Ca:"containingGroup"},function(){return this.kl},function(t){if(this.he()){var i=this.kl;if(i!==t){t===null||this!==t&&!t.qi(this)||(this===t&&s.k("Cannot make a Group a member of itself: "+this.toString()),s.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.J(fu);var n=this.g;if(i!==null?Sc(i,this):this instanceof q&&n!==null&&n.Ll.remove(this),this.kl=t,t!==null?Tc(t,this):this instanceof q&&n!==null&&n.Ll.add(this),this.J(uu),n!==null){var e=this.data,o=n.$;e!==null&&o instanceof K&&o.EB(e,o.qb(t!==null?t.data:null))}if(e=this.NE,e!==null&&(o=!0,n!==null&&(o=n.Ua,n.Ua=!0),e(this,i,t),n!==null&&(n.Ua=o)),this instanceof q){for(n=new R(L),ps(n,this,!0,0,!0),n=n.i;n.next();)if(e=n.value,e instanceof I)for(e=e.je;e.next();)yu(e.value)}if(this instanceof I){for(e=this.je;e.next();)yu(e.value);n=this.Xb,n!==null&&yu(n)}this.h("containingGroup",i,t),t!==null&&(i=t.layer,i!==null&&Sa(i,-1,t))}}else s.k("cannot set the Part.containingGroup of a Link or Adornment")}),B=L.prototype,B.Rk=function(){var t=this.Ca;t!==null&&(t.H(),t.Lb!==null&&t.Lb.H(),t.ag())},B.oa=function(){var t=this.g;t!==null&&!Qe(this)&&!ms(this)&&this.isVisible()&&this.pc.I()&&t.oa(Wh(this,this.pc))},B.H=function(){A.prototype.H.call(this);var t=this.g;t!==null&&(t.vg.add(this),this instanceof I&&this.Xb!==null&&gf(this.Xb),t.ye(!0))},B.qu=function(t){t||(t=this.kl,t!==null&&Tc(t,this))},B.ru=function(t){t||(t=this.kl,t!==null&&Sc(t,this))},B.zn=function(){var t=this.data;if(t!==null){var i=this.g;i!==null&&(i=i.$,i!==null&&i.qy(t))}},s.defineProperty(L,{NE:"containingGroupChanged"},function(){return this.hr},function(t){var i=this.hr;i!==t&&(t!==null&&s.j(t,"function",L,"containingGroupChanged"),this.hr=t,this.h("containingGroupChanged",i,t))}),L.prototype.findSubGraphLevel=function(){return rc(this,this)};function rc(t,i){var n=i.Ca;return n!==null?1+rc(t,n):i instanceof I&&(n=i.Xb,n!==null)?rc(t,n):0}L.prototype.findTopLevelPart=function(){return sc(this,this)};function sc(t,i){var n=i.Ca;return n!==null||i instanceof I&&(n=i.Xb,n!==null)?sc(t,n):i}s.u(L,{jq:"isTopLevel"},function(){return!(this.Ca!==null||this instanceof I&&this.Xb!==null)}),L.prototype.isMemberOf=L.prototype.qi=function(t){return t instanceof q?hc(this,this,t):!1};function hc(t,i,n){if(i===n||n===null)return!1;var e=i.Ca;return e===null||e!==n&&!hc(t,e,n)?i instanceof I&&(i=i.Xb,i!==null)?hc(t,i,n):!1:!0}L.prototype.findCommonContainingGroup=L.prototype.XH=function(t){if(t===null)return null;if(this===t)return this.Ca;for(var i=this;i!==null;){if(i instanceof q&&ip(i,!0),i instanceof I){var n=i.Xb;n!==null&&(i=n)}i=i.Ca}for(var e=null,i=t;i!==null;){if(i.Q&1048576){e=i;break}i instanceof I&&(n=i.Xb,n!==null&&(i=n)),i=i.Ca}for(i=this;i!==null;)i instanceof q&&ip(i,!1),i instanceof I&&(n=i.Xb,n!==null&&(i=n)),i=i.Ca;return e},s.defineProperty(L,{KI:"layoutConditions"},function(){return this.ks},function(t){var i=this.ks;i!==t&&(this.ks=t,this.h("layoutConditions",i,t))}),L.prototype.canLayout=function(){if(!this.HF||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.Hc||this instanceof I&&this.Df)},L.prototype.invalidateLayout=L.prototype.J=function(t){t===void 0&&(t=16777215);var i;if(this.HF&&t&this.KI?(i=this.layer,i!==null&&i.Hc||this instanceof I&&this.Df?i=!1:(i=this.g,i=!(i!==null&&i.ja.lb))):i=!1,i)if(i=this.kl,i!==null){var n=i.Ub;n!==null?n.J():i.J(t)}else t=this.g,t!==null&&(n=t.Ub,n!==null&&n.J())};function m1(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.Hc)):!1}s.defineProperty(L,{xx:"dragComputation"},function(){return this.Br},function(t){var i=this.Br;i!==t&&(t!==null&&s.j(t,"function",L,"dragComputation"),this.Br=t,this.h("dragComputation",i,t))}),s.defineProperty(L,{KJ:"shadowOffset"},function(){return this.hn},function(t){var i=this.hn;i.L(t)||(this.hn=t=t.S(),this.oa(),this.h("shadowOffset",i,t))}),s.defineProperty(L,{shadowColor:"shadowColor"},function(){return this.gn},function(t){var i=this.gn;i!==t&&(this.gn=t,this.oa(),this.h("shadowColor",i,t))}),s.defineProperty(L,{shadowBlur:"shadowBlur"},function(){return this.Eg},function(t){var i=this.Eg;i!==t&&(this.Eg=t,this.oa(),this.h("shadowBlur",i,t))});function vt(t){arguments.length===0?L.call(this,Ka):L.call(this,t),this.Q&=-257,this.zl="Adornment",this.Kc=null,this.ED=0,this.rE=!1,this.Lb=this.$g=null}s.La(vt,L),s.ga("Adornment",vt),vt.prototype.toString=function(){var t=this.Ze;return"Adornment("+this.kd+")"+(t!==null?t.toString():"")},vt.prototype.updateRelationshipsFromData=function(){},vt.prototype.Hu=function(t){var i=this.ub.W,n=this.ub;if(i instanceof k&&n instanceof Y){var e=i.path,n=e.of;for(i.Hu(t),n=e.of,t=this.xa.n,i=t.length,e=0;e<i;e++){var o=t[e];o.ff&&o instanceof Y&&(o.Sa=n)}}},s.u(vt,{placeholder:"placeholder"},function(){return this.Lb}),s.defineProperty(vt,{ub:"adornedObject"},function(){return this.Kc},function(t){var i=this.Ze,n=null;t!==null&&(n=t.W),i===null||t!==null&&i===n||i.Ij(this.kd),this.Kc=t,n!==null&&n.Ol(this.kd,this)}),s.u(vt,{Ze:"adornedPart"},function(){var t=this.Kc;return t!==null?t.W:null}),vt.prototype.im=function(){var t=this.Kc;return t===null?!0:(t=t.W,t===null||!Qe(t))},vt.prototype.he=function(){return!1},s.u(vt,{Ca:"containingGroup"},function(){return null}),vt.prototype.Zn=function(t,i,n,e,o,r,h){if(t===Ei&&i==="elements")if(o instanceof nn){var l=o;this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else o instanceof A&&(l=o.bu(function(u){return u instanceof nn}),l instanceof nn&&(this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else t===zi&&i==="elements"&&this.Lb!==null&&(e===this.Lb?this.Lb=null:e instanceof A&&this.Lb.hm(e)&&(this.Lb=null));L.prototype.Zn.call(this,t,i,n,e,o,r,h)},vt.prototype.updateAdornments=function(){},vt.prototype.zn=function(){};function I(t){L.call(this,t),this.ya=13,this.rc=new E(k),this.Ht=this.Yo=this.Bl=this.ms=this.ls=null,this.ar=ux,this.Ie=this.Lh=null,this.Xs=lc,this.Ak=!1}s.La(I,L),s.ga("Node",I),I.prototype.cloneProtected=function(t){L.prototype.cloneProtected.call(this,t),t.ya=this.ya,t.ya=this.ya&-17,t.ls=this.ls,t.ms=this.ms,t.Bl=this.Bl,t.Ht=this.Ht,t.ar=this.ar.S(),t.Xs=this.Xs},I.prototype.pi=function(t){L.prototype.pi.call(this,t),t.ag(),t.Lh=this.Lh,t.Ie=null};var $h;I.DirectionDefault=$h=s.p(I,"DirectionDefault",0),I.DirectionAbsolute=s.p(I,"DirectionAbsolute",1);var x1;I.DirectionRotatedNode=x1=s.p(I,"DirectionRotatedNode",2);var au;I.DirectionRotatedNodeOrthogonal=au=s.p(I,"DirectionRotatedNodeOrthogonal",3),I.SpreadingNone=s.p(I,"SpreadingNone",10);var lc;I.SpreadingEvenly=lc=s.p(I,"SpreadingEvenly",11);var uc;I.SpreadingPacked=uc=s.p(I,"SpreadingPacked",12);function w1(t,i){i!==null&&(t.Lh===null&&(t.Lh=new R(cu)),t.Lh.add(i))}function M1(t,i,n,e){if(i===null||t.Lh===null)return null;for(var o=t.Lh.i;o.next();){var r=o.value;if(r.qq===t&&r.Mu===i&&r.iy===n&&r.jy===e||r.qq===i&&r.Mu===t&&r.iy===e&&r.jy===n)return r}return null}I.prototype.invalidateLinkBundle=function(t,i,n){i==null&&(i=""),n==null&&(n=""),t=M1(this,t,i,n),t!==null&&t.fq()},I.prototype.Zn=function(t,i,n,e,o,r,h){t===Ei&&i==="elements"?this.Ie=null:t===zi&&i==="elements"&&(this.Ie=null),L.prototype.Zn.call(this,t,i,n,e,o,r,h)},I.prototype.invalidateConnectedLinks=I.prototype.ag=function(t){t===void 0&&(t=null);for(var i=this.je;i.next();){var n=i.value;t!==null&&t.contains(n)||(ye(this,n.gc),ye(this,n.zc),n.Tb())}};function P1(t,i){for(var n=t.je;n.next();){var e=n.value;(e.gc===i||e.zc===i)&&(ye(t,e.gc),ye(t,e.zc),e.Tb())}}function ye(t,i){if(i!==null){var n=i.Ws;n!==null&&n.fq(),n=t.Ca,n===null||n.$c||ye(n,n.port)}}I.prototype.im=function(){return!0},s.defineProperty(I,{lJ:"portSpreading"},function(){return this.Xs},function(t){var i=this.Xs;i!==t&&(this.Xs=t,this.h("portSpreading",i,t),t=this.g,t!==null&&t.ja.lb||this.ag())}),s.defineProperty(I,{lA:"avoidable"},function(){return(this.ya&8)!==0},function(t){var i=(this.ya&8)!==0;if(i!==t){this.ya^=8;var n=this.g;n!==null&&n.SA(this),this.h("avoidable",i,t)}}),s.defineProperty(I,{uH:"avoidableMargin"},function(){return this.ar},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,I,"avoidableMargin");var i=this.ar;if(!i.L(t)){this.ar=t=t.S();var n=this.g;n!==null&&n.SA(this),this.h("avoidableMargin",i,t)}}),I.prototype.getAvoidableRect=function(t){return t.set(this.U),t.bx(this.uH),t},I.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.Ca;return t},I.prototype.isVisible=function(){if(!L.prototype.isVisible.call(this))return!1;var t=!0,i=th,n=this.g;if(n!==null){if(t=n.Ka,t.df&&(t=t.Wm.ka(this),t!==null&&t.ny))return!0;t=n.Vd,i=n.VB}if(i===th){if(n=this.Kk(),n!==null&&!n.wc)return!1}else if(i===py){if(n=t?this.cF():this.dF(),0<n.count&&n.all(function(e){return!e.wc}))return!1}else if(i===yy&&(n=t?this.cF():this.dF(),0<n.count&&n.any(function(e){return!e.wc})))return!1;return n=this.Xb,n!==null?n.isVisible():!0},I.prototype.Dd=function(t){L.prototype.Dd.call(this,t);for(var i=this.je;i.next();)i.value.Dd(t)},s.u(I,{je:"linksConnected"},function(){return this.rc.i}),I.prototype.findLinksConnected=I.prototype.aF=function(t){if(t===void 0&&(t=null),t===null)return this.rc.i;var i=new Bi(this.rc),n=this;return i.wq=function(e){return e.V===n&&e.Ng===t||e.Z===n&&e.Jh===t},i},I.prototype.findLinksOutOf=I.prototype.Ex=function(t){t===void 0&&(t=null);var i=new Bi(this.rc),n=this;return i.wq=function(e){return e.V!==n?!1:t===null?!0:e.Ng===t},i},I.prototype.findLinksInto=I.prototype.Mg=function(t){t===void 0&&(t=null);var i=new Bi(this.rc),n=this;return i.wq=function(e){return e.Z!==n?!1:t===null?!0:e.Jh===t},i},I.prototype.findNodesConnected=I.prototype.bF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var o=e.value;o.V===this?(t===null||o.Ng===t)&&(o=o.Z,i!==null?i.add(o):n!==null&&n!==o?(i=new R(I),i.add(n),i.add(o)):n=o):o.Z!==this||t!==null&&o.Jh!==t||(o=o.V,i!==null?i.add(o):n!==null&&n!==o?(i=new R(I),i.add(n),i.add(o)):n=o)}return i!==null?i.i:n!==null?new Ji(n):ro},I.prototype.findNodesOutOf=I.prototype.dF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var o=e.value;o.V!==this||t!==null&&o.Ng!==t||(o=o.Z,i!==null?i.add(o):n!==null&&n!==o?(i=new R(I),i.add(n),i.add(o)):n=o)}return i!==null?i.i:n!==null?new Ji(n):ro},I.prototype.findNodesInto=I.prototype.cF=function(t){t===void 0&&(t=null);for(var i=null,n=null,e=this.rc.i;e.next();){var o=e.value;o.Z!==this||t!==null&&o.Jh!==t||(o=o.V,i!==null?i.add(o):n!==null&&n!==o?(i=new R(I),i.add(n),i.add(o)):n=o)}return i!==null?i.i:n!==null?new Ji(n):ro},I.prototype.findLinksBetween=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);var e=new Bi(this.rc),o=this;return e.wq=function(r){return!((r.V!==o||r.Z!==t||i!==null&&r.Ng!==i||n!==null&&r.Jh!==n)&&(r.V!==t||r.Z!==o||n!==null&&r.Ng!==n||i!==null&&r.Jh!==i))},e},I.prototype.findLinksTo=function(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);var e=new Bi(this.rc),o=this;return e.wq=function(r){return!(r.V!==o||r.Z!==t||i!==null&&r.Ng!==i||n!==null&&r.Jh!==n)},e},s.defineProperty(I,{LI:"linkConnected"},function(){return this.ls},function(t){var i=this.ls;i!==t&&(t!==null&&s.j(t,"function",I,"linkConnected"),this.ls=t,this.h("linkConnected",i,t))}),s.defineProperty(I,{MI:"linkDisconnected"},function(){return this.ms},function(t){var i=this.ms;i!==t&&(t!==null&&s.j(t,"function",I,"linkDisconnected"),this.ms=t,this.h("linkDisconnected",i,t))}),s.defineProperty(I,{Xx:"linkValidation"},function(){return this.Bl},function(t){var i=this.Bl;i!==t&&(t!==null&&s.j(t,"function",I,"linkValidation"),this.Bl=t,this.h("linkValidation",i,t))});function np(t,i,n){ye(t,n);var e=t.rc.contains(i);if(e||t.rc.add(i),!e||i.V===i.Z){var o=t.LI;if(o!==null){var r=!0,h=t.g;h!==null&&(r=h.Ua,h.Ua=!0),o(t,i,n),h!==null&&(h.Ua=r)}}!e&&i.bc&&(n=i.V,i=i.Z,n!==null&&i!==null&&n!==i&&(e=!0,h=t.g,h!==null&&(e=h.Vd),t=e?i:n,o=e?n:i,t.Ak||(t.Ak=o),!o.Bj||h!==null&&h.ja.lb||(e?n===o&&(o.Bj=!1):i===o&&(o.Bj=!1))))}function ep(t,i,n){ye(t,n);var e=t.rc.remove(i);if(e||i.Z===i.V){var o=t.MI,r=t.g;if(o!==null){var h=!0;r!==null&&(h=r.Ua,r.Ua=!0),o(t,i,n),r!==null&&(r.Ua=h)}}e&&i.bc&&(n=!0,r!==null&&(n=r.Vd),t=n?i.Z:i.V,i=n?i.V:i.Z,t!==null&&(t.Ak=!1),i===null||i.Bj||(i.rc.count===0?(i.Ak=null,r!==null&&r.ja.lb||(i.Bj=!0)):Sf(i)))}function Sf(t){if(t.Ak=!1,t.rc.count!==0){var i=!0,n=t.g;if(n===null||!n.ja.lb){for(n!==null&&(i=n.Vd),n=t.rc.i;n.next();){var e=n.value;if(e.bc){if(i){if(e.V===t){t.Bj=!1;return}}else if(e.Z===t){t.Bj=!1;return}}}t.Bj=!0}}}I.prototype.updateRelationshipsFromData=function(){L.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;n instanceof Lt&&(t=n.Fn(t),t=i.Oe(t),n=this.Kk(),t!==n&&(n=this.Bn(),t!==null?n!==null?i.Vd?n.V=t:n.Z=t:La(i,t,this):n!==null&&fy(i,n,!1)))}}},I.prototype.qu=function(t){L.prototype.qu.call(this,t),t||(Sf(this),t=this.Yo,t!==null&&F1(t,this))},I.prototype.ru=function(t){L.prototype.ru.call(this,t),t||(t=this.Yo,t!==null&&t.yf!==null&&(t.yf.remove(this),t.H()))},I.prototype.zn=function(){if(0<this.rc.count){var t=this.g;if(t!==null)for(var i=t.pb.WE,n=this.rc.copy().i;n.next();){var e=n.value;i?t.remove(e):(e.V===this&&(e.V=null),e.Z===this&&(e.Z=null))}}this.Xb=null,L.prototype.zn.call(this)},s.u(I,{Df:"isLinkLabel"},function(){return this.Yo!==null}),s.defineProperty(I,{Xb:"labeledLink"},function(){return this.Yo},function(t){var i=this.Yo;if(i!==t){var n=this.g,e=this.data;if(i!==null){if(i.yf!==null&&(i.yf.remove(this),i.H()),n!==null&&e!==null&&!n.ja.lb){var o=i.data,r=n.$;if(o!==null&&r instanceof K){var h=r.qb(e);h!==void 0&&r.qJ(o,h)}}this.Ca=null}this.Yo=t,t!==null&&(F1(t,this),n===null||e===null||n.ja.lb||(o=t.data,r=n.$,o!==null&&r instanceof K&&(h=r.qb(e),h!==void 0&&r.yE(o,h))),this.Ca=t.Ca),gf(this),this.h("labeledLink",i,t)}}),I.prototype.findPort=I.prototype.EA=function(t){if(this.Ie===null){if(t===""&&this.Qk===!1)return this;T1(this)}var i=this.Ie.ka(t);return i!==null||t!==""&&(i=this.Ie.ka(""),i!==null)?i:this},s.u(I,{port:"port"},function(){return this.EA("")}),s.u(I,{ports:"ports"},function(){return this.Ie===null&&T1(this),this.Ie.MF});function T1(t){t.Ie===null?t.Ie=new tt("string",N):t.Ie.clear(),xf(t,t,function(i,n){S1(i,n)}),t.Ie.count===0&&t.Ie.add("",t)}function S1(t,i){var n=i.le;n!==null&&t.Ie!==null&&t.Ie.add(n,i)}function fc(t,i,n){var e=i.le;if(e!==null&&(t.Ie!==null&&t.Ie.remove(e),i=t.g,i!==null&&n)){for(n=null,e=t.aF(e);e.next();)t=e.value,n===null&&(n=s.Za()),n.push(t);if(n!==null){for(e=0;e<n.length;e++)t=n[e],i.remove(t);s.ra(n)}}}I.prototype.isInTreeOf=function(t){if(t===null||t===this)return!1;var i=!0,n=this.g;if(n!==null&&(i=n.Vd),n=this,i)for(;n!==t;){for(var i=null,e=n.rc.i;e.next();){var o=e.value;if(o.bc&&(i=o.V,i!==n&&i!==this))break}if(i===this||i===null||i===n)return!1;n=i}else for(;n!==t;){for(i=null,e=n.rc.i;e.next()&&(o=e.value,!o.bc||(i=o.Z,i===n||i===this)););if(i===this||i===null||i===n)return!1;n=i}return!0},I.prototype.findTreeRoot=function(){var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this,t)for(;;){for(var t=null,n=i.rc.i;n.next();){var e=n.value;if(e.bc&&(t=e.V,t!==i&&t!==this))break}if(t===this)return this;if(t===null||t===i)return i;i=t}else for(;;){for(t=null,n=i.rc.i;n.next()&&(e=n.value,!e.bc||(t=e.Z,t===i||t===this)););if(t===this)return this;if(t===null||t===i)return i;i=t}},I.prototype.findCommonTreeParent=function(t){if(t===null)return null;if(this===t)return this;for(var i=this;i!==null;)ip(i,!0),i=i.Kk();for(var n=null,i=t;i!==null;){if(i.Q&1048576){n=i;break}i=i.Kk()}for(i=this;i!==null;)ip(i,!1),i=i.Kk();return n},I.prototype.findTreeParentLink=I.prototype.Bn=function(){var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this.rc.i,t){for(;i.next();)if(t=i.value,t.bc&&t.V!==this)return t}else for(;i.next();)if(t=i.value,t.bc&&t.Z!==this)return t;return null},I.prototype.findTreeParentNode=I.prototype.Kk=function(){var i=this.Ak;if(i===null)return null;if(i instanceof I)return i;var t=!0,i=this.g;if(i!==null&&(t=i.Vd),i=this.rc.i,t){for(;i.next();)if(t=i.value,t.bc&&(t=t.V,t!==this))return this.Ak=t}else for(;i.next();)if(t=i.value,t.bc&&(t=t.Z,t!==this))return this.Ak=t;return this.Ak=null},I.prototype.findTreeParentChain=function(){function t(n,e){if(n!==null){e.add(n);var o=n.Bn();o!==null&&(e.add(o),t(n.Kk(),e))}}var i=new R(L);return t(this,i),i},I.prototype.findTreeLevel=function(){return k1(this,this)};function k1(t,i){var n=i.Kk();return n===null?0:1+k1(t,n)}I.prototype.findTreeChildrenLinks=I.prototype.Gx=function(){var t=!0,i=this.g;i!==null&&(t=i.Vd);var i=new Bi(this.rc),n=this;return i.wq=t?function(e){return!!(e.bc&&e.V===n)}:function(e){return!!(e.bc&&e.Z===n)},i},I.prototype.findTreeChildrenNodes=I.prototype.fF=function(){var t=!0,i=this.g;i!==null&&(t=i.Vd);var n=i=null,e=this.rc.i;if(t)for(;e.next();)t=e.value,t.bc&&t.V===this&&(t=t.Z,i!==null?i.add(t):n!==null&&n!==t?(i=new E(I),i.add(n),i.add(t)):n=t);else for(;e.next();)t=e.value,t.bc&&t.Z===this&&(t=t.V,i!==null?i.add(t):n!==null&&n!==t?(i=new E(I),i.add(n),i.add(t)):n=t);return i!==null?i.i:n!==null?new Ji(n):ro},I.prototype.findTreeParts=function(t){t===void 0&&(t=1/0),s.j(t,"number",I,"findTreeParts:level");var i=new R(L);return ps(i,this,!1,t,!0),i},I.prototype.collapseTree=I.prototype.collapseTree=function(t){t===void 0&&(t=1),s.Ad(t,I,"collapseTree:level"),1>t&&(t=1);var i=this.g;if(i!==null&&!i.yh){i.yh=!0;var n=new R(I);n.add(this),N1(this,n,i.Vd,t,i.Ka,this,i.VB===th),i.yh=!1}};function N1(t,i,n,e,o,r,h){if(1<e)for(var l=n?t.Ex():t.Mg();l.next();){var u=l.value;u.bc&&(u=u.JA(t),u===null||u===t||i.contains(u)||(i.add(u),N1(u,i,n,e-1,o,r,h)))}else C1(t,i,n,o,r,h)}function C1(t,i,n,e,o,r){for(var h=o===t?!0:t.wc,l=n?t.Ex():t.Mg();l.next();){var u=l.value;if(u.bc&&(u=u.JA(t),u!==null&&u!==t)){var f=i.contains(u);f||i.add(u),h&&(r&&ey(e,u,o),u.Rk(),u.Dd(!1)),u.wc&&(u.Mq=u.wc,f||C1(u,i,n,e,o,r))}}t.wc=!1}I.prototype.expandTree=I.prototype.expandTree=function(t){t===void 0&&(t=2),s.Ad(t,I,"expandTree:level"),2>t&&(t=2);var i=this.g;if(i!==null&&!i.yh){i.yh=!0;var n=new R(I);n.add(this),j1(this,n,i.Vd,t,i.Ka,this,i.VB===th),i.yh=!1}};function j1(t,i,n,e,o,r,h){for(var l=r===t?!1:t.wc,u=n?t.Ex():t.Mg();u.next();){var f=u.value;f.bc&&(l||f.Mf||f.Tb(),f=f.JA(t),f!==null&&f!==t&&!i.contains(f)&&(i.add(f),l||(f.Dd(!0),f.Rk(),h&&ny(o,f,r)),2<e||f.Mq))&&(f.Mq=!1,j1(f,i,n,e-1,o,r,h))}t.wc=!0}s.defineProperty(I,{wc:"isTreeExpanded"},function(){return(this.ya&1)!==0},function(t){var i=(this.ya&1)!==0;if(i!==t){this.ya^=1;var n=this.g;if(this.h("isTreeExpanded",i,t),i=this.XJ,i!==null){var e=!0;n!==null&&(e=n.Ua,n.Ua=!0),i(this),n!==null&&(n.Ua=e)}n!==null&&n.ja.lb?this.Dd(t):t?this.expandTree():this.collapseTree()}}),s.defineProperty(I,{Mq:"wasTreeExpanded"},function(){return(this.ya&2)!==0},function(t){var i=(this.ya&2)!==0;i!==t&&(this.ya^=2,this.h("wasTreeExpanded",i,t))}),s.defineProperty(I,{XJ:"treeExpandedChanged"},function(){return this.Ht},function(t){var i=this.Ht;i!==t&&(t!==null&&s.j(t,"function",I,"treeExpandedChanged"),this.Ht=t,this.h("treeExpandedChanged",i,t))}),s.defineProperty(I,{Bj:"isTreeLeaf"},function(){return(this.ya&4)!==0},function(t){var i=(this.ya&4)!==0;i!==t&&(this.ya^=4,this.h("isTreeLeaf",i,t))});function k(){L.call(this,dr),this.Zb=8,this.rg=null,this.Rh="",this.Hg=this.Lr=null,this.li="",this.Gt=null,this.Tq=ce,this.nr=0,this.qr=ce,this.rr=NaN,this.an=ac,this.vt=.5,this.yf=null,this.gd=new E(D).freeze(),this.$g=this.QC=this.KC=this.Bi=this.Oi=this.Sa=this.Dw=this.pp=this.Xe=null,this.Yz=new D,this.Y=this.eE=this.dE=null}s.La(k,L),s.ga("Link",k),k.prototype.cloneProtected=function(t){L.prototype.cloneProtected.call(this,t),t.Zb=this.Zb&-113,t.Rh=this.Rh,t.Lr=this.Lr,t.li=this.li,t.Gt=this.Gt,t.Tq=this.Tq,t.nr=this.nr,t.qr=this.qr,t.rr=this.rr,t.an=this.an,t.vt=this.vt,this.Y!==null&&(t.Y=this.Y.copy())},k.prototype.pi=function(t){L.prototype.pi.call(this,t),this.Rh=t.Rh,this.li=t.li,t.Xe=null,t.Tb(),t.Bi=this.Bi;var i=t.gc;i!==null&&ye(t.V,i),i=t.zc,i!==null&&ye(t.Z,i)},k.prototype.ic=function(t){t.Je===k?(t.value&2)===2?this.sy=t:t===Le||t===Qr||t===pu?this.nf=t:t===op||t===rp||t===sp?this.Jp=t:t!==ac&&t!==ce&&s.k("Unknown Link enum value for a Link property: "+t):L.prototype.ic.call(this,t)};var ac;k.Normal=ac=s.p(k,"Normal",1),k.Orthogonal=s.p(k,"Orthogonal",2),k.AvoidsNodes=s.p(k,"AvoidsNodes",6);var D1;k.AvoidsNodesStraight=D1=s.p(k,"AvoidsNodesStraight",7);var ce;k.None=ce=s.p(k,"None",0);var Le;k.Bezier=Le=s.p(k,"Bezier",9);var Qr;k.JumpGap=Qr=s.p(k,"JumpGap",10);var pu;k.JumpOver=pu=s.p(k,"JumpOver",11);var op;k.End=op=s.p(k,"End",17);var rp;k.Scale=rp=s.p(k,"Scale",18);var sp;k.Stretch=sp=s.p(k,"Stretch",19);var hp;k.OrientAlong=hp=s.p(k,"OrientAlong",21);var kf;k.OrientPlus90=kf=s.p(k,"OrientPlus90",22);var Nf;k.OrientMinus90=Nf=s.p(k,"OrientMinus90",23);var pc;k.OrientOpposite=pc=s.p(k,"OrientOpposite",24);var yc;k.OrientUpright=yc=s.p(k,"OrientUpright",25);var Cf;k.OrientPlus90Upright=Cf=s.p(k,"OrientPlus90Upright",26);var jf;k.OrientMinus90Upright=jf=s.p(k,"OrientMinus90Upright",27);var lp;k.OrientUpright45=lp=s.p(k,"OrientUpright45",28),B=k.prototype,B.Qd=function(){this.Y===null&&(this.Y=new vp)},B.im=function(){var t=this.V;if(t!==null){var i=t.findVisibleNode();if(i!==null&&(t=i),Qe(t)||ms(t))return!1}return t=this.Z,!(t!==null&&(i=t.findVisibleNode(),i!==null&&(t=i),Qe(t)||ms(t)))},B.GB=function(){return!1},B.HB=function(){},B.he=function(){return!1},k.prototype.computeAngle=function(t,i,n){return k.computeAngle(i,n)},k.computeAngle=function(t,i){var n=0;switch(t){default:case ce:n=0;break;case hp:n=i;break;case kf:n=i+90;break;case Nf:n=i-90;break;case pc:n=i+180;break;case yc:n=bu(i),90<n&&270>n&&(n-=180);break;case Cf:n=bu(i+90),90<n&&270>n&&(n-=180);break;case jf:n=bu(i-90),90<n&&270>n&&(n-=180);break;case lp:if(n=bu(i),45<n&&135>n||225<n&&315>n)return 0;90<n&&270>n&&(n-=180)}return bu(n)},s.defineProperty(k,{V:"fromNode"},function(){return this.rg},function(t){var i=this.rg;if(i!==t){var n=this.gc;i!==null&&(this.Hg!==i&&ep(i,this,n),Ff(this),this.J(fu)),this.rg=t,t!==null&&this.Dd(t.isVisible()),this.Oi=null,this.Tb();var e=this.g;if(e!==null){var o=this.data,r=e.$;if(o!==null)if(r instanceof K){var h=t!==null?t.data:null;r.CB(o,r.qb(h))}else r instanceof Lt&&(h=t!==null?t.data:null,e.Vd?r.ti(o,r.qb(h)):(o=e.rk,e.rk=this,i!==null&&r.ti(i.data,void 0),r.ti(h,r.qb(this.Hg!==null?this.Hg.data:null)),e.rk=o))}r=this.gc,h=this.iF,h!==null&&(o=!0,e!==null&&(o=e.Ua,e.Ua=!0),h(this,n,r),e!==null&&(e.Ua=o)),t!==null&&(this.Hg!==t&&np(t,this,r),Df(this),this.J(uu)),this.h("fromNode",i,t),yu(this)}}),s.defineProperty(k,{Ng:"fromPortId"},function(){return this.Rh},function(t){var i=this.Rh;if(i!==t){var n=this.V,e=this.gc;e!==null&&ye(n,e),Ff(this),this.Rh=t;var o=this.gc;if(o!==null&&ye(n,o),n=this.g,n!==null){var r=this.data,h=n.$;r!==null&&h instanceof K&&h.DB(r,t)}e!==o&&(this.Oi=null,this.Tb(),r=this.iF,r!==null&&(h=!0,n!==null&&(h=n.Ua,n.Ua=!0),r(this,e,o),n!==null&&(n.Ua=h))),Df(this),this.h("fromPortId",i,t)}}),s.u(k,{gc:"fromPort"},function(){var t=this.rg;return t===null?null:t.EA(this.Rh)}),s.defineProperty(k,{iF:"fromPortChanged"},function(){return this.Lr},function(t){var i=this.Lr;i!==t&&(t!==null&&s.j(t,"function",k,"fromPortChanged"),this.Lr=t,this.h("fromPortChanged",i,t))}),s.defineProperty(k,{Z:"toNode"},function(){return this.Hg},function(t){var i=this.Hg;if(i!==t){var n=this.zc;i!==null&&(this.rg!==i&&ep(i,this,n),Ff(this),this.J(fu)),this.Hg=t,t!==null&&this.Dd(t.isVisible()),this.Oi=null,this.Tb();var e=this.g;if(e!==null){var o=this.data,r=e.$;if(o!==null)if(r instanceof K){var h=t!==null?t.data:null;r.IB(o,r.qb(h))}else r instanceof Lt&&(h=t!==null?t.data:null,e.Vd?(o=e.rk,e.rk=this,i!==null&&r.ti(i.data,void 0),r.ti(h,r.qb(this.rg!==null?this.rg.data:null)),e.rk=o):r.ti(o,r.qb(h)))}r=this.zc,h=this.FG,h!==null&&(o=!0,e!==null&&(o=e.Ua,e.Ua=!0),h(this,n,r),e!==null&&(e.Ua=o)),t!==null&&(this.rg!==t&&np(t,this,r),Df(this),this.J(uu)),this.h("toNode",i,t),yu(this)}}),s.defineProperty(k,{Jh:"toPortId"},function(){return this.li},function(t){var i=this.li;if(i!==t){var n=this.Z,e=this.zc;e!==null&&ye(n,e),Ff(this),this.li=t;var o=this.zc;if(o!==null&&ye(n,o),n=this.g,n!==null){var r=this.data,h=n.$;r!==null&&h instanceof K&&h.JB(r,t)}e!==o&&(this.Oi=null,this.Tb(),r=this.FG,r!==null&&(h=!0,n!==null&&(h=n.Ua,n.Ua=!0),r(this,e,o),n!==null&&(n.Ua=h))),Df(this),this.h("toPortId",i,t)}}),s.u(k,{zc:"toPort"},function(){var t=this.Hg;return t===null?null:t.EA(this.li)}),s.defineProperty(k,{FG:"toPortChanged"},function(){return this.Gt},function(t){var i=this.Gt;i!==t&&(t!==null&&s.j(t,"function",k,"toPortChanged"),this.Gt=t,this.h("toPortChanged",i,t))}),s.defineProperty(k,{Mb:"fromSpot"},function(){return this.Y!==null?this.Y.$j:an},function(t){this.Qd();var i=this.Y.$j;i.L(t)||(t=t.S(),this.Y.$j=t,this.h("fromSpot",i,t),this.Tb())}),s.defineProperty(k,{am:"fromEndSegmentLength"},function(){return this.Y!==null?this.Y.Yj:NaN},function(t){this.Qd();var i=this.Y.Yj;i!==t&&(0>t&&s.Fa(t,">= 0",k,"fromEndSegmentLength"),this.Y.Yj=t,this.h("fromEndSegmentLength",i,t),this.Tb())}),s.defineProperty(k,{lu:"fromEndSegmentDirection"},function(){return this.Y!==null?this.Y.Xj:$h},function(t){this.Qd();var i=this.Y.Xj;i!==t&&(s.Yt("Link.fromEndSegmentDirection","2.0"),this.Y.Xj=t,this.h("fromEndSegmentDirection",i,t),this.Tb())}),s.defineProperty(k,{mu:"fromShortLength"},function(){return this.Y!==null?this.Y.Zj:NaN},function(t){this.Qd();var i=this.Y.Zj;i!==t&&(this.Y.Zj=t,this.h("fromShortLength",i,t),this.Tb(),this.fe())}),s.defineProperty(k,{Nb:"toSpot"},function(){return this.Y!==null?this.Y.zk:an},function(t){this.Qd();var i=this.Y.zk;i.L(t)||(t=t.S(),this.Y.zk=t,this.h("toSpot",i,t),this.Tb())}),s.defineProperty(k,{um:"toEndSegmentLength"},function(){return this.Y!==null?this.Y.xk:NaN},function(t){this.Qd();var i=this.Y.xk;i!==t&&(0>t&&s.Fa(t,">= 0",k,"toEndSegmentLength"),this.Y.xk=t,this.h("toEndSegmentLength",i,t),this.Tb())}),s.defineProperty(k,{ev:"toEndSegmentDirection"},function(){return this.Y!==null?this.Y.wk:$h},function(t){this.Qd();var i=this.Y.wk;i!==t&&(s.Yt("Link.toEndSegmentDirection","2.0"),this.Y.wk=t,this.h("toEndSegmentDirection",i,t),this.Tb())}),s.defineProperty(k,{fv:"toShortLength"},function(){return this.Y!==null?this.Y.yk:NaN},function(t){this.Qd();var i=this.Y.yk;i!==t&&(this.Y.yk=t,this.h("toShortLength",i,t),this.Tb(),this.fe())});function yu(t){var n=t.V,e=t.Z,i=null,n=i=n!==null?e!==null?n.XH(e):n.Ca:e!==null?e.Ca:null,e=t.kl;if(e!==n){e!==null&&Sc(e,t),t.kl=n,n!==null&&Tc(n,t);var o=t.NE;if(o!==null){var r=!0,h=t.g;h!==null&&(r=h.Ua,h.Ua=!0),o(t,e,n),h!==null&&(h.Ua=r)}!t.Mf||t.dE!==e&&t.eE!==e||t.Tb()}if(t.AI)for(t=t.Ff;t.next();)t.value.Ca=i}k.prototype.Rk=function(){var t=this.Ca;t!==null&&this.V!==t&&this.Z!==t&&t.nx&&L.prototype.Rk.call(this)},k.prototype.getOtherNode=k.prototype.JA=function(t){var i=this.V;return t===i?this.Z:i},k.prototype.getOtherPort=function(t){var i=this.gc;return t===i?this.zc:i},s.u(k,{AI:"isLabeledLink"},function(){return this.yf===null?!1:0<this.yf.count}),s.u(k,{Ff:"labelNodes"},function(){return this.yf===null?ro:this.yf.i});function F1(t,i){t.yf===null&&(t.yf=new R(I)),t.yf.add(i),t.H()}k.prototype.qu=function(t){if(L.prototype.qu.call(this,t),uh(this)&&ap(this,this.U),!t){t=this.rg;var i=null;t!==null&&(i=this.gc,np(t,this,i));var n=this.Hg,e=null;n!==null&&(e=this.zc,n===t&&e===i||np(n,this,e)),Df(this)}},k.prototype.ru=function(t){if(L.prototype.ru.call(this,t),uh(this)&&ap(this,this.U),!t){t=this.rg;var i=null;t!==null&&(i=this.gc,ep(t,this,i));var n=this.Hg,e=null;n!==null&&(e=this.zc,n===t&&e===i||ep(n,this,e)),Ff(this)}},k.prototype.zn=function(){if(this.Mf=!0,this.yf!==null){var t=this.g;if(t!==null)for(var i=this.yf.copy().i;i.next();)t.remove(i.value)}i=this.data,i!==null&&(t=this.g,t!==null&&(t=t.$,t instanceof K?t.py(i):t instanceof Lt&&t.ti(i,void 0)))},k.prototype.updateRelationshipsFromData=function(){var t=this.data;if(t!==null){var i=this.g;if(i!==null){var n=i.$;if(n instanceof K){var e=n.cm(t);if(this.V=e=i.Oe(e),e=n.dm(t),this.Z=e=i.Oe(e),t=n.Nk(t),0<t.length||0<this.Ff.count){if(t.length===1&&this.Ff.count===1){var e=t[0],o=this.Ff.first();if(n.qb(o.data)===e)return}var e=new R().Pc(t),r=new R;if(this.Ff.each(function(u){u.data!==null&&(u=n.qb(u.data),u!==void 0&&r.add(u))}),t=r.copy(),t.oy(e),e=e.copy(),e.oy(r),0<t.count||0<e.count){var h=this;t.each(function(u){u=i.Oe(u),u!==null&&u.Xb===h&&(u.Xb=null)}),e.each(function(u){u=i.Oe(u),u!==null&&u.Xb!==h&&(u.Xb=h)})}}}}}},k.prototype.move=function(t){var i=this.position,n=i.x;for(isNaN(n)&&(n=0),i=i.y,isNaN(i)&&(i=0),n=t.x-n,i=t.y-i,L.prototype.move.call(this,t),this.Ej(n,i),t=this.Ff;t.next();){var e=t.value,o=e.position;e.moveTo(o.x+n,o.y+i)}},s.defineProperty(k,{oJ:"relinkableFrom"},function(){return(this.Zb&1)!==0},function(t){var i=(this.Zb&1)!==0;i!==t&&(this.Zb^=1,this.h("relinkableFrom",i,t),this.Sd())}),s.defineProperty(k,{pJ:"relinkableTo"},function(){return(this.Zb&2)!==0},function(t){var i=(this.Zb&2)!==0;i!==t&&(this.Zb^=2,this.h("relinkableTo",i,t),this.Sd())}),k.prototype.canRelinkFrom=function(){if(!this.oJ)return!1;var t=this.layer;return t===null?!0:t.on?(t=t.g,!!(t===null||t.on)):!1},k.prototype.canRelinkTo=function(){if(!this.pJ)return!1;var t=this.layer;return t===null?!0:t.on?(t=t.g,!!(t===null||t.on)):!1},s.defineProperty(k,{Vu:"resegmentable"},function(){return(this.Zb&4)!==0},function(t){var i=(this.Zb&4)!==0;i!==t&&(this.Zb^=4,this.h("resegmentable",i,t),this.Sd())}),s.defineProperty(k,{bc:"isTreeLink"},function(){return(this.Zb&8)!==0},function(t){var i=(this.Zb&8)!==0;i!==t&&(this.Zb^=8,this.h("isTreeLink",i,t),this.V!==null&&Sf(this.V),this.Z!==null&&Sf(this.Z))}),s.u(k,{path:"path"},function(){var t=this.Bd();return t instanceof Y?t:null}),s.u(k,{$n:"routeBounds"},function(){this.jo();var t=new O,i=1/0,n=1/0,e=this.qa;if(e===0)t.m(NaN,NaN,0,0);else{if(e===1)e=this.l(0),i=Math.min(e.x,i),n=Math.min(e.y,n),t.m(e.x,e.y,0,0);else if(e===2){var o=this.l(0),r=this.l(1),i=Math.min(o.x,r.x),n=Math.min(o.y,r.y);t.m(o.x,o.y,0,0),t.yi(r)}else if(this.computeCurve()===Le&&3<=e&&!this.ac)if(o=this.l(0),i=o.x,n=o.y,t.m(i,n,0,0),e===3)e=this.l(1),i=Math.min(e.x,i),n=Math.min(e.y,n),r=this.l(2),i=Math.min(r.x,i),n=Math.min(r.y,n),Bl(o.x,o.y,e.x,e.y,e.x,e.y,r.x,r.y,.5,t);else for(var h=3;h<e;h+=3){var l=this.l(h-2);h+3>=e&&(h=e-1);var u=this.l(h-1),r=this.l(h);Bl(o.x,o.y,l.x,l.y,u.x,u.y,r.x,r.y,.5,t),i=Math.min(r.x,i),n=Math.min(r.y,n),o=r}else for(o=this.l(0),r=this.l(1),i=Math.min(o.x,r.x),n=Math.min(o.y,r.y),t.m(o.x,o.y,0,0),t.yi(r),h=2;h<e;h++)o=this.l(h),i=Math.min(o.x,i),n=Math.min(o.y,n),t.yi(o);this.Yz.m(i-t.x,n-t.y)}return this.Dw=t}),s.u(k,{SF:"midPoint"},function(){return this.jo(),this.computeMidPoint(new D)}),k.prototype.computeMidPoint=function(t){var i=this.qa;if(i===0)return t.assign(vx),t;if(i===1)return t.assign(this.l(0)),t;if(i===2){var n=this.l(0),e=this.l(1);return t.m((n.x+e.x)/2,(n.y+e.y)/2),t}if(this.computeCurve()===Le&&3<=i&&!this.ac){if(i===3)return this.l(1);var n=(i-1)/3|0,o=3*(n/2|0);if(n%2===1){var n=this.l(o),e=this.l(o+1),r=this.l(o+2),o=this.l(o+3),i=e.x,l=e.y,e=r.x,u=r.y,r=(i+e)/2,h=(l+u)/2,l=((n.y+l)/2+h)/2,u=(h+(u+o.y)/2)/2;t.x=(((n.x+i)/2+r)/2+(r+(e+o.x)/2)/2)/2,t.y=(l+u)/2}else t.assign(this.l(o));return t}for(o=0,r=s.Za(),l=0;l<i-1;l++)n=0,n=this.l(l),e=this.l(l+1),St(n.x,e.x)?(n=e.y-n.y,0>n&&(n=-n)):St(n.y,e.y)?(n=e.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Cf(e)),r.push(n),o+=n;for(e=l=n=0;n<o/2&&l<i&&(e=r[l],!(n+e>o/2));)n+=e,l++;return s.ra(r),i=this.l(l),r=this.l(l+1),i.x===r.x?i.y>r.y?t.m(i.x,i.y-(o/2-n)):t.m(i.x,i.y+(o/2-n)):i.y===r.y?i.x>r.x?t.m(i.x-(o/2-n),i.y):t.m(i.x+(o/2-n),i.y):(n=(o/2-n)/e,t.m(i.x+n*(r.x-i.x),i.y+n*(r.y-i.y))),t},s.u(k,{RF:"midAngle"},function(){return this.jo(),this.computeMidAngle()}),k.prototype.computeMidAngle=function(){var t=this.qa;if(2>t)return NaN;if(this.computeCurve()===Le&&4<=t&&!this.ac){var i=(t-1)/3|0,n=3*(i/2|0);if(i%2===1){var n=Math.floor(n),i=this.l(n),o=this.l(n+1),t=this.l(n+2),n=this.l(n+3),e=o.x,o=o.y,r=t.x,t=t.y,h=(e+r)/2,l=(o+t)/2;return Lv(((i.x+e)/2+h)/2,((i.y+o)/2+l)/2,(h+(r+n.x)/2)/2,(l+(t+n.y)/2)/2)}if(0<n&&n+1<t)return i=this.l(n-1),o=this.l(n+1),i.Qb(o)}return n=t/2|0,t%2===0?(i=this.l(n-1),o=this.l(n),4<=t&&i.Qc(o)?(i=this.l(n-2),t=this.l(n+1),n=i.Cf(o),e=o.Cf(t),n>e+10?i.Qb(o):e>n+10?o.Qb(t):i.Qb(t)):this.Sa===null||this.ac?i.Qb(o):this.Sa.jF(.5)):this.Sa!==null&&!this.ac?this.Sa.jF(.5):(i=this.l(n-1),o=this.l(n),t=this.l(n+1),n=i.Cf(o),e=o.Cf(t),n>e+10?i.Qb(o):e>n+10?o.Qb(t):i.Qb(t))},s.defineProperty(k,{points:"points"},function(){return this.gd},function(t){var i=this.gd;if(i!==t){var n=null;if(Array.isArray(t)){var e=t.length%2===0;if(e){for(var o=0;o<t.length;o++)if(typeof t[o]!="number"||isNaN(t[o])){e=!1;break}}if(e)for(n=new E(D),e=0;e<t.length/2;e++)o=new D(t[2*e],t[2*e+1]).freeze(),n.add(o);else{for(o=!0,e=0;e<t.length;e++){var r=t[e];if(!s.Pa(r)||typeof r.x!="number"||isNaN(r.x)||typeof r.y!="number"||isNaN(r.y)){o=!1;break}}if(o)for(n=new E(D),e=0;e<t.length;e++)o=t[e],n.add(new D(o.x,o.y).freeze());else s.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof E)for(n=t.copy(),t=n.i;t.next();)t.value.freeze();else s.k("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.gd=n,this.fe(),this.H(),cc(this),t=this.g,t!==null&&(t.Kn||t.ja.lb||t.Yx.add(this),t.Ka.sc&&(this.pp=n)),this.h("points",i,n)}}),s.u(k,{qa:"pointsCount"},function(){return this.gd.count}),k.prototype.getPoint=k.prototype.l=function(t){return this.gd.n[t]},k.prototype.setPoint=k.prototype.Vg=function(t,i){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.kg(t,i)},k.prototype.setPointAt=k.prototype.ca=function(t,i,n){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.kg(t,new D(i,n))},k.prototype.insertPoint=function(t,i){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.Rd(t,i)},k.prototype.insertPointAt=k.prototype.w=function(t,i,n){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.Rd(t,new D(i,n))},k.prototype.addPoint=k.prototype.mi=function(t){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.add(t)},k.prototype.addPointAt=k.prototype.oj=function(t,i){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.add(new D(t,i))},k.prototype.removePoint=k.prototype.eG=function(t){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.cd(t)},k.prototype.clearPoints=k.prototype.Pp=function(){this.Xe===null&&s.k("Call Link.startRoute before modifying the points of the route."),this.gd.clear()},k.prototype.movePoints=k.prototype.Ej=function(t,i){if(t!==0||i!==0){for(var n=this.Mf,e=new E(D),o=this.gd.i;o.next();){var r=o.value;e.add(new D(r.x+t,r.y+i).freeze())}e.freeze(),o=this.gd,this.gd=e,this.H(),n&&cc(this),n=this.g,n!==null&&n.Ka.sc&&(this.pp=e),this.h("points",o,e)}},k.prototype.startRoute=k.prototype.qm=function(){this.Xe===null&&(this.Xe=this.gd,this.gd=this.gd.copy())},k.prototype.commitRoute=k.prototype.qj=function(){if(this.Xe!==null){for(var t=this.Xe,i=this.gd,h=1/0,l=1/0,n=t.n,e=n.length,o=0;o<e;o++)var r=n[o],h=Math.min(r.x,h),l=Math.min(r.y,l);for(var u=1/0,f=1/0,a=i.n,p=a.length,o=0;o<p;o++)r=a[o],u=Math.min(r.x,u),f=Math.min(r.y,f),r.freeze();if(i.freeze(),p===e){for(o=0;o<p;o++)if(e=n[o],r=a[o],e.x-h!==r.x-u||e.y-l!==r.y-f){this.H(),this.fe();break}}else this.H(),this.fe();this.Xe=null,h=this.g,h!==null&&h.Ka.sc&&(this.pp=i),cc(this),this.h("points",t,i)}},k.prototype.rollbackRoute=k.prototype.vJ=function(){this.Xe!==null&&(this.gd=this.Xe,this.Xe=null)};function cc(t){t.gd.count===0?t.Mf=!1:(t.Mf=!0,t.Up=t.l(0),t.Vp=t.l(t.qa-1),xc(t,!1))}k.prototype.invalidateRoute=k.prototype.Tb=function(){if(!this.vi){var t=this.g;t&&(t.Yx.contains(this)||t.ja.lb||t.Ka.FI&&!t.Ka.df)||(t=this.path,t!==null&&(this.Mf=!1,this.H(),t.H()))}},s.defineProperty(k,{Mf:null},function(){return(this.Zb&16)!==0},function(t){(this.Zb&16)!==0!==t&&(this.Zb^=16)}),s.defineProperty(k,{vi:"suspendsRouting"},function(){return(this.Zb&32)!==0},function(t){(this.Zb&32)!==0!==t&&(this.Zb^=32)}),s.defineProperty(k,{qA:null},function(){return(this.Zb&64)!==0},function(t){(this.Zb&64)!==0!==t&&(this.Zb^=64)}),s.defineProperty(k,{Up:"defaultFromPoint"},function(){return this.KC},function(t){this.KC=t.copy()}),s.defineProperty(k,{Vp:"defaultToPoint"},function(){return this.QC},function(t){this.QC=t.copy()}),k.prototype.updateRoute=k.prototype.jo=function(){if(!this.Mf&&!this.qA){var t=!0;try{this.qA=!0,this.qm(),t=this.computePoints()}finally{this.qA=!1,t?this.qj():this.vJ()}}},k.prototype.computePoints=function(){var h=this.g;if(h===null)return!1;var t=this.V,i=null;if(t===null?(h.Gl||(h.ft=new Y,h.ft.Da=Xu,h.ft.mb=0,h.Gl=new I,h.Gl.add(h.ft),h.Gl.Ne()),this.Up&&(h.Gl.position=h.Gl.location=this.Up,h.Gl.Ne(),t=h.Gl,i=h.ft)):i=this.gc,i!==null&&!t.isVisible()){var r=t.findVisibleNode();r!==null&&r!==t?(t=r,i=r.port):t=r}if(this.dE=t,t===null||!t.location.I())return!1;for(;!(i===null||i.U.I()&&i.Cj());)i=i.R;if(i===null)return!1;var n=this.Z,e=null;if(n===null?(h.Hl||(h.gt=new Y,h.gt.Da=Xu,h.gt.mb=0,h.Hl=new I,h.Hl.add(h.gt),h.Hl.Ne()),this.Vp&&(h.Hl.position=h.Hl.location=this.Vp,h.Hl.Ne(),n=h.Hl,e=h.gt)):e=this.zc,e===null||n.isVisible()||(h=n.findVisibleNode(),h!==null&&h!==n?(n=h,e=h.port):n=h),this.eE=n,n===null||!n.location.I())return!1;for(;!(e===null||e.U.I()&&e.Cj());)e=e.R;if(e===null)return!1;var o=this.qa,r=this.computeSpot(!0,i),h=this.computeSpot(!1,e),l=r===Ni,u=h===Ni,f=i===e&&i!==null,a=this.ac,p=this.nf===Le;this.Oi=f&&!a?p=!0:!1;var y=this.Jp===ce||f;if(!a&&!f&&l&&u){if(l=!1,!y&&3<=o&&(y=this.getLinkPoint(t,i,r,!0,!1,n,e),u=this.getLinkPoint(n,e,h,!1,!1,t,i),l=this.adjustPoints(0,y,o-1,u))&&(y=this.getLinkPoint(t,i,r,!0,!1,n,e),u=this.getLinkPoint(n,e,h,!1,!1,t,i),this.adjustPoints(0,y,o-1,u)),!l)if(this.Pp(),p){var o=this.getLinkPoint(t,i,r,!0,!1,n,e),y=this.getLinkPoint(n,e,h,!1,!1,t,i),l=y.x-o.x,u=y.y-o.y,f=this.computeCurviness(),p=a=0,d=o.x+l/3,g=o.y+u/3,c=d,v=g;$(u,0)?v=0<l?v-f:v+f:(a=-l/u,p=Math.sqrt(f*f/(a*a+1)),0>f&&(p=-p),c=(0>u?-1:1)*p+d,v=a*(c-d)+g);var d=o.x+2*l/3,g=o.y+2*u/3,m=d,w=g;$(u,0)?w=0<l?w-f:w+f:(m=(0>u?-1:1)*p+d,w=a*(m-d)+g),this.Pp(),this.mi(o),this.oj(c,v),this.oj(m,w),this.mi(y),this.Vg(0,this.getLinkPoint(t,i,r,!0,!1,n,e)),this.Vg(3,this.getLinkPoint(n,e,h,!1,!1,t,i))}else r=this.getLinkPoint(t,i,r,!0,!1,n,e),h=this.getLinkPoint(n,e,h,!1,!1,t,i),this.hasCurviness()?(y=h.x-r.x,n=h.y-r.y,e=this.computeCurviness(),t=r.x+y/2,i=r.y+n/2,o=t,l=i,$(n,0)?l=0<y?l-e:l+e:(y=-y/n,o=Math.sqrt(e*e/(y*y+1)),0>e&&(o=-o),o=(0>n?-1:1)*o+t,l=y*(o-t)+i),this.mi(r),this.oj(o,l)):this.mi(r),this.mi(h)}else{p=this.fm,y&&(a&&p||f)&&this.Pp();var M=f?this.computeCurviness():0,p=this.getLinkPoint(t,i,r,!0,a,n,e),d=c=g=0;if((a||!l||f)&&(v=this.computeEndSegmentLength(t,i,r,!0),d=this.getLinkDirection(t,i,p,r,!0,a,n,e),f&&(l||r.L(h)||!a&&r.x+h.x===1&&r.y+h.y===1)&&(d-=a?90:30,0>M&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),f&&(v+=Math.abs(M)*(a?1:2)),d===0?g=v:d===90?c=v:d===180?g=-v:d===270?c=-v:(g=v*Math.cos(d*Math.PI/180),c=v*Math.sin(d*Math.PI/180)),r.Ud()&&f)){var S=i.Ya(kt,s.K()),F=s.wb(S.x+1e3*g,S.y+1e3*c);this.getLinkPointFromPoint(t,i,S,F,!0,p),s.v(S),s.v(F)}var v=this.getLinkPoint(n,e,h,!1,a,t,i),C=w=m=0;(a||!u||f)&&(S=this.computeEndSegmentLength(n,e,h,!1),C=this.getLinkDirection(n,e,v,h,!1,a,t,i),f&&(u||r.L(h)||!a&&r.x+h.x===1&&r.y+h.y===1)&&(C+=a?0:30,0>M&&(C+=180)),0>C?C+=360:360<=C&&(C-=360),f&&(S+=Math.abs(M)*(a?1:2)),C===0?m=S:C===90?w=S:C===180?m=-S:C===270?w=-S:(m=S*Math.cos(C*Math.PI/180),w=S*Math.sin(C*Math.PI/180)),h.Ud()&&f&&(S=e.Ya(kt,s.K()),F=s.wb(S.x+1e3*m,S.y+1e3*w),this.getLinkPointFromPoint(n,e,S,F,!1,v),s.v(S),s.v(F))),h=p,(a||!l||f)&&(h=new D(p.x+g,p.y+c)),r=v,(a||!u||f)&&(r=new D(v.x+m,v.y+w)),!y&&!a&&l&&3<o&&this.adjustPoints(0,p,o-2,r)?this.Vg(o-1,v):!y&&!a&&u&&3<o&&this.adjustPoints(1,h,o-1,v)?this.Vg(0,p):!y&&(a?6<=o:4<o)&&this.adjustPoints(1,h,o-2,r)?(this.Vg(0,p),this.Vg(o-1,v)):(this.Pp(),this.mi(p),(a||!l||f)&&this.mi(h),a&&this.addOrthoPoints(h,d,r,C,t,n),(a||!u||f)&&this.mi(r),this.mi(v))}return!0};function vc(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x=i.x>=t.x?t.x+9e9:t.x-9e9,i.y=t.y):(i.y=i.y>=t.y?t.y+9e9:t.y-9e9,i.x=t.x),i}k.prototype.getLinkPointFromPoint=function(t,i,n,e,o,r){if(r===void 0&&(r=new D),t===null||i===null)return r.assign(n),r;t.isVisible()||(o=t.findVisibleNode(),o!==null&&o!==t&&(i=o.port));var h=o=0,l=0,u=0;if(t=null,o=i.R,o===null||o.Yg()||(o=o.R),o===null)o=e.x,h=e.y,l=n.x,u=n.y;else{t=o.rh,o=1/(t.m11*t.m22-t.m12*t.m21);var l=t.m22*o,u=-t.m12*o,f=-t.m21*o,a=t.m11*o,p=o*(t.m21*t.dy-t.m22*t.dx),y=o*(t.m12*t.dx-t.m11*t.dy);o=e.x*l+e.y*f+p,h=e.x*u+e.y*a+y,l=n.x*l+n.y*f+p,u=n.x*u+n.y*a+y}return i.En(o,h,l,u,r),t!==null&&r.transform(t),r};function up(t,i){var n=i.Ws;return n===null&&(n=new il,n.port=i,n.Rc=i.W,i.Ws=n),A1(n,t)}k.prototype.getLinkPoint=function(t,i,n,e,o,r,h,l){if(l===void 0&&(l=new D),n.Zc())return i.Ya(n,l),l;if(n.zj()){var u=up(this,i);if(u!==null){if(l.assign(u.nq),o&&this.sy===D1){var f=up(this,h);if(f!==null&&u.xn<f.xn){var u=s.K(),f=s.K(),a=new O(i.Ya(gi,u),i.Ya($i,f)),p=this.computeSpot(!e,h);t=this.getLinkPoint(r,h,p,!e,o,t,i,f),(n.xj(Ll)||n.xj(Al))&&t.y>=a.y&&t.y<=a.y+a.height?l.y=t.y:(n.xj(Fl)||n.xj(Il))&&t.x>=a.x&&t.x<=a.x+a.width&&(l.x=t.x),s.v(u),s.v(f)}}return l}}return n=i.Ya(kt,s.K()),u=r=null,this.qa>(o?6:2)?(u=e?this.l(1):this.l(this.qa-2),o&&(u=vc(n,u.copy()))):(r=s.K(),u=h.Ya(kt,r),o&&(u=vc(n,u)),s.v(r)),this.getLinkPointFromPoint(t,i,n,u,e,l),s.v(n),l},k.prototype.getLinkDirection=function(t,i,n,e,o,r,h,l){t:if(e.Zc())n=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:.5>e.x?225:.5<e.x?45:0;else{if(e.zj()){var u=up(this,i);if(u!==null)switch(u.ze){case s.od:n=270;break t;case s.Uc:n=180;break t;default:case s.ed:n=0;break t;case s.dd:n=90;break t}}var u=i.Ya(kt,s.K()),f=null,a=null;this.qa>(r?6:2)?(a=o?this.l(1):this.l(this.qa-2),a=r?vc(u,a.copy()):n):(f=s.K(),a=l.Ya(kt,f),s.v(f)),n=0,n=Math.abs(a.x-u.x)>Math.abs(a.y-u.y)?a.x>=u.x?0:180:a.y>=u.y?90:270,s.v(u)}switch(e.Ud()&&h.qi(t)&&(n+=180,360<=n&&(n-=360)),t=$h,t=o?this.lu:this.ev,t===$h&&(t=o?i.lu:i.ev),t){case x1:i=i.bm(),n+=i,360<=n&&(n-=360);break;case $h:case au:if(e.ZA()||(i=i.bm(),i===0))break;45<=i&&135>i?n+=90:135<=i&&225>i?n+=180:225<=i&&315>i&&(n+=270),360<=n&&(n-=360)}return n},k.prototype.computeEndSegmentLength=function(t,i,n,e){return i!==null&&n.zj()&&(t=up(this,i),t!==null)?t.Ax:(t=NaN,t=e?this.am:this.um,i!==null&&isNaN(t)&&(t=e?i.am:i.um),isNaN(t)&&(t=10),t)},k.prototype.computeSpot=function(t,i){var n;if(t)if(n=i||this.gc,n===null)n=kt;else{var e=this.Mb;e.ge()&&n!==null&&(e=n.Mb),n=e===an?Ni:e}else n=i||this.zc,n===null?n=kt:(e=this.Nb,e.ge()&&n!==null&&(e=n.Nb),n=e===an?Ni:e);return n},k.prototype.computeOtherPoint=function(t,i){var n=i.Ya(kt),e;return e=i.Ws,e=e!==null?A1(e,this):null,e!==null&&(n=e.nq),n},k.prototype.computeShortLength=function(t){if(t){if(t=this.mu,isNaN(t)){var i=this.gc;i!==null&&(t=i.mu)}}else t=this.fv,isNaN(t)&&(i=this.zc,i!==null&&(t=i.fv));return isNaN(t)?0:t},k.prototype.Jk=function(t,i,n,e,o,r){if(this.Ug===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var h=r;if(r===void 0&&(h=s.Wg(),h.reset()),h.multiply(this.transform),this.un(t,h))return Vy(this,i,n,o),r===void 0&&s.bf(h),!0;if(this.$f(t,h)){var l=!1;if(!this.Jn)for(var u=this.xa.n,f=u.length;f--;){var a=u[f];if(a.visible||a===this.cg){var p=a.U,y=this.Ja;if(!(p.x>y.width||p.y>y.height||0>p.x+p.width||0>p.y+p.height)){if(p=s.Wg(),p.set(h),a instanceof A)l=a.Jk(t,i,n,e,o,p);else if(this.path===a){if(a instanceof Y){var l=a,c=t,v=e,y=p;if(l.Ug===!1)l=!1;else if(y.multiply(l.transform),v)t:{var d=c,g=y;if(l.un(d,g))l=!0;else{if(g===void 0&&(g=l.transform,d.Fk(l.U))){l=!0;break t}var y=d.left,c=d.right,v=d.top,d=d.bottom,m=s.K(),w=s.K(),M=s.K(),S=s.Wg();S.set(g),S.UF(l.transform),S.TA(),w.x=c,w.y=v,w.transform(S),m.x=y,m.y=v,m.transform(S),g=!1,rh(l,m,w,M)?g=!0:(m.x=c,m.y=d,m.transform(S),rh(l,m,w,M)?g=!0:(w.x=y,w.y=d,w.transform(S),rh(l,m,w,M)?g=!0:(m.x=y,m.y=v,m.transform(S),rh(l,m,w,M)&&(g=!0)))),s.bf(S),s.v(m),s.v(w),s.v(M),l=g}}else l=l.un(c,y)}}else l=Lg(a,t,e,p);l&&(i!==null&&(a=i(a)),a&&(n===null||n(a))&&(o instanceof R&&o.add(a),o instanceof E&&o.add(a))),s.bf(p)}}}return r===void 0&&s.bf(h),l||this.background!==null||this.pn!==null}return r===void 0&&s.bf(h),!1},s.u(k,{ac:"isOrthogonal"},function(){return(this.an.value&2)===2}),s.u(k,{fm:"isAvoiding"},function(){return(this.an.value&4)===4}),k.prototype.computeCurve=function(){if(this.Oi===null){var t=this.gc,i=this.ac;this.Oi=t!==null&&t===this.zc&&!i}return this.Oi?Le:this.nf},k.prototype.computeCorner=function(){if(this.nf===Le)return 0;var t=this.wA;return(isNaN(t)||0>t)&&(t=10),t},k.prototype.findMidLabel=function(){for(var t=this.path,i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e];if(o!==t&&!o.ff&&(o.Qe===-1/0||isNaN(o.Qe)))return o}for(t=this.Ff;t.next();)if(i=t.value,i.Qe===-1/0||isNaN(i.Qe))return i;return null},k.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t;t=Math.max(14,this.computeThickness());var i=this.gc,n=this.zc;if(i!==null&&n!==null){var e=this.findMidLabel();if(e!==null){var h=e.Ja,o=e.margin,r=isNaN(h.width)?30:h.width*e.scale+o.left+o.right,h=isNaN(h.height)?14:h.height*e.scale+o.top+o.bottom,e=e.Eq;e===hp||e===yc||e===pc?t=Math.max(t,h):e===Nf||e===jf||e===kf||e===Cf?t=Math.max(t,r):(i=i.Ya(kt).Qb(n.Ya(kt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(i)*r)+Math.abs(Math.cos(i)*h)+1)),this.nf===Le&&(t*=1.333)}}return t},k.prototype.arrangeBundledLinks=function(t,i){if(i)for(var n=0;n<t.length;n++){var e=t[n];e.Jp===ce&&e.Tb()}},k.prototype.computeCurviness=function(){var t=this.sx;if(isNaN(t)){var t=16,i=this.Bi;if(i!==null){for(var n=s.Za(),e=0,o=i.links,r=0;r<o.length;r++){var h=o[r],h=h.computeSpacing();n.push(h),e+=h}for(e=-e/2,r=0;r<o.length;r++){if(h=o[r],h===this){t=e+n[r]/2;break}e+=n[r]}i.qq===this.V&&(t=-t),s.ra(n)}}return t},k.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.mb,1):1},k.prototype.hasCurviness=function(){return!isNaN(this.sx)||this.Bi!==null},k.prototype.adjustPoints=function(t,i,n,e){var o=this.Jp;if(this.ac){if(o===rp)return!1;o===sp&&(o=op)}switch(o){case rp:var r=this.l(t),h=this.l(n);if(!r.Qc(i)||!h.Qc(e)){var o=r.x,r=r.y,l=h.x-o,u=h.y-r,f=Math.sqrt(l*l+u*u);if(!St(f,0)){var a=0;St(l,0)?a=0>u?-Math.PI/2:Math.PI/2:(a=Math.atan(u/Math.abs(l)),0>l&&(a=Math.PI-a));var h=i.x,p=i.y,u=e.x-h,y=e.y-p,c=Math.sqrt(u*u+y*y),l=0;for(St(u,0)?l=0>y?-Math.PI/2:Math.PI/2:(l=Math.atan(y/Math.abs(u)),0>u&&(l=Math.PI-l)),f=c/f,a=l-a,this.Vg(t,i),t+=1;t<n;t++)i=this.l(t),l=i.x-o,u=i.y-r,i=Math.sqrt(l*l+u*u),St(i,0)||(y=0,St(l,0)?y=0>u?-Math.PI/2:Math.PI/2:(y=Math.atan(u/Math.abs(l)),0>l&&(y=Math.PI-y)),l=y+a,i*=f,this.ca(t,h+i*Math.cos(l),p+i*Math.sin(l)));this.Vg(n,e)}}return!0;case sp:if(r=this.l(t),p=this.l(n),!r.Qc(i)||!p.Qc(e)){var o=r.x,r=r.y,h=p.x,p=p.y,f=(h-o)*(h-o)+(p-r)*(p-r),l=i.x,a=i.y,u=e.x,y=e.y,c=0,v=1;for(u-l!==0?(c=(y-a)/(u-l),v=Math.sqrt(1+1/(c*c))):c=9e9,this.Vg(t,i),t+=1;t<n;t++){i=this.l(t);var d=i.x,g=i.y,m=.5;f!==0&&(m=((o-d)*(o-h)+(r-g)*(r-p))/f);var w=o+m*(h-o),M=r+m*(p-r);i=Math.sqrt((d-w)*(d-w)+(g-M)*(g-M)),g<c*(d-w)+M&&(i=-i),0<c&&(i=-i),d=l+m*(u-l),m=a+m*(y-a),c!==0?(i=d+i/v,this.ca(t,i,m-(i-d)/c)):this.ca(t,d,m+i)}this.Vg(n,e)}return!0;case op:t:{if(this.ac&&(o=this.l(t),r=this.l(t+1),h=this.l(t+2),l=r.x,a=r.y,p=l,f=a,$(o.y,r.y)?$(r.x,h.x)?a=i.y:$(r.y,h.y)&&(l=i.x):$(o.x,r.x)&&($(r.y,h.y)?l=i.x:$(r.x,h.x)&&(a=i.y)),this.ca(t+1,l,a),o=this.l(n),r=this.l(n-1),h=this.l(n-2),l=r.x,a=r.y,u=l,y=a,$(o.y,r.y)?$(r.x,h.x)?a=e.y:$(r.y,h.y)&&(l=e.x):$(o.x,r.x)&&($(r.y,h.y)?l=e.x:$(r.x,h.x)&&(a=e.y)),this.ca(n-1,l,a),dc(this))){this.ca(t+1,p,f),this.ca(n-1,u,y),n=!1;break t}this.Vg(t,i),this.Vg(n,e),n=!0}return n;default:return!1}},k.prototype.addOrthoPoints=function(t,i,n,e,o,r){i=-45<=i&&45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270,e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270;var h=o.U.copy(),l=r.U.copy();if(h.I()&&l.I()){h.Zf(8,8),l.Zf(8,8),h.yi(t),l.yi(n);var u,f;i===0?n.x>t.x||e===270&&n.y<t.y&&l.right>t.x||e===90&&n.y>t.y&&l.right>t.x?(u=new D(n.x,t.y),f=new D(n.x,(t.y+n.y)/2),e===180?(u.x=this.computeMidOrthoPosition(t.x,n.x,!1),f.x=u.x,f.y=n.y):e===270&&n.y<t.y||e===90&&n.y>t.y?(u.x=t.x<l.left?this.computeMidOrthoPosition(t.x,l.left,!1):t.x<l.right&&(e===270&&t.y<l.top||e===90&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):l.right,f.x=u.x,f.y=n.y):e===0&&t.x<l.left&&t.y>l.top&&t.y<l.bottom&&(u.x=t.x,u.y=t.y<n.y?Math.min(n.y,l.top):Math.max(n.y,l.bottom),f.y=u.y)):(u=new D(t.x,n.y),f=new D((t.x+n.x)/2,n.y),(e===180||e===90&&n.y<h.top||e===270&&n.y>h.bottom)&&(e===180&&(l.Ia(t)||h.Ia(n))?u.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(e===180||e===90)?u.y=this.computeMidOrthoPosition(h.top,Math.max(n.y,l.bottom),!0):n.y>t.y&&(e===180||e===270)&&(u.y=this.computeMidOrthoPosition(h.bottom,Math.min(n.y,l.top),!0)),f.x=n.x,f.y=u.y),u.y>h.top&&u.y<h.bottom&&(n.x>=h.left&&n.x<=t.x||t.x<=l.right&&t.x>=n.x?(e===90||e===270)&&(u=new D(Math.max((t.x+n.x)/2,t.x),t.y),f=new D(u.x,n.y)):(u.y=e===270||(e===0||e===180)&&n.y<t.y?Math.min(n.y,e===0?h.top:Math.min(h.top,l.top)):Math.max(n.y,e===0?h.bottom:Math.max(h.bottom,l.bottom)),f.x=n.x,f.y=u.y))):i===180?n.x<t.x||e===270&&n.y<t.y&&l.left<t.x||e===90&&n.y>t.y&&l.left<t.x?(u=new D(n.x,t.y),f=new D(n.x,(t.y+n.y)/2),e===0?(u.x=this.computeMidOrthoPosition(t.x,n.x,!1),f.x=u.x,f.y=n.y):e===270&&n.y<t.y||e===90&&n.y>t.y?(u.x=t.x>l.right?this.computeMidOrthoPosition(t.x,l.right,!1):t.x>l.left&&(e===270&&t.y<l.top||e===90&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,n.x,!1):l.left,f.x=u.x,f.y=n.y):e===180&&t.x>l.right&&t.y>l.top&&t.y<l.bottom&&(u.x=t.x,u.y=t.y<n.y?Math.min(n.y,l.top):Math.max(n.y,l.bottom),f.y=u.y)):(u=new D(t.x,n.y),f=new D((t.x+n.x)/2,n.y),(e===0||e===90&&n.y<h.top||e===270&&n.y>h.bottom)&&(e===0&&(l.Ia(t)||h.Ia(n))?u.y=this.computeMidOrthoPosition(t.y,n.y,!0):n.y<t.y&&(e===0||e===90)?u.y=this.computeMidOrthoPosition(h.top,Math.max(n.y,l.bottom),!0):n.y>t.y&&(e===0||e===270)&&(u.y=this.computeMidOrthoPosition(h.bottom,Math.min(n.y,l.top),!0)),f.x=n.x,f.y=u.y),u.y>h.top&&u.y<h.bottom&&(n.x<=h.right&&n.x>=t.x||t.x>=l.left&&t.x<=n.x?(e===90||e===270)&&(u=new D(Math.min((t.x+n.x)/2,t.x),t.y),f=new D(u.x,n.y)):(u.y=e===270||(e===0||e===180)&&n.y<t.y?Math.min(n.y,e===180?h.top:Math.min(h.top,l.top)):Math.max(n.y,e===180?h.bottom:Math.max(h.bottom,l.bottom)),f.x=n.x,f.y=u.y))):i===90?n.y>t.y||e===180&&n.x<t.x&&l.bottom>t.y||e===0&&n.x>t.x&&l.bottom>t.y?(u=new D(t.x,n.y),f=new D((t.x+n.x)/2,n.y),e===270?(u.y=this.computeMidOrthoPosition(t.y,n.y,!0),f.x=n.x,f.y=u.y):e===180&&n.x<t.x||e===0&&n.x>t.x?(u.y=t.y<l.top?this.computeMidOrthoPosition(t.y,l.top,!0):t.y<l.bottom&&(e===180&&t.x<l.left||e===0&&t.x>l.right)?this.computeMidOrthoPosition(t.y,n.y,!0):l.bottom,f.x=n.x,f.y=u.y):e===90&&t.y<l.top&&t.x>l.left&&t.x<l.right&&(u.x=t.x<n.x?Math.min(n.x,l.left):Math.max(n.x,l.right),u.y=t.y,f.x=u.x)):(u=new D(n.x,t.y),f=new D(n.x,(t.y+n.y)/2),(e===270||e===0&&n.x<h.left||e===180&&n.x>h.right)&&(e===270&&(l.Ia(t)||h.Ia(n))?u.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(e===270||e===0)?u.x=this.computeMidOrthoPosition(h.left,Math.max(n.x,l.right),!1):n.x>t.x&&(e===270||e===180)&&(u.x=this.computeMidOrthoPosition(h.right,Math.min(n.x,l.left),!1)),f.x=u.x,f.y=n.y),u.x>h.left&&u.x<h.right&&(n.y>=h.top&&n.y<=t.y||t.y<=l.bottom&&t.y>=n.y?(e===0||e===180)&&(u=new D(t.x,Math.max((t.y+n.y)/2,t.y)),f=new D(n.x,u.y)):(u.x=e===180||(e===90||e===270)&&n.x<t.x?Math.min(n.x,e===90?h.left:Math.min(h.left,l.left)):Math.max(n.x,e===90?h.right:Math.max(h.right,l.right)),f.x=u.x,f.y=n.y))):n.y<t.y||e===180&&n.x<t.x&&l.top<t.y||e===0&&n.x>t.x&&l.top<t.y?(u=new D(t.x,n.y),f=new D((t.x+n.x)/2,n.y),e===90?(u.y=this.computeMidOrthoPosition(t.y,n.y,!0),f.x=n.x,f.y=u.y):e===180&&n.x<t.x||e===0&&n.x>=t.x?(u.y=t.y>l.bottom?this.computeMidOrthoPosition(t.y,l.bottom,!0):t.y>l.top&&(e===180&&t.x<l.left||e===0&&t.x>l.right)?this.computeMidOrthoPosition(t.y,n.y,!0):l.top,f.x=n.x,f.y=u.y):e===270&&t.y>l.bottom&&t.x>l.left&&t.x<l.right&&(u.x=t.x<n.x?Math.min(n.x,l.left):Math.max(n.x,l.right),u.y=t.y,f.x=u.x)):(u=new D(n.x,t.y),f=new D(n.x,(t.y+n.y)/2),(e===90||e===0&&n.x<h.left||e===180&&n.x>h.right)&&(e===90&&(l.Ia(t)||h.Ia(n))?u.x=this.computeMidOrthoPosition(t.x,n.x,!1):n.x<t.x&&(e===90||e===0)?u.x=this.computeMidOrthoPosition(h.left,Math.max(n.x,l.right),!1):n.x>t.x&&(e===90||e===180)&&(u.x=this.computeMidOrthoPosition(h.right,Math.min(n.x,l.left),!1)),f.x=u.x,f.y=n.y),u.x>h.left&&u.x<h.right&&(n.y<=h.bottom&&n.y>=t.y||t.y>=l.top&&t.y<=n.y?(e===0||e===180)&&(u=new D(t.x,Math.min((t.y+n.y)/2,t.y)),f=new D(n.x,u.y)):(u.x=e===180||(e===90||e===270)&&n.x<t.x?Math.min(n.x,e===270?h.left:Math.min(h.left,l.left)):Math.max(n.x,e===270?h.right:Math.max(h.right,l.right)),f.x=u.x,f.y=n.y)));var a=u,p=f,y=n;if(this.fm){var c=this.g;if(c===null||!wg(c)||h.Ia(y)&&!r.qi(o)||l.Ia(t)&&!o.qi(r)||o===r||this.layer.Hc)i=!1;else{var v=Ny(c,!0,this.Ca,null);if(v.lq(Math.min(t.x,a.x),Math.min(t.y,a.y),Math.abs(t.x-a.x),Math.abs(t.y-a.y))&&v.lq(Math.min(a.x,p.x),Math.min(a.y,p.y),Math.abs(a.x-p.x),Math.abs(a.y-p.y))&&v.lq(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y)))i=!1;else{o=t,r=y;var d=n=null;if(c.$A){c=v.eb.copy(),c.Zf(-v.Op,-v.Mp);var g=s.K();vu(v,t.x,t.y)||(fr(c.x,c.y,c.x+c.width,c.y+c.height,t.x,t.y,a.x,a.y,g)?(n=t=g.copy(),i=g.Qb(a)):fr(c.x,c.y,c.x+c.width,c.y+c.height,a.x,a.y,p.x,p.y,g)?(n=t=g.copy(),i=g.Qb(p)):fr(c.x,c.y,c.x+c.width,c.y+c.height,p.x,p.y,y.x,y.y,g)&&(n=t=g.copy(),i=g.Qb(y))),vu(v,y.x,y.y)||(fr(c.x,c.y,c.x+c.width,c.y+c.height,y.x,y.y,p.x,p.y,g)?(d=y=g.copy(),e=p.Qb(g)):fr(c.x,c.y,c.x+c.width,c.y+c.height,p.x,p.y,a.x,a.y,g)?(d=y=g.copy(),e=a.Qb(g)):fr(c.x,c.y,c.x+c.width,c.y+c.height,a.x,a.y,t.x,t.y,g)&&(d=y=g.copy(),e=t.Qb(g))),s.v(g)}h=h.copy().Zg(l),l=v.wG,h.Zf(v.Op*l,v.Mp*l),Mc(v,t,i,y,e,h),l=fh(v,y.x,y.y),!v.abort&&999999<=l&&(wc(v),l=v.NF,h.Zf(v.Op*l,v.Mp*l),Mc(v,t,i,y,e,h),l=fh(v,y.x,y.y)),!v.abort&&999999<=l&&v.NG&&(wc(v),Mc(v,t,i,y,e,v.eb),l=fh(v,y.x,y.y)),!v.abort&&999999>l&&fh(v,y.x,y.y)!==0?(gc(this,v,y.x,y.y,e,!0),h=this.l(2),4>this.qa?(i===0||i===180?(h.x=t.x,h.y=y.y):(h.x=y.x,h.y=t.y),this.ca(2,h.x,h.y),this.w(3,h.x,h.y)):(y=this.l(3),i===0||i===180?$(h.x,y.x)?(h=i===0?Math.max(h.x,t.x):Math.min(h.x,t.x),this.ca(2,h,t.y),this.ca(3,h,y.y)):$(h.y,y.y)?(Math.abs(t.y-h.y)<=v.Mp/2&&(this.ca(2,h.x,t.y),this.ca(3,y.x,t.y)),this.w(2,h.x,t.y)):this.ca(2,t.x,h.y):(i===90||i===270)&&($(h.y,y.y)?(h=i===90?Math.max(h.y,t.y):Math.min(h.y,t.y),this.ca(2,t.x,h),this.ca(3,y.x,h)):$(h.x,y.x)?(Math.abs(t.x-h.x)<=v.Op/2&&(this.ca(2,t.x,h.y),this.ca(3,t.x,y.y)),this.w(2,t.x,h.y)):this.ca(2,h.x,t.y))),n!==null&&(t=this.l(1),y=this.l(2),t.x!==y.x&&t.y!==y.y?i===0||i===180?this.w(2,t.x,y.y):this.w(2,y.x,t.y):i===0||i===180?this.w(2,o.x,n.y):this.w(2,n.x,o.y)),d!==null&&(e===0||e===180?this.oj(r.x,d.y):this.oj(d.x,r.y)),i=!0):i=!1}}}else i=!1;i||(this.mi(u),this.mi(f))}},k.prototype.computeMidOrthoPosition=function(t,i){if(this.hasCurviness()){var n=this.computeCurviness();return(t+i)/2+n}return(t+i)/2};function dc(t){if(t.g===null||!t.fm||!wg(t.g))return!1;var i=t.points.n,n=i.length;if(4>n)return!1;t=Ny(t.g,!0,t.Ca,null);for(var e=1;e<n-2;e++){var o=i[e],r=i[e+1];if(!t.lq(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function gc(t,i,n,e,o,r){var h=i.Op,l=i.Mp,u=fh(i,n,e),f=n,a=e;for(o===0?f+=h:o===90?a+=l:o===180?f-=h:a-=l;1<u&&fh(i,f,a)===u-1;)n=f,e=a,o===0?f+=h:o===90?a+=l:o===180?f-=h:a-=l,u-=1;r?1<u&&(o===180||o===0?n=Math.floor(n/h)*h+h/2:(o===90||o===270)&&(e=Math.floor(e/l)*l+l/2)):(n=Math.floor(n/h)*h+h/2,e=Math.floor(e/l)*l+l/2),1<u&&(r=o,f=n,a=e,o===0?(r=90,a+=l):o===90?(r=180,f-=h):o===180?(r=270,a-=l):o===270&&(r=0,f+=h),fh(i,f,a)===u-1?gc(t,i,f,a,r,!1):(f=n,a=e,o===0?(r=270,a-=l):o===90?(r=0,f+=h):o===180?(r=90,a+=l):o===270&&(r=180,f-=h),fh(i,f,a)===u-1&&gc(t,i,f,a,r,!1))),t.oj(n,e)}k.prototype.findClosestSegment=function(t){var i=t.x;t=t.y;for(var n=this.l(0),e=this.l(1),o=xn(i,t,n.x,n.y,e.x,e.y),r=0,h=1;h<this.qa-1;h++){var n=this.l(h+1),l=xn(i,t,e.x,e.y,n.x,n.y),e=n;l<o&&(r=h,o=l)}return r},k.prototype.fe=function(){this.Sa=null},s.u(k,{of:"geometry"},function(){return this.Sa===null&&(this.jo(),this.Sa=this.makeGeometry()),this.Sa}),k.prototype.Hu=function(t){if(!(!t&&(this.Mf===!1||(t=this.Bd(),this.Sa!==null&&(t===null||t.of!==null))))&&(this.Sa=this.makeGeometry(),t=this.path,t!==null)){t.Sa=this.Sa;for(var i=this.xa.n,n=i.length,e=0;e<n;e++){var o=i[e];o!==t&&o.ff&&o instanceof Y&&(o.Sa=this.Sa)}}},k.prototype.makeGeometry=function(){var t=this.qa;if(2>t)return new et(Yi);var i=!1,h=this.g;h!==null&&uh(this)&&h.ol.contains(this)&&this.Dw!==null&&(i=!0);var l=h=0,n=this.l(0).copy(),e=n.copy(),h=this.gd.n,o=this.computeCurve();if(o===Le&&3<=t&&!St(this.Iq,0))if(t===3)var r=this.l(1),h=Math.min(n.x,r.x),l=Math.min(n.y,r.y),r=this.l(2),h=Math.min(h,r.x),l=Math.min(l,r.y);else{if(this.ac)for(r=0;r<t;r++)l=h[r],e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);else for(r=3;r<t;r+=3)r+3>=t&&(r=t-1),h=this.l(r),e.x=Math.min(h.x,e.x),e.y=Math.min(h.y,e.y);h=e.x,l=e.y}else{for(r=0;r<t;r++)l=h[r],e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);h=e.x,l=e.y}if(h-=this.Yz.x,l-=this.Yz.y,n.x-=h,n.y-=l,t!==2||uh(this)){var u=s.s();if(this.computeShortLength(!0)!==0&&(n=_h(this,n,!0,e)),j(u,n.x,n.y,!1,!1),o===Le&&3<=t&&!St(this.Iq,0))if(t===3)r=this.l(1),t=r.x-h,i=r.y-l,r=this.l(2).copy(),r.x-=h,r.y-=l,this.computeShortLength(!1)!==0&&(r=_h(this,r,!1,e)),T(u,t,i,t,i,r.x,r.y);else if(this.ac){for(var e=new D(h,l),n=this.l(1).copy(),o=new D(h,l),t=new D(h,l),i=this.l(0),f=null,a=this.Iq/3,r=1;r<this.qa-1;r++){var f=this.l(r),p=i,y=f,c=this.l(mc(this,f,r,!1));if((!St(p.x,y.x)||!St(y.x,c.x))&&(!St(p.y,y.y)||!St(y.y,c.y))){var S=a,v=o,d=t;isNaN(S)&&(S=this.Iq/3);var g=p.x,p=p.y,m=y.x,y=y.y,w=c.x,c=c.y,M=S*fp(g,p,m,y),S=S*fp(m,y,w,c);St(p,y)&&St(m,w)&&(m>g?c>y?(v.x=m-M,v.y=y-M,d.x=m+S,d.y=y+S):(v.x=m-M,v.y=y+M,d.x=m+S,d.y=y-S):c>y?(v.x=m+M,v.y=y-M,d.x=m-S,d.y=y+S):(v.x=m+M,v.y=y+M,d.x=m-S,d.y=y-S)),St(g,m)&&St(y,c)&&(y>p?(w>m?(v.x=m-M,v.y=y-M,d.x=m+S):(v.x=m+M,v.y=y-M,d.x=m-S),d.y=y+S):(w>m?(v.x=m-M,v.y=y+M,d.x=m+S):(v.x=m+M,v.y=y+M,d.x=m-S),d.y=y-S)),(St(g,m)&&St(m,w)||St(p,y)&&St(y,c))&&(g=.5*(g+w),p=.5*(p+c),v.x=g,v.y=p,d.x=g,d.y=p),(r===1||r===2&&St(i.x,this.l(0).x)&&St(i.y,this.l(0).y))&&(n.x=.5*(i.x+f.x),n.y=.5*(i.y+f.y)),T(u,n.x-h,n.y-l,o.x-h,o.y-l,f.x-h,f.y-l),e.set(o),n.set(t),i=f}}r=i.x,i=i.y,e=this.l(this.qa-1),this.computeShortLength(!1)!==0&&(e=_h(this,e.copy(),!1,Js)),r=.5*(r+e.x),i=.5*(i+e.y),T(u,t.x-h,t.y-l,r-h,i-l,e.x-h,e.y-l)}else for(r=3;r<t;r+=3)i=this.l(r-2),r+3>=t&&(r=t-1),e=this.l(r-1),n=this.l(r),r===t-1&&this.computeShortLength(!1)!==0&&(n=_h(this,n.copy(),!1,Js)),T(u,i.x-h,i.y-l,e.x-h,e.y-l,n.x-h,n.y-l);else{for(e=s.K(),e.assign(this.l(0)),r=1,n=0;r<t;){if(r=mc(this,e,r,1<r),v=this.l(r),r>=t-1){if(!e.L(v))this.computeShortLength(!1)!==0&&(v=_h(this,v.copy(),!1,Js)),bh(this,u,-h,-l,e,v,i);else if(n===0)for(r=1;r<t;)v=this.l(r++),bh(this,u,-h,-l,e,v,i),e.assign(v);break}n=mc(this,v,r+1,r<t-3),r=u,o=-h,f=-l,a=e,d=this.l(n),g=e,p=i,$(a.y,v.y)&&$(v.x,d.x)?(S=this.computeCorner(),S=Math.min(S,Math.abs(v.x-a.x)/2),S=m=Math.min(S,Math.abs(d.y-v.y)/2),$(S,0)?(bh(this,r,o,f,a,v,p),g.assign(v)):(y=v.x,w=v.y,c=y,M=w,y=v.x>a.x?v.x-S:v.x+S,M=d.y>v.y?v.y+m:v.y-m,bh(this,r,o,f,a,new D(y,w),p),_a(r,v.x+o,v.y+f,c+o,M+f),g.m(c,M))):$(a.x,v.x)&&$(v.y,d.y)?(S=this.computeCorner(),m=Math.min(S,Math.abs(v.y-a.y)/2),m=S=Math.min(m,Math.abs(d.x-v.x)/2),$(S,0)?(bh(this,r,o,f,a,v,p),g.assign(v)):(y=v.x,M=w=v.y,w=v.y>a.y?v.y-m:v.y+m,c=d.x>v.x?v.x+S:v.x-S,bh(this,r,o,f,a,new D(y,w),p),_a(r,v.x+o,v.y+f,c+o,M+f),g.m(c,M))):(bh(this,r,o,f,a,v,p),g.assign(v)),r=n}s.v(e)}h=u.o,s.q(u)}else u=this.l(1).copy(),u.x-=h,u.y-=l,this.computeShortLength(!0)!==0&&(n=_h(this,n,!0,e)),this.computeShortLength(!1)!==0&&(u=_h(this,u,!1,e)),h=new et(Yi),h.ha=n.x,h.da=n.y,h.C=u.x,h.D=u.y;return h};function fp(t,i,n,e){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),i=e-i,isNaN(i)||i===1/0||i===-1/0?NaN:(0>i&&(i=-i),St(t,0)?i:St(i,0)?t:Math.sqrt(t*t+i*i)))}function _h(t,i,n,e){var o=t.qa;if(2>o)return i;if(n){var r=t.l(1);if(n=r.x-e.x,e=r.y-e.y,r=fp(i.x,i.y,n,e),r===0)return i;o=o===2?.5*r:r,t=t.computeShortLength(!0),t>o&&(t=o),n=t*(n-i.x)/r,t=t*(e-i.y)/r,i.x+=n,i.y+=t}else{if(r=t.l(o-2),n=r.x-e.x,e=r.y-e.y,r=fp(i.x,i.y,n,e),r===0)return i;o=o===2?.5*r:r,t=t.computeShortLength(!1),t>o&&(t=o),n=t*(i.x-n)/r,t=t*(i.y-e)/r,i.x-=n,i.y-=t}return i}function mc(t,i,n,e){for(var o=t.qa,r=i;St(i.x,r.x)&&St(i.y,r.y);){if(n>=o)return o-1;r=t.l(n++)}if(!St(i.x,r.x)&&!St(i.y,r.y))return n-1;for(var h=r;St(i.x,r.x)&&St(r.x,h.x)&&(!e||(i.y>=r.y?r.y>=h.y:r.y<=h.y))||St(i.y,r.y)&&St(r.y,h.y)&&(!e||(i.x>=r.x?r.x>=h.x:r.x<=h.x));){if(n>=o)return o-1;h=t.l(n++)}return n-2}function bh(t,i,n,e,o,r,h){if(!h&&uh(t)){h=[];var l=0;t.isVisible()&&(l=Gx(t,o,r,h));var u=o.x,u=o.y;if(0<l){if($(o.y,r.y))if(o.x<r.x)for(var f=0;f<l;){var a=Math.max(o.x,Math.min(h[f++]-5,r.x-10));i.lineTo(a+n,r.y+e);for(var u=a+n,p=Math.min(a+10,r.x);f<l;){var y=h[f];if(y<p+10)f++,p=Math.min(y+5,r.x);else break}y=(a+p)/2+n,y=r.y-10+e,a=p+n,p=r.y+e,t.nf===Qr?j(i,a,p,!1,!1):T(i,u,y,a,y,a,p)}else for(f=l-1;0<=f;){for(a=Math.min(o.x,Math.max(h[f--]+5,r.x+10)),i.lineTo(a+n,r.y+e),u=a+n,p=Math.max(a-10,r.x);0<=f&&(y=h[f],y>p-10);)f--,p=Math.max(y-5,r.x);y=r.y-10+e,a=p+n,p=r.y+e,t.nf===Qr?j(i,a,p,!1,!1):T(i,u,y,a,y,a,p)}else if($(o.x,r.x))if(o.y<r.y)for(f=0;f<l;){for(a=Math.max(o.y,Math.min(h[f++]-5,r.y-10)),i.lineTo(r.x+n,a+e),u=a+e,p=Math.min(a+10,r.y);f<l&&(y=h[f],y<p+10);)f++,p=Math.min(y+5,r.y);y=r.x-10+n,a=r.x+n,p+=e,t.nf===Qr?j(i,a,p,!1,!1):T(i,y,u,y,p,a,p)}else for(f=l-1;0<=f;){for(a=Math.min(o.y,Math.max(h[f--]+5,r.y+10)),i.lineTo(r.x+n,a+e),u=a+e,p=Math.max(a-10,r.y);0<=f&&(y=h[f],y>p-10);)f--,p=Math.max(y-5,r.y);y=r.x-10+n,a=r.x+n,p+=e,t.nf===Qr?j(i,a,p,!1,!1):T(i,y,u,y,p,a,p)}}}i.lineTo(r.x+n,r.y+e)}function Gx(t,i,n,e){var o=t.g;if(o===null||i.L(n))return 0;for(o=o.Ux;o.next();){var r=o.value;if(r!==null&&r.visible)for(var r=r.xb.n,h=r.length,l=0;l<h;l++){var u=r[l];if(u instanceof k){if(u===t)return 0<e.length&&e.sort(function(p,y){return p-y}),e.length;if(u.isVisible()&&uh(u)){var f=u.$n;f.I()&&t.$n.$f(f)&&!t.usesSamePort(u)&&(f=u.path,f!==null&&f.Cj()&&Ox(i,n,e,u))}}}}return 0<e.length&&e.sort(function(a,p){return a-p}),e.length}function Ox(t,i,n,e){for(var o=$(t.y,i.y),r=e.qa,h=e.l(0),l=s.K(),u=1;u<r;u++){var f=e.l(u);if(u<r-1){var a=e.l(u+1);h.y===f.y&&f.y===a.y?(f.x>h.x&&a.x>f.x||f.x<h.x&&a.x<f.x)&&(f=a,u++):h.x===f.x&&f.x===a.x&&(f.y>h.y&&a.y>f.y||f.y<h.y&&a.y<f.y)&&(f=a,u++)}t:{var a=l,p=t.x,y=t.y,c=i.x,v=i.y,d=h.x,h=h.y,g=f.x,m=f.y;if($(p,c)){if(!$(y,v)&&$(h,m)&&Math.min(y,v)<h&&Math.max(y,v)>h&&Math.min(d,g)<p&&Math.max(d,g)>p&&!$(d,g)){a.x=p,a.y=h,a=!0;break t}}else if($(y,v)&&$(d,g)&&Math.min(p,c)<d&&Math.max(p,c)>d&&Math.min(h,m)<y&&Math.max(h,m)>y&&!$(h,m)){a.x=d,a.y=y,a=!0;break t}a.x=0,a.y=0,a=!1}a&&(o?n.push(l.x):n.push(l.y)),h=f}s.v(l)}s.u(k,{fu:"firstPickIndex"},function(){var t;return 2>=this.qa?t=0:((t=this.ac)||(t=this.computeSpot(!0)!==Ni),t=t?1:0),t}),s.u(k,{Sx:"lastPickIndex"},function(){var t=this.qa;if(t===0)t=0;else if(2>=t)t-=1;else{var i;(i=this.ac)||(i=this.computeSpot(!1)!==Ni),t=i?t-2:t-1}return t});function uh(t){return t=t.nf,t===pu||t===Qr}function xc(t,i){if(i||uh(t)){var n=t.g;n===null||n.ol.contains(t)||t.Dw===null||n.ol.add(t,t.Dw)}}function ap(t,i){var n=t.layer;if(n!==null&&n.visible&&!n.Hc){var e=n.g;if(e!==null)for(var o=!1,e=e.Ux;e.next();){var r=e.value;if(r.visible){if(r===n)for(var o=!0,h=!1,r=r.xb.n,l=r.length,u=0;u<l;u++){var f=r[u];f instanceof k&&(f===t?h=!0:h&&L1(t,f,i))}else if(o)for(r=r.xb.n,l=r.length,u=0;u<l;u++)f=r[u],f instanceof k&&L1(t,f,i)}}}}function L1(t,i,n){if(i!==null&&i.Sa!==null&&uh(i)){var e=i.$n;e.I()&&(t.$n.$f(e)||n.$f(e))&&(t.usesSamePort(i)||i.fe())}}k.prototype.usesSamePort=function(t){var i=this.qa,n=t.qa;if(0<i&&0<n){var e=this.l(0),o=t.l(0);if(e.Qc(o)||(i=this.l(i-1),t=t.l(n-1),i.Qc(t)||e.Qc(t)||i.Qc(o)))return!0}else if(this.V===t.V||this.Z===t.Z||this.V===t.Z||this.Z===t.V)return!0;return!1},k.prototype.isVisible=function(){if(!L.prototype.isVisible.call(this))return!1;var t=this.Ca,i=!0,n=this.g;n!==null&&(i=n.Vd);var e=this.V;if(e!==null){if(this.bc&&i&&!e.wc)return!1;if(e===t)return!0;for(n=e;n!==null;){if(n.Xb===this)return!0;n=n.Ca}if(n=e.findVisibleNode(),n===null||n===t)return!1}if(e=this.Z,e!==null){if(this.bc&&!i&&!e.wc)return!1;if(e===t)return!0;for(n=e;n!==null;){if(n.Xb===this)return!0;n=n.Ca}if(i=e.findVisibleNode(),i===null||i===t)return!1}return!0},k.prototype.Dd=function(t){if(L.prototype.Dd.call(this,t),this.Bi!==null&&this.Bi.fq(),this.yf!==null)for(var i=this.yf.i;i.next();)i.value.Dd(t)},s.defineProperty(k,{Jp:"adjusting"},function(){return this.Tq},function(t){var i=this.Tq;i!==t&&(this.Tq=t,this.h("adjusting",i,t))}),s.defineProperty(k,{wA:"corner"},function(){return this.nr},function(t){var i=this.nr;i!==t&&(this.nr=t,this.fe(),this.h("corner",i,t))}),s.defineProperty(k,{nf:"curve"},function(){return this.qr},function(t){var i=this.qr;i!==t&&(this.qr=t,this.Tb(),this.fe(),xc(this,i===Qr||i===pu||t===Qr||t===pu),this.h("curve",i,t))}),s.defineProperty(k,{sx:"curviness"},function(){return this.rr},function(t){var i=this.rr;i!==t&&(this.rr=t,this.Tb(),this.fe(),this.h("curviness",i,t))}),s.defineProperty(k,{sy:"routing"},function(){return this.an},function(t){var i=this.an;i!==t&&(this.an=t,this.Oi=null,this.Tb(),xc(this,(i.value&2)===2||(t.value&2)===2),this.h("routing",i,t))}),s.defineProperty(k,{Iq:"smoothness"},function(){return this.vt},function(t){var i=this.vt;i!==t&&(this.vt=t,this.fe(),this.h("smoothness",i,t))});function Df(t){var i=t.rg;if(i!==null){var n=t.Hg;if(n!==null){var e=t.Rh;t=t.li;for(var o=null,r=null,h=i.rc.n,l=h.length,u=0;u<l;u++){var f=h[u];(f.rg===i&&f.Rh===e&&f.Hg===n&&f.li===t||f.rg===n&&f.Rh===t&&f.Hg===i&&f.li===e)&&(r===null?r=f:(o===null&&(o=[],o.push(r)),o.push(f)))}if(o!==null){for(r=M1(i,n,e,t),r===null&&(r=new cu,r.qq=i,r.iy=e,r.Mu=n,r.jy=t,w1(i,r),w1(n,r)),r.links=o,u=0;u<o.length;u++)f=o[u],f.Bi=r;r.fq()}}}}function Ff(t){var i=t.Bi;i!==null&&(t.Bi=null,t=i.links.indexOf(t),0<=t&&(s.Jg(i.links,t),i.fq()))}s.u(k,{key:"key"},function(){var t=this.g;return t!==null&&t.$ instanceof K?t.$.cf(this.data):void 0},{configurable:!0});function cu(){s.oc(this),this.gh=this.aw=!1,this.jy=this.Mu=this.iy=this.qq=null,this.links=[]}cu.prototype.fq=function(){if(!this.aw){var t=this.links;0<t.length&&(t=t[0].g,t!==null&&(t.fD.add(this),this.gh=t.ja.lb))}this.aw=!0},cu.prototype.XB=function(){if(this.aw){this.aw=!1;var t=this.links;if(0<t.length){var i=t[0],n=i.g,n=n===null||n.Kn&&!this.gh;this.gh=!1,i.arrangeBundledLinks(t,n),t.length===1&&(i.Bi=null,t.length=0)}t.length===0&&(t=this.qq,this!==null&&t.Lh!==null&&t.Lh.remove(this),t=this.Mu,this!==null&&t.Lh!==null&&t.Lh.remove(this))}},s.be(cu,{qq:!0,iy:!0,Mu:!0,jy:!0,links:!0,spacing:!0});function tl(){s.oc(this),this.LB=this.group=null,this.su=!0,this.abort=!1,this.Bg=this.Ag=1,this.ss=this.rs=-1,this.Ee=this.De=8,this.qd=null,this.NG=!1,this.wG=22,this.NF=111}s.be(tl,{group:!0,LB:!0,su:!0,abort:!0,NG:!0,wG:!0,NF:!0}),tl.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var i=t.y,n=t.x+t.width,e=t.y+t.height;if(this.Ag=Math.floor((t.x-this.De)/this.De)*this.De,this.Bg=Math.floor((i-this.Ee)/this.Ee)*this.Ee,this.rs=Math.ceil((n+2*this.De)/this.De)*this.De,this.ss=Math.ceil((e+2*this.Ee)/this.Ee)*this.Ee,t=1+(Math.ceil((this.rs-this.Ag)/this.De)|0),i=1+(Math.ceil((this.ss-this.Bg)/this.Ee)|0),this.qd===null||this.Fp<t-1||this.Gp<i-1){for(n=[],e=0;e<=t;e++)n[e]=[];this.qd=n,this.Fp=t-1,this.Gp=i-1}if(this.qd!==null)for(t=0;t<=this.Fp;t++)for(i=0;i<=this.Gp;i++)this.qd[t][i]=1e6}},s.u(tl,{eb:null},function(){return new O(this.Ag,this.Bg,this.rs-this.Ag,this.ss-this.Bg)}),s.defineProperty(tl,{Op:null},function(){return this.De},function(t){0<t&&t!==this.De&&(this.De=t,this.initialize(this.eb))}),s.defineProperty(tl,{Mp:null},function(){return this.Ee},function(t){0<t&&t!==this.Ee&&(this.Ee=t,this.initialize(this.eb))});function vu(t,i,n){return t.Ag<=i&&i<=t.rs&&t.Bg<=n&&n<=t.ss}function fh(t,i,n){return vu(t,i,n)?(i-=t.Ag,i/=t.De,n-=t.Bg,n/=t.Ee,t.qd[i|0][n|0]):1e6}function pp(t,i,n){vu(t,i,n)&&(i-=t.Ag,i/=t.De,n-=t.Bg,n/=t.Ee,t.qd[i|0][n|0]=0)}function wc(t){if(t.qd!==null)for(var i=0;i<=t.Fp;i++)for(var n=0;n<=t.Gp;n++)1<=t.qd[i][n]&&(t.qd[i][n]=1e6)}tl.prototype.lq=function(t,i,n,e){if(t>this.rs||t+n<this.Ag||i>this.ss||i+e<this.Bg)return!0;t=(t-this.Ag)/this.De|0,i=(i-this.Bg)/this.Ee|0,n=Math.max(0,n)/this.De+1|0;var o=Math.max(0,e)/this.Ee+1|0;if(0>t&&(n+=t,t=0),0>i&&(o+=i,i=0),0>n||0>o)return!0;for(e=Math.min(t+n-1,this.Fp)|0,n=Math.min(i+o-1,this.Gp)|0;t<=e;t++)for(o=i;o<=n;o++)if(this.qd[t][o]===0)return!1;return!0};function Qo(t,i,n,e,o,r,h,l,u){if(!(i<r||i>h||n<l||n>u)){var f,a;f=i|0,a=n|0;var p=t.qd[f][a];if(1<=p&&999999>p)for(o?a+=e:f+=e,p+=1;r<=f&&f<=h&&l<=a&&a<=u&&!(p>=t.qd[f][a]);)t.qd[f][a]=p,p+=1,o?a+=e:f+=e;if(f=o?a:f,o)if(0<e)for(n+=e;n<f;n+=e)Qo(t,i,n,1,!o,r,h,l,u),Qo(t,i,n,-1,!o,r,h,l,u);else for(n+=e;n>f;n+=e)Qo(t,i,n,1,!o,r,h,l,u),Qo(t,i,n,-1,!o,r,h,l,u);else if(0<e)for(i+=e;i<f;i+=e)Qo(t,i,n,1,!o,r,h,l,u),Qo(t,i,n,-1,!o,r,h,l,u);else for(i+=e;i>f;i+=e)Qo(t,i,n,1,!o,r,h,l,u),Qo(t,i,n,-1,!o,r,h,l,u)}}function yp(t,i,n,e,o,r,h,l,u){i|=0,n|=0;var f=0,a=1;for(t.qd[i][n]=a;f===0&&i>r&&i<h&&n>l&&n<u;)a+=1,t.qd[i][n]=a,o?n+=e:i+=e,f=t.qd[i][n]}function cp(t,i,n,e,o,r,h,l,u){i|=0,n|=0;var f=0;for(t.qd[i][n]=999999;f===0&&i>r&&i<h&&n>l&&n<u;)t.qd[i][n]=999999,o?n+=e:i+=e,f=t.qd[i][n]}function Mc(t,i,n,e,o,r){if(t.qd!==null){t.abort=!1;var h=i.x,l=i.y;if(vu(t,h,l)&&(h-=t.Ag,h/=t.De,l-=t.Bg,l/=t.Ee,i=e.x,e=e.y,vu(t,i,e)))if(i-=t.Ag,i/=t.De,e-=t.Bg,e/=t.Ee,1>=Math.abs(h-i)&&1>=Math.abs(l-e))t.abort=!0;else{var u=r.x,f=r.y,a=r.x+r.width,p=r.y+r.height,u=u-t.Ag,u=u/t.De,f=f-t.Bg,f=f/t.Ee,a=a-t.Ag,a=a/t.De,p=p-t.Bg,p=p/t.Ee;r=Math.max(0,Math.min(t.Fp,u|0)),a=Math.min(t.Fp,Math.max(0,a|0)),f=Math.max(0,Math.min(t.Gp,f|0)),p=Math.min(t.Gp,Math.max(0,p|0)),h|=0,l|=0,i|=0,e|=0,u=n===0||n===90?1:-1,n=n===90||n===270,t.qd[h][l]===0?(yp(t,h,l,u,n,r,a,f,p),yp(t,h,l,1,!n,r,a,f,p),yp(t,h,l,-1,!n,r,a,f,p)):yp(t,h,l,u,n,h,l,h,l),t.qd[i][e]===0?(cp(t,i,e,o===0||o===90?1:-1,o===90||o===270,r,a,f,p),cp(t,i,e,1,!(o===90||o===270),r,a,f,p),cp(t,i,e,-1,!(o===90||o===270),r,a,f,p)):cp(t,i,e,u,n,i,e,i,e),t.abort||(Qo(t,h,l,1,!1,r,a,f,p),Qo(t,h,l,-1,!1,r,a,f,p),Qo(t,h,l,1,!0,r,a,f,p),Qo(t,h,l,-1,!0,r,a,f,p))}}}function il(){s.oc(this),this.port=this.Rc=null,this.gg=[],this.pq=!1}s.be(il,{Rc:!0,port:!0,gg:!0,pq:!0}),il.prototype.toString=function(){for(var t=this.gg,i=this.Rc.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var e=t[n];e!==null&&(i+=`
  `+e.toString())}return i};function Vx(t,i,n,e){switch(i=i.offsetY,i){case s.dd:return 90;case s.Uc:return 180;case s.od:return 270;case s.ed:return 0}switch(i){case s.dd|s.od:return 180<n?270:90;case s.Uc|s.ed:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,i){case s.Uc|s.od:return n>t&&n<=180+t?180:270;case s.od|s.ed:return n>180-t&&n<=360-t?270:0;case s.ed|s.dd:return n>t&&n<=180+t?90:0;case s.dd|s.Uc:return n>180-t&&n<=360-t?180:90;case s.Uc|s.od|s.ed:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case s.od|s.ed|s.dd:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case s.ed|s.dd|s.Uc:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case s.dd|s.Uc|s.od:return n>180-t&&n<=180+t?180:n>180+t?270:90}return e&&i!==(s.Uc|s.od|s.ed|s.dd)&&(n-=15,0>n&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}il.prototype.fq=function(){this.gg.length=0};function A1(t,i){var n=t.gg;if(n.length===0){t:if(!t.pq){n=t.pq,t.pq=!0;var e,o=null,u=t.Rc,u=u instanceof q?u:null;if(u===null||u.$c)e=t.Rc.aF(t.port.le);else{if(!u.U.I()){t.pq=n;break t}o=u,e=o.$E()}var r=t.gg.length=0,h=t.port.Ya(gi,s.K()),l=t.port.Ya($i,s.K()),u=s.lg(h.x,h.y,0,0);for(u.yi(l),s.v(h),s.v(l),h=s.wb(u.x+u.width/2,u.y+u.height/2),l=t.port.bm(),e=e.i;e.next();){var f=e.value;if(f.isVisible()&&f.gc!==f.zc){var a=f.gc===t.port||f.V!==null&&f.V.qi(o),p=f.computeSpot(a,t.port);if(p.zj()&&(a=a?f.zc:f.gc,a!==null)){var y=a.W;if(y!==null){var c=y.findVisibleNode();c!==null&&c!==y&&(y=c,a=y.port),a=f.computeOtherPoint(y,a),y=h.Qb(a),y-=l,0>y&&(y+=360),p=Vx(u,p,y,f.ac),c=0,p===0?(c=s.ed,180<y&&(y-=360)):c=p===90?s.dd:p===180?s.Uc:s.od,p=t.gg[r],p===void 0?(p=new Pc(f,y,c),t.gg[r]=p):(p.link=f,p.angle=y,p.ze=c),p.gy.set(a),r++}}}}for(s.v(h),t.gg.sort(il.prototype.gJ),o=t.gg.length,h=-1,r=l=0;r<o;r++)p=t.gg[r],p!==void 0&&(p.ze!==h&&(h=p.ze,l=0),p.dq=l,l++);for(h=-1,l=0,r=o-1;0<=r;r--)p=t.gg[r],p!==void 0&&(p.ze!==h&&(h=p.ze,l=p.dq+1),p.xn=l);if(r=t.gg,p=t.port,o=t.Rc.lJ,h=s.K(),l=s.K(),e=s.K(),f=s.K(),p.Ya(gi,h),p.Ya(jl,l),p.Ya($i,e),p.Ya(Dl,f),c=y=a=p=0,o===uc)for(var v=0;v<r.length;v++){var d=r[v];if(d!==null){var g=d.link.computeThickness();switch(d.ze){case s.dd:y+=g;break;case s.Uc:c+=g;break;case s.od:p+=g;break;default:case s.ed:a+=g}}}for(var m=0,w=0,M=1,v=0;v<r.length;v++)if(d=r[v],d!==null){var S,F;if(m!==d.ze){switch(m=d.ze,m){case s.dd:S=e,F=f;break;case s.Uc:S=f,F=h;break;case s.od:S=h,F=l;break;default:case s.ed:S=l,F=e}var C=F.x-S.x;switch(F=F.y-S.y,m){case s.dd:y>Math.abs(C)?(M=Math.abs(C)/y,y=Math.abs(C)):M=1;break;case s.Uc:c>Math.abs(F)?(M=Math.abs(F)/c,c=Math.abs(F)):M=1;break;case s.od:p>Math.abs(C)?(M=Math.abs(C)/p,p=Math.abs(C)):M=1;break;default:case s.ed:a>Math.abs(F)?(M=Math.abs(F)/a,a=Math.abs(F)):M=1}w=0}var G=d.nq;if(o===uc){switch(g=d.link.computeThickness(),g*=M,G.set(S),m){case s.dd:G.x=S.x+C/2+y/2-w-g/2;break;case s.Uc:G.y=S.y+F/2+c/2-w-g/2;break;case s.od:G.x=S.x+C/2-p/2+w+g/2;break;default:case s.ed:G.y=S.y+F/2-a/2+w+g/2}w+=g}else g=.5,o===lc&&(g=(d.dq+1)/(d.xn+1)),G.x=S.x+C*g,G.y=S.y+F*g}for(s.v(h),s.v(l),s.v(e),s.v(f),S=t.gg,C=0;C<S.length;C++)F=S[C],F!==null&&(F.Ax=t.computeEndSegmentLength(F));t.pq=n,s.Bb(u)}n=t.gg}for(u=0;u<n.length;u++)if(S=n[u],S!==null&&S.link===i)return S;return null}il.prototype.gJ=function(t,i){return t===i?0:t===null?-1:i===null?1:t.ze<i.ze?-1:t.ze>i.ze?1:t.angle<i.angle?-1:t.angle>i.angle?1:0},il.prototype.computeEndSegmentLength=function(t){var o=t.link,i=o.computeEndSegmentLength(this.Rc,this.port,Ni,o.gc===this.port),n=t.dq;if(0>n)return i;var e=t.xn;if(1>=e||!o.ac)return i;var o=t.gy,r=t.nq;return(t.ze===s.Uc||t.ze===s.dd)&&(n=e-1-n),((t=t.ze===s.Uc||t.ze===s.ed)?o.y<r.y:o.x<r.x)?i+8*n:(t?o.y===r.y:o.x===r.x)?i:i+8*(e-1-n)};function Pc(t,i,n){this.link=t,this.angle=i,this.ze=n,this.gy=new D,this.xn=this.dq=0,this.nq=new D,this.Ax=0}s.be(Pc,{link:!0,angle:!0,ze:!0,gy:!0,dq:!0,xn:!0,nq:!0,Ax:!0}),Pc.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ze.toString()+":"+this.dq.toString()+"/"+this.xn.toString()+" "+this.nq.toString()+" "+this.Ax.toString()+" "+this.gy.toString()};function vp(){this.zk=this.$j=an,this.xk=this.Yj=NaN,this.wk=this.Xj=$h,this.yk=this.Zj=NaN,this.Et=this.Jr=null,this.Ft=this.Kr=1/0}vp.prototype.copy=function(){var t=new vp;return t.$j=this.$j.S(),t.zk=this.zk.S(),t.Yj=this.Yj,t.xk=this.xk,t.Xj=this.Xj,t.wk=this.wk,t.Zj=this.Zj,t.yk=this.yk,t.Jr=this.Jr,t.Et=this.Et,t.Kr=this.Kr,t.Ft=this.Ft,t};function q(t){I.call(this,t),this.ya|=4608,this.us=new R(L),this.fp=new R(q),this.Lb=this.zt=this.Dl=this.vs=this.ts=null,this.oe=new wt,this.oe.group=this}s.La(q,I),s.ga("Group",q),q.prototype.cloneProtected=function(t){I.prototype.cloneProtected.call(this,t),this.ya&=-32769,t.ts=this.ts,t.vs=this.vs,t.Dl=this.Dl,t.zt=this.zt;var i=t.bu(function(n){return n instanceof nn});t.Lb=i instanceof nn?i:null,this.oe!==null?(t.oe=this.oe.copy(),t.oe.group=t):(t.oe!==null&&(t.oe.group=null),t.oe=null)},q.prototype.pi=function(t){I.prototype.pi.call(this,t);var i=t.$p();for(t=t.hc;t.next();){var n=t.value;if(n.H(),n.J(8),n.Ut(),n instanceof I)n.ag(i);else if(n instanceof k)for(n=n.Ff;n.next();)n.value.ag(i)}},q.prototype.Zn=function(t,i,n,e,o,r,h){if(t===Ei&&i==="elements")if(o instanceof nn){var l=o;this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else o instanceof A&&(l=o.bu(function(u){return u instanceof nn}),l instanceof nn&&(this.Lb===null?this.Lb=l:this.Lb!==l&&s.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else t===zi&&i==="elements"&&this.Lb!==null&&(e===this.Lb?this.Lb=null:e instanceof A&&this.Lb.hm(e)&&(this.Lb=null));I.prototype.Zn.call(this,t,i,n,e,o,r,h)},q.prototype.pj=function(t,i,n,e){this.Cl=this.Lb,A.prototype.pj.call(this,t,i,n,e)},q.prototype.im=function(){if(!I.prototype.im.call(this))return!1;for(var t=this.hc;t.next();){var i=t.value;if(i instanceof I){if(i.isVisible()&&Qe(i))return!1}else if(i instanceof k&&i.isVisible()&&Qe(i)&&i.V!==this&&i.Z!==this)return!1}return!0},s.u(q,{placeholder:"placeholder"},function(){return this.Lb}),s.defineProperty(q,{EH:"computesBoundsAfterDrag"},function(){return(this.ya&2048)!==0},function(t){var i=(this.ya&2048)!==0;i!==t&&(s.j(t,"boolean",q,"computesBoundsAfterDrag"),this.ya^=2048,this.h("computesBoundsAfterDrag",i,t))}),s.defineProperty(q,{nx:"computesBoundsIncludingLinks"},function(){return(this.ya&4096)!==0},function(t){s.j(t,"boolean",q,"computesBoundsIncludingLinks");var i=(this.ya&4096)!==0;i!==t&&(this.ya^=4096,this.h("computesBoundsIncludingLinks",i,t))}),s.defineProperty(q,{FH:"computesBoundsIncludingLocation"},function(){return(this.ya&8192)!==0},function(t){s.j(t,"boolean",q,"computesBoundsIncludingLocation");var i=(this.ya&8192)!==0;i!==t&&(this.ya^=8192,this.h("computesBoundsIncludingLocation",i,t))}),s.defineProperty(q,{oI:"handlesDragDropForMembers"},function(){return(this.ya&16384)!==0},function(t){s.j(t,"boolean",q,"handlesDragDropForMembers");var i=(this.ya&16384)!==0;i!==t&&(this.ya^=16384,this.h("handlesDragDropForMembers",i,t))}),s.u(q,{hc:"memberParts"},function(){return this.us.i});function Tc(t,i){if(t.us.add(i)){i instanceof q&&t.fp.add(i);var n=t.XI;if(n!==null){var e=!0,o=t.g;o!==null&&(e=o.Ua,o.Ua=!0),n(t,i),o!==null&&(o.Ua=e)}t.isVisible()&&t.$c||i.Dd(!1)}i instanceof k&&!t.nx||(n=t.Lb,n===null&&(n=t),n.H())}function Sc(t,i){if(t.us.remove(i)){i instanceof q&&t.fp.remove(i);var n=t.YI;if(n!==null){var e=!0,o=t.g;o!==null&&(e=o.Ua,o.Ua=!0),n(t,i),o!==null&&(o.Ua=e)}t.isVisible()&&t.$c||i.Dd(!0)}i instanceof k&&!t.nx||(n=t.Lb,n===null&&(n=t),n.H())}q.prototype.zn=function(){if(0<this.us.count){var t=this.g;if(t!==null)for(var i=this.us.copy().i;i.next();)t.remove(i.value)}I.prototype.zn.call(this)},s.defineProperty(q,{Ub:"layout"},function(){return this.oe},function(t){var i=this.oe;if(i!==t){t!==null&&s.G(t,wt,q,"layout"),i!==null&&(i.g=null,i.group=null),this.oe=t;var n=this.g;t!==null&&(t.g=n,t.group=this),n!==null&&(n.Pj=!0),this.h("layout",i,t),n!==null&&n.ye()}}),s.defineProperty(q,{XI:"memberAdded"},function(){return this.ts},function(t){var i=this.ts;i!==t&&(t!==null&&s.j(t,"function",q,"memberAdded"),this.ts=t,this.h("memberAdded",i,t))}),s.defineProperty(q,{YI:"memberRemoved"},function(){return this.vs},function(t){var i=this.vs;i!==t&&(t!==null&&s.j(t,"function",q,"memberRemoved"),this.vs=t,this.h("memberRemoved",i,t))}),s.defineProperty(q,{gB:"memberValidation"},function(){return this.Dl},function(t){var i=this.Dl;i!==t&&(t!==null&&s.j(t,"function",q,"memberValidation"),this.Dl=t,this.h("memberValidation",i,t))}),q.prototype.canAddMembers=function(t){var i=this.g;if(i===null)return!1;for(i=i.pb,t=V0(t).i;t.next();)if(!i.isValidMember(this,t.value))return!1;return!0},q.prototype.addMembers=function(t,i){var n=this.g;if(n===null)return!1;for(var n=n.pb,e=!0,o=V0(t).i;o.next();){var r=o.value;!i||n.isValidMember(this,r)?r.Ca=this:e=!1}return e},s.defineProperty(q,{ZJ:"ungroupable"},function(){return(this.ya&256)!==0},function(t){var i=(this.ya&256)!==0;i!==t&&(s.j(t,"boolean",q,"ungroupable"),this.ya^=256,this.h("ungroupable",i,t))}),q.prototype.canUngroup=function(){if(!this.ZJ)return!1;var t=this.layer;return t!==null&&!t.kx?!1:(t=t.g,!!(t===null||t.kx))},q.prototype.ag=function(t){t===void 0&&(t=null);var i=(this.ya&65536)!==0;if(I.prototype.ag.call(this,t),!i)for(!(this.ya&65536)&&(this.ya^=65536),i=this.$E();i.next();){var n=i.value;if(t===null||!t.contains(n)){var e=n.V;e!==null&&e!==this&&e.qi(this)&&!e.isVisible()?(ye(e,n.gc),ye(e,n.zc),n.Tb()):(e=n.Z,e!==null&&e!==this&&e.qi(this)&&!e.isVisible()&&(ye(e,n.gc),ye(e,n.zc),n.Tb()))}}},q.prototype.findExternalLinksConnected=q.prototype.$E=function(){var t=this.$p();t.add(this);for(var i=new R(k),n=t.i;n.next();){var e=n.value;if(e instanceof I)for(e=e.je;e.next();){var o=e.value;t.contains(o)||i.add(o)}}return i.i},q.prototype.findExternalNodesConnected=function(){var t=this.$p();t.add(this);for(var i=new R(I),n=t.i;n.next();){var e=n.value;if(e instanceof I)for(e=e.je;e.next();){var o=e.value,r=o.V;t.contains(r)&&r!==this||i.add(r),o=o.Z,t.contains(o)&&o!==this||i.add(o)}}return i.i},q.prototype.findContainingGroupChain=function(){function t(n,e){n!==null&&(e.add(n),t(n.Ca,e))}var i=new R(q);return t(this,i),i},q.prototype.findSubGraphParts=q.prototype.$p=function(){var t=new R(L);return ps(t,this,!0,0,!0),t.remove(this),t},q.prototype.Dd=function(t){I.prototype.Dd.call(this,t);for(var i=this.hc;i.next();)i.value.Dd(t)},q.prototype.collapseSubGraph=q.prototype.collapseSubGraph=function(){var t=this.g;if(t!==null&&!t.yh){t.yh=!0;var i=this.$p();I1(this,i,t.Ka,this),t.yh=!1}};function I1(t,i,n,e){for(var o=t.hc;o.next();){var r=o.value;if(r.Dd(!1),r instanceof q){var h=r;h.$c&&(h.Gy=h.$c,I1(h,i,n,e))}if(r instanceof I)r.ag(i),ey(n,r,e);else if(r instanceof k)for(r=r.Ff;r.next();)r.value.ag(i)}t.$c=!1}q.prototype.expandSubGraph=q.prototype.expandSubGraph=function(){var t=this.g;if(t!==null&&!t.yh){t.yh=!0;var i=this.$p();B1(this,i,t.Ka,this),t.yh=!1}};function B1(t,i,n,e){for(var o=t.hc;o.next();){var r=o.value;if(r.Dd(!0),r instanceof q){var h=r;h.Gy&&(h.Gy=!1,B1(h,i,n,e))}if(r instanceof I)r.ag(i),ny(n,r,e);else if(r instanceof k)for(r=r.Ff;r.next();)r.value.ag(i)}t.$c=!0}s.defineProperty(q,{$c:"isSubGraphExpanded"},function(){return(this.ya&512)!==0},function(t){var i=(this.ya&512)!==0;if(i!==t){s.j(t,"boolean",q,"isSubGraphExpanded"),this.ya^=512;var n=this.g;if(this.h("isSubGraphExpanded",i,t),i=this.PJ,i!==null){var e=!0;n!==null&&(e=n.Ua,n.Ua=!0),i(this),n!==null&&(n.Ua=e)}n!==null&&n.ja.lb?(this.Lb!==null&&this.Lb.H(),this.hc.each(function(o){o.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}),s.defineProperty(q,{Gy:"wasSubGraphExpanded"},function(){return(this.ya&1024)!==0},function(t){var i=(this.ya&1024)!==0;i!==t&&(s.j(t,"boolean",q,"wasSubGraphExpanded"),this.ya^=1024,this.h("wasSubGraphExpanded",i,t))}),s.defineProperty(q,{PJ:"subGraphExpandedChanged"},function(){return this.zt},function(t){var i=this.zt;i!==t&&(t!==null&&s.j(t,"function",q,"subGraphExpandedChanged"),this.zt=t,this.h("subGraphExpandedChanged",i,t))}),q.prototype.move=function(t){var n=this.position,i=n.x;isNaN(i)&&(i=0),n=n.y,isNaN(n)&&(n=0);var i=t.x-i,n=t.y-n,e=s.wb(i,n);I.prototype.move.call(this,t),t=new R(k);for(var o=this.$p().i;o.next();){var r=o.value;r instanceof k&&(r.vi&&t.add(r),r.vi=!0)}for(o.reset();o.next();)if(r=o.value,!(r instanceof k||r instanceof I&&r.Df)){var h=r.position,l=r.location;h.I()?(e.x=h.x+i,e.y=h.y+n,r.position=e):l.I()&&(e.x=l.x+i,e.y=l.y+n,r.location=e)}for(o.reset();o.next();)r=o.value,r instanceof k&&(r.vi=t.contains(r),r.Mf||r.V!==this&&r.Z!==this)&&(h=r.position,e.x=h.x+i,e.y=h.y+n,e.I()?r.move(e):r.Tb(),dc(r)&&r.Tb());s.v(e)},s.defineProperty(q,{Wn:null},function(){return(this.ya&32768)!==0},function(t){(this.ya&32768)!==0!==t&&(this.ya^=32768)});function nn(){N.call(this),this.lf=Zu,this.jt=new O(NaN,NaN,NaN,NaN)}s.La(nn,N),s.ga("Placeholder",nn),nn.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.lf=this.lf.S(),t.jt=this.jt.copy()},nn.prototype.Ek=function(t){if(this.background===null&&this.pn===null)return!1;var i=this.Ja;return hr(0,0,i.width,i.height,t.x,t.y)},nn.prototype.Qn=function(){var t=this.W;if(t!==null&&(t instanceof q||t instanceof vt)||s.k("Placeholder is not inside a Group or Adornment."),t instanceof q){var i=this.computeBorder(this.jt),n=this.Nc;Or(n,i.width||0,i.height||0),qo(this,0,0,n.width,n.height);for(var e=t.hc,n=!1;e.next();)if(e.value.isVisible()){n=!0;break}e=t.g,!n||e===null||e.Ka.df||isNaN(i.x)||isNaN(i.y)||(n=s.K(),n.ao(i,t.Gf),t.location=new D(n.x,n.y),s.v(n))}else{var i=this.Da,n=this.Nc,e=this.padding,o=e.left+e.right,r=e.top+e.bottom;if(i.I())Or(n,i.width+o||0,i.height+r||0),qo(this,-e.left,-e.top,n.width,n.height);else{var h=t.ub,l=h.Ya(gi,s.K()),i=s.lg(l.x,l.y,0,0);i.yi(h.Ya($i,l)),i.yi(h.Ya(jl,l)),i.yi(h.Ya(Dl,l)),t.Xi.m(i.x,i.y),Or(n,i.width+o||0,i.height+r||0),qo(this,-e.left,-e.top,n.width,n.height),s.v(l),s.Bb(i)}}},nn.prototype.pj=function(t,i,n,e){var o=this.U;o.x=t,o.y=i,o.width=n,o.height=e},nn.prototype.computeBorder=function(t){var i=this.W;if(i instanceof q){var n=i;if(n.EH&&this.jt.I()){var e=n.g;if(e!==null&&!n.layer.Hc&&(e=e.Xa,e instanceof dt&&!e.Dr&&e.$b!==null&&!e.$b.contains(n)))return t.assign(this.jt),t}}var n=s.vf(),e=this.computeMemberBounds(n),o=this.padding;return t.m(e.x-o.left,e.y-o.top,Math.max(e.width+o.left+o.right,0),Math.max(e.height+o.top+o.bottom,0)),s.Bb(n),i instanceof q&&(n=i,n.FH&&n.location.I()&&t.yi(n.location)),t},nn.prototype.computeMemberBounds=function(t){if(!(this.W instanceof q))return t.m(0,0,0,0),t;for(var i=this.W,n=1/0,e=1/0,o=-1/0,r=-1/0,h=i.hc;h.next();){var l=h.value;if(l.isVisible()){if(l instanceof k){var u=l;if(!i.nx||gs(u)||u.V===i||u.Z===i)continue}l=l.U,l.left<n&&(n=l.left),l.top<e&&(e=l.top),l.right>o&&(o=l.right),l.bottom>r&&(r=l.bottom)}}return isFinite(n)&&isFinite(e)?t.m(n,e,o-n,r-e):(i=i.location,n=this.padding,t.m(i.x+n.left,i.y+n.top,0,0)),t},s.defineProperty(nn,{padding:"padding"},function(){return this.lf},function(t){typeof t=="number"?t=new xt(t):s.G(t,xt,nn,"padding");var i=this.lf;i.L(t)||(this.lf=t=t.S(),this.h("padding",i,t))});function wt(){0<arguments.length&&s.nd(wt),s.oc(this),this.yz=this.aa=null,this.wl=this.$r=!0,this.fs=!1,this.Xq=new D(0,0).freeze(),this.bs=this.cs=!0,this.TC="",this.es=!1,this.Kz=null}s.ga("Layout",wt),wt.prototype.cloneProtected=function(t){t.$r=this.$r,t.wl=this.wl,t.fs=this.fs,t.Xq.assign(this.Xq),t.cs=this.cs,t.bs=this.bs,t.TC=this.TC,t.es=!0},wt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},wt.prototype.ic=function(t){s.Lj(this,t)},wt.prototype.toString=function(){var t=s.pf(Object.getPrototypeOf(this)),t=t+"(";return this.group!==null&&(t+=" in "+this.group),this.g!==null&&(t+=" for "+this.g),t+")"},s.defineProperty(wt,{g:"diagram"},function(){return this.aa},function(t){t!==null&&s.G(t,x,wt,"diagram"),this.aa=t}),s.defineProperty(wt,{group:"group"},function(){return this.yz},function(t){this.yz!==t&&(t!==null&&s.G(t,q,wt,"group"),this.yz=t,t!==null&&(this.aa=t.g))}),s.defineProperty(wt,{DI:"isOngoing"},function(){return this.$r},function(t){this.$r!==t&&(s.j(t,"boolean",wt,"isOngoing"),this.$r=t)}),s.defineProperty(wt,{GF:"isInitial"},function(){return this.wl},function(t){s.j(t,"boolean",wt,"isInitial"),this.wl=t,t||(this.es=!0)}),s.defineProperty(wt,{Qx:"isViewportSized"},function(){return this.fs},function(t){this.fs!==t&&(s.j(t,"boolean",wt,"isViewportSized"),(this.fs=t)&&this.J())}),s.defineProperty(wt,{Au:"isRouting"},function(){return this.cs},function(t){this.cs!==t&&(s.j(t,"boolean",wt,"isRouting"),this.cs=t)}),s.defineProperty(wt,{JF:"isRealtime"},function(){return this.bs},function(t){this.bs!==t&&(s.j(t,"boolean",wt,"isRealtime"),this.bs=t)}),s.defineProperty(wt,{sf:"isValidLayout"},function(){return this.es},function(t){this.es!==t&&(s.j(t,"boolean",wt,"isValidLayout"),this.es=t,t||(t=this.g,t!==null&&(t.Pj=!0)))}),wt.prototype.invalidateLayout=wt.prototype.J=function(){if(this.sf){var t=this.g;if(t!==null&&!t.ja.lb){var i=t.Ka;!i.Wo&&(i.df&&i.Ih(),this.DI&&t.Kn||this.GF&&!t.Kn)&&(this.sf=!1,t.ye())}}},s.defineProperty(wt,{network:"network"},function(){return this.Kz},function(t){var i=this.Kz;i!==t&&(t!==null&&s.G(t,At,wt,"network"),i!==null&&(i.Ub=null),this.Kz=t,t!==null&&(t.Ub=this))}),wt.prototype.createNetwork=function(){return new At},wt.prototype.makeNetwork=function(t){var i=this.createNetwork();return i.Ub=this,t instanceof x?(i.Bk(t.ig,!0),i.Bk(t.links,!0)):t instanceof q?i.Bk(t.hc):i.Bk(t.i),i},wt.prototype.updateParts=function(){var t=this.g;if(t===null&&this.network!==null)for(var i=this.network.vertexes.i;i.next();){var n=i.value.Rc;if(n!==null&&(t=n.g,t!==null))break}this.sf=!0;try{t!==null&&t.Ib("Layout"),this.commitLayout()}finally{t!==null&&t.Yc("Layout")}},wt.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.Au)for(t=this.network.edges.i;t.next();)t.value.commit()},wt.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var i=new R(L);t instanceof x?(xs(this,i,t.ig,!0,this.Wn,!0,!1,!0),xs(this,i,t.Hj,!0,this.Wn,!0,!1,!0)):t instanceof q?xs(this,i,t.hc,!1,this.Wn,!0,!1,!0):i.Pc(t.i);var n=i.count;if(0<n){t=this.g,t!==null&&t.Ib("Layout"),n=Math.ceil(Math.sqrt(n)),this.Md=this.initialOrigin(this.Md);for(var e=this.Md.x,o=e,r=this.Md.y,h=0,l=0,i=i.i;i.next();){var u=i.value;u.Ne();var a=u.za,f=a.width,a=a.height;u.moveTo(o,r),u instanceof q&&(u.Wn=!1),o+=Math.max(f,50)+20,l=Math.max(l,Math.max(a,50)),h>=n-1?(h=0,o=e,r+=l+20,l=0):h++}t!==null&&t.Yc("Layout")}this.sf=!0},wt.prototype.Wn=function(t){return!!(!t.location.I()||t instanceof q&&t.Wn)};function xs(t,i,n,e,o,r,h,l){for(n=n.i;n.next();){var u=n.value;e&&!u.jq||o!==null&&!o(u)||!u.canLayout()||(r&&u instanceof I?u.Df||(u instanceof q&&u.Ub===null?xs(t,i,u.hc,!1,o,r,h,l):(kc(u),i.add(u))):h&&u instanceof k?i.add(u):!l||!u.he()||u instanceof I||(kc(u),i.add(u)))}}function kc(t){var i=t.U;(i.width===0||i.height===0||isNaN(i.width)||isNaN(i.height))&&t.Ne()}wt.prototype.collectParts=wt.prototype.zH=function(t){var i=new R(L);return t instanceof x?(xs(this,i,t.ig,!0,null,!0,!0,!0),xs(this,i,t.links,!0,null,!0,!0,!0),xs(this,i,t.Hj,!0,null,!0,!0,!0)):t instanceof q?xs(this,i,t.hc,!1,null,!0,!0,!0):xs(this,i,t.i,!1,null,!0,!0,!0),i},s.defineProperty(wt,{Md:"arrangementOrigin"},function(){return this.Xq},function(t){s.G(t,D,wt,"arrangementOrigin"),this.Xq.L(t)||(this.Xq.assign(t),this.J())}),wt.prototype.initialOrigin=function(t){var i=this.group;if(i!==null){var n=i.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),i=i.placeholder,i!==null&&(n=i.Ya(gi),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=i.padding.left,n.y+=i.padding.top),n}return t};function At(){if(s.oc(this),this.oe=null,this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new R(It),this.edges=new R(Hi),this.ay=new tt(I,It),this.Wx=new tt(k,Hi)}s.ga("LayoutNetwork",At),At.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var i=t.value;i.clear(),i.network=null}if(this.edges)for(t=this.edges.i;t.next();)i=t.value,i.clear(),i.network=null;this.vertexes=new R(It),this.edges=new R(Hi),this.ay=new tt(I,It),this.Wx=new tt(k,Hi)},At.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutNetwork"+(this.Ub!==null?"("+this.Ub.toString()+")":"");if(0>=t)return i;if(i+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var n=this.vertexes.i;n.next();)i+=`
    `+n.value.toString(t-1);for(n=this.edges.i;n.next();)i+=`
    `+n.value.toString(t-1)}return i},s.defineProperty(At,{Ub:"layout"},function(){return this.oe},function(t){this.oe=t}),At.prototype.createVertex=function(){return new It},At.prototype.createEdge=function(){return new Hi},At.prototype.addParts=At.prototype.Bk=function(t,i,n){if(t!==null){for(i===void 0&&(i=!1),s.j(i,"boolean",At,"addParts:toplevelonly"),n===void 0&&(n=null),n===null&&(n=function(h){if(h instanceof I)return!h.Df;if(h instanceof k){var l=h.V;return l===null||l.Df?!1:(h=h.Z,!(h===null||h.Df))}return!1}),t=t.i;t.next();){var e=t.value;if(e instanceof I&&(!i||e.jq)&&e.canLayout()&&n(e)){if(e instanceof q&&e.Ub===null)this.Bk(e.hc,!1);else if(this.Cn(e)===null){var o=this.createVertex();o.Rc=e,this.Ql(o)}}}for(t.reset();t.next();)if(e=t.value,e instanceof k&&(!i||e.jq)&&e.canLayout()&&n(e)&&this.Cx(e)===null){var r=e.V,o=e.Z;r!==null&&o!==null&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),r!==null&&o!==null&&this.oq(r,o,e))}}},At.prototype.findGroupVertex=function(t){if(t===null)return null;var i=t.findVisibleNode();if(i===null)return null;if(t=this.Cn(i),t!==null)return t;for(i=i.Ca;i!==null;){if(t=this.Cn(i),t!==null)return t;i=i.Ca}return null},At.prototype.addVertex=At.prototype.Ql=function(t){if(t!==null){this.vertexes.add(t);var i=t.Rc;i!==null&&this.ay.add(i,t),t.network=this}},At.prototype.addNode=At.prototype.Pt=function(t){if(t===null)return null;var i=this.Cn(t);return i===null&&(i=this.createVertex(),i.Rc=t,this.Ql(i)),i},At.prototype.deleteVertex=At.prototype.VE=function(t){if(t!==null&&E1(this,t)){for(var i=t.Se,n=i.count-1;0<=n;n--){var e=i.fa(n);this.Wp(e)}for(i=t.Me,n=i.count-1;0<=n;n--)e=i.fa(n),this.Wp(e)}};function E1(t,i){if(i===null)return!1;var n=t.vertexes.remove(i);return n&&(t.ay.remove(i.Rc),i.network=null),n}At.prototype.deleteNode=function(t){t!==null&&(t=this.Cn(t),t!==null&&this.VE(t))},At.prototype.findVertex=At.prototype.Cn=function(t){return t===null?null:this.ay.ka(t)},At.prototype.addEdge=At.prototype.Ip=function(t){if(t!==null){this.edges.add(t);var i=t.link;i!==null&&this.Cx(i)===null&&this.Wx.add(i,t),i=t.toVertex,i!==null&&i.zE(t),i=t.fromVertex,i!==null&&i.xE(t),t.network=this}},At.prototype.addLink=function(t){if(t===null)return null;var i=t.V,n=t.Z,e=this.Cx(t);return e===null?(e=this.createEdge(),e.link=t,i!==null&&(e.fromVertex=this.Pt(i)),n!==null&&(e.toVertex=this.Pt(n)),this.Ip(e)):(e.fromVertex=i!==null?this.Pt(i):null,e.toVertex=n!==null?this.Pt(n):null),e},At.prototype.deleteEdge=At.prototype.Wp=function(t){if(t!==null){var i=t.toVertex;i!==null&&i.UE(t),i=t.fromVertex,i!==null&&i.TE(t),Nc(this,t)}};function Nc(t,i){i!==null&&t.edges.remove(i)&&(t.Wx.remove(i.link),i.network=null)}At.prototype.deleteLink=function(t){t!==null&&(t=this.Cx(t),t!==null&&this.Wp(t))},At.prototype.findEdge=At.prototype.Cx=function(t){return t===null?null:this.Wx.ka(t)},At.prototype.linkVertexes=At.prototype.oq=function(t,i,n){if(t===null||i===null)return null;if(t.network===this&&i.network===this){var e=this.createEdge();return e.link=n,e.fromVertex=t,e.toVertex=i,this.Ip(e),e}return null},At.prototype.reverseEdge=At.prototype.Wu=function(t){if(t!==null){var i=t.fromVertex,n=t.toVertex;i!==null&&n!==null&&(i.TE(t),n.UE(t),t.Wu(),i.zE(t),n.xE(t))}},At.prototype.deleteSelfEdges=At.prototype.ux=function(){for(var t=s.Za(),i=this.edges.i;i.next();){var n=i.value;n.fromVertex===n.toVertex&&t.push(n)}for(i=t.length,n=0;n<i;n++)this.Wp(t[n]);s.ra(t)},At.prototype.deleteArtificialVertexes=function(){for(var t=s.Za(),i=this.vertexes.i;i.next();){var n=i.value;n.Rc===null&&t.push(n)}for(var n=t.length,e=0;e<n;e++)this.VE(t[e]);for(i=s.Za(),n=this.edges.i;n.next();)e=n.value,e.link===null&&i.push(e);for(n=i.length,e=0;e<n;e++)this.Wp(i[e]);s.ra(t),s.ra(i)};function Hx(t){for(var i=s.Za(),n=t.edges.i;n.next();){var e=n.value;e.fromVertex!==null&&e.toVertex!==null||i.push(e)}for(n=i.length,e=0;e<n;e++)t.Wp(i[e]);s.ra(i)}At.prototype.splitIntoSubNetworks=At.prototype.OJ=function(){this.deleteArtificialVertexes(),Hx(this),this.ux();for(var t=new E(At),i=!0;i;)for(var i=!1,n=this.vertexes.i;n.next();){var e=n.value;if(0<e.Se.count||0<e.Me.count){i=this.Ub.createNetwork(),t.add(i),Cc(this,i,e),i=!0;break}}return t.sort(function(o,r){return o===null||r===null||o===r?0:r.vertexes.count-o.vertexes.count}),t};function Cc(t,i,n){if(n!==null&&n.network!==i){E1(t,n),i.Ql(n);for(var e=n.nc;e.next();){var o=e.value;o.network!==i&&(Nc(t,o),i.Ip(o),Cc(t,i,o.fromVertex))}for(e=n.lc;e.next();)n=e.value,n.network!==i&&(Nc(t,n),i.Ip(n),Cc(t,i,n.toVertex))}}At.prototype.findAllParts=function(){for(var t=new R(L),i=this.vertexes.i;i.next();)t.add(i.value.Rc);for(i=this.edges.i;i.next();)t.add(i.value.link);return t};function It(){s.oc(this),this.network=null,this.O=new O(0,0,10,10).freeze(),this.T=new D(5,5).freeze(),this.vd=this.Zd=null,this.Se=new E(Hi),this.Me=new E(Hi)}s.ga("LayoutVertex",It),It.prototype.clear=function(){this.vd=this.Zd=null,this.Se=new E(Hi),this.Me=new E(Hi)},It.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutVertex#"+s.Pd(this);if(0<t&&(i+=this.Rc!==null?"("+this.Rc.toString()+")":"",1<t)){t="";for(var n=!0,e=this.Se.i;e.next();){var o=e.value;n?n=!1:t+=",",t+=o.toString(0)}for(o="",n=!0,e=this.Me.i;e.next();){var r=e.value;n?n=!1:o+=",",o+=r.toString(0)}i+=" sources: "+t+" destinations: "+o}return i},s.defineProperty(It,{data:"data"},function(){return this.Zd},function(t){if(this.Zd=t,t!==null){var e=t.bounds;t=e.x;var i=e.y,n=e.width,e=e.height;this.T.m(n/2,e/2),this.O.m(t,i,n,e)}}),s.defineProperty(It,{Rc:"node"},function(){return this.vd},function(t){if(this.vd!==t){this.vd=t,t.Ne();var o=t.U,i=o.x,n=o.y,e=o.width,o=o.height;if(isNaN(i)&&(i=0),isNaN(n)&&(n=0),this.O.m(i,n,e,o),!(t instanceof q)&&(t=t.cg.Ya(kt),t.I())){this.T.m(t.x-i,t.y-n);return}this.T.m(e/2,o/2)}}),s.defineProperty(It,{eb:"bounds"},function(){return this.O},function(t){this.O.L(t)||this.O.assign(t)}),s.defineProperty(It,{focus:"focus"},function(){return this.T},function(t){this.T.L(t)||this.T.assign(t)}),s.defineProperty(It,{la:"centerX"},function(){return this.O.x+this.T.x},function(t){var i=this.O;i.x+this.T.x!==t&&(i.Qa(),i.x=t-this.T.x,i.freeze())}),s.defineProperty(It,{sa:"centerY"},function(){return this.O.y+this.T.y},function(t){var i=this.O;i.y+this.T.y!==t&&(i.Qa(),i.y=t-this.T.y,i.freeze())}),s.defineProperty(It,{ju:"focusX"},function(){return this.T.x},function(t){var i=this.T;i.x!==t&&(i.Qa(),i.x=t,i.freeze())}),s.defineProperty(It,{ku:"focusY"},function(){return this.T.y},function(t){var i=this.T;i.y!==t&&(i.Qa(),i.y=t,i.freeze())}),s.defineProperty(It,{x:"x"},function(){return this.O.x},function(t){var i=this.O;i.x!==t&&(i.Qa(),i.x=t,i.freeze())}),s.defineProperty(It,{y:"y"},function(){return this.O.y},function(t){var i=this.O;i.y!==t&&(i.Qa(),i.y=t,i.freeze())}),s.defineProperty(It,{width:"width"},function(){return this.O.width},function(t){var i=this.O;i.width!==t&&(i.Qa(),i.width=t,i.freeze())}),s.defineProperty(It,{height:"height"},function(){return this.O.height},function(t){var i=this.O;i.height!==t&&(i.Qa(),i.height=t,i.freeze())}),It.prototype.commit=function(){var t=this.Zd;if(t!==null){var i=this.eb,n=t.bounds;s.Pa(n)?(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height):t.bounds=i.copy()}else if(t=this.Rc,t!==null){if(i=this.eb,!(t instanceof q)){var n=t.U,e=t.cg.Ya(kt);if(n.I()&&e.I()){t.moveTo(i.x+this.ju-(e.x-n.x),i.y+this.ku-(e.y-n.y));return}}t.moveTo(i.x,i.y)}},It.prototype.addSourceEdge=It.prototype.zE=function(t){t!==null&&(this.Se.contains(t)||this.Se.add(t))},It.prototype.deleteSourceEdge=It.prototype.UE=function(t){t!==null&&this.Se.remove(t)},It.prototype.addDestinationEdge=It.prototype.xE=function(t){t!==null&&(this.Me.contains(t)||this.Me.add(t))},It.prototype.deleteDestinationEdge=It.prototype.TE=function(t){t!==null&&this.Me.remove(t)},s.u(It,{NJ:"sourceVertexes"},function(){for(var t=new R(It),i=this.nc;i.next();)t.add(i.value.fromVertex);return t.i}),s.u(It,{RH:"destinationVertexes"},function(){for(var t=new R(It),i=this.lc;i.next();)t.add(i.value.toVertex);return t.i}),s.u(It,{vertexes:"vertexes"},function(){for(var t=new R(It),i=this.nc;i.next();)t.add(i.value.fromVertex);for(i=this.lc;i.next();)t.add(i.value.toVertex);return t.i}),s.u(It,{nc:"sourceEdges"},function(){return this.Se.i}),s.u(It,{lc:"destinationEdges"},function(){return this.Me.i}),s.u(It,{edges:"edges"},function(){for(var t=new E(Hi),i=this.nc;i.next();)t.add(i.value);for(i=this.lc;i.next();)t.add(i.value);return t.i}),s.u(It,{WH:"edgesCount"},function(){return this.Se.count+this.Me.count});var jc;It.standardComparer=jc=function(t,i){var n=t.vd,e=i.vd;return n?e?(n=n.text,e=e.text,n<e?-1:n>e?1:0):1:e!==null?-1:0},It.smartComparer=function(t,i){if(t!==null){if(i!==null){var n=t.vd,e=i.vd;if(n!==null){if(e!==null){for(var n=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<n.length;o++)if(e[o]!==""&&e[o]!==void 0){var r=parseFloat(n[o]),h=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(h))return 1;if(n[o].localeCompare(e[o])!==0)return n[o].localeCompare(e[o])}else{if(isNaN(h))return-1;if(r-h!==0)return r-h}}else if(n[o]!=="")return 1;return e[o]!==""&&e[o]!==void 0?-1:0}return 1}return e!==null?-1:0}return 1}return i!==null?-1:0};function Hi(){s.oc(this),this.toVertex=this.fromVertex=this.link=this.data=this.network=null}s.ga("LayoutEdge",Hi),Hi.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Hi.prototype.toString=function(t){t===void 0&&(t=0);var i="LayoutEdge#"+s.Pd(this);return 0<t&&(i+=this.link!==null?"("+this.link.toString()+")":"",1<t&&(i+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --> "+(this.toVertex?this.toVertex.toString():"null"))),i},Hi.prototype.Wu=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Hi.prototype.commit=function(){},Hi.prototype.getOtherVertex=Hi.prototype.fI=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null};function Et(){0<arguments.length&&s.nd(Et),wt.call(this),this.Qx=!0,this.Kt=this.Lt=NaN,this.Rj=new lt(NaN,NaN).freeze(),this.ei=new lt(10,10).freeze(),this.me=Lf,this.pd=gp,this.di=Af,this.Nh=z1}s.La(Et,wt),s.ga("GridLayout",Et),Et.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Lt=this.Lt,t.Kt=this.Kt,t.Rj.assign(this.Rj),t.ei.assign(this.ei),t.me=this.me,t.pd=this.pd,t.di=this.di,t.Nh=this.Nh},Et.prototype.ic=function(t){t.Je===Et?t===Af||t===xp||t===Dc||t===mp?this.sorting=t:t===gp||t===vo?this.Vf=t:t===Lf||t===dp?this.alignment=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},Et.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Md=this.initialOrigin(this.Md);var i=this.g;t=this.zH(t);for(var n=t.copy().i;n.next();){var e=n.value;if(e instanceof k){var o=e;if(o.V!==null||o.Z!==null){t.remove(o);continue}}if(e.Ne(),e instanceof q)for(e=e.hc;e.next();)t.remove(e.value)}if(o=t.yc(),o.length!==0){switch(this.sorting){case mp:o.reverse();break;case Af:o.sort(this.comparer);break;case xp:o.sort(this.comparer),o.reverse()}var r=this.cK;isNaN(r)&&(r=0);var h=this.PG,h=isNaN(h)&&i!==null?Math.max(i.sb.width-i.padding.left-i.padding.right,0):Math.max(this.PG,0);switch(0>=r&&0>=h&&(r=1),t=this.spacing.width,isFinite(t)||(t=0),n=this.spacing.height,isFinite(n)||(n=0),i!==null&&i.Ib("Layout"),e=[],this.alignment){case dp:var l=t,u=n,p=Math.max(this.Np.width,1);if(!isFinite(p))for(var S=p=0;S<o.length;S++)var f=o[S],a=f.za,p=Math.max(p,a.width);var p=Math.max(p+l,1),y=Math.max(this.Np.height,1);if(!isFinite(y))for(S=y=0;S<o.length;S++)f=o[S],a=f.za,y=Math.max(y,a.height);for(var y=Math.max(y+u,1),c=this.Vf,v=this.Md.x,d=v,g=this.Md.y,C=0,G=0,S=0;S<o.length;S++){var f=o[S],a=f.za,m=Math.ceil((a.width+l)/p)*p,w=Math.ceil((a.height+u)/y)*y,M=0;switch(c){case vo:M=Math.abs(d-a.width);break;default:M=d+a.width}switch((0<r&&C>r-1||0<h&&0<C&&M>h)&&(e.push(new O(0,g,h+l,G)),C=0,d=v,g+=G,G=0),G=Math.max(G,w),w=0,c){case vo:w=-a.width;break;default:w=0}switch(f.moveTo(d+w,g),c){case vo:d-=m;break;default:d+=m}C++}e.push(new O(0,g,h+l,G));break;case Lf:for(l=r,u=t,p=n,S=Math.max(this.Np.width,1),f=g=m=0,a=s.K(),r=0;r<o.length;r++)y=o[r],c=y.za,v=lh(y,y.cg,y.Gf,a),m=Math.max(m,v.x),g=Math.max(g,c.width-v.x),f=Math.max(f,v.y);switch(d=this.Vf,d){case vo:m+=u;break;default:g+=u}var S=isFinite(S)?Math.max(S+u,1):Math.max(m+g,1),F=g=this.Md.x,C=this.Md.y,G=0;h>=m&&(h-=m);for(var m=w=0,M=Math.max(this.Np.height,1),H=f=0,U=!0,X=s.K(),r=0;r<o.length;r++){if(y=o[r],c=y.za,v=lh(y,y.cg,y.Gf,a),0<G)switch(d){case vo:F=(F-g-(c.width-v.x))/S,F=St(Math.round(F),F)?Math.round(F):Math.floor(F),F=F*S+g;break;default:F=(F-g+v.x)/S,F=St(Math.round(F),F)?Math.round(F):Math.ceil(F),F=F*S+g}else switch(d){case vo:w=F+v.x+c.width;break;default:w=F-v.x}var _=0;switch(d){case vo:_=-(F+v.x)+w;break;default:_=F+c.width-v.x-w}if(0<l&&G>l-1||0<h&&0<G&&_>h){for(e.push(new O(0,U?C-f:C,h+u,H+f+p)),F=0;F<G&&r!==G;F++){var _=o[r-G+F],Mt=lh(_,_.cg,_.Gf,X);_.moveTo(_.position.x,_.position.y+f-Mt.y)}H+=p,C=U?C+H:C+(H+f),G=H=f=0,F=g,U=!1}switch(F===g&&(m=d===vo?Math.max(m,c.width-v.x):Math.min(m,-v.x)),f=Math.max(f,v.y),H=Math.max(H,c.height-v.y),isFinite(M)&&(H=Math.max(H,Math.max(c.height,M)-v.y)),U?y.moveTo(F-v.x,C-v.y):y.moveTo(F-v.x,C),d){case vo:F-=v.x+u;break;default:F+=c.width-v.x+u}G++}for(e.push(new O(0,C,h+u,(U?H:H+f)+p)),F=0;F<G&&r!==G;F++)_=o[r-G+F],Mt=lh(_,_.cg,_.Gf,a),_.moveTo(_.position.x,_.position.y+f-Mt.y);if(s.v(a),s.v(X),d===vo)for(r=0;r<e.length;r++)o=e[r],o.width+=m,o.x-=m;else for(r=0;r<e.length;r++)o=e[r],o.x>m&&(o.width+=o.x-m,o.x=m)}for(l=r=h=o=0;l<e.length;l++)u=e[l],o=Math.min(o,u.x),h=Math.min(h,u.y),r=Math.max(r,u.x+u.width);this.Vf===vo?this.commitLayers(e,new D(o+t/2-(r+o),h-n/2)):this.commitLayers(e,new D(o-t/2,h-n/2)),i!==null&&i.Yc("Layout"),this.sf=!0}},Et.prototype.commitLayers=function(){},s.defineProperty(Et,{PG:"wrappingWidth"},function(){return this.Lt},function(t){this.Lt!==t&&(s.j(t,"number",Et,"wrappingWidth"),0<t||isNaN(t))&&(this.Lt=t,this.Qx=isNaN(t),this.J())}),s.defineProperty(Et,{cK:"wrappingColumn"},function(){return this.Kt},function(t){this.Kt!==t&&(s.j(t,"number",Et,"wrappingColumn"),0<t||isNaN(t))&&(this.Kt=t,this.J())}),s.defineProperty(Et,{Np:"cellSize"},function(){return this.Rj},function(t){s.G(t,lt,Et,"cellSize"),this.Rj.L(t)||(this.Rj.assign(t),this.J())}),s.defineProperty(Et,{spacing:"spacing"},function(){return this.ei},function(t){s.G(t,lt,Et,"spacing"),this.ei.L(t)||(this.ei.assign(t),this.J())}),s.defineProperty(Et,{alignment:"alignment"},function(){return this.me},function(t){this.me!==t&&(s.ob(t,Et,Et,"alignment"),t===Lf||t===dp)&&(this.me=t,this.J())}),s.defineProperty(Et,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,Et,Et,"arrangement"),t===gp||t===vo)&&(this.pd=t,this.J())}),s.defineProperty(Et,{sorting:"sorting"},function(){return this.di},function(t){this.di!==t&&(s.ob(t,Et,Et,"sorting"),t===Dc||t===mp||t===Af||t===xp)&&(this.di=t,this.J())}),s.defineProperty(Et,{comparer:"comparer"},function(){return this.Nh},function(t){this.Nh!==t&&(s.j(t,"function",Et,"comparer"),this.Nh=t,this.J())});var z1;Et.standardComparer=z1=function(t,i){var n=t.text,e=i.text;return n<e?-1:n>e?1:0},Et.smartComparer=function(t,i){if(t!==null){if(i!==null){for(var n=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<n.length;o++)if(e[o]!==""&&e[o]!==void 0){var r=parseFloat(n[o]),h=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(h))return 1;if(n[o].localeCompare(e[o])!==0)return n[o].localeCompare(e[o])}else{if(isNaN(h))return-1;if(r-h!==0)return r-h}}else if(n[o]!=="")return 1;return e[o]!==""&&e[o]!==void 0?-1:0}return 1}return i!==null?-1:0};var dp;Et.Position=dp=s.p(Et,"Position",0);var Lf;Et.Location=Lf=s.p(Et,"Location",1);var gp;Et.LeftToRight=gp=s.p(Et,"LeftToRight",2);var vo;Et.RightToLeft=vo=s.p(Et,"RightToLeft",3);var Dc;Et.Forward=Dc=s.p(Et,"Forward",4);var mp;Et.Reverse=mp=s.p(Et,"Reverse",5);var Af;Et.Ascending=Af=s.p(Et,"Ascending",6);var xp;Et.Descending=xp=s.p(Et,"Descending",7);function gt(){0<arguments.length&&s.nd(gt),wt.call(this),this.oz=this.Io=this.Gd=0,this.Er=360,this.nz=Ae,this.pl=0,this.jC=new D,this.ZC=Ae,this.Av=this.Uf=this.mE=0,this.Yw=new Cp,this.Bv=this.Xm=0,this.cH=600,this.Ys=NaN,this.Zq=1,this.yt=0,this.At=360,this.pd=Ae,this.ba=vn,this.di=gu,this.Nh=jc,this.ei=6,this.Js=Np}s.La(gt,wt),s.ga("CircularLayout",gt),gt.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Ys=this.Ys,t.Zq=this.Zq,t.yt=this.yt,t.At=this.At,t.pd=this.pd,t.ba=this.ba,t.di=this.di,t.Nh=this.Nh,t.ei=this.ei,t.Js=this.Js},gt.prototype.ic=function(t){t.Je===gt?t===Sp||t===kp||t===Pp||t===Tp||t===gu?this.sorting=t:t===ah||t===du||t===vn||t===Ms?this.direction=t:t===Zr||t===ws||t===Ae||t===$e?this.Vf=t:(t===ph||t===Np)&&(this.$x=t):wt.prototype.ic.call(this,t)},gt.prototype.createNetwork=function(){return new zf},gt.prototype.doLayout=function(t){if(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Md=this.initialOrigin(this.Md),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.la=0,t.sa=0);else{var h=new E(Xr);h.Pc(t.i),t=new E(Xr);var i=new E(Xr),n;n=this.sort(h);var a=this.nz,p=this.ZC,y=this.Gd,e=this.Io,o=this.oz,r=this.Er,h=this.pl,l=this.mE,u=this.Uf,f=this.Av,a=this.Vf,p=this.$x,y=this.mJ;if((!isFinite(y)||0>=y)&&(y=NaN),e=this.tH,(!isFinite(e)||0>=e)&&(e=1),o=this.Ae,isFinite(o)||(o=0),r=this.uf,(!isFinite(r)||360<r||1>r)&&(r=360),h=this.spacing,isFinite(h)||(h=NaN),a===$e&&p===ph?a=Ae:a===$e&&p!==ph&&(p=ph,a=this.Vf),(this.direction===ah||this.direction===du)&&this.sorting!==gu){for(var c=0;!(c>=n.length)&&(t.add(n.fa(c)),!(c+1>=n.length));c+=2)i.add(n.fa(c+1));this.direction===ah?(this.Vf===$e&&t.reverse(),n=new E(Xr),n.Pc(t),n.Pc(i)):(this.Vf===$e&&i.reverse(),n=new E(Xr),n.Pc(i),n.Pc(t))}for(var v=n.length,d=l=0,c=0;c<n.length;c++){var u=o+r*d*(this.direction===vn?1:-1)/v,g=n.fa(c).diameter;isNaN(g)&&(g=Ps(n.fa(c),u)),360>r&&(c===0||c===n.length-1)&&(g/=2),l+=g,d++}if(isNaN(y)||a===$e){if(isNaN(h)&&(h=6),a!==Ae&&a!==$e){for(g=-1/0,c=0;c<v;c++){var f=n.fa(c),m=n.fa(c===v-1?0:c+1);isNaN(f.diameter)&&Ps(f,0),isNaN(m.diameter)&&Ps(m,0),g=Math.max(g,(f.diameter+m.diameter)/2)}f=g+h,a===Zr?(u=2*Math.PI/v,y=(g+h)/u):y=wp(this,f*(360<=r?v:v-1),e,o*Math.PI/180,r*Math.PI/180)}else y=wp(this,l+(360<=r?v:v-1)*(a!==$e?h:1.6*h),e,o*Math.PI/180,r*Math.PI/180);u=y*e}else if(u=y*e,d=Fc(this,y,u,o*Math.PI/180,r*Math.PI/180),isNaN(h))(a===Ae||a===$e)&&(h=(d-l)/(360<=r?v:v-1));else if(a===Ae||a===$e)c=(d-l)/(360<=r?v:v-1),c<h?(y=wp(this,l+h*(360<=r?v:v-1),e,o*Math.PI/180,r*Math.PI/180),u=y*e):h=c;else{for(g=-1/0,c=0;c<v;c++)f=n.fa(c),m=n.fa(c===v-1?0:c+1),isNaN(f.diameter)&&Ps(f,0),isNaN(m.diameter)&&Ps(m,0),g=Math.max(g,(f.diameter+m.diameter)/2);f=g+h,c=wp(this,f*(360<=r?v:v-1),e,o*Math.PI/180,r*Math.PI/180),c>y?(y=c,u=y*e):f=d/(360<=r?v:v-1)}if(this.nz=a,this.ZC=p,this.Gd=y,this.Io=e,this.oz=o,this.Er=r,this.pl=h,this.mE=l,this.Uf=u,this.Av=f,h=n,n=this.nz,a=this.Gd,p=this.oz,e=this.Er,o=this.pl,r=this.Uf,l=this.Av,this.direction!==ah&&this.direction!==du||n!==$e)if(this.direction===ah||this.direction===du){switch(y=0,n){case ws:y=180*Mp(this,a,r,p,l)/Math.PI;break;case Ae:l=h=0,y=t.first(),y!==null&&(h=Ps(y,Math.PI/2)),y=i.first(),y!==null&&(l=Ps(y,Math.PI/2)),y=180*Mp(this,a,r,p,o+(h+l)/2)/Math.PI;break;case Zr:y=e/h.length}if(this.direction===ah){switch(n){case ws:Ef(this,t,p,Ms);break;case Ae:Bf(this,t,p,Ms);break;case Zr:If(this,t,e/2,p,Ms)}switch(n){case ws:Ef(this,i,p+y,vn);break;case Ae:Bf(this,i,p+y,vn);break;case Zr:If(this,i,e/2,p+y,vn)}}else{switch(n){case ws:Ef(this,i,p,Ms);break;case Ae:Bf(this,i,p,Ms);break;case Zr:If(this,i,e/2,p,Ms)}switch(n){case ws:Ef(this,t,p+y,vn);break;case Ae:Bf(this,t,p+y,vn);break;case Zr:If(this,t,e/2,p+y,vn)}}}else switch(n){case ws:Ef(this,h,p,this.direction);break;case Ae:Bf(this,h,p,this.direction);break;case Zr:If(this,h,e,p,this.direction);break;case $e:R1(this,h,e,p,this.direction)}else R1(this,h,e,p-e/2,vn)}this.updateParts(),this.network=null,this.sf=!0};function If(t,i,n,e,o){var r=t.Er,h=t.Gd;t=t.Uf,e=e*Math.PI/180,n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=e+(o===vn?u*n/(360<=r?l:l-1):-(u*n)/l),a=i.fa(u),p=h*Math.tan(f)/t,p=Math.sqrt((h*h+t*t*p*p)/(1+p*p));a.la=p*Math.cos(f),a.sa=p*Math.sin(f),a.actualAngle=180*f/Math.PI}}function Bf(t,i,n,e){var o=t.Gd,r=t.Uf,h=t.pl;n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=i.fa(u),a=i.fa(u===l-1?0:u+1),p=r*Math.sin(n);f.la=o*Math.cos(n),f.sa=p,f.actualAngle=180*n/Math.PI,isNaN(f.diameter)&&Ps(f,0),isNaN(a.diameter)&&Ps(a,0),f=Mp(t,o,r,e===vn?n:-n,(f.diameter+a.diameter)/2+h),n+=e===vn?f:-f}}function Ef(t,i,n,e){var o=t.Gd,r=t.Uf,h=t.Av;n=n*Math.PI/180;for(var l=i.length,u=0;u<l;u++){var f=i.fa(u);f.la=o*Math.cos(n),f.sa=r*Math.sin(n),f.actualAngle=180*n/Math.PI,f=Mp(t,o,r,e===vn?n:-n,h),n+=e===vn?f:-f}}function R1(t,i,n,e,o){var r=t.Bv,r=t.Er;if(t.Xm=0,t.Yw=new Cp,360>n){for(r=e+(o===vn?r:-r);0>r;)r+=360;r%=360,180<r&&(r-=360),r*=Math.PI/180,t.Bv=r,O1(t,i,n,e,o)}else G1(t,i,n,e,o);t.Yw.commit(i)}function G1(t,i,n,e,o){var r=t.Gd,h=t.pl,l=t.Io,u=r*Math.cos(e*Math.PI/180),f=t.Uf*Math.sin(e*Math.PI/180),a=i.yc();if(a.length===3)a[0].la=r,a[0].sa=0,a[1].la=a[0].la-a[0].width/2-a[1].width/2-h,a[1].y=a[0].y,a[2].la=(a[0].la+a[1].la)/2,a[2].y=a[0].y-a[2].height-h;else if(a.length===4)a[0].la=r,a[0].sa=0,a[2].la=-a[0].la,a[2].sa=a[0].sa,a[1].la=0,a[1].y=Math.min(a[0].y,a[2].y)-a[1].height-h,a[3].la=0,a[3].y=Math.max(a[0].y+a[0].height+h,a[2].y+a[2].height+h);else{for(var r=s.K(),p=0;p<a.length&&(a[p].la=u,a[p].sa=f,!(p>=a.length-1));p++)V1(t,u,f,a,p,o,r)||H1(t,u,f,a,p,o,r),u=r.x,f=r.y;if(s.v(r),t.Xm++,!(23<t.Xm)){var u=a[0].la,f=a[0].sa,r=a[a.length-1].la,p=a[a.length-1].sa,y=Math.abs(u-r)-((a[0].width+a[a.length-1].width)/2+h),c=Math.abs(f-p)-((a[0].height+a[a.length-1].height)/2+h),h=0;1>Math.abs(c)?Math.abs(u-r)<(a[0].width+a[a.length-1].width)/2&&(h=0):h=0<c?c:1>Math.abs(y)?0:y,y=!1,y=Math.abs(r)>Math.abs(p)?0<r!=f>p:0<p!=u<r,(y=o===vn?y:!y)&&(h=-Math.abs(h),h=Math.min(h,-a[a.length-1].width),h=Math.min(h,-a[a.length-1].height)),t.Yw.compare(h,a),1<Math.abs(h)&&(t.Gd=8>t.Xm?t.Gd-h/(2*Math.PI):5>a.length&&10<h?t.Gd/2:t.Gd-(0<h?1.7:-2.3),t.Uf=t.Gd*l,G1(t,i,n,e,o))}}}function O1(t,i,n,e,o){for(var r=t.Gd,h=t.Uf,l=t.Io,u=r*Math.cos(e*Math.PI/180),f=h*Math.sin(e*Math.PI/180),a=s.K(),p=i.yc(),y=0;y<p.length&&(p[y].la=u,p[y].sa=f,!(y>=p.length-1));y++)V1(t,u,f,p,y,o,a)||H1(t,u,f,p,y,o,a),u=a.x,f=a.y;if(s.v(a),t.Xm++,!(23<t.Xm)){if(u=Math.atan2(f,u),u=o===vn?t.Bv-u:u-t.Bv,u=Math.abs(u)<Math.abs(u-2*Math.PI)?u:u-2*Math.PI,r=u*(r+h)/2,h=t.Yw,Math.abs(r)<Math.abs(h.aq))for(h.aq=r,h.lo=[],h.Nq=[],u=0;u<p.length;u++)h.lo[u]=p[u].eb.x,h.Nq[u]=p[u].eb.y;1<Math.abs(r)&&(t.Gd=8>t.Xm?t.Gd-r/(2*Math.PI):t.Gd-(0<r?1.7:-2.3),t.Uf=t.Gd*l,O1(t,i,n,e,o))}}function V1(t,i,n,e,o,r,h){var l=t.Gd,u=t.Uf,f=0,a=0;t=(e[o].width+e[o+1].width)/2+t.pl;var p=!1;if(0<=n!=(r===vn)){if(f=i+t,f>l){if(f=i-t,f<-l)return h.x=f,h.y=a,!1;p=!0}}else if(f=i-t,f<-l){if(f=i+t,f>l)return h.x=f,h.y=a,!1;p=!0}return a=Math.sqrt(1-Math.min(1,f*f/(l*l)))*u,0>n!==p&&(a=-a),Math.abs(n-a)>(e[o].height+e[o+1].height)/2?(h.x=f,h.y=a,!1):(h.x=f,h.y=a,!0)}function H1(t,i,n,e,o,r,h){var l=t.Gd,u=t.Uf,f=0,a=0;if(t=(e[o].height+e[o+1].height)/2+t.pl,e=!1,0<=i!=(r===vn)){if(a=n-t,a<-u){if(a=n+t,a>u){h.x=f,h.y=a;return}e=!0}}else if(a=n+t,a>u){if(a=n-t,a<-u){h.x=f,h.y=a;return}e=!0}f=Math.sqrt(1-Math.min(1,a*a/(u*u)))*l,0>i!==e&&(f=-f),h.x=f,h.y=a}gt.prototype.commitLayout=function(){this.commitNodes(),this.Au&&this.commitLinks()},gt.prototype.commitNodes=function(){var t=this.lH,i=this.group!==null&&this.group.placeholder!==null&&this.group.$c,n=i?this.group.location.copy():null;i?t=new D(0,0):(t.x=this.Md.x+this.Gd,t.y=this.Md.y+this.Uf);for(var e=this.network.vertexes.i;e.next();){var o=e.value;o.x+=t.x,o.y+=t.y,o.commit()}i&&(this.group.Ne(),t=this.group.position.copy(),i=this.group.location.copy(),n=n.ui(i.ui(t)),this.group.move(n),this.jC=n.ui(t))},gt.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()};function Fc(t,i,n,e,o){var r=t.cH;if(.001>Math.abs(t.Io-1))return e!==void 0&&o!==void 0?o*i:2*Math.PI*i;t=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n;for(var h=0,l=0,l=e!==void 0&&o!==void 0?o/(r+1):Math.PI/(2*(r+1)),u=0,f=0;f<=r;f++)u=e!==void 0&&o!==void 0?e+f*o/r:f*Math.PI/(2*r),u=Math.sin(u),h+=Math.sqrt(1-t*t*u*u)*l;return e!==void 0&&o!==void 0?(i>n?i:n)*h:4*(i>n?i:n)*h}function wp(t,i,n,e,o){var r=0,r=e!==void 0&&o!==void 0?Fc(t,1,n,e,o):Fc(t,1,n);return i/r}function Mp(t,i,n,e,o){if(.001>Math.abs(t.Io-1))return o/i;var r=i>n?Math.sqrt(i*i-n*n)/i:Math.sqrt(n*n-i*i)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),i>n&&(e+=Math.PI/2);for(var l=0;;l++){var u=Math.sin(e+l*t),h=h+(i>n?i:n)*Math.sqrt(1-r*r*u*u)*t;if(h>=o)return l*t}}gt.prototype.sort=function(t){switch(this.sorting){case Pp:break;case Tp:t.reverse();break;case Sp:t.sort(this.comparer);break;case kp:t.sort(this.comparer),t.reverse();break;case gu:for(var i=[],n=0;n<t.length;n++)i.push(0);for(var e=new E(Xr),n=0;n<t.length;n++){var o=-1,r=-1;if(n===0)for(var h=0;h<t.length;h++){var l=t.fa(h).WH;l>o&&(o=l,r=h)}else for(h=0;h<t.length;h++)l=i[h],l>o&&(o=l,r=h);for(e.add(t.fa(r)),i[r]=-1,r=t.fa(r),o=0,h=r.nc;h.next();)o=t.indexOf(h.value.fromVertex),0>o||0<=i[o]&&i[o]++;for(r=r.lc;r.next();)o=t.indexOf(r.value.toVertex),0>o||0<=i[o]&&i[o]++}for(t=[],r=0;r<e.length;r++){i=e.fa(r),t[r]=[];for(var u=0,n=i.lc;n.next();)u=e.indexOf(n.value.toVertex),u!==r&&0>t[r].indexOf(u)&&t[r].push(u);for(i=i.nc;i.next();)u=e.indexOf(i.value.fromVertex),u!==r&&0>t[r].indexOf(u)&&t[r].push(u)}for(h=[],r=0;r<t.length;r++)h[r]=0;for(var i=[],l=[],f=[],n=[],o=new E(Xr),a=0,r=0;r<t.length;r++){var p=t[r].length;if(p===1)n.push(r);else if(p===0)o.add(e.fa(r));else{if(a===0)i.push(r);else{for(var y=1/0,c=1/0,v=-1,d=[],p=0;p<i.length;p++)0>t[i[p]].indexOf(i[p===i.length-1?0:p+1])&&d.push(p===i.length-1?0:p+1);if(d.length===0)for(p=0;p<i.length;p++)d.push(p);for(p=0;p<d.length;p++){var g=d[p],m,u=t[r];m=l;for(var w=f,M=h,S=g,F=i,C=0,G=0;G<m.length;G++){var H=M[m[G]],U=M[w[G]],X=0,_=0;if(H<U?(X=H,_=U):(X=U,_=H),X<S&&S<=_)for(H=0;H<u.length;H++)U=u[H],0>F.indexOf(U)||X<M[U]&&M[U]<_||X===M[U]||_===M[U]||C++;else for(H=0;H<u.length;H++)U=u[H],0>F.indexOf(U)||X<M[U]&&M[U]<_&&X!==M[U]&&_!==M[U]&&C++}for(m=C,M=w=0;M<t[r].length;M++)u=i.indexOf(t[r][M]),0<=u&&(u=Math.abs(g-(u>=g?u+1:u)),w+=u<i.length+1-u?u:i.length+1-u);for(M=0;M<l.length;M++)u=h[l[M]],S=h[f[M]],u>=g&&u++,S>=g&&S++,u>S&&(F=S,S=u,u=F),S-u<(i.length+2)/2==(u<g&&g<=S)&&w++;(m<y||m===y&&w<c)&&(y=m,c=w,v=g)}for(i.splice(v,0,r),p=0;p<i.length;p++)h[i[p]]=p;for(p=0;p<t[r].length;p++)y=t[r][p],0<=i.indexOf(y)&&(l.push(r),f.push(y))}a++}}for(r=!1,h=i.length;;){for(r=!0,l=0;l<n.length;l++)if(f=n[l],a=t[f][0],u=i.indexOf(a),0<=u){for(c=p=0;c<t[a].length;c++)y=t[a][c],y=i.indexOf(y),0>y||y===u||(v=y>u?y-u:u-y,p+=y<u!=v>h-v?1:-1);i.splice(0>p?u:u+1,0,f),n.splice(l,1),l--}else r=!1;if(r)break;i.push(n[0]),n.splice(0,1)}for(r=0;r<i.length;r++)o.add(e.fa(i[r]));return o;default:s.k("Invalid sorting type.")}return t},s.defineProperty(gt,{mJ:"radius"},function(){return this.Ys},function(t){this.Ys!==t&&(s.j(t,"number",gt,"radius"),0<t||isNaN(t))&&(this.Ys=t,this.J())}),s.defineProperty(gt,{tH:"aspectRatio"},function(){return this.Zq},function(t){this.Zq!==t&&(s.j(t,"number",gt,"aspectRatio"),0<t&&(this.Zq=t,this.J()))}),s.defineProperty(gt,{Ae:"startAngle"},function(){return this.yt},function(t){this.yt!==t&&(s.j(t,"number",gt,"startAngle"),this.yt=t,this.J())}),s.defineProperty(gt,{uf:"sweepAngle"},function(){return this.At},function(t){this.At!==t&&(s.j(t,"number",gt,"sweepAngle"),this.At=0<t&&360>=t?t:360,this.J())}),s.defineProperty(gt,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,gt,gt,"arrangement"),t===$e||t===Ae||t===ws||t===Zr)&&(this.pd=t,this.J())}),s.defineProperty(gt,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(s.ob(t,gt,gt,"direction"),t===vn||t===Ms||t===ah||t===du)&&(this.ba=t,this.J())}),s.defineProperty(gt,{sorting:"sorting"},function(){return this.di},function(t){this.di!==t&&(s.ob(t,gt,gt,"sorting"),t===Pp||t===Tp||t===Sp||kp||t===gu)&&(this.di=t,this.J())}),s.defineProperty(gt,{comparer:"comparer"},function(){return this.Nh},function(t){this.Nh!==t&&(s.j(t,"function",gt,"comparer"),this.Nh=t,this.J())}),s.defineProperty(gt,{spacing:"spacing"},function(){return this.ei},function(t){this.ei!==t&&(s.j(t,"number",gt,"spacing"),this.ei=t,this.J())}),s.defineProperty(gt,{$x:"nodeDiameterFormula"},function(){return this.Js},function(t){this.Js!==t&&(s.ob(t,gt,gt,"nodeDiameterFormula"),t===Np||t===ph)&&(this.Js=t,this.J())}),s.u(gt,{fK:"actualXRadius"},function(){return this.Gd}),s.u(gt,{gK:"actualYRadius"},function(){return this.Uf}),s.u(gt,{eK:"actualSpacing"},function(){return this.pl}),s.u(gt,{lH:"actualCenter"},function(){return this.jC});var Ae;gt.ConstantSpacing=Ae=s.p(gt,"ConstantSpacing",0);var ws;gt.ConstantDistance=ws=s.p(gt,"ConstantDistance",1);var Zr;gt.ConstantAngle=Zr=s.p(gt,"ConstantAngle",2);var $e;gt.Packed=$e=s.p(gt,"Packed",3);var vn;gt.Clockwise=vn=s.p(gt,"Clockwise",4);var Ms;gt.Counterclockwise=Ms=s.p(gt,"Counterclockwise",5);var ah;gt.BidirectionalLeft=ah=s.p(gt,"BidirectionalLeft",6);var du;gt.BidirectionalRight=du=s.p(gt,"BidirectionalRight",7);var Pp;gt.Forwards=Pp=s.p(gt,"Forwards",8);var Tp;gt.Reverse=Tp=s.p(gt,"Reverse",9);var Sp;gt.Ascending=Sp=s.p(gt,"Ascending",10);var kp;gt.Descending=kp=s.p(gt,"Descending",11);var gu;gt.Optimized=gu=s.p(gt,"Optimized",12);var Np;gt.Pythagorean=Np=s.p(gt,"Pythagorean",13);var ph;gt.Circular=ph=s.p(gt,"Circular",14);function Cp(){this.aq=-1/0,this.Nq=this.lo=null}Cp.prototype.compare=function(t,i){if(0<t&&0>this.aq||Math.abs(t)<Math.abs(this.aq)&&!(0>t&&0<this.aq)){this.aq=t,this.lo=[],this.Nq=[];for(var n=0;n<i.length;n++)this.lo[n]=i[n].eb.x,this.Nq[n]=i[n].eb.y}},Cp.prototype.commit=function(t){if(this.lo!==null&&this.Nq!==null)for(var i=0;i<this.lo.length;i++){var n=t.fa(i);n.x=this.lo[i],n.y=this.Nq[i]}};function zf(){At.call(this)}s.La(zf,At),s.ga("CircularNetwork",zf),zf.prototype.createVertex=function(){return new Xr},zf.prototype.createEdge=function(){return new Lc};function Xr(){It.call(this),this.actualAngle=this.diameter=NaN}s.La(Xr,It),s.ga("CircularVertex",Xr);function Ps(t,i){var n=t.network;if(n===null)return NaN;if(n=n.Ub,n===null)return NaN;if(n.Vf===$e)if(n.$x===ph)t.diameter=Math.max(t.width,t.height);else{var n=Math.abs(Math.sin(i)),e=Math.abs(Math.cos(i));if(n===0)return t.width;if(e===0)return t.height;t.diameter=Math.min(t.height/n,t.width/e)}else t.diameter=n.$x===ph?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function Lc(){Hi.call(this)}s.La(Lc,Hi),s.ga("CircularEdge",Lc);function Ft(){0<arguments.length&&s.nd(Ft),wt.call(this),this.Ig=null,this.hs=0,this.ng=new lt(100,100).freeze(),this.Yq=!1,this.ci=!0,this.Mh=!1,this.ep=100,this.Hr=1,this.Qi=1e3,this.Ds=10,this.Zs=Math,this.Eo=.05,this.Do=50,this.Bo=150,this.Co=0,this.vr=10,this.ur=5}s.La(Ft,wt),s.ga("ForceDirectedLayout",Ft),Ft.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.ng.assign(this.ng),t.Yq=this.Yq,t.ci=this.ci,t.Mh=this.Mh,t.ep=this.ep,t.Hr=this.Hr,t.Qi=this.Qi,t.Ds=this.Ds,t.Zs=this.Zs,t.Eo=this.Eo,t.Do=this.Do,t.Bo=this.Bo,t.Co=this.Co,t.vr=this.vr,t.ur=this.ur},Ft.prototype.createNetwork=function(){return new mu},Ft.prototype.doLayout=function(t){if(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),t=this.fB,0<this.network.vertexes.count){this.network.ux();for(var i=this.network.vertexes.i;i.next();){var n=i.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(i=this.network.edges.i;i.next();)n=i.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.jA(),this.hs=0,this.needsClusterLayout()){for(i=this.network,n=i.OJ().i;n.next();){this.network=n.value;for(var e=this.network.vertexes.i;e.next();){var o=e.value;o.jg=o.vertexes.count,o.Uk=1,o.tn=null,o.Hh=null}K1(this,0,t)}this.network=i,n.reset();for(var e=this.FE,r=n.count,h=!0,l=o=0,u=s.Za(),f=0;f<r+i.vertexes.count+2;f++)u[f]=null;r=0,n.reset();for(var a=s.vf();n.next();)if(f=n.value,this.computeBounds(f,a),h)h=!1,o=a.x+a.width/2,l=a.y+a.height/2,u[0]=new D(a.x+a.width+e.width,a.y),u[1]=new D(a.x,a.y+a.height+e.height),r=2;else{var p=U1(u,r,o,l,a.width,a.height,e),y=u[p],c=new D(y.x+a.width+e.width,y.y),v=new D(y.x,y.y+a.height+e.height);for(p+1<r&&u.splice(p+1,0,null),u[p]=c,u[p+1]=v,r++,p=y.x-a.x,y=y.y-a.y,f=f.vertexes.i;f.next();)c=f.value,c.la+=p,c.sa+=y}for(s.Bb(a),f=i.vertexes.i;f.next();)h=f.value,a=h.eb,2>r?(o=a.x+a.width/2,l=a.y+a.height/2,u[0]=new D(a.x+a.width+e.width,a.y),u[1]=new D(a.x,a.y+a.height+e.height),r=2):(p=U1(u,r,o,l,a.width,a.height,e),y=u[p],c=new D(y.x+a.width+e.width,y.y),v=new D(y.x,y.y+a.height+e.height),p+1<r&&u.splice(p+1,0,null),u[p]=c,u[p+1]=v,r++,h.la=y.x+h.width/2,h.sa=y.y+h.height/2);for(s.ra(u),n.reset();n.next();){for(e=n.value,o=e.vertexes.i;o.next();)i.Ql(o.value);for(e=e.edges.i;e.next();)i.Ip(e.value)}}Y1(this,t),this.updateParts()}this.ep=t,this.network=null,this.sf=!0},Ft.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,i=0,n=this.network.vertexes.first().eb,e=this.network.vertexes.i;e.next();){if(e.value.eb.$f(n)&&(t++,2<t))return!0;if(10<i)break;i++}return!1},Ft.prototype.computeBounds=function(t,i){for(var n=!0,e=t.vertexes.i;e.next();){var o=e.value;n?(n=!1,i.set(o.eb)):i.Zg(o.eb)}return i};function K1(t,i,n){if(Kx(t,i)){var e=t.Qi;t.Qi*=1+1/(i+1);var o=Ux(t,i),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(i+1)/11),10));for(t.fB+=r,K1(t,i+1,n),Y1(t,r),Jx(t,o),i=t.Ig,i===null?i=new E(yh):i.clear(),i.Pc(o.vertexes),i.sort(function(h,l){return h===null||l===null||h===l?0:l.jg-h.jg}),o=i.i;o.next();)Yx(t,o.value);t.Qi=e}}function Kx(t,i){if(10<i||3>t.network.vertexes.count)return!1;t.Ig===null?t.Ig=new E(yh):t.Ig.clear(),t.Ig.Pc(t.network.vertexes);var n=t.Ig;n.sort(function(o,r){return o===null||r===null||o===r?0:r.jg-o.jg});for(var e=n.count-1;0<=e&&1>=n.fa(e).jg;)e--;return 1<n.count-e}function Ux(t,i){for(var n=t.network,e=new mu,o=t.Ig.i;o.next();){var r=o.value;if(1<r.jg){e.Ql(r);var h=new q1;h.Ky=r.jg,h.Ly=r.width,h.Jy=r.height,h.cC=r.T.x,h.dC=r.T.y,r.Hh===null&&(r.Hh=new E(q1)),r.Hh.add(h),r.yB=r.Hh.count-1}else break}for(var l=n.edges.i;l.next();)if(h=l.value,o=h.fromVertex,r=h.toVertex,o.network===e&&r.network===e)e.Ip(h);else if(o.network===e){var u=o.tn;u===null&&(u=new E(yh),o.tn=u),u.add(r),o.jg--,o.Uk+=r.Uk}else r.network===e&&(u=r.tn,u===null&&(u=new E(yh),r.tn=u),u.add(o),r.jg--,r.Uk+=o.Uk);for(o=e.edges.i;o.next();)r=o.value,r.length*=Math.max(1,Ys((r.fromVertex.Uk+r.toVertex.Uk)/(4*i+1)));for(o=e.vertexes.i;o.next();)if(r=o.value,u=r.tn,u!==null&&0<u.count&&(h=r.Hh.fa(r.Hh.count-1),h=h.Ky-r.jg,!(0>=h))){for(var f=0,a=0,p=u.count-h;p<u.count;p++){for(var y=u.fa(p),c=null,l=y.edges.i;l.next();){var v=l.value;if(v.fI(y)===r){c=v;break}}c!==null&&(a+=c.length,f+=y.width*y.height)}l=r.la,u=r.sa,p=r.width,y=r.height,c=r.T,v=p*y,1>v&&(v=1),f=Ys((f+v+a*a*4/(h*h))/v),h=(f-1)*p/2,f=(f-1)*y/2,r.eb=new O(l-c.x-h,u-c.y-f,p+2*h,y+2*f),r.focus=new D(c.x+h,c.y+f)}return t.network=e,n}function Jx(t,i){for(var n=t.network.vertexes.i;n.next();){var e=n.value;if(e.network=i,e.Hh!==null){var o=e.Hh.fa(e.yB);e.jg=o.Ky;var r=o.cC,h=o.dC;e.eb=new O(e.la-r,e.sa-h,o.Ly,o.Jy),e.focus=new D(r,h),e.yB--}}for(n=t.network.edges.i;n.next();)n.value.network=i;t.network=i}function Yx(t,i){var n=i.tn;if(n!==null&&n.count!==0){var e=i.la,o=i.sa,r=i.width,h=i.height;i.Hh!==null&&0<i.Hh.count&&(h=i.Hh.fa(0),r=h.Ly,h=h.Jy);for(var r=Ys(r*r+h*h)/2,l=!1,u=h=0,f=0,a=i.vertexes.i;a.next();){var p=a.value;1>=p.jg?u++:(l=!0,f++,h+=Math.atan2(i.sa-p.sa,i.la-p.la))}if(u!==0){for(0<f&&(h/=f),a=f=0,f=l?2*Math.PI/(u+1):2*Math.PI/u,u%2===0&&(a=f/2),1<n.count&&n.sort(function(v,d){return v===null||d===null||v===d?0:d.width*d.height-v.width*v.height}),l=u%2===0?0:1,n=n.i;n.next();)if(u=n.value,!(1<u.jg||t.isFixed(u))){for(var p=null,c=u.edges.i;c.next();){p=c.value;break}var c=u.width,y=u.height,c=Ys(c*c+y*y)/2,p=r+p.length+c,c=h+(f*(l/2>>1)+a)*(l%2===0?1:-1);u.la=e+p*Math.cos(c),u.sa=o+p*Math.sin(c),l++}}}}function U1(t,i,n,e,o,r,h){var l=9e19,u=-1,f=0;t:for(;f<i;f++){var a=t[f],y=a.x-n,p=a.y-e,y=y*y+p*p;if(y<l){for(p=f-1;0<=p;p--)if(t[p].y>a.y&&t[p].x-a.x<o+h.width)continue t;for(p=f+1;p<i;p++)if(t[p].x>a.x&&t[p].y-a.y<r+h.height)continue t;u=f,l=y}}return u}Ft.prototype.jA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},Ft.prototype.addComments=function(t){var i=t.Rc;if(i!==null)for(i=i.bF();i.next();){var n=i.value;if(n.kd==="Comment"&&n.isVisible()){var e=this.network.Cn(n);e===null&&(e=this.network.Pt(n)),e.charge=this.MH;for(var n=null,o=e.lc;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(n===null){for(o=e.nc;o.next();)if(r=o.value,r.fromVertex===t){n=r;break}}n===null&&(n=this.network.oq(t,e,null)),n.length=this.NH}}};function J1(t,i){var r=t.O,n=r.x,e=r.y,o=r.width,r=r.height,f=i.O,h=f.x,l=f.y,u=f.width,f=f.height;return n+o<h?e>l+f?(n=n+o-h,e=e-l-f,Ys(n*n+e*e)):e+r<l?(n=n+o-h,e=e+r-l,Ys(n*n+e*e)):h-(n+o):n>h+u?e>l+f?(n=n-h-u,e=e-l-f,Ys(n*n+e*e)):e+r<l?(n=n-h-u,e=e+r-l,Ys(n*n+e*e)):n-(h+u):e>l+f?e-(l+f):e+r<l?l-(e+r):.1}function Y1(t,i){t.Ig=null;for(var n=t.hs+i;t.hs<n&&(t.hs++,qx(t)););t.Ig=null}function qx(t){t.Ig===null&&(t.Ig=new E(yh),t.Ig.Pc(t.network.vertexes));var i=t.Ig.n;if(0>=i.length)return!1;var n=i[0];n.forceX=0,n.forceY=0;for(var e=n.la,o=e,r=n.sa,h=r,n=1;n<i.length;n++){var u=i[n];u.forceX=0,u.forceY=0;var l=u.la,u=u.sa,e=Math.min(e,l),o=Math.max(o,l),r=Math.min(r,u),h=Math.max(h,u)}(r=o-e>h-r)?i.sort(function(d,g){return d===null||g===null||d===g?0:d.la-g.la}):i.sort(function(d,g){return d===null||g===null||d===g?0:d.sa-g.sa});for(var h=t.Qi,f=0,a=0,p=0,n=0;n<i.length;n++){var u=i[n],l=u.O,y=u.T,e=l.x+y.x,l=l.y+y.y,a=u.charge*t.electricalFieldX(e,l),p=u.charge*t.electricalFieldY(e,l),a=a+u.mass*t.gravitationalFieldX(e,l),p=p+u.mass*t.gravitationalFieldY(e,l);for(u.forceX+=a,u.forceY+=p,y=n+1;y<i.length;y++)if(o=i[y],o!==u){var c=o.O,a=o.T,p=c.x+a.x,c=c.y+a.y;if(e-p>h||p-e>h){if(r)break}else if(l-c>h||c-l>h){if(!r)break}else{var v=J1(u,o);1>v?(a=t.ly,a===null&&(t.ly=a=new v0(0)),f=a.random(),v=a.random(),e>p?(a=Math.abs(o.O.right-u.O.x),a=(1+a)*f):e<p?(a=Math.abs(o.O.x-u.O.right),a=-(1+a)*f):(a=Math.max(o.width,u.width),a=(1+a)*f-a/2),l>c?(p=Math.abs(o.O.bottom-u.O.y),p=(1+p)*v):e<p?(p=Math.abs(o.O.y-u.O.bottom),p=-(1+p)*v):(p=Math.max(o.height,u.height),p=(1+p)*v-p/2)):(f=-(u.charge*o.charge)/(v*v),a=(p-e)/v*f,p=(c-l)/v*f),u.forceX+=a,u.forceY+=p,o.forceX-=a,o.forceY-=p}}}for(n=t.network.edges.i;n.next();)r=n.value,u=r.fromVertex,o=r.toVertex,l=u.O,y=u.T,e=l.x+y.x,l=l.y+y.y,c=o.O,a=o.T,p=c.x+a.x,c=c.y+a.y,v=J1(u,o),1>v?(a=t.ly,a===null&&(t.ly=a=new v0(0)),f=a.random(),v=a.random(),a=(e>p?1:-1)*(1+(o.width>u.width?o.width:u.width))*f,p=(l>c?1:-1)*(1+(o.height>u.height?o.height:u.height))*v):(f=r.stiffness*(v-r.length),a=(p-e)/v*f,p=(c-l)/v*f),u.forceX+=a,u.forceY+=p,o.forceX-=a,o.forceY-=p;for(n=0,e=t.fJ,o=0;o<i.length;o++)u=i[o],t.isFixed(u)?t.moveFixedVertex(u):(r=u.forceX,h=u.forceY,r<-e?r=-e:r>e&&(r=e),h<-e?h=-e:h>e&&(h=e),u.la+=r,u.sa+=h,n=Math.max(n,r*r+h*h));return n>t.ZE*t.ZE}Ft.prototype.moveFixedVertex=function(){},Ft.prototype.commitLayout=function(){this.FB(),this.commitNodes(),this.Au&&this.commitLinks()},Ft.prototype.FB=function(){if(this.bo)for(var t=this.network.edges.i;t.next();){var i=t.value.link;i!==null&&(i.Mb=an,i.Nb=an)}},Ft.prototype.commitNodes=function(){var t=0,i=0;if(this.sH){var n=s.vf();this.computeBounds(this.network,n),i=this.Md,t=i.x-n.x,i=i.y-n.y,s.Bb(n)}for(var n=s.vf(),e=this.network.vertexes.i;e.next();){var o=e.value;(t!==0||i!==0)&&(n.assign(o.eb),n.x+=t,n.y+=i,o.eb=n),o.commit()}s.Bb(n)},Ft.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Ft.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Eo:t},Ft.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Do:t},Ft.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Bo:t},Ft.prototype.electricalFieldX=function(){return 0},Ft.prototype.electricalFieldY=function(){return 0},Ft.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Co:t},Ft.prototype.gravitationalFieldX=function(){return 0},Ft.prototype.gravitationalFieldY=function(){return 0},Ft.prototype.isFixed=function(t){return t.isFixed},s.u(Ft,{NK:"currentIteration"},function(){return this.hs}),s.defineProperty(Ft,{FE:"arrangementSpacing"},function(){return this.ng},function(t){s.G(t,lt,Ft,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),s.defineProperty(Ft,{sH:"arrangesToOrigin"},function(){return this.Yq},function(t){this.Yq!==t&&(s.j(t,"boolean",Ft,"arrangesToOrigin"),this.Yq=t,this.J())}),s.defineProperty(Ft,{bo:"setsPortSpots"},function(){return this.ci},function(t){this.ci!==t&&(s.j(t,"boolean",Ft,"setsPortSpots"),this.ci=t,this.J())}),s.defineProperty(Ft,{comments:"comments"},function(){return this.Mh},function(t){this.Mh!==t&&(s.j(t,"boolean",Ft,"comments"),this.Mh=t,this.J())}),s.defineProperty(Ft,{fB:"maxIterations"},function(){return this.ep},function(t){this.ep!==t&&(s.j(t,"number",Ft,"maxIterations"),0<=t&&(this.ep=t,this.J()))}),s.defineProperty(Ft,{ZE:"epsilonDistance"},function(){return this.Hr},function(t){this.Hr!==t&&(s.j(t,"number",Ft,"epsilonDistance"),0<t&&(this.Hr=t,this.J()))}),s.defineProperty(Ft,{gL:"infinityDistance"},function(){return this.Qi},function(t){this.Qi!==t&&(s.j(t,"number",Ft,"infinityDistance"),1<t&&(this.Qi=t,this.J()))}),s.defineProperty(Ft,{fJ:"moveLimit"},function(){return this.Ds},function(t){this.Ds!==t&&(s.j(t,"number",Ft,"moveLimit"),1<t&&(this.Ds=t,this.J()))}),s.defineProperty(Ft,{ly:"randomNumberGenerator"},function(){return this.Zs},function(t){this.Zs!==t&&(t!==null&&typeof t.random!="function"&&s.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Zs=t)}),s.defineProperty(Ft,{ZK:"defaultSpringStiffness"},function(){return this.Eo},function(t){this.Eo!==t&&(s.j(t,"number",Ft,"defaultSpringStiffness"),this.Eo=t,this.J())}),s.defineProperty(Ft,{YK:"defaultSpringLength"},function(){return this.Do},function(t){this.Do!==t&&(s.j(t,"number",Ft,"defaultSpringLength"),this.Do=t,this.J())}),s.defineProperty(Ft,{SK:"defaultElectricalCharge"},function(){return this.Bo},function(t){this.Bo!==t&&(s.j(t,"number",Ft,"defaultElectricalCharge"),this.Bo=t,this.J())}),s.defineProperty(Ft,{TK:"defaultGravitationalMass"},function(){return this.Co},function(t){this.Co!==t&&(s.j(t,"number",Ft,"defaultGravitationalMass"),this.Co=t,this.J())}),s.defineProperty(Ft,{NH:"defaultCommentSpringLength"},function(){return this.vr},function(t){this.vr!==t&&(s.j(t,"number",Ft,"defaultCommentSpringLength"),this.vr=t,this.J())}),s.defineProperty(Ft,{MH:"defaultCommentElectricalCharge"},function(){return this.ur},function(t){this.ur!==t&&(s.j(t,"number",Ft,"defaultCommentElectricalCharge"),this.ur=t,this.J())});function q1(){this.dC=this.cC=this.Jy=this.Ly=this.Ky=0}function mu(){At.call(this)}s.La(mu,At),s.ga("ForceDirectedNetwork",mu),mu.prototype.createVertex=function(){return new yh},mu.prototype.createEdge=function(){return new Ac};function yh(){It.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.Uk=this.jg=this.forceY=this.forceX=0,this.Hh=this.tn=null,this.yB=0}s.La(yh,It),s.ga("ForceDirectedVertex",yh);function Ac(){Hi.call(this),this.length=this.stiffness=NaN}s.La(Ac,Hi),s.ga("ForceDirectedEdge",Ac);function st(){0<arguments.length&&s.nd(st),wt.call(this),this.Yd=this.Om=25,this.ba=0,this.Ao=Ap,this.ap=Ip,this.Ro=Bp,this.Nm=4,this.po=Ep,this.dj=qc,this.ci=!0,this.ns=4,this.Kb=this.mw=this.tb=-1,this.Rf=this.ws=0,this.Pb=this.Pf=this.Qf=this.yg=this.ne=null,this.Fs=0,this.Es=this.Tm=null,this.Cg=0,this.Gs=null,this.pC=new D,this.kh=[],this.kh.length=100}s.La(st,wt),s.ga("LayeredDigraphLayout",st),st.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Om=this.Om,t.Yd=this.Yd,t.ba=this.ba,t.Ao=this.Ao,t.ap=this.ap,t.Ro=this.Ro,t.Nm=this.Nm,t.po=this.po,t.dj=this.dj,t.ci=this.ci,t.ns=this.ns},st.prototype.ic=function(t){t.Je===st?t.name.indexOf("Aggressive")===0?this.rH=t:t.name.indexOf("Cycle")===0?this.yA=t:t.name.indexOf("Init")===0?this.xI=t:t.name.indexOf("Layer")===0?this.JI=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},st.prototype.createNetwork=function(){return new wu},st.prototype.doLayout=function(t){for(t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Md=this.initialOrigin(this.Md),this.mw=-1,this.Rf=this.ws=0,this.Gs=this.Es=this.Tm=null,t=0;t<this.kh.length;t++)this.kh[t]=null;if(0<this.network.vertexes.count){for(this.network.ux(),this.yA!==Gf&&X1(this),t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.tb=-1,this.assignLayers(),t.reset();t.next();)this.tb=Math.max(this.tb,t.value.layer);this.yA===Gf&&X1(this),t=this.network;for(var i=[],n=t.edges.i;n.next();){var e=n.value;e.valid=!1,i.push(e)}for(n=0;n<i.length;n++){var e=i[n],o=e.fromVertex,r=e.toVertex;if(!e.valid&&(o.vd!==null&&r.vd!==null||o.layer!==r.layer)){var h=0,l=0,u=0,f=0;if(e.link!==null){if(l=e.link,l===null)continue;var a=o.vd,h=r.vd;if(a===null||h===null)continue;var p=l.V,u=l.Z,y=l.gc,l=l.zc;if(e.rev)var f=p,d=y,p=u,y=l,u=f,l=d;var c=o.T,f=r.T,v=e.rev?r.O:o.O,d=s.K();a!==p?v.I()&&p.isVisible()&&p.U.I()?(lh(p,y,kt,d),d.x+=p.U.x-v.x,d.y+=p.U.y-v.y):d.assign(c):v.I()?(lh(p,y,kt,d),d.I()||d.assign(c)):d.assign(c),p=e.rev?o.O:r.O,a=s.K(),h!==u?p.I()&&u.isVisible()&&u.U.I()?(lh(u,l,kt,a),a.x+=u.U.x-p.x,a.y+=u.U.y-p.y):a.assign(f):p.I()?(lh(u,l,kt,a),a.I()||a.assign(f)):a.assign(f),this.ba===90||this.ba===270?(h=Math.round((d.x-c.x)/this.Yd),u=d.x,l=Math.round((a.x-f.x)/this.Yd),f=a.x):(h=Math.round((d.y-c.y)/this.Yd),u=d.y,l=Math.round((a.y-f.y)/this.Yd),f=a.y),s.v(d),s.v(a),e.portFromColOffset=h,e.portFromPos=u,e.portToColOffset=l,e.portToPos=f}else e.portFromColOffset=0,e.portFromPos=0,e.portToColOffset=0,e.portToPos=0;d=o.layer,a=r.layer;t:{var p=e,y=0,g=p.link;if(g!==null){var m=g.gc,w=g.zc;if(m!==null&&w!==null){var M=g.V,c=g.Z;if(M!==null&&c!==null){var S=Fp(this,!0),F=Fp(this,!1),C=this.bo?S:g.computeSpot(!0,m),v=this.bo?F:g.computeSpot(!1,w),G=g.ac;if(C.zj()&&C.xj(F)&&v.zj()&&v.xj(S)){y=0;break t}S=g.getLinkPoint(M,m,C,!0,G,c,w,s.K()),F=g.getLinkDirection(M,m,S,C,!0,G,c,w),s.v(S),C.ZA()||F!==nm(this,p,!0)?this.bo&&M!==null&&M.ports.count===1&&p.rev&&(y+=1):y+=1,C=g.getLinkPoint(c,w,v,!1,G,M,m,s.K()),g=g.getLinkDirection(c,w,C,v,!1,G,M,m),s.v(C),v.ZA()||g!==nm(this,p,!1)?this.bo&&c!==null&&c.ports.count===1&&p.rev&&(y+=2):y+=2}}}}if(p=y===1||y===3,(y=y===2||y===3)&&(c=t.createVertex(),c.vd=null,c.qn=1,c.layer=d,c.near=o,t.Ql(c),o=t.oq(o,c,e.link),o.valid=!1,o.rev=e.rev,o.portFromColOffset=h,o.portToColOffset=0,o.portFromPos=u,o.portToPos=0,o=c),v=1,p&&v--,d-a>v&&0<d){for(e.valid=!1,c=t.createVertex(),c.vd=null,c.qn=2,c.layer=d-1,t.Ql(c),o=t.oq(o,c,e.link),o.valid=!0,o.rev=e.rev,o.portFromColOffset=y?0:h,o.portToColOffset=0,o.portFromPos=y?0:u,o.portToPos=0,o=c,d--;d-a>v&&0<d;)c=t.createVertex(),c.vd=null,c.qn=3,c.layer=d-1,t.Ql(c),o=t.oq(o,c,e.link),o.valid=!0,o.rev=e.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=c,d--;o=t.oq(c,r,e.link),o.valid=!p,p&&(c.near=r),o.rev=e.rev,o.portFromColOffset=0,o.portToColOffset=l,o.portFromPos=0,o.portToPos=f}else e.valid=!0}}for(i=this.ne=[],e=0;e<=this.tb;e++)i[e]=0;for(t=this.network.vertexes.i;t.next();)t.value.index=-1;for(this.initializeIndices(),this.mw=-1,e=this.Rf=this.ws=0;e<=this.tb;e++)i[e]>i[this.Rf]&&(this.mw=i[e]-1,this.Rf=e),i[e]<i[this.ws]&&(this.ws=e);for(this.Gs=[],e=0;e<i.length;e++)this.Gs[e]=[];for(t.reset();t.next();)i=t.value,this.Gs[i.layer][i.index]=i;for(this.Kb=-1,t=0;t<=this.tb;t++){for(i=Ts(this,t),e=0,n=this.ne[t],r=0;r<n;r++)o=i[r],e+=this.nodeMinColumnSpace(o,!0),o.column=e,e+=1,e+=this.nodeMinColumnSpace(o,!1);this.Kb=Math.max(this.Kb,e-1),Ss(this,t,i)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.sf=!0},st.prototype.linkMinLength=function(){return 1};function Ic(t){var i=t.fromVertex.vd;return t=t.toVertex.vd,i===null&&t===null?8:i===null||t===null?4:1}st.prototype.nodeMinLayerSpace=function(t,i){return t.vd===null?0:this.ba===90||this.ba===270?i?t.T.y+10:t.O.height-t.T.y+10:i?t.T.x+10:t.O.width-t.T.x+10},st.prototype.nodeMinColumnSpace=function(t,i){if(t.vd===null)return 0;var n=i?t.mB:t.lB;return n!==null?n:(n=this.ba,n===90||n===270?i?t.mB=t.T.x/this.Yd+1|0:t.lB=(t.O.width-t.T.x)/this.Yd+1|0:i?t.mB=t.T.y/this.Yd+1|0:t.lB=(t.O.height-t.T.y)/this.Yd+1|0)};function Mn(t){t.Tm===null&&(t.Tm=[]);for(var i=0,n=t.network.vertexes.i;n.next();){var e=n.value;t.Tm[i]=e.layer,i++,t.Tm[i]=e.column,i++,t.Tm[i]=e.index,i++}return t.Tm}function ve(t,i){for(var n=0,e=t.network.vertexes.i;e.next();){var o=e.value;o.layer=i[n],n++,o.column=i[n],n++,o.index=i[n],n++}}function Q1(t,i,n){var e=Ts(t,i),o=t.ne[i];(t.Es===null||t.Es.length<o*o)&&(t.Es=[]);for(var r=t.Es,h=0;h<o;h++){var l=0,u=e[h],p=u.near,f=0;if(p!==null&&p.layer===u.layer)if(f=p.index,f>h)for(var a=h+1;a<f;a++)u=e[a],u.near===p&&u.qn===p.qn||l++;else for(a=h-1;a>f;a--)u=e[a],u.near===p&&u.qn===p.qn||l++;var p=0,y,c=y=a=u=0,v,d=0,g=0;v=0;var m;if(0<=n){for(f=e[h].Se,p=0;p<f.count;p++)if(y=f.n[p],y.valid&&y.fromVertex.layer!==i)for(u=y.fromVertex.index,a=y.portToPos,y=y.portFromPos,c=p+1;c<f.count;c++)v=f.n[c],v.valid&&v.fromVertex.layer!==i&&(d=v.fromVertex.index,g=v.portToPos,v=v.portFromPos,a<g&&(u>d||u===d&&y>v)&&l++,g<a&&(d>u||d===u&&v>y)&&l++)}if(0>=n){for(f=e[h].Me,p=0;p<f.count;p++)if(y=f.n[p],y.valid&&y.toVertex.layer!==i)for(u=y.toVertex.index,a=y.portToPos,y=y.portFromPos,c=p+1;c<f.count;c++)v=f.n[c],v.valid&&v.toVertex.layer!==i&&(d=v.toVertex.index,g=v.portToPos,v=v.portFromPos,y<v&&(u>d||u===d&&a>g)&&l++,v<y&&(d>u||d===u&&g>a)&&l++)}for(r[h*o+h]=l,f=h+1;f<o;f++){var w=0,M=0;if(0<=n){for(l=e[h].Se,m=e[f].Se,p=0;p<l.count;p++)if(y=l.n[p],y.valid&&y.fromVertex.layer!==i)for(u=y.fromVertex.index,y=y.portFromPos,c=0;c<m.count;c++)v=m.n[c],v.valid&&v.fromVertex.layer!==i&&(d=v.fromVertex.index,v=v.portFromPos,(u<d||u===d&&y<v)&&M++,(d<u||d===u&&v<y)&&w++)}if(0>=n){for(l=e[h].Me,m=e[f].Me,p=0;p<l.count;p++)if(y=l.n[p],y.valid&&y.toVertex.layer!==i)for(u=y.toVertex.index,a=y.portToPos,c=0;c<m.count;c++)v=m.n[c],v.valid&&v.toVertex.layer!==i&&(d=v.toVertex.index,g=v.portToPos,(u<d||u===d&&a<g)&&M++,(d<u||d===u&&g<a)&&w++)}r[h*o+f]=w,r[f*o+h]=M}}return Ss(t,i,e),r}st.prototype.countCrossings=function(){for(var t=0,i=0;i<=this.tb;i++)for(var n=Q1(this,i,1),e=this.ne[i],o=0;o<e;o++)for(var r=o;r<e;r++)t+=n[o*e+r];return t};function jp(t){for(var i=0,n=0;n<=t.tb;n++){for(var e=t,o=n,r=Ts(e,o),h=e.ne[o],l=0,u=0;u<h;u++){var f=null,f=r[u].Me,a,p=0,y=0;if(f!==null)for(var c=0;c<f.count;c++)a=f.n[c],a.valid&&a.toVertex.layer!==o&&(p=a.fromVertex.column+a.portFromColOffset,y=a.toVertex.column+a.portToColOffset,l+=(Math.abs(p-y)+1)*Ic(a))}Ss(e,o,r),i+=l}return i}st.prototype.normalize=function(){var t=1/0;this.Kb=-1;for(var i=this.network.vertexes.i;i.next();){var n=i.value,t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0));this.Kb=Math.max(this.Kb,n.column+this.nodeMinColumnSpace(n,!1))}for(i.reset();i.next();)i.value.column-=t;this.Kb-=t};function Bc(t,i,n){for(var e=Ts(t,i),o=t.ne[i],r=[],h=0;h<o;h++){var l=e[h],u=null;0>=n&&(u=l.Se);var f=null;0<=n&&(f=l.Me);var a=0,p=0,y=l.near;if(y!==null&&y.layer===l.layer&&(a+=y.column-1,p++),u!==null)for(y=0;y<u.count;y++){var l=u.n[y],c=l.fromVertex;l.valid&&!l.rev&&c.layer!==i&&(a+=c.column,p++)}if(f!==null)for(u=0;u<f.count;u++)l=f.n[u],y=l.toVertex,l.valid&&!l.rev&&y.layer!==i&&(a+=y.column,p++);r[h]=p===0?-1:a/p}return Ss(t,i,e),r}function Z1(t,i,n){for(var e=Ts(t,i),o=t.ne[i],r=[],h=0;h<o;h++){var l=e[h],u=null;0>=n&&(u=l.Se);var f=null;0<=n&&(f=l.Me);var a=0,p=[],y=l.near;if(y!==null&&y.layer===l.layer&&(p[a]=y.column-1,a++),u!==null)for(y=0;y<u.count;y++){var l=u.n[y],c=l.fromVertex;l.valid&&!l.rev&&c.layer!==i&&(p[a]=c.column+l.portFromColOffset,a++)}if(f!==null)for(u=0;u<f.count;u++)l=f.n[u],y=l.toVertex,l.valid&&!l.rev&&y.layer!==i&&(p[a]=y.column+l.portToColOffset,a++);a===0?r[h]=-1:(p.sort(function(v,d){return v-d}),f=a>>1,r[h]=a&1?p[f]:p[f-1]+p[f]>>1)}return Ss(t,i,e),r}function Rf(t,i,n,e,o,r){if(i.component===e){i.component=n;var h=0,l=0;if(o)for(var u=i.lc;u.next();){var l=u.value,f=l.toVertex,h=i.layer-f.layer,l=t.linkMinLength(l);h===l&&Rf(t,f,n,e,o,r)}if(r)for(u=i.nc;u.next();)l=u.value,f=l.fromVertex,h=f.layer-i.layer,l=t.linkMinLength(l),h===l&&Rf(t,f,n,e,o,r)}}function Ec(t,i,n,e,o,r){if(i.component===e){if(i.component=n,o)for(var h=i.lc;h.next();)Ec(t,h.value.toVertex,n,e,o,r);if(r)for(i=i.nc;i.next();)Ec(t,i.value.fromVertex,n,e,o,r)}}function X1(t){for(var i=t.network.edges.i;i.next();)i.value.rev=!1;switch(t.Ao){default:case Gc:var i=t.network,n=0,e=i.vertexes.count-1,o=[];o.length=e+1;for(var r=i.vertexes.i;r.next();)r.value.valid=!0;for(;Qx(i)!==null;){for(r=W1(i);r!==null;)o[e]=r,e--,r.valid=!1,r=W1(i);for(r=$1(i);r!==null;)o[n]=r,n++,r.valid=!1,r=$1(i);for(var r=null,h=0,l=t.network.vertexes.i;l.next();){var u=l.value;if(u.valid){for(var f=0,a=u.lc;a.next();)a.value.toVertex.valid&&f++;for(var a=0,p=u.nc;p.next();)p.value.fromVertex.valid&&a++;(r===null||h<f-a)&&(r=u,h=f-a)}}r!==null&&(o[n]=r,n++,r.valid=!1)}for(t=0;t<i.vertexes.count;t++)o[t].index=t;for(t=i.edges.i;t.next();)o=t.value,o.fromVertex.index>o.toVertex.index&&(i.Wu(o),o.rev=!0);break;case Ap:for(o=t.network.vertexes.i;o.next();)i=o.value,i.Xp=-1,i.finish=-1;for(i=t.network.edges.i;i.next();)i.value.forest=!1;for(t.Fs=0,o.reset();o.next();)n=o.value,n.nc.count===0&&zc(t,n);for(o.reset();o.next();)n=o.value,n.Xp===-1&&zc(t,n);for(i.reset();i.next();)o=i.value,o.forest||(n=o.fromVertex,e=n.finish,r=o.toVertex,h=r.finish,r.Xp<n.Xp&&e<h&&(t.network.Wu(o),o.rev=!0));break;case Gf:for(t=t.network,n=t.vertexes.i,o=1/0;n.next();)i=n.value,o=Math.min(o,i.layer);if(1/0>o){if(0>o)for(n.reset();n.next();)i=n.value,i.layer-=o;for(o=[],n.reset();n.next();)i=n.value,e=o[i.layer],e===void 0?o[i.layer]=[i]:e.push(i);for(e=n=0;e<o.length;e++)if(r=o[e],!r||r.length===0)n++;else if(0<e)for(h=0;h<r.length;h++)i=r[h],i.layer-=n;for(i=t.edges.i;i.next();)o=i.value,o.fromVertex.layer<o.toVertex.layer&&(t.Wu(o),o.rev=!0)}}}function Qx(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid)return i}return null}function W1(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.lc;e.next();)if(e.value.toVertex.valid){n=!1;break}if(n)return i}}return null}function $1(t){for(t=t.vertexes.i;t.next();){var i=t.value;if(i.valid){for(var n=!0,e=i.nc;e.next();)if(e.value.fromVertex.valid){n=!1;break}if(n)return i}}return null}function zc(t,i){i.Xp=t.Fs,t.Fs++;for(var n=i.lc;n.next();){var e=n.value,o=e.toVertex;o.Xp===-1&&(e.forest=!0,zc(t,o))}i.finish=t.Fs,t.Fs++}st.prototype.assignLayers=function(){switch(this.ap){case Oc:_1(this);break;case Vc:for(var t=0,i=this.network.vertexes.i;i.next();)t=tm(this,i.value),this.tb=Math.max(t,this.tb);for(i.reset();i.next();)t=i.value,t.layer=this.tb-t.layer;break;default:case Ip:for(_1(this),i=this.network.vertexes.i;i.next();)i.value.valid=!1;for(i.reset();i.next();)t=i.value,t.nc.count===0&&im(this,t);for(t=1/0,i.reset();i.next();)t=Math.min(t,i.value.layer);for(this.tb=-1,i.reset();i.next();){var n=i.value;n.layer-=t,this.tb=Math.max(this.tb,n.layer)}}};function _1(t){for(var i=t.network.vertexes.i;i.next();){var n=b1(t,i.value);t.tb=Math.max(n,t.tb)}}function b1(t,i){var n=0;if(i.layer===-1){for(var e=i.lc;e.next();)var r=e.value,o=r.toVertex,r=t.linkMinLength(r),n=Math.max(n,b1(t,o)+r);i.layer=n}else n=i.layer;return n}function tm(t,i){var n=0;if(i.layer===-1){for(var e=i.nc;e.next();)var r=e.value,o=r.fromVertex,r=t.linkMinLength(r),n=Math.max(n,tm(t,o)+r);i.layer=n}else n=i.layer;return n}function im(t,i){if(!i.valid){i.valid=!0;for(var n=i.lc;n.next();)im(t,n.value.toVertex);for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(var e=i.Se.n,o=e.length,r=0;r<o;r++){var u=e[r],h=u.fromVertex,l=u.toVertex,u=t.linkMinLength(u);h.layer-l.layer>u&&Rf(t,h,0,-1,!0,!1)}for(Rf(t,i,1,-1,!0,!0);i.component!==0;){for(var h=0,e=1/0,l=0,f=null,a=t.network.vertexes.i;a.next();){var p=a.value;if(p.component===1){for(var y=0,c=!1,v=p.Se.n,o=v.length,r=0;r<o;r++){var u=v[r],d=u.fromVertex,y=y+1;d.component!==1&&(h+=1,d=d.layer-p.layer,u=t.linkMinLength(u),e=Math.min(e,d-u))}for(u=p.Me.n,o=u.length,r=0;r<o;r++)v=u[r].toVertex,y-=1,v.component!==1?h-=1:c=!0;(f===null||y<l)&&!c&&(f=p,l=y)}}if(0<h){for(n.reset();n.next();)o=n.value,o.component===1&&(o.layer+=e);i.component=0}else f.component=0}for(n=t.network.vertexes.i;n.next();)n.value.component=-1;for(Rf(t,i,1,-1,!0,!1);i.component!==0;){for(r=0,o=1/0,e=0,u=null,h=t.network.vertexes.i;h.next();)if(l=h.value,l.component===1){for(f=0,a=!1,c=l.Se.n,p=c.length,y=0;y<p;y++)v=c[y].fromVertex,f+=1,v.component!==1?r+=1:a=!0;for(c=l.Me.n,p=c.length,y=0;y<p;y++)v=c[y],d=v.toVertex,f-=1,d.component!==1&&(r-=1,d=l.layer-d.layer,v=t.linkMinLength(v),o=Math.min(o,d-v));(u===null||f>e)&&!a&&(u=l,e=f)}if(0>r){for(n.reset();n.next();)r=n.value,r.component===1&&(r.layer-=o);i.component=0}else u.component=0}}}function nm(t,i,n){return t.ba===90?n&&!i.rev||!n&&i.rev?270:90:t.ba===180?n&&!i.rev||!n&&i.rev?0:180:t.ba===270?n&&!i.rev||!n&&i.rev?90:270:n&&!i.rev||!n&&i.rev?180:0}st.prototype.initializeIndices=function(){switch(this.Ro){default:case Kc:for(var t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;i.index=this.ne[n],this.ne[n]++}break;case Bp:for(t=this.network.vertexes.i,i=this.tb;0<=i;i--)for(t.reset();t.next();)n=t.value,n.layer===i&&n.index===-1&&em(this,n);break;case Hc:for(t=this.network.vertexes.i,i=0;i<=this.tb;i++)for(t.reset();t.next();)n=t.value,n.layer===i&&n.index===-1&&om(this,n)}};function em(t,i){var n=i.layer;i.index=t.ne[n],t.ne[n]++;for(var n=i.Me.yc(),e=!0;e;)for(var e=!1,o=0;o<n.length-1;o++){var r=n[o],h=n[o+1];r.portFromColOffset>h.portFromColOffset&&(e=!0,n[o]=h,n[o+1]=r)}for(o=0;o<n.length;o++)e=n[o],e.valid&&(e=e.toVertex,e.index===-1&&em(t,e))}function om(t,i){var n=i.layer;i.index=t.ne[n],t.ne[n]++;for(var n=i.Se.yc(),e=!0,o=0;e;)for(e=!1,o=0;o<n.length-1;o++){var r=n[o],h=n[o+1];r.portToColOffset>h.portToColOffset&&(e=!0,n[o]=h,n[o+1]=r)}for(o=0;o<n.length;o++)e=n[o],e.valid&&(e=e.fromVertex,e.index===-1&&om(t,e))}st.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),i=Mn(this),e=0,l=0,n=0,e=0;e<this.Nm;e++){for(l=0;l<=this.tb;l++)Dp(this,l,1),Ie(this,l,1);for(n=this.countCrossings(),n<t&&(t=n,i=Mn(this)),l=this.tb;0<=l;l--)Dp(this,l,-1),Ie(this,l,-1);n=this.countCrossings(),n<t&&(t=n,i=Mn(this))}for(ve(this,i),e=0;e<this.Nm;e++){for(l=0;l<=this.tb;l++)Dp(this,l,0),Ie(this,l,0);for(n=this.countCrossings(),n<t&&(t=n,i=Mn(this)),l=this.tb;0<=l;l--)Dp(this,l,0),Ie(this,l,0);n=this.countCrossings(),n<t&&(t=n,i=Mn(this))}ve(this,i);var o=!1,r=e=0,h=0,l=0;switch(this.po){case Uc:break;case Jc:for(h=t+1;(l=this.countCrossings())<h;)for(h=l,e=this.tb;0<=e;e--)for(r=0;r<=e;r++){for(o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,-1)||o;for(n=this.countCrossings(),n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,1)||o;for(n=this.countCrossings(),n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,1)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,-1)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,0)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,0)||o;n>=t?ve(this,i):(t=n,i=Mn(this))}break;default:case Ep:for(e=this.tb,r=0,h=t+1;(l=this.countCrossings())<h;){for(h=l,o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,-1)||o;for(n=this.countCrossings(),n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,1)||o;for(n=this.countCrossings(),n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,1)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,-1)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=e;l>=r;l--)o=Ie(this,l,0)||o;for(n>=t?ve(this,i):(t=n,i=Mn(this)),o=!0;o;)for(o=!1,l=r;l<=e;l++)o=Ie(this,l,0)||o;n>=t?ve(this,i):(t=n,i=Mn(this))}}ve(this,i)};function Dp(t,i,n){var e=0,o=Ts(t,i),r=t.ne[i],h=Z1(t,i,n);for(n=Bc(t,i,n),e=0;e<r;e++)n[e]===-1&&(n[e]=o[e].column),h[e]===-1&&(h[e]=o[e].column);for(var l=!0,u;l;)for(l=!1,e=0;e<r-1;e++)(h[e+1]<h[e]||h[e+1]===h[e]&&n[e+1]<n[e])&&(l=!0,u=h[e],h[e]=h[e+1],h[e+1]=u,u=n[e],n[e]=n[e+1],n[e+1]=u,u=o[e],o[e]=o[e+1],o[e+1]=u);for(e=h=0;e<r;e++)u=o[e],u.index=e,h+=t.nodeMinColumnSpace(u,!0),u.column=h,h+=1,h+=t.nodeMinColumnSpace(u,!1);Ss(t,i,o)}function Ie(t,i,n){var e=Ts(t,i),o=t.ne[i];n=Q1(t,i,n);var r=0,h;for(h=[],r=0;r<o;r++)h[r]=-1;var l;for(l=[],r=0;r<o;r++)l[r]=-1;for(var u=!1,f=!0;f;)for(f=!1,r=0;r<o-1;r++){var a=n[e[r].index*o+e[r+1].index],p=n[e[r+1].index*o+e[r].index],y=0,c=0,v=e[r].column,d=e[r+1].column,m=t.nodeMinColumnSpace(e[r],!0),w=t.nodeMinColumnSpace(e[r],!1),M=t.nodeMinColumnSpace(e[r+1],!0),g=t.nodeMinColumnSpace(e[r+1],!1),m=v-m+M,w=d-w+g,M=M=0,S=e[r].nc.i;for(S.reset();S.next();)if(M=S.value,g=M.fromVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M<r&&(y+=2*(r-M),c+=2*(r+1-M)),M===r+1&&(y+=1),M>r+1&&(y+=4*(M-r),c+=4*(M-(r+1)))}for(S=e[r].lc.i,S.reset();S.next();)if(M=S.value,g=M.toVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M===r+1&&(c+=1)}for(S=e[r+1].nc.i,S.reset();S.next();)if(M=S.value,g=M.fromVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M<r&&(y+=2*(r+1-M),c+=2*(r-M)),M===r&&(c+=1),M>r+1&&(y+=4*(M-(r+1)),c+=4*(M-r))}for(S=e[r+1].lc.i,S.reset();S.next();)if(M=S.value,g=M.toVertex,M.valid&&g.layer===i){for(M=0;e[M]!==g;)M++;M===r&&(y+=1)}var M=g=0,S=h[e[r].index],F=l[e[r].index],C=h[e[r+1].index],G=l[e[r+1].index];S!==-1&&(g+=Math.abs(S-v),M+=Math.abs(S-w)),F!==-1&&(g+=Math.abs(F-v),M+=Math.abs(F-w)),C!==-1&&(g+=Math.abs(C-d),M+=Math.abs(C-m)),G!==-1&&(g+=Math.abs(G-d),M+=Math.abs(G-m)),(c<y-.5||c===y&&p<a-.5||c===y&&p===a&&M<g-.5)&&(f=u=!0,e[r].column=w,e[r+1].column=m,a=e[r],e[r]=e[r+1],e[r+1]=a)}for(r=0;r<o;r++)e[r].index=r;return Ss(t,i,e),u}st.prototype.straightenAndPack=function(){var n=0,t=!1,i=(this.dj&hm)!==0,n=this.dj===qc;if(1e3<this.network.edges.count&&!n&&(i=!1),i){for(t=[],n=n=0;n<=this.tb;n++)t[n]=0;for(var e=0,o=this.network.vertexes.i;o.next();){var r=o.value,n=r.layer,e=r.column,r=this.nodeMinColumnSpace(r,!1);t[n]=Math.max(t[n],e+r)}for(o.reset();o.next();)r=o.value,n=r.layer,e=r.column,r.column=(8*(this.Kb-t[n])>>1)+8*e;this.Kb*=8}if(this.dj&Yc)for(t=!0;t;){for(t=!1,n=this.Rf+1;n<=this.tb;n++)t=xu(this,n,1)||t;for(n=this.Rf-1;0<=n;n--)t=xu(this,n,-1)||t;t=xu(this,this.Rf,0)||t}if(this.dj&lm){for(n=this.Rf+1;n<=this.tb;n++)Rc(this,n,1);for(n=this.Rf-1;0<=n;n--)Rc(this,n,-1);Rc(this,this.Rf,0)}if(i&&(rm(this,-1),rm(this,1)),this.dj&Yc)for(t=!0;t;){for(t=!1,t=xu(this,this.Rf,0)||t,n=this.Rf+1;n<=this.tb;n++)t=xu(this,n,0)||t;for(n=this.Rf-1;0<=n;n--)t=xu(this,n,0)||t}};function xu(t,i,n){for(var e=!1;Zx(t,i,n);)e=!0;return e}function Zx(t,i,n){var e=0,o=Ts(t,i),r=t.ne[i],h=Bc(t,i,-1);if(0<n)for(e=0;e<r;e++)h[e]=-1;var l=Bc(t,i,1);if(0>n)for(e=0;e<r;e++)l[e]=-1;for(var u=!1,f=!0;f;)for(f=!1,e=0;e<r;e++){var a=o[e].column,c=t.nodeMinColumnSpace(o[e],!0),p=t.nodeMinColumnSpace(o[e],!1),y=0,y=0>e-1||a-o[e-1].column-1>c+t.nodeMinColumnSpace(o[e-1],!1)?a-1:a,c=0,c=e+1>=r||o[e+1].column-a-1>p+t.nodeMinColumnSpace(o[e+1],!0)?a+1:a,v=p=0,d=0,g=0,m=0,w=0;if(0>=n)for(var M=o[e].nc.i;M.next();){var w=M.value,S=w.fromVertex;w.valid&&S.layer!==i&&(g=Ic(w),m=w.portFromColOffset,w=w.portToColOffset,S=S.column,p+=(Math.abs(a+w-(S+m))+1)*g,v+=(Math.abs(y+w-(S+m))+1)*g,d+=(Math.abs(c+w-(S+m))+1)*g)}if(0<=n)for(M=o[e].lc.i;M.next();)w=M.value,S=w.toVertex,w.valid&&S.layer!==i&&(g=Ic(w),m=w.portFromColOffset,w=w.portToColOffset,S=S.column,p+=(Math.abs(a+m-(S+w))+1)*g,v+=(Math.abs(y+m-(S+w))+1)*g,d+=(Math.abs(c+m-(S+w))+1)*g);w=m=g=0,M=h[o[e].index],S=l[o[e].index],M!==-1&&(g+=Math.abs(M-a),m+=Math.abs(M-y),w+=Math.abs(M-c)),S!==-1&&(g+=Math.abs(S-a),m+=Math.abs(S-y),w+=Math.abs(S-c)),v<p||v===p&&m<g?(f=u=!0,o[e].column=y):(d<p||d===p&&w<g)&&(f=u=!0,o[e].column=c)}return Ss(t,i,o),t.normalize(),u}function Rc(t,i,n){var e=0,o=Ts(t,i),r=t.ne[i],h=Z1(t,i,n);for(n=[],e=0;e<r;e++)n[e]=h[e];for(h=!0;h;)for(h=!1,e=0;e<r;e++){var l=o[e].column,u=t.nodeMinColumnSpace(o[e],!0),f=t.nodeMinColumnSpace(o[e],!1),a=0,p=0,y=0,y=p=0;n[e]===-1?e===0&&e===r-1?a=l:e===0?(p=o[e+1].column,a=p-l===f+t.nodeMinColumnSpace(o[e+1],!0)?l-1:l):e===r-1?(y=o[e-1].column,a=l-y===u+t.nodeMinColumnSpace(o[e-1],!1)?l+1:l):(y=o[e-1].column,y=y+t.nodeMinColumnSpace(o[e-1],!1)+u+1,p=o[e+1].column,p=p-t.nodeMinColumnSpace(o[e+1],!0)-f-1,a=(y+p)/2|0):e===0&&e===r-1?a=n[e]:e===0?(p=o[e+1].column,p=p-t.nodeMinColumnSpace(o[e+1],!0)-f-1,a=Math.min(n[e],p)):e===r-1?(y=o[e-1].column,y=y+t.nodeMinColumnSpace(o[e-1],!1)+u+1,a=Math.max(n[e],y)):(y=o[e-1].column,y=y+t.nodeMinColumnSpace(o[e-1],!1)+u+1,p=o[e+1].column,p=p-t.nodeMinColumnSpace(o[e+1],!0)-f-1,y<n[e]&&n[e]<p?a=n[e]:y>=n[e]?a=y:p<=n[e]&&(a=p)),a!==l&&(h=!0,o[e].column=a)}Ss(t,i,o),t.normalize()}function Xx(t,i){for(var n=!0,e=t.network.vertexes.i;e.next();){var o=e.value,r=t.nodeMinColumnSpace(o,!0),h=t.nodeMinColumnSpace(o,!1);if(o.column-r<=i&&o.column+h>=i){n=!1;break}}if(o=!1,n)for(e.reset();e.next();)n=e.value,n.column>i&&(n.column-=1,o=!0);return o}function Wx(t,i){for(var n=i,n=i+1,r=0,e=[],o=[],r=0;r<=t.tb;r++)e[r]=!1,o[r]=!1;for(var h=t.network.vertexes.i;h.next();){var r=h.value,l=r.column-t.nodeMinColumnSpace(r,!0),u=r.column+t.nodeMinColumnSpace(r,!1);l<=i&&u>=i&&(e[r.layer]=!0),l<=n&&u>=n&&(o[r.layer]=!0)}for(l=!0,n=!1,r=0;r<=t.tb;r++)l=l&&!(e[r]&&o[r]);if(l)for(h.reset();h.next();)e=h.value,e.column>i&&(e.column-=1,n=!0);return n}function rm(t,i){for(var n=0;n<=t.Kb;n++)for(;Xx(t,n););for(t.normalize(),n=0;n<t.Kb;n++)for(;Wx(t,n););t.normalize();var n=0,e,o=0,r=0,h=0;if(0<i)for(n=0;n<=t.Kb;n++)for(e=Mn(t),o=jp(t),r=o+1;o<r;)r=o,sm(t,n,1),h=jp(t),h>o?ve(t,e):h<o&&(o=h,e=Mn(t));if(0>i)for(n=t.Kb;0<=n;n--)for(e=Mn(t),o=jp(t),r=o+1;o<r;)r=o,sm(t,n,-1),h=jp(t),h>o?ve(t,e):h<o&&(o=h,e=Mn(t));t.normalize()}function sm(t,i,n){t.Cg=0;for(var e=t.network.vertexes.i;e.next();)e.value.component=-1;if(0<n)for(e.reset();e.next();){var o=e.value;o.column-t.nodeMinColumnSpace(o,!0)<=i&&(o.component=t.Cg)}if(0>n)for(e.reset();e.next();)o=e.value,o.column+t.nodeMinColumnSpace(o,!1)>=i&&(o.component=t.Cg);for(t.Cg++,e.reset();e.next();)i=e.value,i.component===-1&&(Ec(t,i,t.Cg,-1,!0,!0),t.Cg++);var r=0;for(i=[],r=0;r<t.Cg*t.Cg;r++)i[r]=!1;for(o=[],r=0;r<(t.tb+1)*(t.Kb+1);r++)o[r]=-1;for(e.reset();e.next();)for(var r=e.value,h=r.layer,l=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),u=Math.min(t.Kb,r.column+t.nodeMinColumnSpace(r,!1));l<=u;l++)o[h*(t.Kb+1)+l]=r.component;for(r=0;r<=t.tb;r++){if(0<n)for(l=0;l<t.Kb;l++)o[r*(t.Kb+1)+l]!==-1&&o[r*(t.Kb+1)+l+1]!==-1&&o[r*(t.Kb+1)+l]!==o[r*(t.Kb+1)+l+1]&&(i[o[r*(t.Kb+1)+l]*t.Cg+o[r*(t.Kb+1)+l+1]]=!0);if(0>n)for(l=t.Kb;0<l;l--)o[r*(t.Kb+1)+l]!==-1&&o[r*(t.Kb+1)+l-1]!==-1&&o[r*(t.Kb+1)+l]!==o[r*(t.Kb+1)+l-1]&&(i[o[r*(t.Kb+1)+l]*t.Cg+o[r*(t.Kb+1)+l-1]]=!0)}for(o=[],r=0;r<t.Cg;r++)o[r]=!0;for(h=new E("number"),h.add(0),u=0;h.count!==0;)if(u=h.n[h.count-1],h.cd(h.count-1),o[u])for(o[u]=!1,r=0;r<t.Cg;r++)i[u*t.Cg+r]&&h.Rd(0,r);if(0<n)for(e.reset();e.next();)t=e.value,o[t.component]&&(t.column-=1);if(0>n)for(e.reset();e.next();)n=e.value,o[n.component]&&(n.column+=1)}st.prototype.commitLayout=function(){if(this.bo)for(var t=Fp(this,!0),i=Fp(this,!1),n=this.network.edges.i;n.next();){var e=n.value.link;e!==null&&(e.Mb=t,e.Nb=i)}this.commitNodes(),this.pA(),this.Au&&this.commitLinks()};function Fp(t,i){return t.ba===270?i?Ne:je:t.ba===90?i?je:Ne:t.ba===180?i?Ce:On:i?On:Ce}st.prototype.commitNodes=function(){this.yg=[],this.Qf=[],this.Pf=[],this.Pb=[];for(var t=0;t<=this.tb;t++)this.yg[t]=0,this.Qf[t]=0,this.Pf[t]=0,this.Pb[t]=0;for(t=this.network.vertexes.i;t.next();){var i=t.value,n=i.layer;this.yg[n]=Math.max(this.yg[n],this.nodeMinLayerSpace(i,!0)),this.Qf[n]=Math.max(this.Qf[n],this.nodeMinLayerSpace(i,!1))}for(var i=0,e=this.Om,n=0;n<=this.tb;n++){var o=e;0>=this.yg[n]+this.Qf[n]&&(o=0),0<n&&(i+=o/2),this.ba===90||this.ba===0?(i+=this.Qf[n],this.Pf[n]=i,i+=this.yg[n]):(i+=this.yg[n],this.Pf[n]=i,i+=this.Qf[n]),n<this.tb&&(i+=o/2),this.Pb[n]=i}for(e=i,i=this.Md,n=0;n<=this.tb;n++)this.ba===270?this.Pf[n]=i.y+this.Pf[n]:this.ba===90?(this.Pf[n]=i.y+e-this.Pf[n],this.Pb[n]=e-this.Pb[n]):this.ba===180?this.Pf[n]=i.x+this.Pf[n]:(this.Pf[n]=i.x+e-this.Pf[n],this.Pb[n]=e-this.Pb[n]);for(t.reset(),e=o=1/0;t.next();){var n=t.value,r=n.layer,h=n.column|0,l=0,u=0;this.ba===270||this.ba===90?(l=i.x+this.Yd*h,u=this.Pf[r]):(l=this.Pf[r],u=i.y+this.Yd*h),n.la=l,n.sa=u,o=Math.min(n.x,o),e=Math.min(n.y,e)}for(o=i.x-o,i=i.y-e,this.pC=new D(o,i),t.reset();t.next();)n=t.value,n.x+=o,n.y+=i,n.commit()},st.prototype.pA=function(){for(var t=0,i=this.Om,n=0;n<=this.tb;n++)t+=this.yg[n],t+=this.Qf[n];for(var t=t+this.tb*i,i=[],n=this.Yd*this.Kb,e=this.SI;0<=e;e--)this.ba===270?e===0?i.push(new O(0,0,n,Math.abs(this.Pb[0]))):i.push(new O(0,this.Pb[e-1],n,Math.abs(this.Pb[e-1]-this.Pb[e]))):this.ba===90?e===0?i.push(new O(0,this.Pb[0],n,Math.abs(this.Pb[0]-t))):i.push(new O(0,this.Pb[e],n,Math.abs(this.Pb[e-1]-this.Pb[e]))):this.ba===180?e===0?i.push(new O(0,0,Math.abs(this.Pb[0]),n)):i.push(new O(this.Pb[e-1],0,Math.abs(this.Pb[e-1]-this.Pb[e]),n)):e===0?i.push(new O(this.Pb[0],0,Math.abs(this.Pb[0]-t),n)):i.push(new O(this.Pb[e],0,Math.abs(this.Pb[e-1]-this.Pb[e]),n));this.commitLayers(i,this.pC)},st.prototype.commitLayers=function(){},st.prototype.commitLinks=function(){for(var t=this.network.edges.i,i;t.next();)i=t.value.link,i!==null&&(i.qm(),i.Pp(),i.qj());for(t.reset();t.next();)i=t.value.link,i!==null&&i.jo();for(t.reset();t.next();){var n=t.value;if(i=n.link,i!==null){i.qm();var e=i,o=e.V,r=e.Z,h=e.gc,l=e.zc;if(o!==null){var u=o.findVisibleNode();u!==null&&u!==o&&(o=u,h=u.port)}if(r!==null){var f=r.findVisibleNode();f!==null&&f!==r&&(r=f,l=f.port)}var a=i.computeSpot(!0,h),p=i.computeSpot(!1,l),y=n.fromVertex,c=n.toVertex;if(n.valid){if(i.nf===Le&&i.qa===4)if(y.column===c.column){var v=i.getLinkPoint(o,h,a,!0,!1,r,l),d=i.getLinkPoint(r,l,p,!1,!1,o,h);v.I()||v.set(o.U.Ul),d.I()||d.set(r.U.Ul),i.Pp(),i.oj(v.x,v.y),i.oj((2*v.x+d.x)/3,(2*v.y+d.y)/3),i.oj((v.x+2*d.x)/3,(v.y+2*d.y)/3),i.oj(d.x,d.y)}else{var g=!1,m=!1;if(h!==null&&a===Ni&&(g=!0),l!==null&&p===Ni&&(m=!0),g||m){var w=i.l(0).x,M=i.l(0).y,S=i.l(1).x,F=i.l(1).y,C=i.l(2).x,G=i.l(2).y,H=i.l(3).x,U=i.l(3).y;if(g){this.ba===90||this.ba===270?(S=w,F=(M+U)/2):(S=(w+H)/2,F=M),i.ca(1,S,F);var X=i.getLinkPoint(o,h,a,!0,!1,r,l);X.I()||X.set(o.U.Ul),i.ca(0,X.x,X.y)}m&&(this.ba===90||this.ba===270?(C=H,G=(M+U)/2):(C=(w+H)/2,G=U),i.ca(2,C,G),X=i.getLinkPoint(r,l,p,!1,!1,o,h),X.I()||X.set(r.U.Ul),i.ca(3,X.x,X.y))}}i.qj()}else if(y.layer===c.layer)i.qj();else{var _=!1,Mt=!1,Dt=0,J=i.fu+1;if(i.ac)Mt=!0,Dt=i.qa,4<Dt&&i.points.removeRange(2,Dt-3);else if(i.nf===Le)_=!0,Dt=i.qa,4<Dt&&i.points.removeRange(2,Dt-3),J=2;else{var Dt=i.qa,ht=a===Ni,Yt=p===Ni;2<Dt&&ht&&Yt?i.points.removeRange(1,Dt-2):3<Dt&&ht&&!Yt?i.points.removeRange(1,Dt-3):3<Dt&&!ht&&Yt?i.points.removeRange(2,Dt-2):4<Dt&&!ht&&!Yt&&i.points.removeRange(2,Dt-3)}var Bt,Xt;if(n.rev){for(var Ct=0;c!==null&&y!==c;){Xt=Bt=null;for(var dh=c.nc.i;dh.next();){var Be=dh.value;if(Be.link===n.link&&(Bt=Be.fromVertex,Xt=Be.toVertex,Bt.vd===null))break}if(Bt!==y)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=Bt.la,at=Bt.sa,Mt)this.ba===180||this.ba===0?J===2?(i.w(J++,ai,ni),i.w(J++,ai,at)):(Ri=Xt!==null?Xt.sa:ni,Ri!==at&&(yi=this.Pb[Bt.layer-1],i.w(J++,yi,ni),i.w(J++,yi,at))):J===2?(i.w(J++,ai,ni),i.w(J++,ft,ni)):(Cs=Xt!==null?Xt.la:ai,Cs!==ft&&(yi=this.Pb[Bt.layer-1],i.w(J++,ai,yi),i.w(J++,ft,yi)));else if(J===2)if(qt=Math.max(10,this.yg[c.layer]),Kt=Math.max(10,this.Qf[c.layer]),_)this.ba===180?ft<=c.O.x?(Ct=c.O.x,i.w(J++,Ct-qt,at),i.w(J++,Ct,at),i.w(J++,Ct+Kt,at)):(i.w(J++,ft-qt,at),i.w(J++,ft,at),i.w(J++,ft+Kt,at)):this.ba===90?at>=c.O.bottom?(Ct=c.O.y+c.O.height,i.w(J++,ft,Ct+Kt),i.w(J++,ft,Ct),i.w(J++,ft,Ct-qt)):(i.w(J++,ft,at+Kt),i.w(J++,ft,at),i.w(J++,ft,at-qt)):this.ba===270?at<=c.O.y?(Ct=c.O.y,i.w(J++,ft,Ct-qt),i.w(J++,ft,Ct),i.w(J++,ft,Ct+Kt)):(i.w(J++,ft,at-qt),i.w(J++,ft,at),i.w(J++,ft,at+Kt)):this.ba===0&&(ft>=c.O.right?(Ct=c.O.x+c.O.width,i.w(J++,Ct+Kt,at),i.w(J++,Ct,at),i.w(J++,Ct-qt,at)):(i.w(J++,ft+Kt,at),i.w(J++,ft,at),i.w(J++,ft-qt,at)));else{i.w(J++,ai,ni);var de=0;this.ba===180||this.ba===0?((this.ba===180?ft>=c.O.right:ft<=c.O.x)&&(de=(this.ba===0?-qt:Kt)/2),i.w(J++,ai+de,at)):((this.ba===270?at>=c.O.bottom:at<=c.O.y)&&(de=(this.ba===90?-qt:Kt)/2),i.w(J++,ft,ni+de)),i.w(J++,ft,at)}else qt=Math.max(10,this.yg[Bt.layer]),Kt=Math.max(10,this.Qf[Bt.layer]),this.ba===180?(_&&i.w(J++,ft-qt,at),i.w(J++,ft,at),_&&i.w(J++,ft+Kt,at)):this.ba===90?(_&&i.w(J++,ft,at+Kt),i.w(J++,ft,at),_&&i.w(J++,ft,at-qt)):this.ba===270?(_&&i.w(J++,ft,at-qt),i.w(J++,ft,at),_&&i.w(J++,ft,at+Kt)):(_&&i.w(J++,ft+Kt,at),i.w(J++,ft,at),_&&i.w(J++,ft-qt,at));c=Bt}if(l===null||a!==Ni||Mt)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=i.l(J).x,at=i.l(J).y,Mt){var Pr=this.Qf[y.layer],dn=0;this.ba===180||this.ba===0?(dn=ni,dn>=y.O.y&&dn<=y.O.bottom&&(this.ba===180?ft>=y.O.x:ft<=y.O.right)&&(Ct=y.la+(this.ba===180?-Pr:Pr),dn=dn<y.O.y+y.O.height/2?y.O.y-this.Yd/2:y.O.bottom+this.Yd/2,i.w(J++,Ct,ni),i.w(J++,Ct,dn)),i.w(J++,ft,dn)):(dn=ai,dn>=y.O.x&&dn<=y.O.right&&(this.ba===270?at>=y.O.y:at<=y.O.bottom)&&(Ct=y.sa+(this.ba===270?-Pr:Pr),dn=dn<y.O.x+y.O.width/2?y.O.x-this.Yd/2:y.O.right+this.Yd/2,i.w(J++,ai,Ct),i.w(J++,dn,Ct)),i.w(J++,dn,at)),i.w(J++,ft,at)}else _?(qt=Math.max(10,this.yg[y.layer]),Kt=Math.max(10,this.Qf[y.layer]),this.ba===180&&ft>=y.O.x?(Ct=y.O.x+y.O.width,i.ca(J-2,Ct,ni),i.ca(J-1,Ct+Kt,ni)):this.ba===90&&at<=y.O.bottom?(Ct=y.O.y,i.ca(J-2,ai,Ct),i.ca(J-1,ai,Ct-qt)):this.ba===270&&at>=y.O.y?(Ct=y.O.y+y.O.height,i.ca(J-2,ai,Ct),i.ca(J-1,ai,Ct+Kt)):this.ba===0&&ft<=y.O.right&&(Ct=y.O.x,i.ca(J-2,Ct,ni),i.ca(J-1,Ct-qt,ni))):(qt=Math.max(10,this.yg[y.layer]),Kt=Math.max(10,this.Qf[y.layer]),de=0,this.ba===180||this.ba===0?((this.ba===180?ft<=y.O.x:ft>=y.O.right)&&(de=(this.ba===0?Kt:-qt)/2),i.w(J++,ft+de,ni)):((this.ba===270?at<=y.O.y:at>=y.O.bottom)&&(de=(this.ba===90?Kt:-qt)/2),i.w(J++,ai,at+de)),i.w(J++,ft,at))}else{for(;y!==null&&y!==c;){Xt=Bt=null;for(var be=y.lc.i;be.next();){var Ns=be.value;if(Ns.link===n.link&&(Bt=Ns.toVertex,Xt=Ns.fromVertex,Xt.vd!==null&&(Xt=null),Bt.vd===null))break}var ai=0,ni=0,ft=0,at=0,yi=0,qt=0,Kt=0;if(Bt!==c)if(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=Bt.la,at=Bt.sa,Mt)if(this.ba===180||this.ba===0){var Ri=Xt!==null?Xt.sa:ni;Ri!==at&&(yi=this.Pb[Bt.layer],J===2&&(yi=this.ba===0?Math.max(yi,ai):Math.min(yi,ai)),i.w(J++,yi,ni),i.w(J++,yi,at))}else{var Cs=Xt!==null?Xt.la:ai;Cs!==ft&&(yi=this.Pb[Bt.layer],J===2&&(yi=this.ba===90?Math.max(yi,ni):Math.min(yi,ni)),i.w(J++,ai,yi),i.w(J++,ft,yi))}else qt=Math.max(10,this.yg[Bt.layer]),Kt=Math.max(10,this.Qf[Bt.layer]),this.ba===180?(i.w(J++,ft+Kt,at),_&&i.w(J++,ft,at),i.w(J++,ft-qt,at)):this.ba===90?(i.w(J++,ft,at-qt),_&&i.w(J++,ft,at),i.w(J++,ft,at+Kt)):this.ba===270?(i.w(J++,ft,at+Kt),_&&i.w(J++,ft,at),i.w(J++,ft,at-qt)):(i.w(J++,ft-qt,at),_&&i.w(J++,ft,at),i.w(J++,ft+Kt,at));y=Bt}Mt&&(ai=i.l(J-1).x,ni=i.l(J-1).y,ft=i.l(J).x,at=i.l(J).y,this.ba===180||this.ba===0?ni!==at&&(yi=this.ba===0?Math.min(Math.max((ft+ai)/2,this.Pb[c.layer]),ft):Math.max(Math.min((ft+ai)/2,this.Pb[c.layer]),ft),i.w(J++,yi,ni),i.w(J++,yi,at)):ai!==ft&&(yi=this.ba===90?Math.min(Math.max((at+ni)/2,this.Pb[c.layer]),at):Math.max(Math.min((at+ni)/2,this.Pb[c.layer]),at),i.w(J++,ai,yi),i.w(J++,ft,yi)))}if(e!==null&&_){if(h!==null){if(a===Ni){var Dn=i.l(0),to=i.l(2);Dn.L(to)||i.ca(1,(Dn.x+to.x)/2,(Dn.y+to.y)/2)}X=i.getLinkPoint(o,h,Ni,!0,!1,r,l),X.I()||X.set(o.U.Ul),i.ca(0,X.x,X.y)}l!==null&&(p===Ni&&(Dn=i.l(i.qa-1),to=i.l(i.qa-3),Dn.L(to)||i.ca(i.qa-2,(Dn.x+to.x)/2,(Dn.y+to.y)/2)),X=i.getLinkPoint(r,l,Ni,!1,!1,o,h),X.I()||X.set(r.U.Ul),i.ca(i.qa-1,X.x,X.y))}i.qj(),n.commit()}}}for(var _o=new E(k),is=this.network.edges.i;is.next();){var ge=is.value.link;ge!==null&&ge.ac&&!_o.contains(ge)&&_o.add(ge)}if(0<_o.count)if(this.ba===90||this.ba===270){for(var ol=0,Ai=new E(xr),en,Jn,gh=_o.i;gh.next();){var Wi=gh.value;if(Wi!==null&&Wi.ac){for(var Gi=2;Gi<Wi.qa-3;Gi++)if(en=Wi.l(Gi),Jn=Wi.l(Gi+1),Lp(en.y,Jn.y)&&!Lp(en.x,Jn.x)){var gn=new xr;gn.layer=Math.floor(en.y/2);var hi=Wi.l(0),Pn=Wi.l(Wi.qa-1);if(gn.first=hi.x*hi.x+hi.y,gn.ie=Pn.x*Pn.x+Pn.y,gn.$e=Math.min(en.x,Jn.x),gn.ue=Math.max(en.x,Jn.x),gn.index=Gi,gn.link=Wi,Gi+2<Wi.qa){var ns=Wi.l(Gi-1),mh=Wi.l(Gi+2),js=0;ns.y<en.y?js=mh.y<en.y?3:en.x<Jn.x?2:1:ns.y>en.y&&(js=mh.y>en.y?0:Jn.x<en.x?2:1),gn.xi=js}Ai.add(gn)}}}if(1<Ai.count){Ai.sort(this.pG);for(var Ut=0;Ut<Ai.count;){for(var Fn=Ai.n[Ut].layer,Ki=Ut+1;Ki<Ai.count&&Ai.n[Ki].layer===Fn;)Ki++;if(1<Ki-Ut)for(var xi=Ut;xi<Ki;){for(var ne=Ai.n[xi].ue,mo=Ut+1;mo<Ki&&Ai.n[mo].$e<ne;)ne=Math.max(ne,Ai.n[mo].ue),mo++;var li=mo-xi;if(1<li){Ai.Jq(this.vy,xi,xi+li);for(var me=1,ri=Ai.n[xi].ie,Gi=xi;Gi<mo;Gi++){var ui=Ai.n[Gi];ui.ie!==ri&&(me++,ri=ui.ie)}Ai.Jq(this.oG,xi,xi+li);for(var wi=1,ri=Ai.n[xi].first,Gi=xi;Gi<mo;Gi++)ui=Ai.n[Gi],ui.first!==ri&&(wi++,ri=ui.first);var pi=!0,Ii=wi;me<wi?(pi=!1,Ii=me,ri=Ai.n[xi].ie,Ai.Jq(this.vy,xi,xi+li)):ri=Ai.n[xi].first;for(var Ee=0,Gi=xi;Gi<mo;Gi++){ui=Ai.n[Gi],(pi?ui.first:ui.ie)!==ri&&(Ee++,ri=pi?ui.first:ui.ie),Wi=ui.link,en=Wi.l(ui.index),Jn=Wi.l(ui.index+1);var es=this.OF*(Ee-(Ii-1)/2);ol++,Wi.qm(),Wi.ca(ui.index,en.x,en.y+es),Wi.ca(ui.index+1,Jn.x,Jn.y+es),Wi.qj()}}xi=mo}Ut=Ki}}}else{for(var Tr=0,Ci=new E(xr),Ln,xe,xh=_o.i;xh.next();){var ci=xh.value;if(ci!==null&&ci.ac){for(var _t=2;_t<ci.qa-3;_t++)if(Ln=ci.l(_t),xe=ci.l(_t+1),Lp(Ln.x,xe.x)&&!Lp(Ln.y,xe.y)){var on=new xr;on.layer=Math.floor(Ln.x/2);var os=ci.l(0),wh=ci.l(ci.qa-1);if(on.first=os.x+os.y*os.y,on.ie=wh.x+wh.y*wh.y,on.$e=Math.min(Ln.y,xe.y),on.ue=Math.max(Ln.y,xe.y),on.index=_t,on.link=ci,_t+2<ci.qa){var Mi=ci.l(_t-1),xo=ci.l(_t+2),Ds=0;Mi.x<Ln.x?Ds=xo.x<Ln.x?3:Ln.y<xe.y?2:1:Mi.x>Ln.x&&(Ds=xo.x>Ln.x?0:xe.y<Ln.y?2:1),on.xi=Ds}Ci.add(on)}}}if(1<Ci.count){Ci.sort(this.pG);for(var Bo=0;Bo<Ci.count;){for(var rl=Ci.n[Bo].layer,ee=Bo+1;ee<Ci.count&&Ci.n[ee].layer===rl;)ee++;if(1<ee-Bo)for(var vi=Bo;vi<ee;){for(var Yn=Ci.n[vi].ue,rn=Bo+1;rn<ee&&Ci.n[rn].$e<Yn;)Yn=Math.max(Yn,Ci.n[rn].ue),rn++;var oe=rn-vi;if(1<oe){Ci.Jq(this.vy,vi,vi+oe);for(var ji=1,Ti=Ci.n[vi].ie,_t=vi;_t<rn;_t++){var qn=Ci.n[_t];qn.ie!==Ti&&(ji++,Ti=qn.ie)}Ci.Jq(this.oG,vi,vi+oe);for(var Eo=1,Ti=Ci.n[vi].first,_t=vi;_t<rn;_t++)qn=Ci.n[_t],qn.first!==Ti&&(Eo++,Ti=qn.first);var we=!0,Sr=Eo;ji<Eo?(we=!1,Sr=ji,Ti=Ci.n[vi].ie,Ci.Jq(this.vy,vi,vi+oe)):Ti=Ci.n[vi].first;for(var kr=0,_t=vi;_t<rn;_t++){qn=Ci.n[_t],(we?qn.first:qn.ie)!==Ti&&(kr++,Ti=we?qn.first:qn.ie),ci=qn.link,Ln=ci.l(qn.index),xe=ci.l(qn.index+1);var Qn=this.OF*(kr-(Sr-1)/2);Tr++,ci.qm(),ci.ca(qn.index,Ln.x+Qn,Ln.y),ci.ca(qn.index+1,xe.x+Qn,xe.y),ci.qj()}}vi=rn}Bo=ee}}}},st.prototype.pG=function(t,i){return t instanceof xr&&i instanceof xr&&t!==i?t.layer<i.layer?-1:t.layer>i.layer?1:t.$e<i.$e?-1:t.$e>i.$e?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0},st.prototype.oG=function(t,i){return t instanceof xr&&i instanceof xr&&t!==i?t.first<i.first?-1:t.first>i.first||t.xi<i.xi?1:t.xi>i.xi||t.$e<i.$e?-1:t.$e>i.$e?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0},st.prototype.vy=function(t,i){return t instanceof xr&&i instanceof xr&&t!==i?t.ie<i.ie?-1:t.ie>i.ie||t.xi<i.xi?1:t.xi>i.xi||t.$e<i.$e?-1:t.$e>i.$e?1:t.ue<i.ue?-1:t.ue>i.ue?1:0:0};function Lp(t,i){var n=t-i;return-1<n&&1>n}function Ts(t,i){var n,e=t.ne[i];if(e>=t.kh.length){n=[];for(var o=0;o<t.kh.length;o++)n[o]=t.kh[o];t.kh=n}for(t.kh[e]===void 0||t.kh[e]===null?n=[]:(n=t.kh[e],t.kh[e]=null),e=t.Gs[i],o=0;o<e.length;o++){var r=e[o];n[r.index]=r}return n}function Ss(t,i,n){t.kh[t.ne[i]]=n}s.defineProperty(st,{layerSpacing:"layerSpacing"},function(){return this.Om},function(t){this.Om!==t&&(s.j(t,"number",st,"layerSpacing"),0<=t&&(this.Om=t,this.J()))}),s.defineProperty(st,{KK:"columnSpacing"},function(){return this.Yd},function(t){this.Yd!==t&&(s.j(t,"number",st,"columnSpacing"),0<t&&(this.Yd=t,this.J()))}),s.defineProperty(st,{direction:"direction"},function(){return this.ba},function(t){this.ba!==t&&(s.j(t,"number",st,"direction"),t===0||t===90||t===180||t===270?(this.ba=t,this.J()):s.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),s.defineProperty(st,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),s.defineProperty(st,{yA:"cycleRemoveOption"},function(){return this.Ao},function(t){this.Ao!==t&&(s.ob(t,st,st,"cycleRemoveOption"),t===Gc||t===Ap||t===Gf)&&(this.Ao=t,this.J())}),s.defineProperty(st,{JI:"layeringOption"},function(){return this.ap},function(t){this.ap!==t&&(s.ob(t,st,st,"layeringOption"),t===Ip||t===Oc||t===Vc)&&(this.ap=t,this.J())}),s.defineProperty(st,{xI:"initializeOption"},function(){return this.Ro},function(t){this.Ro!==t&&(s.ob(t,st,st,"initializeOption"),t===Bp||t===Hc||t===Kc)&&(this.Ro=t,this.J())}),s.defineProperty(st,{nL:"iterations"},function(){return this.Nm},function(t){this.Nm!==t&&(s.Ad(t,wu,"iterations"),0<=t&&(this.Nm=t,this.J()))}),s.defineProperty(st,{rH:"aggressiveOption"},function(){return this.po},function(t){this.po!==t&&(s.ob(t,st,st,"aggressiveOption"),t===Uc||t===Ep||t===Jc)&&(this.po=t,this.J())}),s.defineProperty(st,{HL:"packOption"},function(){return this.dj},function(t){this.dj!==t&&(s.j(t,"number",st,"packOption"),0<=t&&8>t&&(this.dj=t,this.J()))}),s.defineProperty(st,{bo:"setsPortSpots"},function(){return this.ci},function(t){this.ci!==t&&(s.j(t,"boolean",st,"setsPortSpots"),this.ci=t,this.J())}),s.defineProperty(st,{OF:"linkSpacing"},function(){return this.ns},function(t){this.ns!==t&&(s.j(t,"number",st,"linkSpacing"),0<=t&&(this.ns=t,this.J()))}),s.u(st,{SI:"maxLayer"},function(){return this.tb}),s.u(st,{tL:"maxIndex"},function(){return this.mw}),s.u(st,{sL:"maxColumn"},function(){return this.Kb}),s.u(st,{yL:"minIndexLayer"},function(){return this.ws}),s.u(st,{uL:"maxIndexLayer"},function(){return this.Rf});var Ap;st.CycleDepthFirst=Ap=s.p(st,"CycleDepthFirst",0);var Gc;st.CycleGreedy=Gc=s.p(st,"CycleGreedy",1);var Gf;st.CycleFromLayers=Gf=s.p(st,"CycleFromLayers",2);var Ip;st.LayerOptimalLinkLength=Ip=s.p(st,"LayerOptimalLinkLength",0);var Oc;st.LayerLongestPathSink=Oc=s.p(st,"LayerLongestPathSink",1);var Vc;st.LayerLongestPathSource=Vc=s.p(st,"LayerLongestPathSource",2);var Bp;st.InitDepthFirstOut=Bp=s.p(st,"InitDepthFirstOut",0);var Hc;st.InitDepthFirstIn=Hc=s.p(st,"InitDepthFirstIn",1);var Kc;st.InitNaive=Kc=s.p(st,"InitNaive",2);var Uc;st.AggressiveNone=Uc=s.p(st,"AggressiveNone",0);var Ep;st.AggressiveLess=Ep=s.p(st,"AggressiveLess",1);var Jc;st.AggressiveMore=Jc=s.p(st,"AggressiveMore",2),st.PackNone=0;var hm;st.PackExpand=hm=1;var Yc;st.PackStraighten=Yc=2;var lm;st.PackMedian=lm=4;var qc;st.PackAll=qc=7;function xr(){this.index=this.ue=this.$e=this.ie=this.first=this.layer=0,this.link=null,this.xi=0}s.be(xr,{layer:!0,first:!0,ie:!0,$e:!0,ue:!0,index:!0,link:!0,xi:!0});function wu(){At.call(this)}s.La(wu,At),s.ga("LayeredDigraphNetwork",wu),wu.prototype.createVertex=function(){return new Qc},wu.prototype.createEdge=function(){return new Zc};function Qc(){It.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.Xp=NaN,this.qn=0,this.lB=this.mB=null}s.La(Qc,It),s.ga("LayeredDigraphVertex",Qc);function Zc(){Hi.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}s.La(Zc,Hi),s.ga("LayeredDigraphEdge",Zc);function z(){0<arguments.length&&s.nd(z),wt.call(this),this.yd=new R(Object),this.Ts=Op,this.Of=Zo,this.It=Hp,this.jw=rv,this.kC=null,this.Mh=!0,this.pd=Kp,this.ng=new lt(10,10).freeze(),this.va=new Xi,this.wa=new Xi,this.Wz=[]}s.La(z,wt),s.ga("TreeLayout",z),z.prototype.cloneProtected=function(t){wt.prototype.cloneProtected.call(this,t),t.Ts=this.Ts,t.It=this.It,t.jw=this.jw,t.Mh=this.Mh,t.pd=this.pd,t.ng.assign(this.ng),t.va.copyInheritedPropertiesFrom(this.va),t.wa.copyInheritedPropertiesFrom(this.wa)},z.prototype.ic=function(t){t.Je===z?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.Vf=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.YJ=t:s.k("Unknown enum value: "+t):wt.prototype.ic.call(this,t)},z.prototype.createNetwork=function(){return new Jf},z.prototype.makeNetwork=function(t){function i(e){if(e instanceof I)return!e.Df&&e.kd!=="Comment";if(e instanceof k){var o=e.V;return o===null||o.Df||o.kd==="Comment"?!1:(e=e.Z,!(e===null||e.Df||e.kd==="Comment"))}return!1}var n=this.createNetwork();return n.Ub=this,t instanceof x?(n.Bk(t.ig,!0,i),n.Bk(t.links,!0,i)):t instanceof q?n.Bk(t.hc,!1,i):n.Bk(t.i,!1,i),n},z.prototype.doLayout=function(t){t===null&&s.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.network===null&&(this.network=this.makeNetwork(t)),this.Vf!==Up&&(this.Md=this.initialOrigin(this.Md));var i=this.g;if(i===null&&t instanceof x&&(i=t),this.Of=this.path===Op&&i!==null?i.Vd?Zo:el:this.path===Op?Zo:this.path,0<this.network.vertexes.count){for(this.network.ux(),t=this.network.vertexes.i;t.next();)i=t.value,i.initialized=!1,i.level=0,i.parent=null,i.children=[];if(0<this.yd.count){for(t=new R(Xi),i=this.yd.i;i.next();){var n=i.value;n instanceof I?(n=this.network.Cn(n),n!==null&&t.add(n)):n instanceof Xi&&t.add(n)}this.yd=t}for(this.yd.count===0&&this.findRoots(),t=this.yd.copy().i;t.next();)i=t.value,i.initialized||(i.initialized=!0,Xc(this,i));for(i=this.network.vertexes,t=null;t=$x(i),0<t.count;)i=um(this,t),i!==null&&this.yd.add(i),i.initialized=!0,Xc(this,i),i=t;for(t=this.yd.i;t.next();)i=t.value,i instanceof Xi&&am(this,i);for(t=this.yd.i;t.next();)i=t.value,i instanceof Xi&&pm(this,i);for(t=this.yd.i;t.next();)i=t.value,i instanceof Xi&&ym(this,i);if(this.jA(),this.aB===Jp){for(n=[],t=this.network.vertexes.i;t.next();){var e=t.value,i=e.parent;i===null&&(i=e);var i=i.angle===0||i.angle===180,o=n[e.level];o===void 0&&(o=0),n[e.level]=Math.max(o,i?e.width:e.height)}for(e=0;e<n.length;e++)n[e]===void 0&&(n[e]=0);for(this.kC=n,t=this.network.vertexes.i;t.next();)e=t.value,i=e.parent,i===null&&(i=e),i.angle===0||i.angle===180?(i.angle===180&&(e.ju+=n[e.level]-e.width),e.width=n[e.level]):(i.angle===270&&(e.ku+=n[e.level]-e.height),e.height=n[e.level])}else if(this.aB===sv)for(t=this.network.vertexes.i;t.next();){for(n=t.value,i=n.angle===0||n.angle===180,o=-1,e=0;e<n.children.length;e++)var r=n.children[e],o=Math.max(o,i?r.width:r.height);if(0<=o)for(e=0;e<n.children.length;e++)r=n.children[e],i?(n.angle===180&&(r.ju+=o-r.width),r.width=o):(n.angle===270&&(r.ku+=o-r.height),r.height=o)}for(t=this.yd.i;t.next();)i=t.value,i instanceof Xi&&this.layoutTree(i);this.arrangeTrees(),this.updateParts()}this.network=null,this.yd=new R(Object),this.sf=!0};function $x(t){var i=new R(Xi);for(t=t.i;t.next();){var n=t.value;n.initialized||i.add(n)}return i}z.prototype.findRoots=function(){for(var t=this.network.vertexes,i=t.i;i.next();){var n=i.value;switch(this.Of){case Zo:n.nc.count===0&&this.yd.add(n);break;case el:n.lc.count===0&&this.yd.add(n);break;default:s.k("Unhandled path value "+this.Of.toString())}}this.yd.count===0&&(t=um(this,t),t!==null&&this.yd.add(t))};function um(t,i){for(var n=999999,e=null,o=i.i;o.next();){var r=o.value;switch(t.Of){case Zo:r.nc.count<n&&(n=r.nc.count,e=r);break;case el:r.lc.count<n&&(n=r.lc.count,e=r);break;default:s.k("Unhandled path value "+t.Of.toString())}}return e}function Xc(t,i){if(i!==null){switch(t.Of){case Zo:if(0<i.lc.count){for(var n=new E(Xi),e=i.RH;e.next();){var o=e.value;fm(t,i,o)&&n.add(o)}0<n.count&&(i.children=n.yc())}break;case el:if(0<i.nc.count){for(n=new E(Xi),e=i.NJ;e.next();)o=e.value,fm(t,i,o)&&n.add(o);0<n.count&&(i.children=n.yc())}break;default:s.k("Unhandled path value"+t.Of.toString())}for(n=i.children,e=n.length,o=0;o<e;o++){var r=n[o];r.initialized=!0,r.level=i.level+1,r.parent=i,t.yd.remove(r)}for(o=0;o<e;o++)r=n[o],Xc(t,r)}}function fm(t,i,n){if(n.initialized){var e;if(i===null)e=!1;else{for(e=i.parent;e!==null&&e!==n;)e=e.parent;e=e===n}if(e||n.level>i.level)return!1;t.removeChild(n.parent,n)}return!0}z.prototype.removeChild=function(t,i){if(t!==null&&i!==null){for(var n=t.children,e=0,o=0;o<n.length;o++)n[o]===i&&e++;if(0<e){for(var e=Array(n.length-e),r=0,o=0;o<n.length;o++)n[o]!==i&&(e[r++]=n[o]);t.children=e}}};function am(t,i){if(i!==null){t.initializeTreeVertexValues(i),i.alignment===$o&&t.sortTreeVertexChildren(i);for(var n=0,e=i.sn,o=0,r=i.children,h=r.length,l=0;l<h;l++){var u=r[l];am(t,u),n+=u.descendantCount+1,e=Math.max(e,u.maxChildrenCount),o=Math.max(o,u.maxGenerationCount)}i.descendantCount=n,i.maxChildrenCount=e,i.maxGenerationCount=0<e?o+1:0}}function _x(t,i){switch(t.It){default:case Hp:return i.parent!==null?i.parent:t.va;case ev:return i.parent===null?t.va:i.parent.parent===null?t.wa:i.parent;case nv:return i.parent!==null?i.parent.parent!==null?i.parent.parent:t.wa:t.va;case iv:var n=!0;if(i.sn===0)n=!1;else for(var e=i.children,o=e.length,r=0;r<o;r++)if(0<e[r].sn){n=!1;break}return n&&i.parent!==null?t.wa:i.parent!==null?i.parent:t.va}}z.prototype.initializeTreeVertexValues=function(t){var i=_x(this,t);if(t.copyInheritedPropertiesFrom(i),t.parent!==null&&t.parent.alignment===$o){for(var i=t.angle,n=t.parent.children,e=0;e<n.length&&t!==n[e];)e++;e%2===0?e!==n.length-1&&(i=i===90?180:i===180?270:i===270?180:270):i=i===90?0:i===180?90:i===270?0:90,t.angle=i}t.initialized=!0};function pm(t,i){if(i!==null){t.assignTreeVertexValues(i);for(var n=i.children,e=n.length,o=0;o<e;o++)pm(t,n[o])}}z.prototype.assignTreeVertexValues=function(){};function ym(t,i){if(i!==null){i.alignment!==$o&&t.sortTreeVertexChildren(i);for(var n=i.children,e=n.length,o=0;o<e;o++)ym(t,n[o])}}z.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Pu:break;case Vf:t.children.reverse();break;case Hf:t.children.sort(t.comparer);break;case Kf:t.children.sort(t.comparer),t.children.reverse();break;default:s.k("Unhandled sorting value "+t.sorting.toString())}},z.prototype.jA=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},z.prototype.addComments=function(t){var n=t.angle,o=t.parent,e=0,i=wr,i=!1;o!==null&&(e=o.angle,i=o.alignment,i=ks(i));var n=n===90||n===270,e=e===90||e===270,o=t.sn===0,r=0,h=0,l=0,u=t.commentSpacing;if(t.Rc!==null)for(var f=t.Rc.bF();f.next();){var a=f.value;a.kd==="Comment"&&a.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(a),a.Ne(),a=a.za,n&&!o||!i&&!e&&o||i&&e&&o?(r=Math.max(r,a.width),h+=a.height+Math.abs(l)):(r+=a.width+Math.abs(l),h=Math.max(h,a.height)),l=u)}t.comments!==null&&(n&&!o||!i&&!e&&o||i&&e&&o?(r+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),i=s.lg(0,0,t.O.width+r,t.O.height+h),t.eb=i,s.Bb(i))};function ks(t){return t===br||t===$o||t===ts||t===Mr}function Of(t){return t===br||t===$o}function Wc(t){var i=t.parent;if(i!==null){var n=i.alignment;if(ks(n)){if(Of(n)){for(i=i.children,n=0;n<i.length&&t!==i[n];)n++;return n%2===0}if(n===ts)return!0}}return!1}z.prototype.layoutComments=function(t){if(t.comments!==null){var i=t.Rc.za,n=t.parent,e=t.angle,o=0,r=wr,r=!1;n!==null&&(o=n.angle,r=n.alignment,r=ks(r));for(var n=e===90||e===270,e=o===90||o===270,h=t.sn===0,l=Wc(t),u=0,f=t.comments,a=f.length,p=s.K(),y=0;y<a;y++){var c=f[y],v=c.za;if(n&&!h||!r&&!e&&h||r&&e&&h){if(135<o&&!r||e&&l)if(0<=t.commentMargin)for(p.m(t.O.x-t.commentMargin-v.width,t.O.y+u),c.move(p),c=c.Mg();c.next();){var d=c.value;d.Mb=Ce,d.Nb=On}else for(p.m(t.O.x+2*t.T.x-t.commentMargin,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=On,d.Nb=Ce;else if(0<=t.commentMargin)for(p.m(t.O.x+2*t.T.x+t.commentMargin,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=On,d.Nb=Ce;else for(p.m(t.O.x+t.commentMargin-v.width,t.O.y+u),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ce,d.Nb=On;u=0<=t.commentSpacing?u+(v.height+t.commentSpacing):u+(t.commentSpacing-v.height)}else{if(135<o&&!r||!e&&l)if(0<=t.commentMargin)for(p.m(t.O.x+u,t.O.y-t.commentMargin-v.height),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ne,d.Nb=je;else for(p.m(t.O.x+u,t.O.y+2*t.T.y-t.commentMargin),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=je,d.Nb=Ne;else if(0<=t.commentMargin)for(p.m(t.O.x+u,t.O.y+2*t.T.y+t.commentMargin),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=je,d.Nb=Ne;else for(p.m(t.O.x+u,t.O.y+t.commentMargin-v.height),c.move(p),c=c.Mg();c.next();)d=c.value,d.Mb=Ne,d.Nb=je;u=0<=t.commentSpacing?u+(v.width+t.commentSpacing):u+(t.commentSpacing-v.width)}}if(s.v(p),i=u-t.commentSpacing-(n?i.height:i.width),this.Of===Zo)for(o=t.lc;o.next();)t=o.value.link,t===null||t.fm||(t.am=0<i?i:NaN);else for(o=t.nc;o.next();)t=o.value.link,t===null||t.fm||(t.um=0<i?i:NaN)}},z.prototype.layoutTree=function(t){if(t!==null){for(var i=t.children,n=i.length,e=0;e<n;e++)this.layoutTree(i[e]);switch(t.compaction){case Vp:cm(this,t);break;case Uf:if(t.alignment===$o)cm(this,t);else if(t.sn===0){var e=t.parent,i=!1,n=0,o=wr;e!==null&&(n=e.angle,o=e.alignment,i=ks(o)),e=Wc(t),t.pa.m(0,0),t.kb.m(t.width,t.height),t.parent===null||t.comments===null||(n!==180&&n!==270||i)&&!e?t.Oa.m(0,0):n===180&&!i||(n===90||n===270)&&e?t.Oa.m(t.width-2*t.T.x,0):t.Oa.m(0,t.height-2*t.T.y),t.Cu=null,t.Xu=null}else{for(var r=_e(t),i=r===90||r===270,f=0,h=t.children,l=h.length,u=0;u<l;u++)var ht=h[u],f=Math.max(f,i?ht.kb.width:ht.kb.height);var a=t.alignment,e=a===Xo,p=a===Wo,y=ks(a),c=Math.max(0,t.breadthLimit),n=Mu(t),v=t.nodeSpacing,d=_r(t),g=t.rowSpacing,m=0;(e||p||t.Bq||t.Cq&&t.maxGenerationCount===1)&&(m=Math.max(0,t.rowIndent));var e=t.width,o=t.height,w=0,M=0,S=0,F=null,C=null,G=0,H=0,U=0,X=0,_=0,Mt=0,Dt=0,J=0,ht=0;if(y&&!Of(a)&&135<r&&h.reverse(),Of(a))if(1<l)for(u=0;u<l;u++)u%2===0&&u!==l-1?J=Math.max(J,i?h[u].kb.width:h[u].kb.height):u%2!==0&&(ht=Math.max(ht,i?h[u].kb.width:h[u].kb.height));else l===1&&(J=i?h[0].kb.width:h[0].kb.height);if(y){switch(a){case br:M=135>r?vm(t,h,J,w,M):dm(t,h,J,w,M),J=M.x,w=M.width,M=M.height;break;case ts:for(u=0;u<l;u++){var ht=h[u],Yt=ht.kb,F=Mt===0?0:g;i?(ht.pa.m(f-Yt.width,X+F),w=Math.max(w,Yt.width),M=Math.max(M,X+F+Yt.height),X+=F+Yt.height):(ht.pa.m(U+F,f-Yt.height),w=Math.max(w,U+F+Yt.width),M=Math.max(M,Yt.height),U+=F+Yt.width),Mt++}break;case Mr:for(u=0;u<l;u++)ht=h[u],Yt=ht.kb,F=Mt===0?0:g,i?(ht.pa.m(v/2+t.T.x,X+F),w=Math.max(w,Yt.width),M=Math.max(M,X+F+Yt.height),X+=F+Yt.height):(ht.pa.m(U+F,v/2+t.T.y),w=Math.max(w,U+F+Yt.width),M=Math.max(M,Yt.height),U+=F+Yt.width),Mt++}F=jn(this,2),C=jn(this,2),i?(F[0].m(0,0),F[1].m(0,M),C[0].m(w,0)):(F[0].m(0,0),F[1].m(w,0),C[0].m(0,M)),C[1].m(w,M)}else for(u=0;u<l;u++){if(ht=h[u],Yt=ht.kb,i){0<c&&0<Mt&&U+v+Yt.width>c&&(U<f&&ch(t,a,f-U,0,Dt,u-1),_++,Mt=0,Dt=u,S=M,U=0,X=135<r?-M-g:M+g),Rp(this,ht,0,X);var Bt=0;if(Mt===0)F=ht.Cu,C=ht.Xu,G=Yt.width,H=Yt.height,(F===null||C===null||r!==_e(ht))&&(F=jn(this,2),C=jn(this,2),F[0].m(0,0),F[1].m(0,H),C[0].m(G,0),C[1].m(G,H));else{var Xt=s.Za(),H=mm(this,t,ht,F,C,G,H,Xt),Bt=H.x,F=Xt[0],C=Xt[1],G=H.width,H=H.height;s.ra(Xt),U<Yt.width&&0>Bt&&(nl(t,-Bt,0,Dt,u-1),Gp(F,-Bt,0),Gp(C,-Bt,0),Bt=0)}ht.pa.m(Bt,X),w=Math.max(w,G),M=Math.max(M,S+(_===0?0:g)+Yt.height),U=G}else 0<c&&0<Mt&&X+v+Yt.height>c&&(X<f&&ch(t,a,0,f-X,Dt,u-1),_++,Mt=0,Dt=u,S=w,X=0,U=135<r?-w-g:w+g),Rp(this,ht,U,0),Bt=0,Mt===0?(F=ht.Cu,C=ht.Xu,G=Yt.width,H=Yt.height,(F===null||C===null||r!==_e(ht))&&(F=jn(this,2),C=jn(this,2),F[0].m(0,0),F[1].m(G,0),C[0].m(0,H),C[1].m(G,H))):(Xt=s.Za(),H=mm(this,t,ht,F,C,G,H,Xt),Bt=H.x,F=Xt[0],C=Xt[1],G=H.width,H=H.height,s.ra(Xt),X<Yt.height&&0>Bt&&(nl(t,0,-Bt,Dt,u-1),Gp(F,0,-Bt),Gp(C,0,-Bt),Bt=0)),ht.pa.m(U,Bt),M=Math.max(M,H),w=Math.max(w,S+(_===0?0:g)+Yt.width),X=H;Mt++}switch(0<_&&(i?(M+=Math.max(0,n),U<w&&ch(t,a,w-U,0,Dt,l-1),0<m&&(p||nl(t,m,0,0,l-1),w+=m)):(w+=Math.max(0,n),X<M&&ch(t,a,0,M-X,Dt,l-1),0<m&&(p||nl(t,0,m,0,l-1),M+=m))),m=p=0,a){case Tu:i?p+=w/2-t.T.x-d/2:m+=M/2-t.T.y-d/2;break;case wr:0<_?i?p+=w/2-t.T.x-d/2:m+=M/2-t.T.y-d/2:i?(J=h[0].pa.x+h[0].Oa.x,u=h[l-1].pa.x+h[l-1].Oa.x+2*h[l-1].T.x,p+=J+(u-J)/2-t.T.x-d/2):(J=h[0].pa.y+h[0].Oa.y,u=h[l-1].pa.y+h[l-1].Oa.y+2*h[l-1].T.y,m+=J+(u-J)/2-t.T.y-d/2);break;case Xo:i?(p-=d,w+=d):(m-=d,M+=d);break;case Wo:i?(p+=w-t.width+d,w+=d):(m+=M-t.height+d,M+=d);break;case br:i?p=1<l?p+(J+v/2-t.T.x):p+(h[0].T.x-t.T.x+h[0].Oa.x):m=1<l?m+(J+v/2-t.T.y):m+(h[0].T.y-t.T.y+h[0].Oa.y);break;case ts:i?p+=w+v/2-t.T.x:m+=M+v/2-t.T.y;break;case Mr:break;default:s.k("Unhandled alignment value "+a.toString())}for(u=0;u<l;u++)ht=h[u],i?ht.pa.m(ht.pa.x+ht.Oa.x-p,ht.pa.y+(135<r?(y?-M:-ht.kb.height)+ht.Oa.y-n:o+n+ht.Oa.y)):ht.pa.m(ht.pa.x+(135<r?(y?-w:-ht.kb.width)+ht.Oa.x-n:e+n+ht.Oa.x),ht.pa.y+ht.Oa.y-m);if(l=h=0,y?i?(w=$c(t,w,p),0>p&&(p=0),135<r&&(m+=M+n),M+=o+n,a===Mr&&(h+=v/2+t.T.x),l+=o+n):(135<r&&(p+=w+n),w+=e+n,M=_c(t,M,m),0>m&&(m=0),a===Mr&&(l+=v/2+t.T.y),h+=e+n):i?(t.comments===null?e>w&&(a=bc(a,e-w,0),h=a.x,l=a.y,w=e,p=0):w=$c(t,w,p),0>p&&(h-=p,p=0),135<r&&(m+=M+n),M=Math.max(Math.max(M,o),M+o+n),l+=o+n):(135<r&&(p+=w+n),w=Math.max(Math.max(w,e),w+e+n),t.comments===null?o>M&&(a=bc(a,0,o-M),h=a.x,l=a.y,M=o,m=0):M=_c(t,M,m),0>m&&(l-=m,m=0),h+=e+n),0<_)r=jn(this,4),a=jn(this,4),i?(r[2].m(0,o+n),r[3].m(r[2].x,M),a[2].m(w,r[2].y),a[3].m(a[2].x,r[3].y)):(r[2].m(e+n,0),r[3].m(w,r[2].y),a[2].m(r[2].x,M),a[3].m(r[3].x,a[2].y));else{for(r=jn(this,F.length+2),a=jn(this,C.length+2),u=0;u<F.length;u++)y=F[u],r[u+2].m(y.x+h,y.y+l);for(u=0;u<C.length;u++)y=C[u],a[u+2].m(y.x+h,y.y+l)}i?(r[0].m(p,0),r[1].m(r[0].x,o),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),a[0].m(p+e,0),a[1].m(a[0].x,o),a[2].y<a[1].y&&(a[2].x<a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x<a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),r[2].y-=n/2,a[2].y-=n/2):(r[0].m(0,m),r[1].m(e,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),a[0].m(0,m+o),a[1].m(e,a[0].y),a[2].x<a[1].x&&(a[2].y<a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y<a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),r[2].x-=n/2,a[2].x-=n/2),$r(this,F),$r(this,C),t.Cu=r,t.Xu=a,t.Oa.m(p,m),t.kb.m(w,M)}break;default:s.k("Unhandled compaction value "+t.compaction.toString())}}};function cm(t,i){if(i.sn===0){var n=!1,e=0,o=wr;i.parent!==null&&(e=i.parent.angle,o=i.parent.alignment,n=ks(o)),o=Wc(i),i.pa.m(0,0),i.kb.m(i.width,i.height),i.parent===null||i.comments===null||(e!==180&&e!==270||n)&&!o?i.Oa.m(0,0):e===180&&!n||(e===90||e===270)&&o?i.Oa.m(i.width-2*i.T.x,0):i.Oa.m(0,i.height-2*i.T.y)}else{for(var n=_e(i),e=n===90||n===270,u=0,o=i.children,r=o.length,h=0;h<r;h++)var l=o[h],u=Math.max(u,e?l.kb.width:l.kb.height);var f=i.alignment,M=f===Xo,a=f===Wo,p=ks(f),y=Math.max(0,i.breadthLimit),c=Mu(i),v=i.nodeSpacing,d=_r(i),g=M||a?0:d/2,m=i.rowSpacing,w=0;(M||a||i.Bq||i.Cq&&i.maxGenerationCount===1)&&(w=Math.max(0,i.rowIndent));var M=i.width,S=i.height,F=0,C=0,G=0,H=0,U=0,X=0,_=0,Mt=0,Dt=0,J=0;if(p&&!Of(f)&&135<n&&o.reverse(),Of(f))if(1<r)for(h=0;h<r;h++){var l=o[h],ht=l.kb;h%2===0&&h!==r-1?Dt=Math.max(Dt,(e?ht.width:ht.height)+Wr(l)-v):h%2!==0&&(J=Math.max(J,(e?ht.width:ht.height)+Wr(l)-v))}else r===1&&(Dt=e?o[0].kb.width:o[0].kb.height);if(p)switch(f){case br:case $o:C=135>n?vm(i,o,Dt,F,C):dm(i,o,Dt,F,C),Dt=C.x,F=C.width,C=C.height;break;case ts:for(h=0;h<r;h++)l=o[h],ht=l.kb,y=_===0?0:m,e?(l.pa.m(u-ht.width,U+y),F=Math.max(F,ht.width),C=Math.max(C,U+y+ht.height),U+=y+ht.height):(l.pa.m(H+y,u-ht.height),F=Math.max(F,H+y+ht.width),C=Math.max(C,ht.height),H+=y+ht.width),_++;break;case Mr:for(u=0;u<r;u++)l=o[u],ht=l.kb,y=_===0?0:m,e?(l.pa.m(v/2+i.T.x,U+y),F=Math.max(F,ht.width),C=Math.max(C,U+y+ht.height),U+=y+ht.height):(l.pa.m(H+y,v/2+i.T.y),F=Math.max(F,H+y+ht.width),C=Math.max(C,ht.height),H+=y+ht.width),_++}else for(h=0;h<r;h++)l=o[h],ht=l.kb,e?(0<y&&0<_&&H+v+ht.width>y&&(H<u&&ch(i,f,u-H,0,Mt,h-1),X++,_=0,Mt=h,G=C,H=0,U=135<n?-C-m:C+m),J=_===0?g:v,Rp(t,l,0,U),l.pa.m(H+J,U),F=Math.max(F,H+J+ht.width),C=Math.max(C,G+(X===0?0:m)+ht.height),H+=J+ht.width):(0<y&&0<_&&U+v+ht.height>y&&(U<u&&ch(i,f,0,u-U,Mt,h-1),X++,_=0,Mt=h,G=F,U=0,H=135<n?-F-m:F+m),J=_===0?g:v,Rp(t,l,H,0),l.pa.m(H,U+J),C=Math.max(C,U+J+ht.height),F=Math.max(F,G+(X===0?0:m)+ht.width),U+=J+ht.height),_++;switch(0<X&&(e?(C+=Math.max(0,c),H<F&&ch(i,f,F-H,0,Mt,r-1),0<w&&(a||nl(i,w,0,0,r-1),F+=w)):(F+=Math.max(0,c),U<C&&ch(i,f,0,C-U,Mt,r-1),0<w&&(a||nl(i,0,w,0,r-1),C+=w))),w=a=0,f){case Tu:e?a+=F/2-i.T.x-d/2:w+=C/2-i.T.y-d/2;break;case wr:0<X?e?a+=F/2-i.T.x-d/2:w+=C/2-i.T.y-d/2:e?(f=o[0].pa.x+o[0].Oa.x,v=o[r-1].pa.x+o[r-1].Oa.x+2*o[r-1].T.x,a+=f+(v-f)/2-i.T.x-d/2):(f=o[0].pa.y+o[0].Oa.y,v=o[r-1].pa.y+o[r-1].Oa.y+2*o[r-1].T.y,w+=f+(v-f)/2-i.T.y-d/2);break;case Xo:e?(a-=d,F+=d):(w-=d,C+=d);break;case Wo:e?(a+=F-i.width+d,F+=d):(w+=C-i.height+d,C+=d);break;case br:case $o:e?a=1<r?a+(Dt+v/2-i.T.x):a+(o[0].T.x-i.T.x+o[0].Oa.x):w=1<r?w+(Dt+v/2-i.T.y):w+(o[0].T.y-i.T.y+o[0].Oa.y);break;case ts:e?a+=F+v/2-i.T.x:w+=C+v/2-i.T.y;break;case Mr:break;default:s.k("Unhandled alignment value "+f.toString())}for(h=0;h<r;h++)l=o[h],e?l.pa.m(l.pa.x+l.Oa.x-a,l.pa.y+(135<n?(p?-C:-l.kb.height)+l.Oa.y-c:S+c+l.Oa.y)):l.pa.m(l.pa.x+(135<n?(p?-F:-l.kb.width)+l.Oa.x-c:M+c+l.Oa.x),l.pa.y+l.Oa.y-w);e?(F=$c(i,F,a),0>a&&(a=0),135<n&&(w+=C+c),C+=S+c):(135<n&&(a+=F+c),F+=M+c,C=_c(i,C,w),0>w&&(w=0)),i.Oa.m(a,w),i.kb.m(F,C)}}function vm(t,i,n,e,o){var r=i.length;if(r===0)return new O(n,0,e,o);if(r===1){var h=i[0];return e=h.kb.width,o=h.kb.height,new O(n,0,e,o)}for(var l=t.nodeSpacing,u=t.rowSpacing,f=_e(t)===90,g=0,a=0,p=0,y=0;y<r;y++)if(!(y%2!==0||1<r&&y===r-1)){var h=i[y],c=h.kb,v=g===0?0:u;if(f){var d=Wr(h)-l;h.pa.m(n-(c.width+d),p+v),e=Math.max(e,c.width+d),o=Math.max(o,p+v+c.height),p+=v+c.height}else d=Wr(h)-l,h.pa.m(a+v,n-(c.height+d)),o=Math.max(o,c.height+d),e=Math.max(e,a+v+c.width),a+=v+c.width;g++}var g=0,m=a,w=p;for(f?(a=n+l,p=0):(a=0,p=n+l),y=0;y<r;y++)y%2!==0&&(h=i[y],c=h.kb,v=g===0?0:u,f?(d=Wr(h)-l,h.pa.m(a+d,p+v),e=Math.max(e,a+c.width+d),o=Math.max(o,p+v+c.height),p+=v+c.height):(d=Wr(h)-l,h.pa.m(a+v,p+d),e=Math.max(e,a+v+c.width),o=Math.max(o,p+c.height+d),a+=v+c.width),g++);return 1<r&&r%2===1&&(h=i[r-1],c=h.kb,i=gm(h),f?(h.pa.m(n+l/2-h.T.x-h.Oa.x,o+i),f=n+l/2-h.T.x-h.Oa.x,e=Math.max(e,f+c.width),0>f&&(e-=f),o=Math.max(o,Math.max(w,p)+i+c.height),0>h.pa.x&&(n=zp(t,h.pa.x,!1,n,l))):(h.pa.m(e+i,n+l/2-h.T.y-h.Oa.y),e=Math.max(e,Math.max(m,a)+i+c.width),f=n+l/2-h.T.y-h.Oa.y,o=Math.max(o,f+c.height),0>f&&(o-=f),0>h.pa.y&&(n=zp(t,h.pa.y,!0,n,l)))),new O(n,0,e,o)}function dm(t,i,n,e,o){var r=i.length;if(r===0)return new O(n,0,e,o);if(r===1){var h=i[0];return e=h.kb.width,o=h.kb.height,new O(n,0,e,o)}for(var l=t.nodeSpacing,u=t.rowSpacing,f=_e(t)===270,g=0,a=0,p=0,y=0;y<r;y++)if(!(y%2!==0||1<r&&y===r-1)){var h=i[y],c=h.kb,v=g===0?0:u;if(f){var d=Wr(h)-l,p=p-(v+c.height);h.pa.m(n-(c.width+d),p),e=Math.max(e,c.width+d),o=Math.max(o,Math.abs(p))}else d=Wr(h)-l,a-=v+c.width,h.pa.m(a,n-(c.height+d)),o=Math.max(o,c.height+d),e=Math.max(e,Math.abs(a));g++}var g=0,m=a,w=p;for(f?(a=n+l,p=0):(a=0,p=n+l),y=0;y<r;y++)y%2!==0&&(h=i[y],c=h.kb,v=g===0?0:u,f?(d=Wr(h)-l,p-=v+c.height,h.pa.m(a+d,p),e=Math.max(e,a+c.width+d),o=Math.max(o,Math.abs(p))):(d=Wr(h)-l,a-=v+c.width,h.pa.m(a,p+d),o=Math.max(o,p+c.height+d),e=Math.max(e,Math.abs(a))),g++);for(1<r&&r%2===1&&(h=i[r-1],c=h.kb,u=gm(h),f?(h.pa.m(n+l/2-h.T.x-h.Oa.x,-o-c.height-u),a=n+l/2-h.T.x-h.Oa.x,e=Math.max(e,a+c.width),0>a&&(e-=a),o=Math.max(o,Math.abs(Math.min(w,p))+u+c.height),0>h.pa.x&&(n=zp(t,h.pa.x,!1,n,l))):(h.pa.m(-e-c.width-u,n+l/2-h.T.y-h.Oa.y),e=Math.max(e,Math.abs(Math.min(m,a))+u+c.width),a=n+l/2-h.T.y-h.Oa.y,o=Math.max(o,a+c.height),0>a&&(o-=a),0>h.pa.y&&(n=zp(t,h.pa.y,!0,n,l)))),y=0;y<r;y++)h=i[y],f?h.pa.m(h.pa.x,h.pa.y+o):h.pa.m(h.pa.x+e,h.pa.y);return new O(n,0,e,o)}function Wr(t){return t.parent===null?0:t.parent.nodeSpacing}function gm(t){return t.parent===null?0:t.parent.rowSpacing}function zp(t,i,n,e,o){t=t.children;for(var r=t.length,h=0;h<r;h++)n?t[h].pa.m(t[h].pa.x,t[h].pa.y-i):t[h].pa.m(t[h].pa.x-i,t[h].pa.y);return i=t[r-1],Math.max(e,n?i.Oa.y+i.T.y-o/2:i.Oa.x+i.T.x-o/2)}function $c(t,i,n){switch(t.alignment){case wr:case Tu:var e=i;return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case Xo:return t.width>i?t.width:i;case Wo:return 2*t.T.x>i?t.width:i+t.width-2*t.T.x;case br:case $o:return e=Math.min(0,n),n=Math.max(i,n+t.width),Math.max(t.width,n-e);case ts:return t.width-t.T.x+t.nodeSpacing/2+i;case Mr:return Math.max(t.width,t.T.x+t.nodeSpacing/2+i);default:return i}}function _c(t,i,n){switch(t.alignment){case wr:case Tu:var e=i;return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case Xo:return t.height>i?t.height:i;case Wo:return 2*t.T.y>i?t.height:i+t.height-2*t.T.y;case br:case $o:return e=Math.min(0,n),n=Math.max(i,n+t.height),Math.max(t.height,n-e);case ts:return t.height-t.T.y+t.nodeSpacing/2+i;case Mr:return Math.max(t.height,t.T.y+t.nodeSpacing/2+i);default:return i}}function bc(t,i,n){switch(t){case Tu:i/=2,n/=2;break;case wr:i/=2,n/=2;break;case Xo:n=i=0;break;case Wo:break;default:s.k("Unhandled alignment value "+t.toString())}return new D(i,n)}function ch(t,i,n,e,o,r){i=bc(i,n,e),nl(t,i.x,i.y,o,r)}function nl(t,i,n,e,o){if(i!==0||n!==0)for(t=t.children;e<=o;e++){var r=t[e].pa;r.x+=i,r.y+=n}}function Rp(t,i,n,e){var o=i.parent;switch(t.Of){case Zo:for(t=i.nc;t.next();)i=t.value,i.fromVertex===o&&i.$s.m(n,e);break;case el:for(t=i.lc;t.next();)i=t.value,i.toVertex===o&&i.$s.m(n,e);break;default:s.k("Unhandled path value "+t.Of.toString())}}function Gp(t,i,n){for(var e=0;e<t.length;e++){var o=t[e];o.x+=i,o.y+=n}}function mm(t,i,n,e,o,r,h,l){var u=_e(i),f=u===90||u===270,a=i.nodeSpacing;i=e;var p=o;e=r,o=h;var y=n.Cu,c=n.Xu;h=n.kb;var v=f?Math.max(o,h.height):Math.max(e,h.width);if((y===null||u!==_e(n))&&(y=jn(t,2),c=jn(t,2),f?(y[0].m(0,0),y[1].m(0,h.height),c[0].m(h.width,0),c[1].m(c[0].x,y[1].y)):(y[0].m(0,0),y[1].m(h.width,0),c[0].m(0,h.height),c[1].m(y[1].x,c[0].y))),f){if(n=e,e=9999999,!(p===null||2>p.length||y===null||2>y.length))for(f=u=0;u<p.length&&f<y.length;){o=p[u];var m=y[f];r=m.x;var d=m.y;r+=n;var g=o;u+1<p.length&&(g=p[u+1]);var w=m,m=w.x,w=w.y;f+1<y.length&&(w=y[f+1],m=w.x,w=w.y,m+=n);var M=e;o.y===d?M=r-o.x:o.y>d&&o.y<w?M=r+(o.y-d)/(w-d)*(m-r)-o.x:d>o.y&&d<g.y&&(M=r-(o.x+(d-o.y)/(g.y-o.y)*(g.x-o.x))),M<e&&(e=M),g.y<=o.y?u++:w<=d?f++:(g.y<=w&&u++,w<=g.y&&f++)}if(n-=e,n+=a,u=y,f=n,i===null||2>i.length||u===null||2>u.length)e=null;else{for(a=jn(t,i.length+u.length),e=r=o=0;r<u.length&&u[r].y<i[0].y;)d=u[r++],a[e++].m(d.x+f,d.y);for(;o<i.length;)d=i[o++],a[e++].m(d.x,d.y);for(o=i[i.length-1].y;r<u.length&&u[r].y<=o;)r++;for(;r<u.length&&u[r].y>o;)d=u[r++],a[e++].m(d.x+f,d.y);for(u=jn(t,e),o=0;o<e;o++)u[o].assign(a[o]);$r(t,a),e=u}if(r=c,d=n,p===null||2>p.length||r===null||2>r.length)o=null;else{for(a=jn(t,p.length+r.length),f=g=u=0;u<p.length&&p[u].y<r[0].y;)o=p[u++],a[f++].m(o.x,o.y);for(;g<r.length;)o=r[g++],a[f++].m(o.x+d,o.y);for(r=r[r.length-1].y;u<p.length&&p[u].y<=r;)u++;for(;u<p.length&&p[u].y>r;)o=p[u++],a[f++].m(o.x,o.y);for(o=jn(t,f),u=0;u<f;u++)o[u].assign(a[u]);$r(t,a)}r=Math.max(0,n)+h.width,h=v}else{if(n=o,e=9999999,!(p===null||2>p.length||y===null||2>y.length))for(f=u=0;u<p.length&&f<y.length;)o=p[u],m=y[f],r=m.x,d=m.y,d+=n,g=o,u+1<p.length&&(g=p[u+1]),w=m,m=w.x,w=w.y,f+1<y.length&&(w=y[f+1],m=w.x,w=w.y,w+=n),M=e,o.x===r?M=d-o.y:o.x>r&&o.x<m?M=d+(o.x-r)/(m-r)*(w-d)-o.y:r>o.x&&r<g.x&&(M=d-(o.y+(r-o.x)/(g.x-o.x)*(g.y-o.y))),M<e&&(e=M),g.x<=o.x?u++:m<=r?f++:(g.x<=m&&u++,m<=g.x&&f++);if(n-=e,n+=a,u=y,f=n,i===null||2>i.length||u===null||2>u.length)e=null;else{for(a=jn(t,i.length+u.length),e=r=o=0;r<u.length&&u[r].x<i[0].x;)d=u[r++],a[e++].m(d.x,d.y+f);for(;o<i.length;)d=i[o++],a[e++].m(d.x,d.y);for(o=i[i.length-1].x;r<u.length&&u[r].x<=o;)r++;for(;r<u.length&&u[r].x>o;)d=u[r++],a[e++].m(d.x,d.y+f);for(u=jn(t,e),o=0;o<e;o++)u[o].assign(a[o]);$r(t,a),e=u}if(r=c,d=n,p===null||2>p.length||r===null||2>r.length)o=null;else{for(a=jn(t,p.length+r.length),f=g=u=0;u<p.length&&p[u].x<r[0].x;)o=p[u++],a[f++].m(o.x,o.y);for(;g<r.length;)o=r[g++],a[f++].m(o.x,o.y+d);for(r=r[r.length-1].x;u<p.length&&p[u].x<=r;)u++;for(;u<p.length&&p[u].x>r;)o=p[u++],a[f++].m(o.x,o.y);for(o=jn(t,f),u=0;u<f;u++)o[u].assign(a[u]);$r(t,a)}r=v,h=Math.max(0,n)+h.height}return $r(t,i),$r(t,y),$r(t,p),$r(t,c),l[0]=e,l[1]=o,new O(n,0,r,h)}function jn(t,i){var n=t.Wz[i];if(n!==void 0&&(n=n.pop(),n!==void 0))return n;for(var n=[],e=0;e<i;e++)n[e]=new D;return n}function $r(t,i){var n=i.length,e=t.Wz[n];e===void 0&&(e=[],t.Wz[n]=e),e.push(i)}z.prototype.arrangeTrees=function(){if(this.pd===Up)for(var t=this.yd.i;t.next();){var i=t.value;if(i instanceof Xi){var n=i.Rc;if(n!==null){var e=n.position,n=e.x,e=e.y;isFinite(n)||(n=0),isFinite(e)||(e=0),tv(this,i,n,e)}}}else{for(n=[],t=this.yd.i;t.next();)i=t.value,i instanceof Xi&&n.push(i);switch(this.sorting){case Pu:break;case Vf:n.reverse();break;case Hf:n.sort(this.comparer);break;case Kf:n.sort(this.comparer),n.reverse();break;default:s.k("Unhandled sorting value "+this.sorting.toString())}for(i=this.Md,t=i.x,i=i.y,e=0;e<n.length;e++){var o=n[e];switch(tv(this,o,t+o.Oa.x,i+o.Oa.y),this.pd){case Kp:i+=o.kb.height+this.ng.height;break;case ov:t+=o.kb.width+this.ng.width;break;default:s.k("Unhandled arrangement value "+this.pd.toString())}}}};function tv(t,i,n,e){if(i!==null){i.x=n,i.y=e,i=i.children;for(var o=i.length,r=0;r<o;r++){var h=i[r];tv(t,h,n+h.pa.x,e+h.pa.y)}}}z.prototype.commitLayout=function(){this.FB(),this.commitNodes(),this.pA(),this.Au&&this.commitLinks()},z.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},z.prototype.pA=function(){if(this.aB===Jp){for(var t=this.kC,i=[],r=null,n=this.network.vertexes.i;n.next();){var e=n.value;r===null?r=e.eb.copy():r.Zg(e.eb);var o=i[e.level],o=o===void 0?Mu(e):Math.max(o,Mu(e));i[e.level]=o}for(n=0;n<i.length;n++)i[n]===void 0&&(i[n]=0);this.angle===90||this.angle===270?(r.Zf(this.nodeSpacing/2,this.layerSpacing),e=new D(-this.nodeSpacing/2,-this.layerSpacing/2)):(r.Zf(this.layerSpacing,this.nodeSpacing/2),e=new D(-this.layerSpacing/2,-this.nodeSpacing/2));var o=[],r=this.angle===90||this.angle===270?r.width:r.height,h=0;if(this.angle===180||this.angle===270)for(n=0;n<t.length;n++)h+=t[n]+i[n];for(n=0;n<t.length;n++){var l=t[n]+i[n];this.angle===270?(h-=l,o.push(new O(0,h,r,l))):this.angle===90?(o.push(new O(0,h,r,l)),h+=l):this.angle===180?(h-=l,o.push(new O(h,0,l,r))):(o.push(new O(h,0,l,r)),h+=l)}this.commitLayers(o,e)}},z.prototype.commitLayers=function(){},z.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},z.prototype.FB=function(){for(var t=this.yd.i;t.next();){var i=t.value;i instanceof Xi&&xm(this,i)}};function xm(t,i){if(i!==null){t.setPortSpots(i);for(var n=i.children,e=n.length,o=0;o<e;o++)xm(t,n[o])}}z.prototype.setPortSpots=function(t){var i=t.alignment;if(ks(i)){var n=this.Of===Zo,e=_e(t),o;switch(e){case 0:o=On;break;case 90:o=je;break;case 180:o=Ce;break;default:o=Ne}var r=t.children,h=r.length;switch(i){case br:case $o:for(i=0;i<h;i++){var l=r[i],l=(n?l.nc:l.lc).first();if(l!==null&&(l=l.link,l!==null)){var u=e===90||e===270?Ce:Ne;if(h===1||i===h-1&&h%2===1)switch(e){case 0:u=Ce;break;case 90:u=Ne;break;case 180:u=On;break;default:u=je}else i%2===0&&(u=e===90||e===270?On:je);n?(t.setsPortSpot&&(l.Mb=o),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=o))}}break;case ts:for(u=e===90||e===270?On:je,e=n?t.lc:t.nc;e.next();)l=e.value.link,l!==null&&(n?(t.setsPortSpot&&(l.Mb=o),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=o)));break;case Mr:for(u=e===90||e===270?Ce:Ne,e=n?t.lc:t.nc;e.next();)l=e.value.link,l!==null&&(n?(t.setsPortSpot&&(l.Mb=o),t.setsChildPortSpot&&(l.Nb=u)):(t.setsPortSpot&&(l.Mb=u),t.setsChildPortSpot&&(l.Nb=o)))}}else if(n=_e(t),this.Of===Zo){for(o=t.lc;o.next();)if(e=o.value.link,e!==null){if(t.setsPortSpot)if(t.portSpot.ge())switch(n){case 0:e.Mb=On;break;case 90:e.Mb=je;break;case 180:e.Mb=Ce;break;default:e.Mb=Ne}else e.Mb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.ge())switch(n){case 0:e.Nb=Ce;break;case 90:e.Nb=Ne;break;case 180:e.Nb=On;break;default:e.Nb=je}else e.Nb=t.childPortSpot}}else for(o=t.nc;o.next();)if(e=o.value.link,e!==null){if(t.setsPortSpot)if(t.portSpot.ge())switch(n){case 0:e.Nb=On;break;case 90:e.Nb=je;break;case 180:e.Nb=Ce;break;default:e.Nb=Ne}else e.Nb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.ge())switch(n){case 0:e.Mb=Ce;break;case 90:e.Mb=Ne;break;case 180:e.Mb=On;break;default:e.Mb=je}else e.Mb=t.childPortSpot}};function _e(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Mu(t){var i=_e(t),i=i===90||i===270,e=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var n=Math.min(1,t.layerSpacingParentOverlap),e=e-(i?t.height*n:t.width*n);return e<(i?-t.height:-t.width)&&(e=i?-t.height:-t.width),e}function _r(t){var i=_e(t),i=i===90||i===270,e=t.nodeIndent;if(0<t.nodeIndentPastParent)var n=Math.min(1,t.nodeIndentPastParent),e=e+(i?t.width*n:t.height*n);return e=Math.max(0,e)}s.defineProperty(z,{OL:"roots"},function(){return this.yd},function(t){this.yd!==t&&(s.G(t,R,z,"roots"),this.yd=t,this.J())}),s.defineProperty(z,{path:"path"},function(){return this.Ts},function(t){this.Ts!==t&&(s.ob(t,z,z,"path"),this.Ts=t,this.J())}),s.defineProperty(z,{YJ:"treeStyle"},function(){return this.It},function(t){this.pd!==t&&(s.ob(t,z,z,"treeStyle"),t===Hp||t===nv||t===iv||t===ev)&&(this.It=t,this.J())}),s.defineProperty(z,{aB:"layerStyle"},function(){return this.jw},function(t){this.pd!==t&&(s.ob(t,z,z,"layerStyle"),t===rv||t===sv||t===Jp)&&(this.jw=t,this.J())}),s.defineProperty(z,{comments:"comments"},function(){return this.Mh},function(t){this.Mh!==t&&(s.j(t,"boolean",z,"comments"),this.Mh=t,this.J())}),s.defineProperty(z,{Vf:"arrangement"},function(){return this.pd},function(t){this.pd!==t&&(s.ob(t,z,z,"arrangement"),t===Kp||t===ov||t===Up)&&(this.pd=t,this.J())}),s.defineProperty(z,{FE:"arrangementSpacing"},function(){return this.ng},function(t){s.G(t,lt,z,"arrangementSpacing"),this.ng.L(t)||(this.ng.assign(t),this.J())}),s.defineProperty(z,{NL:"rootDefaults"},function(){return this.va},function(t){this.va!==t&&(s.G(t,Xi,z,"rootDefaults"),this.va=t,this.J())}),s.defineProperty(z,{qK:"alternateDefaults"},function(){return this.wa},function(t){this.wa!==t&&(s.G(t,Xi,z,"alternateDefaults"),this.wa=t,this.J())}),s.defineProperty(z,{sorting:"sorting"},function(){return this.va.sorting},function(t){this.va.sorting!==t&&(s.ob(t,z,z,"sorting"),t===Pu||t===Vf||t===Hf||Kf)&&(this.va.sorting=t,this.J())}),s.defineProperty(z,{comparer:"comparer"},function(){return this.va.comparer},function(t){this.va.comparer!==t&&(s.j(t,"function",z,"comparer"),this.va.comparer=t,this.J())}),s.defineProperty(z,{angle:"angle"},function(){return this.va.angle},function(t){this.va.angle!==t&&(s.j(t,"number",z,"angle"),t===0||t===90||t===180||t===270?(this.va.angle=t,this.J()):s.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),s.defineProperty(z,{alignment:"alignment"},function(){return this.va.alignment},function(t){this.va.alignment!==t&&(s.ob(t,z,z,"alignment"),this.va.alignment=t,this.J())}),s.defineProperty(z,{nodeIndent:"nodeIndent"},function(){return this.va.nodeIndent},function(t){this.va.nodeIndent!==t&&(s.j(t,"number",z,"nodeIndent"),0<=t&&(this.va.nodeIndent=t,this.J()))}),s.defineProperty(z,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.va.nodeIndentPastParent},function(t){this.va.nodeIndentPastParent!==t&&(s.j(t,"number",z,"nodeIndentPastParent"),0<=t&&1>=t&&(this.va.nodeIndentPastParent=t,this.J()))}),s.defineProperty(z,{nodeSpacing:"nodeSpacing"},function(){return this.va.nodeSpacing},function(t){this.va.nodeSpacing!==t&&(s.j(t,"number",z,"nodeSpacing"),this.va.nodeSpacing=t,this.J())}),s.defineProperty(z,{layerSpacing:"layerSpacing"},function(){return this.va.layerSpacing},function(t){this.va.layerSpacing!==t&&(s.j(t,"number",z,"layerSpacing"),this.va.layerSpacing=t,this.J())}),s.defineProperty(z,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.va.layerSpacingParentOverlap},function(t){this.va.layerSpacingParentOverlap!==t&&(s.j(t,"number",z,"layerSpacingParentOverlap"),0<=t&&1>=t&&(this.va.layerSpacingParentOverlap=t,this.J()))}),s.defineProperty(z,{compaction:"compaction"},function(){return this.va.compaction},function(t){this.va.compaction!==t&&(s.ob(t,z,z,"compaction"),t===Vp||t===Uf)&&(this.va.compaction=t,this.J())}),s.defineProperty(z,{breadthLimit:"breadthLimit"},function(){return this.va.breadthLimit},function(t){this.va.breadthLimit!==t&&(s.j(t,"number",z,"breadthLimit"),0<=t&&(this.va.breadthLimit=t,this.J()))}),s.defineProperty(z,{rowSpacing:"rowSpacing"},function(){return this.va.rowSpacing},function(t){this.va.rowSpacing!==t&&(s.j(t,"number",z,"rowSpacing"),this.va.rowSpacing=t,this.J())}),s.defineProperty(z,{rowIndent:"rowIndent"},function(){return this.va.rowIndent},function(t){this.va.rowIndent!==t&&(s.j(t,"number",z,"rowIndent"),0<=t&&(this.va.rowIndent=t,this.J()))}),s.defineProperty(z,{commentSpacing:"commentSpacing"},function(){return this.va.commentSpacing},function(t){this.va.commentSpacing!==t&&(s.j(t,"number",z,"commentSpacing"),this.va.commentSpacing=t,this.J())}),s.defineProperty(z,{commentMargin:"commentMargin"},function(){return this.va.commentMargin},function(t){this.va.commentMargin!==t&&(s.j(t,"number",z,"commentMargin"),this.va.commentMargin=t,this.J())}),s.defineProperty(z,{setsPortSpot:"setsPortSpot"},function(){return this.va.setsPortSpot},function(t){this.va.setsPortSpot!==t&&(s.j(t,"boolean",z,"setsPortSpot"),this.va.setsPortSpot=t,this.J())}),s.defineProperty(z,{portSpot:"portSpot"},function(){return this.va.portSpot},function(t){s.G(t,P,z,"portSpot"),this.va.portSpot.L(t)||(this.va.portSpot=t,this.J())}),s.defineProperty(z,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.va.setsChildPortSpot},function(t){this.va.setsChildPortSpot!==t&&(s.j(t,"boolean",z,"setsChildPortSpot"),this.va.setsChildPortSpot=t,this.J())}),s.defineProperty(z,{childPortSpot:"childPortSpot"},function(){return this.va.childPortSpot},function(t){s.G(t,P,z,"childPortSpot"),this.va.childPortSpot.L(t)||(this.va.childPortSpot=t,this.J())}),s.defineProperty(z,{BK:"alternateSorting"},function(){return this.wa.sorting},function(t){this.wa.sorting!==t&&(s.ob(t,z,z,"alternateSorting"),t===Pu||t===Vf||t===Hf||Kf)&&(this.wa.sorting=t,this.J())}),s.defineProperty(z,{pK:"alternateComparer"},function(){return this.wa.comparer},function(t){this.wa.comparer!==t&&(s.j(t,"function",z,"alternateComparer"),this.wa.comparer=t,this.J())}),s.defineProperty(z,{jK:"alternateAngle"},function(){return this.wa.angle},function(t){this.wa.angle!==t&&(s.j(t,"number",z,"alternateAngle"),t===0||t===90||t===180||t===270)&&(this.wa.angle=t,this.J())}),s.defineProperty(z,{iK:"alternateAlignment"},function(){return this.wa.alignment},function(t){this.wa.alignment!==t&&(s.ob(t,z,z,"alternateAlignment"),this.wa.alignment=t,this.J())}),s.defineProperty(z,{tK:"alternateNodeIndent"},function(){return this.wa.nodeIndent},function(t){this.wa.nodeIndent!==t&&(s.j(t,"number",z,"alternateNodeIndent"),0<=t&&(this.wa.nodeIndent=t,this.J()))}),s.defineProperty(z,{uK:"alternateNodeIndentPastParent"},function(){return this.wa.nodeIndentPastParent},function(t){this.wa.nodeIndentPastParent!==t&&(s.j(t,"number",z,"alternateNodeIndentPastParent"),0<=t&&1>=t&&(this.wa.nodeIndentPastParent=t,this.J()))}),s.defineProperty(z,{vK:"alternateNodeSpacing"},function(){return this.wa.nodeSpacing},function(t){this.wa.nodeSpacing!==t&&(s.j(t,"number",z,"alternateNodeSpacing"),this.wa.nodeSpacing=t,this.J())}),s.defineProperty(z,{rK:"alternateLayerSpacing"},function(){return this.wa.layerSpacing},function(t){this.wa.layerSpacing!==t&&(s.j(t,"number",z,"alternateLayerSpacing"),this.wa.layerSpacing=t,this.J())}),s.defineProperty(z,{sK:"alternateLayerSpacingParentOverlap"},function(){return this.wa.layerSpacingParentOverlap},function(t){this.wa.layerSpacingParentOverlap!==t&&(s.j(t,"number",z,"alternateLayerSpacingParentOverlap"),0<=t&&1>=t&&(this.wa.layerSpacingParentOverlap=t,this.J()))}),s.defineProperty(z,{oK:"alternateCompaction"},function(){return this.wa.compaction},function(t){this.wa.compaction!==t&&(s.ob(t,z,z,"alternateCompaction"),t===Vp||t===Uf)&&(this.wa.compaction=t,this.J())}),s.defineProperty(z,{kK:"alternateBreadthLimit"},function(){return this.wa.breadthLimit},function(t){this.wa.breadthLimit!==t&&(s.j(t,"number",z,"alternateBreadthLimit"),0<=t&&(this.wa.breadthLimit=t,this.J()))}),s.defineProperty(z,{yK:"alternateRowSpacing"},function(){return this.wa.rowSpacing},function(t){this.wa.rowSpacing!==t&&(s.j(t,"number",z,"alternateRowSpacing"),this.wa.rowSpacing=t,this.J())}),s.defineProperty(z,{xK:"alternateRowIndent"},function(){return this.wa.rowIndent},function(t){this.wa.rowIndent!==t&&(s.j(t,"number",z,"alternateRowIndent"),0<=t&&(this.wa.rowIndent=t,this.J()))}),s.defineProperty(z,{nK:"alternateCommentSpacing"},function(){return this.wa.commentSpacing},function(t){this.wa.commentSpacing!==t&&(s.j(t,"number",z,"alternateCommentSpacing"),this.wa.commentSpacing=t,this.J())}),s.defineProperty(z,{mK:"alternateCommentMargin"},function(){return this.wa.commentMargin},function(t){this.wa.commentMargin!==t&&(s.j(t,"number",z,"alternateCommentMargin"),this.wa.commentMargin=t,this.J())}),s.defineProperty(z,{AK:"alternateSetsPortSpot"},function(){return this.wa.setsPortSpot},function(t){this.wa.setsPortSpot!==t&&(s.j(t,"boolean",z,"alternateSetsPortSpot"),this.wa.setsPortSpot=t,this.J())}),s.defineProperty(z,{wK:"alternatePortSpot"},function(){return this.wa.portSpot},function(t){s.G(t,P,z,"alternatePortSpot"),this.wa.portSpot.L(t)||(this.wa.portSpot=t,this.J())}),s.defineProperty(z,{zK:"alternateSetsChildPortSpot"},function(){return this.wa.setsChildPortSpot},function(t){this.wa.setsChildPortSpot!==t&&(s.j(t,"boolean",z,"alternateSetsChildPortSpot"),this.wa.setsChildPortSpot=t,this.J())}),s.defineProperty(z,{lK:"alternateChildPortSpot"},function(){return this.wa.childPortSpot},function(t){s.G(t,P,z,"alternateChildPortSpot"),this.wa.childPortSpot.L(t)||(this.wa.childPortSpot=t,this.J())});var Op;z.PathDefault=Op=s.p(z,"PathDefault",-1);var Zo;z.PathDestination=Zo=s.p(z,"PathDestination",0);var el;z.PathSource=el=s.p(z,"PathSource",1);var Pu;z.SortingForwards=Pu=s.p(z,"SortingForwards",10);var Vf;z.SortingReverse=Vf=s.p(z,"SortingReverse",11);var Hf;z.SortingAscending=Hf=s.p(z,"SortingAscending",12);var Kf;z.SortingDescending=Kf=s.p(z,"SortingDescending",13);var Tu;z.AlignmentCenterSubtrees=Tu=s.p(z,"AlignmentCenterSubtrees",20);var wr;z.AlignmentCenterChildren=wr=s.p(z,"AlignmentCenterChildren",21);var Xo;z.AlignmentStart=Xo=s.p(z,"AlignmentStart",22);var Wo;z.AlignmentEnd=Wo=s.p(z,"AlignmentEnd",23);var br;z.AlignmentBus=br=s.p(z,"AlignmentBus",24);var $o;z.AlignmentBusBranching=$o=s.p(z,"AlignmentBusBranching",25);var ts;z.AlignmentTopLeftBus=ts=s.p(z,"AlignmentTopLeftBus",26);var Mr;z.AlignmentBottomRightBus=Mr=s.p(z,"AlignmentBottomRightBus",27);var Vp;z.CompactionNone=Vp=s.p(z,"CompactionNone",30);var Uf;z.CompactionBlock=Uf=s.p(z,"CompactionBlock",31);var Hp;z.StyleLayered=Hp=s.p(z,"StyleLayered",40);var iv;z.StyleLastParents=iv=s.p(z,"StyleLastParents",41);var nv;z.StyleAlternating=nv=s.p(z,"StyleAlternating",42);var ev;z.StyleRootOnly=ev=s.p(z,"StyleRootOnly",43);var Kp;z.ArrangementVertical=Kp=s.p(z,"ArrangementVertical",50);var ov;z.ArrangementHorizontal=ov=s.p(z,"ArrangementHorizontal",51);var Up;z.ArrangementFixedRoots=Up=s.p(z,"ArrangementFixedRoots",52);var rv;z.LayerIndividual=rv=s.p(z,"LayerIndividual",60);var sv;z.LayerSiblings=sv=s.p(z,"LayerSiblings",61);var Jp;z.LayerUniform=Jp=s.p(z,"LayerUniform",62);function Jf(){At.call(this)}s.La(Jf,At),s.ga("TreeNetwork",Jf),Jf.prototype.createVertex=function(){return new Xi},Jf.prototype.createEdge=function(){return new Yf};function Xi(){It.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.pa=new D(0,0),this.kb=new lt(0,0),this.Oa=new D(0,0),this.Cq=this.Bq=this.AJ=!1,this.Xu=this.Cu=null,this.sorting=Pu,this.comparer=jc,this.angle=0,this.alignment=wr,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=Uf,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=an,this.setsChildPortSpot=!0,this.childPortSpot=an}s.La(Xi,It),s.ga("TreeVertex",Xi),Xi.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},s.u(Xi,{sn:"childrenCount"},function(){return this.children.length}),s.defineProperty(Xi,{ML:"relativePosition"},function(){return this.pa},function(t){this.pa.set(t)}),s.defineProperty(Xi,{YL:"subtreeSize"},function(){return this.kb},function(t){this.kb.set(t)}),s.defineProperty(Xi,{XL:"subtreeOffset"},function(){return this.Oa},function(t){this.Oa.set(t)});function Yf(){Hi.call(this),this.$s=new D(0,0)}s.La(Yf,Hi),s.ga("TreeEdge",Yf),Yf.prototype.commit=function(){var t=this.link;if(t!==null&&!t.fm){var i=this.network.Ub,n=null,e=null;switch(i.Of){case Zo:n=this.fromVertex,e=this.toVertex;break;case el:n=this.toVertex,e=this.fromVertex;break;default:s.k("Unhandled path value "+i.Of.toString())}if(n!==null&&e!==null)if(i=this.$s,i.x!==0||i.y!==0||n.AJ){var e=n.eb,o=_e(n),r=Mu(n),h=n.rowSpacing;t.jo();var l=t.nf===Le,u=t.ac,f=0,a,p;if(t.qm(),u||l){for(f=2;4<t.qa;)t.eG(2);a=t.l(1),p=t.l(2)}else{for(f=1;3<t.qa;)t.eG(1);a=t.l(0),p=t.l(t.qa-1)}var y=t.l(t.qa-1),c=0;o===0?(n.alignment===Wo?(c=e.bottom+i.y,i.y===0&&a.y>y.y+n.rowIndent&&(c=Math.min(c,Math.max(a.y,c-_r(n))))):n.alignment===Xo?(c=e.top+i.y,i.y===0&&a.y<y.y-n.rowIndent&&(c=Math.max(c,Math.min(a.y,c+_r(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.top-n.Oa.y+i.y:e.y+e.height/2+i.y,l?(t.w(f,a.x,c),f++,t.w(f,e.right+r,c),f++,t.w(f,e.right+r+(i.x-h)/3,c),f++,t.w(f,e.right+r+2*(i.x-h)/3,c),f++,t.w(f,e.right+r+(i.x-h),c),f++,t.w(f,p.x,c)):(u&&(t.w(f,e.right+r/2,a.y),f++),t.w(f,e.right+r/2,c),f++,t.w(f,e.right+r+i.x-(u?h/2:h),c),f++,u&&t.w(f,t.l(f-1).x,p.y))):o===90?(n.alignment===Wo?(c=e.right+i.x,i.x===0&&a.x>y.x+n.rowIndent&&(c=Math.min(c,Math.max(a.x,c-_r(n))))):n.alignment===Xo?(c=e.left+i.x,i.x===0&&a.x<y.x-n.rowIndent&&(c=Math.max(c,Math.min(a.x,c+_r(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.left-n.Oa.x+i.x:e.x+e.width/2+i.x,l?(t.w(f,c,a.y),f++,t.w(f,c,e.bottom+r),f++,t.w(f,c,e.bottom+r+(i.y-h)/3),f++,t.w(f,c,e.bottom+r+2*(i.y-h)/3),f++,t.w(f,c,e.bottom+r+(i.y-h)),f++,t.w(f,c,p.y)):(u&&(t.w(f,a.x,e.bottom+r/2),f++),t.w(f,c,e.bottom+r/2),f++,t.w(f,c,e.bottom+r+i.y-(u?h/2:h)),f++,u&&t.w(f,p.x,t.l(f-1).y))):o===180?(n.alignment===Wo?(c=e.bottom+i.y,i.y===0&&a.y>y.y+n.rowIndent&&(c=Math.min(c,Math.max(a.y,c-_r(n))))):n.alignment===Xo?(c=e.top+i.y,i.y===0&&a.y<y.y-n.rowIndent&&(c=Math.max(c,Math.min(a.y,c+_r(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.top-n.Oa.y+i.y:e.y+e.height/2+i.y,l?(t.w(f,a.x,c),f++,t.w(f,e.left-r,c),f++,t.w(f,e.left-r+(i.x+h)/3,c),f++,t.w(f,e.left-r+2*(i.x+h)/3,c),f++,t.w(f,e.left-r+(i.x+h),c),f++,t.w(f,p.x,c)):(u&&(t.w(f,e.left-r/2,a.y),f++),t.w(f,e.left-r/2,c),f++,t.w(f,e.left-r+i.x+(u?h/2:h),c),f++,u&&t.w(f,t.l(f-1).x,p.y))):o===270?(n.alignment===Wo?(c=e.right+i.x,i.x===0&&a.x>y.x+n.rowIndent&&(c=Math.min(c,Math.max(a.x,c-_r(n))))):n.alignment===Xo?(c=e.left+i.x,i.x===0&&a.x<y.x-n.rowIndent&&(c=Math.max(c,Math.min(a.x,c+_r(n))))):c=n.Bq||n.Cq&&n.maxGenerationCount===1?e.left-n.Oa.x+i.x:e.x+e.width/2+i.x,l?(t.w(f,c,a.y),f++,t.w(f,c,e.top-r),f++,t.w(f,c,e.top-r+(i.y+h)/3),f++,t.w(f,c,e.top-r+2*(i.y+h)/3),f++,t.w(f,c,e.top-r+(i.y+h)),f++,t.w(f,c,p.y)):(u&&(t.w(f,a.x,e.top-r/2),f++),t.w(f,c,e.top-r/2),f++,t.w(f,c,e.top-r+i.y+(u?h/2:h)),f++,u&&t.w(f,p.x,t.l(f-1).y))):s.k("Invalid angle "+o),t.qj()}else o=n,r=e,t=this.link,n=_e(o),n!==_e(r)&&(i=Mu(o),e=o.eb,o=r.eb,n===0&&o.left-e.right<i+1||n===90&&o.top-e.bottom<i+1||n===180&&e.left-o.right<i+1||n===270&&e.top-o.bottom<i+1||(t.jo(),o=t.nf===Le,r=t.ac,h=ks(this.fromVertex.alignment),t.qm(),n===0?(n=e.right+i/2,o?t.qa===4&&(i=t.l(3).y,t.ca(1,n-20,t.l(1).y),t.w(2,n-20,i),t.w(3,n,i),t.w(4,n+20,i),t.ca(5,t.l(5).x,i)):r?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,n,t.l(2).y),t.ca(3,n,t.l(3).y)):t.qa===4?t.w(2,n,t.l(2).y):t.qa===3?t.ca(1,n,t.l(2).y):t.qa===2&&t.w(1,n,t.l(1).y)):n===90?(i=e.bottom+i/2,o?t.qa===4&&(n=t.l(3).x,t.ca(1,t.l(1).x,i-20),t.w(2,n,i-20),t.w(3,n,i),t.w(4,n,i+20),t.ca(5,n,t.l(5).y)):r?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,t.l(2).x,i),t.ca(3,t.l(3).x,i)):t.qa===4?t.w(2,t.l(2).x,i):t.qa===3?t.ca(1,t.l(2).x,i):t.qa===2&&t.w(1,t.l(1).x,i)):n===180?(n=e.left-i/2,o?t.qa===4&&(i=t.l(3).y,t.ca(1,n+20,t.l(1).y),t.w(2,n+20,i),t.w(3,n,i),t.w(4,n-20,i),t.ca(5,t.l(5).x,i)):r?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,n,t.l(2).y),t.ca(3,n,t.l(3).y)):t.qa===4?t.w(2,n,t.l(2).y):t.qa===3?t.ca(1,n,t.l(2).y):t.qa===2&&t.w(1,n,t.l(1).y)):n===270&&(i=e.top-i/2,o?t.qa===4&&(n=t.l(3).x,t.ca(1,t.l(1).x,i+20),t.w(2,n,i+20),t.w(3,n,i),t.w(4,n,i-20),t.ca(5,n,t.l(5).y)):r?h?t.ca(3,t.l(2).x,t.l(4).y):t.qa===6&&(t.ca(2,t.l(2).x,i),t.ca(3,t.l(3).x,i)):t.qa===4?t.w(2,t.l(2).x,i):t.qa===3?t.ca(1,t.l(2).x,i):t.qa===2&&t.w(1,t.l(1).x,i)),t.qj()))}},s.defineProperty(Yf,{LL:"relativePoint"},function(){return this.$s},function(t){this.$s.set(t)});function vh(){N.call(this),this.Ve=null}s.La(vh,N),vh.prototype.cloneProtected=function(t){N.prototype.cloneProtected.call(this,t),t.element=this.Ve.cloneNode(!0)},vh.prototype.toString=function(){return"HTMLHost("+this.Ve.toString()+")#"+s.Pd(this)},vh.prototype.Ik=function(t,i){var n=this.Ve;if(n!==null){var e=this.Ya(kt);e.x-=this.U.width/2,e.y-=this.U.height/2,e.x-=this.U.x,e.y-=this.U.y;var e=i.Dy(e),o=i.tj;o===null||o.contains(n)||o.appendChild(n),o=this.transform,n.style.transform="matrix("+o.m11+","+o.m12+","+o.m21+","+o.m22+","+o.dx+","+o.dy+")",n.style.transformOrigin="0 0",o=e.y,n.style.left=e.x+"px",n.style.top=o+"px"}},vh.prototype.Qn=function(t,i,n,e){var o=this.Da;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(i=o.height);var o=this.Hf,r=this.si;n=Math.max(n,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),i=Math.min(o.height,i),t=Math.max(n,t),i=Math.max(e,i),n=this.Ve,n!==null&&(i=n.getBoundingClientRect(),t=i.width,i=i.height),Or(this.Nc,t,i),qo(this,0,0,t,i)},vh.prototype.pj=function(t,i,n,e){Ra(this,t,i,n,e)},s.u(vh,{Ja:"naturalBounds"},function(){return this.Nc}),s.defineProperty(vh,{element:"element"},function(){return this.Ve},function(t){var i=this.Ve;i!==t&&(t instanceof HTMLElement||s.k("HTMLHost.element must be an instance of Element."),this.Ve=t,t.className="HTMLHost",this.h("element",i,t),this.oa())}),he.version="1.8.36",Q&&(Q.module&&typeof Q.module=="object"&&typeof Q.module.exports=="object"?Q.module.exports=he:Q.define&&typeof Q.define=="function"&&Q.define.amd?(Q.go=he,Q.define(he)):Q.go=he),typeof module<"u"&&typeof module.exports=="object"&&(module.exports=he)})(window);const Vw={name:"Semantic",components:{AppTitle:Fw},setup(){function Q(B,he){const s=go.GraphObject.make;let Wn=s(go.Diagram,"myDiagramDiv",{initialAutoScale:go.Diagram.Uniform,contentAlignment:go.Spot.Center,layout:s(go.ForceDirectedLayout,{maxIterations:300,defaultSpringLength:30,defaultElectricalCharge:230})});Wn.nodeTemplate=s(go.Node,"Auto",{locationSpot:go.Spot.Center},s(go.Shape,"RoundedRectangle",{fill:s(go.Brush,"Solid",{0:"rgb(171,202,255)"}),stroke:"#ccc"}),s(go.TextBlock,{font:"500 15px Jost, bold arial, sans-serif",margin:4},new go.Binding("text","text"))),Wn.linkTemplate=s(go.Link,s(go.Shape,{stroke:"black"}),s(go.Shape,{toArrow:"standard",stroke:null}),s(go.Panel,"Auto",s(go.Shape,{fill:s(go.Brush,"Radial",{0:"rgb(240, 240, 240)",.3:"rgb(240, 240, 240)",1:"rgba(240, 240, 240, 0)"}),stroke:null}),s(go.TextBlock,{textAlign:"center",font:"14px Jost, arial, sans-serif",stroke:"#242424",margin:5},new go.Binding("text","text")))),Wn.model=new go.GraphLinksModel(B,he)}Aw(async()=>{const B=await fetch("/api/mindmap"),{node:he,link:s}=await B.json();Q(he,s)})}},Hw=lx("div",{class:"mindmap-wrapper"},[lx("div",{id:"myDiagramDiv",style:{width:"100%",height:"800px"}})],-1);function Kw(Q,B,he,s,Wn,Rr){const Ku=Iw("AppTitle");return Bw(),Ew(Gw,null,[zw(Ku,null,{default:Rw(()=>[Ow("Semantic Graph")]),_:1}),Hw],64)}const Yw=Lw(Vw,[["render",Kw]]);export{Yw as default};
